id,project,branch,topic,change_id,subject,status,created,updated,submitted,insertions,deletions,total_comment_count,number,current_revision,discussion_messages_count,reviewers_count,revisions_count,files_count,owner_account_id,owner_name,owner_username,commit_message
openstack%2Fmanila-tempest-plugin~master~I74f0a079edb59e376d045fe9e9fd781acd70249d,openstack/manila-tempest-plugin,master,bp/transfer-share-between-project,I74f0a079edb59e376d045fe9e9fd781acd70249d,API 2.74. Add tests for share transfer.,NEW,2022-09-20 09:14:03.000000000,2022-11-16 08:10:08.000000000,,316,1,1,858351,cfa998a2ed3e14c536716b183f42351247dc6c48,22,1,9,4,30407,haixin,haixin,"API 2.74. Add tests for share transfer.

Depends-On: I8facf9112a6b09e6b7aed9956c0a87fb5f1fc31f
Partially-Implements: blueprint transfer-share-between-project

Change-Id: I74f0a079edb59e376d045fe9e9fd781acd70249d
"
openstack%2Ftripleo-heat-templates~master~I7923a3b20f0ec9530b6809dd834711d6d4a43646,openstack/tripleo-heat-templates,master,tripleo-remove-ml2-ansible,I7923a3b20f0ec9530b6809dd834711d6d4a43646,Remove support for networking-ansible,NEW,2022-11-16 01:30:28.000000000,2022-11-16 08:04:42.000000000,,5,115,0,864607,3626ac3dfb9547c766228d7ee6b90a62a2e71749,6,2,2,8,9816,Takashi Kajinami,kajinamit,"Remove support for networking-ansible

... because it was deprecated before Zed release[1].

[1] f90f685d5d22b12f3d74a141ce57d9cee02e0047

Change-Id: I7923a3b20f0ec9530b6809dd834711d6d4a43646
"
openstack%2Fneutron~master~Ie7be84d503f5d60d3c50d3ac3aaaf55c13adf7af,openstack/neutron,master,distributed_metadata_data_path,Ie7be84d503f5d60d3c50d3ac3aaaf55c13adf7af,Add host metadata haproxy manager,NEW,2022-11-16 03:35:22.000000000,2022-11-16 07:57:13.000000000,,312,0,1,864649,499d9dc1e749fcc2e9cebca22b2c00e05cbe5912,9,2,2,5,9531,liuyulong,LIU-Yulong,"Add host metadata haproxy manager

Host haproxy configurations will be rendered by jinja2
template. And a process monitor will be used to manage
the host metedata haproxy, which takes care of the
lifecycle of the host metedata haproxy.

Partially-Implements: blueprint distributed-metadata-datapath
Change-Id: Ie7be84d503f5d60d3c50d3ac3aaaf55c13adf7af
"
openstack%2Foslo.messaging~master~Iabce0986fae6ed8838f1f94496b5994fc19cc5ef,openstack/oslo.messaging,master,durable_shared_control_exchange,Iabce0986fae6ed8838f1f94496b5994fc19cc5ef,Warn when we force creating a non durable exchange,NEW,2022-10-18 12:18:50.000000000,2022-11-16 07:34:26.000000000,,1,0,0,861746,b83b87d49e9bfa8af3380c56b9910625221400a6,3,2,1,1,28522,Herv√© Beraud,hberaud,"Warn when we force creating a non durable exchange

Adding warning logs so that users can detect the fallback with durable
exchanges.

Change-Id: Iabce0986fae6ed8838f1f94496b5994fc19cc5ef
"
openstack%2Ftripleo-ansible~master~I58c5b59a326d750a079f48f0e21ea2e2bb31e3e9,openstack/tripleo-ansible,master,sync_tht_nova_compute,I58c5b59a326d750a079f48f0e21ea2e2bb31e3e9,Sync: Enable post-copy by setting unprivileged_userfaultfd,MERGED,2022-11-02 13:48:04.000000000,2022-11-16 07:29:25.000000000,2022-11-16 07:29:25.000000000,14,0,1,863310,d5d1e0e667a61ecf6cab2f965d7b8bdd131872d9,10,7,1,1,6926,Bogdan Dobrelya,bogdando,"Sync: Enable post-copy by setting unprivileged_userfaultfd

Sync recent t-h-t changes for unprivileged_userfaultfd
I277af6db375c0d018cc87c34ebbdab6cdca2ff0a

Change-Id: I58c5b59a326d750a079f48f0e21ea2e2bb31e3e9
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
"
openstack%2Fmanila-tempest-plugin~master~I78cccc6bcd1b8d938b00467d07f3fd6edf7bfc6f,openstack/manila-tempest-plugin,master,bp/metadata-for-share-resources,I78cccc6bcd1b8d938b00467d07f3fd6edf7bfc6f,Add tempest tests for share snapshot metadata,MERGED,2022-02-04 21:31:14.000000000,2022-11-16 07:05:07.000000000,2022-11-16 07:05:07.000000000,572,25,254,827925,c45cb4b3d25e87ec24df07683c6b90977091534f,139,7,37,10,32594,Ashley Rodriguez,ashrod98,"Add tempest tests for share snapshot metadata

Adds positive and negative tests for share snapshot metadata api.
Works for microversion 2.73 and later.

Partially-implements: bp/metadata-for-share-resources
Depends-On: I91151792d033a4297557cd5f330053d78895eb78
Change-Id: I78cccc6bcd1b8d938b00467d07f3fd6edf7bfc6f
"
openstack%2Fgovernance~master~Ia29b92b41ddd7cccda5d9daa317ac4bb0af907ff,openstack/governance,master,formal-vote,Ia29b92b41ddd7cccda5d9daa317ac4bb0af907ff,Adding TC chair election process: nomination in governance repo,MERGED,2022-10-27 03:46:59.000000000,2022-11-16 06:50:39.000000000,2022-11-16 06:49:29.000000000,43,5,11,862772,07f1ef4201359b82d94954b7e5cae6dd5e894a66,32,9,7,4,8556,Ghanshyam,ghanshyam,"Adding TC chair election process: nomination in governance repo

As discussed in PTG[1], we need to define the process
for the TC chair nomination and election.

This commit adds one of the proposal discussed in the PTG
which is to record the nomination in governance repo.

[1] https://etherpad.opendev.org/p/tc-2023-1-ptg#L486

Change-Id: Ia29b92b41ddd7cccda5d9daa317ac4bb0af907ff
"
openstack%2Fgovernance~master~Id7b4484d911bef6543664e8332f10665713bf0b4,openstack/governance,master,formal-vote,Id7b4484d911bef6543664e8332f10665713bf0b4,Adding TC chair election process: nomination in TC meeting,ABANDONED,2022-10-27 04:07:22.000000000,2022-11-16 06:37:20.000000000,,38,5,0,862774,6693ec58c5a2742d14b1678f993140b7373e632a,3,1,1,3,8556,Ghanshyam,ghanshyam,"Adding TC chair election process: nomination in TC meeting

As discussed in PTG[1], we need to define the process
for the TC chair nomination and election.

This commit adds one of the proposal discussed in the PTG
which is to record the nomination in TC weekly meeting.

[1] https://etherpad.opendev.org/p/tc-2023-1-ptg#L486

Change-Id: Id7b4484d911bef6543664e8332f10665713bf0b4
"
openstack%2Fnova~stable%2Ftrain~I2b07fd03fd3ba7662695384940ceda479fcf9f0a,openstack/nova,stable/train,bug/1628606/train,I2b07fd03fd3ba7662695384940ceda479fcf9f0a,Move pre-3.44 Cinder post live migration test to test_compute_mgr,NEW,2022-11-16 05:44:33.000000000,2022-11-16 06:34:36.000000000,,36,32,0,864671,f68899fc24248adf67c26d56e9b720c2a150eb6d,3,1,1,2,34860,Amit Uniyal,auniyal,"Move pre-3.44 Cinder post live migration test to test_compute_mgr

The previous patch (Id0e8b1c32600d53382e5ac938e403258c80221a0) created
_post_live_migration_remove_source_vol_connections() in an attempt to
split out _post_live_migration() into smaller more self-contained
methods. The test for the pre-3.44 Cinder API behavior was kept in
test_compute. test_compute runs API and compute services and
uses the database, and therefore should not receive new tests. Compute
API tests should go in test_compute_api, compute manager tests in
test_compute_mgr and anything that needs a running service and/or
database should go under functional/. While there will be no concerted
effort to ""convert"" test_compute (like for mox -> mock), it's still
good to do it when the opportunity arises. In addition, having unit
tests for two branches of the same method in different files is just
confusing. This patch removes the pre-3.44 Cinder API unit test from
test_compute and adds a new one right above the existing test for
post-3.44 Cinder API behavior in test_compute_mgr.

Change-Id: I2b07fd03fd3ba7662695384940ceda479fcf9f0a
(cherry picked from commit cfb283cdd0fd016bc8151a5122b7b1f581203c34)
"
openstack%2Fos-brick~stable%2Fvictoria~Ib001e2b4d1347754c2b46730bc10d86e8cdab7ad,openstack/os-brick,stable/victoria,xena-fix-fix_encryption_symlink-stable/wallaby-stable/victoria,Ib001e2b4d1347754c2b46730bc10d86e8cdab7ad,RBD: Fix disconnect_volume for encrypted volumes,ABANDONED,2022-11-16 02:03:03.000000000,2022-11-16 06:28:30.000000000,,460,0,28,864617,ed75b67edaa9d7d0421a0a636442cc44f95cd846,7,1,1,3,5689,Masayuki Igawa,igawa,"RBD: Fix disconnect_volume for encrypted volumes

After change Ie373ab050dcc0a35c749d9a53b6cf5ca060bcb58 closing bugs
connector was broken for encrypted volumes:

<== disconnect_volume:
   exception (0ms) AttributeError(""'RBDVolumeIOWrapper' object has
   no attribute 'startswith'"") trace_logging_wrapper
   /usr/lib/python3.9/site-packages/os_brick/utils.py:162

This hapens because ""_device_path_from_symlink"" doesn't take into
account of the file handle, and we were missing a unit test for this
case.

Closes-Bug: #1981455
Change-Id: Ib001e2b4d1347754c2b46730bc10d86e8cdab7ad
(cherry picked from commit dde8f102b714e2e4001a3fe82f975cd9978ac1c5)
(cherry picked from commit 743002cc269ac1e91d8df2eee5f4fdad3d14c365)
(cherry picked from commit 3aa5d295821d6bb39a24f465b740f9ac4fb884d1)
(cherry picked from commit 129da87d968d454ac578d411d97f6e2ad9fc47f8)
"
openstack%2Fnova~master~I5867d381eda03bdd4530d6c17b8e13edeaf76ec3,openstack/nova,master,bp/policy-service-role-default,I5867d381eda03bdd4530d6c17b8e13edeaf76ec3,api-ref update: Move the service APIs in a separate section,NEW,2022-11-16 04:49:35.000000000,2022-11-16 06:04:02.000000000,,101,32,0,864655,869b060485a5f5d331dafcbd8f43d2ba1ecac93e,5,1,2,6,8556,Ghanshyam,ghanshyam,"api-ref update: Move the service APIs in a separate section

This is moving all the service APIs in a separate section of
api-ref. Also, separating the volume update(swap) API into new
file which is added under the new service API section.

Implement blueprint policy-service-role-default

Change-Id: I5867d381eda03bdd4530d6c17b8e13edeaf76ec3
"
openstack%2Fpython-manilaclient~master~I82791614b62b540eb108e99ae8ee5ce62b36b42c,openstack/python-manilaclient,master,bp/metadata-for-share-resources,I82791614b62b540eb108e99ae8ee5ce62b36b42c,Metadata for Share Snapshots,NEW,2021-08-04 07:37:02.000000000,2022-11-16 05:29:51.000000000,,441,89,99,803424,fbff64a2137e9b5fad1b24b55d56d8cee701fc56,68,6,21,13,16643,Goutham Pacha Ravi,gouthamr,"Metadata for Share Snapshots

Introduce MetadataCapableResource and
MetadataCapableManager to abstract away
metadata operations for a resource and
collections of resources in the manilaclient
SDK. Extend these into OSC capabilities
where appropriate. Bumps max microversion to 2.73.

In this change:
1) Shares
2) Snapshots

Depends-On: I91151792d033a4297557cd5f330053d78895eb78
Implements: bp/metadata-for-share-resources
Change-Id: I82791614b62b540eb108e99ae8ee5ce62b36b42c
"
openstack%2Fpuppet-tripleo~master~I3c74f492d9d34eb8e16d9a203b5f02714b02f69a,openstack/puppet-tripleo,master,Enable_IBM_Svf,I3c74f492d9d34eb8e16d9a203b5f02714b02f69a,Support for Cinder IBM Svf driver,MERGED,2022-10-28 07:45:42.000000000,2022-11-16 05:23:47.000000000,2022-11-16 05:22:51.000000000,221,14,26,862359,a7487743e5d2bb7ca4ab739263f0baa16740ff01,40,3,8,7,34598,Manojkatari,mkatari,"Support for Cinder IBM Svf driver

This patch adds support for Cinder IBM Spectrum virtualize family (Svf)
driver.

Depends-On: I43f954879de6ce70237cb468e7ef1fbc2649edcd
Change-Id: I3c74f492d9d34eb8e16d9a203b5f02714b02f69a
"
openstack%2Fcinder~master~I06398428f82b3617a0e8b04d86cd6a839b143263,openstack/cinder,master,bug/1895035,I06398428f82b3617a0e8b04d86cd6a839b143263,[RBD] Fix Restore Full Backups,NEW,2020-09-09 18:31:02.000000000,2022-11-16 05:03:33.000000000,,128,10,45,750782,7e028e953c921f9d6ebda99a90efa94f71e20e9e,496,35,24,3,20813,Sofia Enriquez,enriquetaso,"[RBD] Fix Restore Full Backups

Currently, Ceph backups can only be restored to rbd volumes.
The goal of this patch is to be able to fully restore Ceph backups
from/to any backend.

The reason for this is that the current code generates the wrong base
image name when doing a full restore. If we are not using an RBD target
volume, we need to specify the backup in the same way as when a source
snapshot is provided. This way _get_backup_base_name returns the
backup.service_metadata.

In particular, if the backup was created from a snapshot
_get_backup_base_name should be call only with the volume_id.

Depends-On: I6f5d5c6bf6c30045752064c666dd8892adbad643
Closes-Bug: #1895035
Change-Id: I06398428f82b3617a0e8b04d86cd6a839b143263
"
openstack%2Fnova-specs~master~Id9a4a521de2540efdc9ea2650da19351f0feac08,openstack/nova-specs,master,bp/stable-compute-uuids,Id9a4a521de2540efdc9ea2650da19351f0feac08,Add stable-compute-uuid spec,NEW,2022-11-01 15:56:43.000000000,2022-11-16 05:01:46.000000000,,258,0,57,863152,3769079c0a6cad1db8bef021f7cbd892a5180dd9,25,5,8,1,4393,Dan Smith,danms,"Add stable-compute-uuid spec

Change-Id: Id9a4a521de2540efdc9ea2650da19351f0feac08
"
openstack%2Fpuppet-tripleo~master~Ie76536c8e3f80feee09ff5b5f8781e938a6e3e56,openstack/puppet-tripleo,master,tripleo-remove-ml2-ansible,Ie76536c8e3f80feee09ff5b5f8781e938a6e3e56,Remove manifests for networking-ansible plugin,NEW,2022-11-16 01:32:17.000000000,2022-11-16 05:00:51.000000000,,0,63,0,864608,6872a3ef82ecbb4d906a05c9bc75842c19ba3b15,3,2,1,2,9816,Takashi Kajinami,kajinamit,"Remove manifests for networking-ansible plugin

... because it is no longer supported by t-h-t.

Depends-on: https://review.opendev.org/864607
Change-Id: Ie76536c8e3f80feee09ff5b5f8781e938a6e3e56
"
openstack%2Fheat~master~I326e415db194a5b9c67acd038d7d2d993293ecb3,openstack/heat,master,2008718,I326e415db194a5b9c67acd038d7d2d993293ecb3,Ignore resource_data decryption errors,MERGED,2021-03-16 07:46:51.000000000,2022-11-16 04:36:34.000000000,2022-11-16 04:35:25.000000000,8,3,4,780718,9407b4897e77db24bf1948153afbb1479d5dad42,18,4,3,1,8833,Rabi Mishra,rabi,"Ignore resource_data decryption errors

If the auth_encryption_key changes We can possibly
ignore these errors when deleting stacks.

Task: 42056
Change-Id: I326e415db194a5b9c67acd038d7d2d993293ecb3
"
openstack%2Fheat~master~Iaf5650b2ae972064292cfe0d17f98b5635c51bad,openstack/heat,master,2008718,Iaf5650b2ae972064292cfe0d17f98b5635c51bad,Don't load all resources for policy check,MERGED,2021-03-16 07:04:01.000000000,2022-11-16 04:35:09.000000000,2022-11-16 04:33:24.000000000,9,2,1,780709,ceef7869e0aa122d2959f7a74f88dfba2c8f15df,15,7,2,2,8833,Rabi Mishra,rabi,"Don't load all resources for policy check

We only need the resource types for the check. Let's
avoid loading all resources.

Change-Id: Iaf5650b2ae972064292cfe0d17f98b5635c51bad
"
openstack%2Ftripleo-heat-templates~master~Ib248ec4bec57a5d747a1cf35157084d2cb51b566,openstack/tripleo-heat-templates,master,tripleo-remove-vpp,Ib248ec4bec57a5d747a1cf35157084d2cb51b566,Remove support for VPP and Neutron ML2/VPP plugin,NEW,2022-11-16 01:22:52.000000000,2022-11-16 04:22:08.000000000,,4,237,0,864605,4ecf3ecaa47a61b33477821fd1d2c15d301081ca,3,2,1,47,9816,Takashi Kajinami,kajinamit,"Remove support for VPP and Neutron ML2/VPP plugin

These services were deprecated during Xena cycle by [1]. Since we have
created the Zed release, now we can remove the features deprecated
before that.

[1] 18651160a96632d24291a16803af612221fa61a8

Change-Id: Ib248ec4bec57a5d747a1cf35157084d2cb51b566
"
openstack%2Fnova-specs~master~Ie07a3fc54a94a667d58589f3ef61fe3c84547be1,openstack/nova-specs,master,bp/fqdn-in-hostname,Ie07a3fc54a94a667d58589f3ef61fe3c84547be1,add spec for fqdn in hostname,NEW,2022-10-25 16:32:02.000000000,2022-11-16 04:15:43.000000000,,265,0,145,862626,c5ab5bfa69a0b7f104e4d7735db8ac777868dab0,11,7,2,1,11604,sean mooney,sean-k-mooney,"add spec for fqdn in hostname

Change-Id: Ie07a3fc54a94a667d58589f3ef61fe3c84547be1
"
openstack%2Fpuppet-tripleo~master~Ideb5a951d538d9e2c7cca11dfe0e8b99520de959,openstack/puppet-tripleo,master,glance-api-internal,Ideb5a951d538d9e2c7cca11dfe0e8b99520de959,Support deploying additional internal glance-api service,MERGED,2022-11-01 14:44:35.000000000,2022-11-16 04:09:30.000000000,2022-11-16 04:09:30.000000000,71,4,9,863139,b3be1dc18c8284852905797d91b67d2dcd6a1a10,23,4,2,2,21129,Alan Bishop,ASBishop,"Support deploying additional internal glance-api service

OSSN-0090 [1] recommends deploying two instances of the glance-api
service: a ""user facing"" service, plus an ""internal"" service that is
accessible via keystone's internal endpoint.

To support this, the tripleo::profile::base::glance::api class is
enhanced to allow overriding certain associated glance::api parameters.
This makes it possible to override parameters when including the
glance::api class in order to facilitate configuring two different
instances of the glance-api service, each with their own configuration.

The tripleo::haproxy class is enhanced to provide HA support for running
the internal glance-api service on its own TCP port (defaults to 9293).

[1] https://wiki.openstack.org/wiki/OSSN/OSSN-0090

Change-Id: Ideb5a951d538d9e2c7cca11dfe0e8b99520de959
"
openstack%2Fneutron~master~Ibb9762d57913ea701dcf2746a0e0db74c6a7ca01,openstack/neutron,master,bug/1964342,Ibb9762d57913ea701dcf2746a0e0db74c6a7ca01,Refactor for meter ID Generator,NEW,2022-10-09 01:50:35.000000000,2022-11-16 03:22:30.000000000,,158,42,10,860765,c3ebefa5f73e8cb89c3c9c12b385b21e8749299f,37,4,7,4,9531,liuyulong,LIU-Yulong,"Refactor for meter ID Generator

Add a Singleton meter ID Generator for both bandwidth limit
and packet rate limit, because for one bridge the meter ID
is a sharing range.

Closes-Bug: #1964342
Change-Id: Ibb9762d57913ea701dcf2746a0e0db74c6a7ca01
"
openstack%2Fnova~master~I8515a25d698a3671673edd393ec6964862d3d476,openstack/nova,master,fix_unittest_typo,I8515a25d698a3671673edd393ec6964862d3d476,libvirt: fix typo in test_config,NEW,2022-11-16 02:34:04.000000000,2022-11-16 03:20:50.000000000,,3,3,0,864641,ae055aaf5d530b86cd396b3e0b8e54e87879003b,4,1,1,1,31652,Nobuhiro MIKI,nmiki,"libvirt: fix typo in test_config

hosdev -> hostdev

Signed-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>
Change-Id: I8515a25d698a3671673edd393ec6964862d3d476
"
openstack%2Ftripleo-quickstart~master~Idd922d921fe52e9ca88ed84177d2eb81285bafae,openstack/tripleo-quickstart,master,standalone_ffu,Idd922d921fe52e9ca88ed84177d2eb81285bafae,Added fs067 for standalone ffu,MERGED,2022-02-17 13:47:35.000000000,2022-11-16 01:44:48.000000000,2022-11-16 01:43:43.000000000,51,1,24,829711,da80ef4fb05ad38478e0d180ee259fadb191c4e3,66,6,9,3,22954,Juan Badia Payno,jbadiapa,"Added fs067 for standalone ffu

This change is needed by
https://review.opendev.org/c/openstack/tripleo-ci/+/829713

Depends-On: https://review.opendev.org/c/openstack/openstack-tempest-skiplist/+/863814
Co-authored-by: Jose Luis Franco
Co-authored-by: Daniel Bengtsson
Change-Id: Idd922d921fe52e9ca88ed84177d2eb81285bafae
"
openstack%2Fopenstack-helm-images~master~I9bdbdca44fc7f1fb2e39e821a3c884b733979fab,openstack/openstack-helm-images,master,,I9bdbdca44fc7f1fb2e39e821a3c884b733979fab,Add packages for monasca agent libvirt plugin,ABANDONED,2021-07-15 15:48:00.000000000,2022-11-16 01:44:04.000000000,,6,3,1,800964,183eb482af494e5c8f5f657887baaa5cab5a5b09,32,3,15,2,31746,Oleksandr Kozachenko,okozachenko,"Add packages for monasca agent libvirt plugin

Depends-On: https://review.opendev.org/c/openstack/requirements/+/831799

Change-Id: I9bdbdca44fc7f1fb2e39e821a3c884b733979fab
"
openstack%2Fopenstack-helm-images~master~Iade738c8eacda8eb368997b8b8e510a5af8eec41,openstack/openstack-helm-images,master,,Iade738c8eacda8eb368997b8b8e510a5af8eec41,Add packages for monasca agent nvidia plugin,ABANDONED,2021-09-24 09:26:55.000000000,2022-11-16 01:44:03.000000000,,2,2,0,810847,2131641e9b58caeb0c06971a7b0d6b468a648cbc,17,2,8,1,31746,Oleksandr Kozachenko,okozachenko,"Add packages for monasca agent nvidia plugin

Depens-On: https://review.opendev.org/c/openstack/requirements/+/831799

Change-Id: Iade738c8eacda8eb368997b8b8e510a5af8eec41
"
openstack%2Ftripleo-ansible~master~Ie0e10749da13f176ca8bf93cacb2aff73dff4745,openstack/tripleo-ansible,master,sync_tht_nova_compute,Ie0e10749da13f176ca8bf93cacb2aff73dff4745,Sync: Fix service dependency on libvirt daemons,MERGED,2022-11-02 13:55:08.000000000,2022-11-16 01:44:02.000000000,2022-11-16 01:44:02.000000000,29,1,1,863313,9af8e41bf7bfcbb3ae5fc5dfcc48e8f916810190,11,7,2,1,6926,Bogdan Dobrelya,bogdando,"Sync: Fix service dependency on libvirt daemons

Sync t-h-t changes for tripleo_nova_libvirt.target
Id3f9e6320fc8bfc8e59cae2308fe4cb118643a9b

Change-Id: Ie0e10749da13f176ca8bf93cacb2aff73dff4745
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
"
openstack%2Fansible-role-container-registry~master~I262efa933975966d6e078eff4e5778bc00331a92,openstack/ansible-role-container-registry,master,drop-python-dev-from-bindep,I262efa933975966d6e078eff4e5778bc00331a92,Remove python-dev from bindep,MERGED,2022-11-07 09:48:24.000000000,2022-11-16 01:44:00.000000000,2022-11-16 01:44:00.000000000,0,1,0,863822,a091b9cd216c3ecf48a8e0718e57b0d256e9a725,7,3,1,1,28522,Herv√© Beraud,hberaud,"Remove python-dev from bindep

It is no longer supported by jammy and lead us to the following errors with the announce-release job.

```
No package matching 'python-dev' is available
```

Change-Id: I262efa933975966d6e078eff4e5778bc00331a92
"
openstack%2Ftripleo-heat-templates~master~Ib79bb0a393df3e0df84ab42e3652ae9d5924f3b8,openstack/tripleo-heat-templates,master,standalone-default,Ib79bb0a393df3e0df84ab42e3652ae9d5924f3b8,Add roles data file for Standalone deployment,MERGED,2022-07-13 03:30:58.000000000,2022-11-16 01:43:56.000000000,2022-11-16 01:43:56.000000000,188,0,4,849607,743c5fa0cd330ca7970d5d5323005cf630771a4b,18,6,2,2,9816,Takashi Kajinami,kajinamit,"Add roles data file for Standalone deployment

... so that we can use that file as the default role data in
the tripleo deploy command.

Change-Id: Ib79bb0a393df3e0df84ab42e3652ae9d5924f3b8
"
openstack%2Ftripleo-quickstart-extras~master~I4411a06026fc5bdf69061a643bc731e91c27640c,openstack/tripleo-quickstart-extras,master,uc-nova-cleanup,I4411a06026fc5bdf69061a643bc731e91c27640c,Omit --deployed-server in master,MERGED,2022-10-13 07:06:21.000000000,2022-11-16 01:43:49.000000000,2022-11-16 01:43:49.000000000,7,1,5,861142,20848d87ca7bb44d52e4b2fb0b4cd0eec38e6d27,23,5,5,1,9816,Takashi Kajinami,kajinamit,"Omit --deployed-server in master

... because the option is deprecated in master[1] and has no effect.

Also, deployed-server-environment.yaml is not required when
the --deployed-server option is used since stable/wallaby[2].

[1] c6cd190a9f63738deafa4c616e0be8e06afedc96
[2] d6fba3f09f8de569b7fcf2bd9519c3112b1cc056

Change-Id: I4411a06026fc5bdf69061a643bc731e91c27640c
"
openstack%2Ftripleo-heat-templates~master~I3ae7abb70fae447c9b62e3af9da8e2444d4d5878,openstack/tripleo-heat-templates,master,,I3ae7abb70fae447c9b62e3af9da8e2444d4d5878,Nova: Generate wrapper scripts during config file generation,MERGED,2022-07-05 14:55:27.000000000,2022-11-16 01:43:46.000000000,2022-11-16 01:43:46.000000000,13,52,7,848757,b29ccd30e294ef0d4b50ad1ecb59dc776109b451,16,6,1,2,9816,Takashi Kajinami,kajinamit,"Nova: Generate wrapper scripts during config file generation

... instead of launching separate containers. The wrapper scripts can
be created without access to any processes.

Note that this change moves the script from
 /var/lib/container-config-scripts
to
 /var/lib/libvirt/scripts
because the container-config-scripts directory is not available when
puppet is executed to generate config files.

Change-Id: I3ae7abb70fae447c9b62e3af9da8e2444d4d5878
"
openstack%2Fswift~master~Ia0ac4ea2006d8965d7fdb6659d355c77386adb70,openstack/swift,master,ring-v2,Ia0ac4ea2006d8965d7fdb6659d355c77386adb70,ring: Introduce a v2 ring format,NEW,2022-03-18 06:06:20.000000000,2022-11-16 01:37:02.000000000,,1812,179,136,834261,59b5bf4da4ada7c28bbc08d8af0cc417727c5cfd,77,3,17,12,15343,Tim Burke,tburke,"ring: Introduce a v2 ring format

There's a bunch of moving pieces here:

- Add a new RingWriter class.

  Stick it in a new swift.common.ring.io module. You *can* use it like
  the old gzip file, but you can also define named sections which can
  be referenced later on read. Section names may be arbitrary strings,
  but the ""swift/"" prefix is reserved for upstream use. Sections must
  contain a single length-value encoded BLOB. If sections are used, an
  additional BLOB is written at the end containing a JSON section-index,
  followed by an uncompressed offset for the index.

  Move RingReader to ring/io.py, too.

- Drop MD5 tracking in RingReader. It was brittle at best anyway, and
  nothing uses it. YAGNI

  Drive-by: Fix size/raw_size attributes when loading only metadata.

- Add the ability to seek within RingReaders, though you need to know
  what you're doing and only seek to flush points.

- Let RingData and RingBuilder objects change how wide their
  replica2part2dev_id arrays are. Add a dev_id_bytes key to serialized
  ring metadata.

Change-Id: Ia0ac4ea2006d8965d7fdb6659d355c77386adb70
"
openstack%2Fansible-collections-openstack~master~If33596cb758446b2587df2d38481205b6e2cc9bb,openstack/ansible-collections-openstack,master,,If33596cb758446b2587df2d38481205b6e2cc9bb,Refactor loadbalancer,NEW,2022-11-15 21:56:25.000000000,2022-11-16 01:13:30.000000000,,356,362,3,864590,8aa75ded88aaf77d75819fb60d1d95fefbeec95b,8,1,4,1,34208,Rafael Castillo,rcastill,"Refactor loadbalancer

Change-Id: If33596cb758446b2587df2d38481205b6e2cc9bb
"
openstack%2Fswift~master~I3d9e29db1f625081747588105342bffe76424f8a,openstack/swift,master,ring-v2,I3d9e29db1f625081747588105342bffe76424f8a,Ring: Add some initial v2 documentation,NEW,2022-11-15 06:32:59.000000000,2022-11-16 01:04:37.000000000,,237,0,8,864494,426ec02ed67c669a8d3e09c8ca141301412d81eb,9,1,3,4,7233,Matthew Oliver,mattoliverau,"Ring: Add some initial v2 documentation

Co-Authored-By: Tim Burke <tim.burke@gmail.com>
Change-Id: I3d9e29db1f625081747588105342bffe76424f8a
"
openstack%2Fpuppet-ovn~stable%2Fxena~Ia3112b9a219b90af718c49776da49078449f09a2,openstack/puppet-ovn,stable/xena,ovn-ofctrl-wait-before-clear,Ia3112b9a219b90af718c49776da49078449f09a2,Add support for ovn-ofctrl-wait-before-clear,MERGED,2022-11-08 16:09:28.000000000,2022-11-16 00:55:58.000000000,2022-11-16 00:54:57.000000000,21,0,4,863809,3cb12653523459afbe9cfdddfba812e0e16788c8,30,4,8,3,5756,Terry Wilson,otherwiseguy,"Add support for ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

Conflicts:
	manifests/controller.pp
	spec/classes/ovn_controller_spec.rb

(yoga to xena)
Conflicts:
	manifests/controller.pp

Change-Id: Ia3112b9a219b90af718c49776da49078449f09a2
(cherry picked from commit b5d38dcbd4cc8a56cc0d028f982accf23a19b15c)
(cherry picked from commit a8f8fe2cece2e20ee8c1c1b3e7d78cb3d780d6b9)
(cherry picked from commit b41d052d0f959b1b657c920cb7aa6166673e3963)
"
openstack%2Fcharm-rabbitmq-server~master~Iaf88d18d26a1cde23397a097fcd98b09a0a98846,openstack/charm-rabbitmq-server,master,rabbitmq-cis,Iaf88d18d26a1cde23397a097fcd98b09a0a98846,Fix upgrade-charm hook that was only partly run,NEW,2022-10-24 10:36:13.000000000,2022-11-16 00:34:35.000000000,,4,2,7,862480,cffafb1285468725aaa106b993ced0881649c50b,18,3,2,1,34232,DUFOUR Olivier,odufourc,"Fix upgrade-charm hook that was only partly run

upgrade-charm bash script was only executed and the hook
from rabbitmq_server_relations.py was silently ignored
This corrects at the same time a failure in the hook if
rabbitmq deployment was from a single unit without any
cluster.

Closes-Bug: #1993100
Change-Id: Iaf88d18d26a1cde23397a097fcd98b09a0a98846
"
openstack%2Fswift~master~Id9bec9b46dad82163517fd71cfdda5b751464588,openstack/swift,master,err_limit_metric,Id9bec9b46dad82163517fd71cfdda5b751464588,Proxy: add metrics related to error limiter.,MERGED,2022-11-03 00:25:18.000000000,2022-11-16 00:30:36.000000000,2022-11-15 05:39:47.000000000,175,54,45,863446,38124221d7bbce8459fd544a15fb5e57dfc7213e,46,4,8,4,34930,Jianjian Huo,jhuo,"Proxy: add metrics related to error limiter.

There are three new metrics added:
 1. 'error_limiter.incremented_limit', when one node has accumulated
    enough errors to trigger error suppression.
 2. 'error_limiter.forced_limit', when one node runs into serious
    error like Insufficient Storage.
 3. 'error_limiter.is_limited', when one node is error limited
    during node selection process due to suppression_limit.

UpgradeImpact:
There is change of log format when 'ERROR Insufficient Storage' is
raised, from '%(msg)s %(node)s' to
'Node will be error limited from now: %s, error: %s'.

Change-Id: Id9bec9b46dad82163517fd71cfdda5b751464588
"
openstack%2Fsenlin~stable%2Fwallaby~I342b1badf3910ea07ea64523cdb8a19a8a0ccb06,openstack/senlin,stable/wallaby,,I342b1badf3910ea07ea64523cdb8a19a8a0ccb06,Update error in install-rdo.rst and update default port,NEW,2022-11-10 05:56:53.000000000,2022-11-16 00:08:18.000000000,,31,31,2,864048,43d03465b7753ff46ee4f6f3c112ca72f8929572,3,0,1,27,34918,wangkuntian,wangkuntian,"Update error in install-rdo.rst and update default port

Nova placement use port 8778, to avoid confusion, Update
senlin default port from  8778 to 8777. And update
spelling mistakes in install-rdo.rst

Change-Id: I342b1badf3910ea07ea64523cdb8a19a8a0ccb06
(cherry picked from commit 1bace4641dc75d1cdbb26c18ed43c7d361f2128e)
"
openstack%2Fsenlin~master~I88b261be4a421c53dfadcd5ea9291fd4c569b344,openstack/senlin,master,fix_doc,I88b261be4a421c53dfadcd5ea9291fd4c569b344,Add the lost component when in installation,MERGED,2022-11-10 02:08:15.000000000,2022-11-16 00:00:00.000000000,2022-11-15 23:58:52.000000000,6,3,0,864155,0743b6ec7b31831430422bc5513e05820a326a0c,10,3,3,1,34918,wangkuntian,wangkuntian,"Add the lost component when in installation

Change-Id: I88b261be4a421c53dfadcd5ea9291fd4c569b344
"
openstack%2Fironic-specs~master~Ic500869cc22088dd4f1f1ff1f3f407719fcb1673,openstack/ironic-specs,master,zed,Ic500869cc22088dd4f1f1ff1f3f407719fcb1673,Zed Themes,MERGED,2022-05-09 03:27:59.000000000,2022-11-15 23:32:33.000000000,2022-11-15 23:31:29.000000000,92,0,13,841061,1f17c16f68de6dc753c1c5d2783a6c8d4f58ee35,17,4,3,2,15519,Iury Gregory Melo Ferreira,iurygregory,"Zed Themes

This commit includes some of the plans we have for the Zed Cycle

Change-Id: Ic500869cc22088dd4f1f1ff1f3f407719fcb1673
"
openstack%2Fkolla~master~I1194f3714e81176db920ee35516270950bd86f4a,openstack/kolla,master,kolla-patches,I1194f3714e81176db920ee35516270950bd86f4a,Add macro for patch files to all images,ABANDONED,2022-02-15 15:08:39.000000000,2022-11-15 23:01:08.000000000,,707,0,1,829296,2d9f48b33d14f15648bcf05164e10c01e28665af,6,2,1,232,27339,Michal Arbet,michalarbet,"Add macro for patch files to all images

Change-Id: I1194f3714e81176db920ee35516270950bd86f4a
"
openstack%2Fkolla~master~I61d0790c5d4d070b7ea9e8c99c0a76ff5d22bf9d,openstack/kolla,master,kolla-patches,I61d0790c5d4d070b7ea9e8c99c0a76ff5d22bf9d,Add mechanism for patching files in containers,ABANDONED,2022-02-15 15:08:39.000000000,2022-11-15 23:00:31.000000000,,93,0,7,829295,268b04518659c5ea827ae6f4e6cb0e9a8ca0be37,9,3,1,5,27339,Michal Arbet,michalarbet,"Add mechanism for patching files in containers

Binary images are deprecated and will be removed
in next cycle. Biggest advantage was that downstream
community could patch sources via deb,rpm packages.

This will be not possible anymore.
This patch provides mechanism to fullfill that
needs, so user just put patches to special folder
and everything is done by kolla.

This mechanism is similar as debian patch quilt.

Change-Id: I61d0790c5d4d070b7ea9e8c99c0a76ff5d22bf9d
"
openstack%2Fkolla-ansible~master~I1b53f8f18a0c6d027e9e81ab7543c6b12eacfc18,openstack/kolla-ansible,master,,I1b53f8f18a0c6d027e9e81ab7543c6b12eacfc18,Add function to install ansible dependency,ABANDONED,2022-09-10 22:05:07.000000000,2022-11-15 23:00:04.000000000,,44,4,7,856906,680a9953f441c8f298b78ae300092d2b9dcdf409,11,5,1,1,27339,Michal Arbet,michalarbet,"Add function to install ansible dependency

This patch implements new function to install
right version of ansible. This function is very usefull
especially after ansible changed releases in version 2.10.

More informations in [1].

[1] https://www.ansiblepilot.com/articles/ansible-terminology-ansible-vs-ansible-core-packages/
Change-Id: I94f3224915711cf0225b2ea502b296faa0f5cdce

Change-Id: I1b53f8f18a0c6d027e9e81ab7543c6b12eacfc18
"
openstack%2Fkolla-ansible~master~Iedd7188d8ac79890a0667e38bbf65f35804ac636,openstack/kolla-ansible,master,fluent-central-logging,Iedd7188d8ac79890a0667e38bbf65f35804ac636,Use native fluent-logger instead of tail,ABANDONED,2020-10-02 11:49:15.000000000,2022-11-15 22:59:12.000000000,,1373,39,19,755775,9d55b59116ddfc8c9d1bfa0bed67f021f3e1eaed,85,7,21,196,27339,Michal Arbet,michalarbet,"Use native fluent-logger instead of tail

Kolla-ansible deployment currently using tail
input plugin when central_logging is turned on.

This patch is switching from tail plugin to
input_forward and using native fluent-logger.

Depends-On: https://review.opendev.org/759855
Change-Id: Iedd7188d8ac79890a0667e38bbf65f35804ac636
"
openstack%2Fkolla-ansible~master~I951028ce859de9e8c464f8a7f6064e7c1344b9c2,openstack/kolla-ansible,master,haproxy-weight,I951028ce859de9e8c464f8a7f6064e7c1344b9c2,Add weight of haproxy backend also for custom members,ABANDONED,2021-10-14 15:18:15.000000000,2022-11-15 22:58:41.000000000,,27,8,6,814027,18d9046beab1069b2f8dfede5acbcdd8b3a82608,28,2,5,3,27339,Michal Arbet,michalarbet,"Add weight of haproxy backend also for custom members

Very nice mechanism of adding weight for haproxy backends
was merged in [1]. But this is not working for custom
members (tacker,glance,horizon,mariadb,memcached).

This patch just adding same mechanism for custom_haproxy_members.

[1] https://review.opendev.org/c/openstack/kolla-ansible/+/775627

Change-Id: I951028ce859de9e8c464f8a7f6064e7c1344b9c2
"
openstack%2Fkolla~master~Iced3b781ed694c6f0e287bb24dfe23aafd3bad02,openstack/kolla,master,mariadb-arbitrator,Iced3b781ed694c6f0e287bb24dfe23aafd3bad02,Add mariadb-arbitrator image,ABANDONED,2021-03-16 20:24:12.000000000,2022-11-15 22:57:34.000000000,,48,0,23,780967,d7dc784eca99b67de09d0b99c4a90b2374ea941a,75,5,14,3,27339,Michal Arbet,michalarbet,"Add mariadb-arbitrator image

Change-Id: Iced3b781ed694c6f0e287bb24dfe23aafd3bad02
"
openstack%2Fcinder~master~I5e065a3c16d438df604a169deca9fb1852f13d6b,openstack/cinder,master,infinidat-add-local-volume-migration,I5e065a3c16d438df604a169deca9fb1852f13d6b,Infinidat: add storage assisted volume migration,NEW,2022-11-15 10:26:36.000000000,2022-11-15 22:37:41.000000000,,131,7,0,864287,2168a473df0831e3f251a6d2cdf1e2ef4e946d3a,21,1,1,4,35075,Alexander Deiter,adeiter,"Infinidat: add storage assisted volume migration

Adding support for storage assisted volume migration
in Infinidat driver. This patch implements:
* migrate_volume()
* unit tests to cover new code

Signed-off-by: Alexander Deiter <adeiter@infinidat.com>
Change-Id: I5e065a3c16d438df604a169deca9fb1852f13d6b
"
openstack%2Ftripleo-heat-templates~master~Ia7b1b8d9a9443be935a63a3f75be8ac806ec1225,openstack/tripleo-heat-templates,master,,Ia7b1b8d9a9443be935a63a3f75be8ac806ec1225,Remove leftover of certmonger management by puppet,NEW,2022-08-18 03:50:07.000000000,2022-11-15 22:32:31.000000000,,5,48,1,853583,a122f4eef0c0a1e93c9331878a770bb4db8970ee,12,3,3,6,9816,Takashi Kajinami,kajinamit,"Remove leftover of certmonger management by puppet

This change removes a few hieradata keys which are no longer used since
we removed implementation to manage certmonger by puppet[1].

[1] 48832c961cd6866698c1e7585634381c43decc66

Change-Id: Ia7b1b8d9a9443be935a63a3f75be8ac806ec1225
"
openstack%2Fneutron~master~I1258b04f64a18036407e1d9de9ddca7472af0d11,openstack/neutron,master,pylint-c0330-api,I1258b04f64a18036407e1d9de9ddca7472af0d11,Fix some pylint indentation warnings,MERGED,2022-11-04 17:28:37.000000000,2022-11-15 22:11:07.000000000,2022-11-15 22:09:42.000000000,20,18,4,863671,291eabb0b686992f5124bb80e749c02d13c0dc05,18,4,1,5,1131,Brian Haley,brian-haley,"Fix some pylint indentation warnings

Running with a stricter .pylintrc generates a lot of
C0330 warnings (hanging/continued indentation). Fix
the ones in neutron/api.

Trivialfix

Change-Id: I1258b04f64a18036407e1d9de9ddca7472af0d11
"
openstack%2Fproject-config~master~I9fb9758f8deddc3c76fb22fc859291dea8cfcd43,openstack/project-config,master,fips-testing,I9fb9758f8deddc3c76fb22fc859291dea8cfcd43,Add an Ubuntu FIPS testing token,NEW,2022-10-14 17:02:14.000000000,2022-11-15 21:29:02.000000000,,17,0,6,861457,97c7084cd7eec08e46d10976b6ad4b8b8b2ec85c,13,3,1,1,5263,Jeremy Stanley,fungi,"Add an Ubuntu FIPS testing token

OpenStack contributors have worked out a solution for enabling FIPS
testing on Ubuntu nodes, which normally requires a paid
subscription. The ""token"" field of the ""openstack_ubuntu_fips""
secret supplied here can be applied to a test node early during job
setup by calling ""pro attach {{ token }}"" as root.

The secret will be replaced periodically, in order to make any
entitlement exfiltrated from job nodes unattractive for production
use.

Change-Id: I9fb9758f8deddc3c76fb22fc859291dea8cfcd43
"
openstack%2Fcinder~master~I79d70543856c01a45e2d8c083ab8df6b9c047ebc,openstack/cinder,master,filter_out_os_glance_metadata-upstream,I79d70543856c01a45e2d8c083ab8df6b9c047ebc,Filter reserved image properties,NEW,2021-10-06 13:58:15.000000000,2022-11-15 21:28:04.000000000,,192,25,119,812685,f32d2bf66a081cf8b34042c944f60cc1fe3faf5c,404,8,20,6,28356,Rafael Weingartner,rafaelweingartner,"Filter reserved image properties

Cinder is currently not able (even with wallaby) to upload a volume
that is based on an image back to glance. This bug is triggered if
glance multistore is enabled (devstack in this example).

When enabling multistore, the following properties will be stored in Cinder:
* os_glance_failed_import=''
* os_glance_importing_to_stores=''

Those properties will cause problems when later, Cinder tries to perform
some actions with Glance. Error msg:
```
cinderclient.exceptions.BadRequest: HTTP 403 Forbidden: Access was denied to this resource.: Attribute &#x27;os_glance_failed_import&#x27; is reserved. (HTTP 400)
```

Nova had the same issue and solved it with:
https://github.com/openstack/nova/blob/50fdbc752a9ca9c31488140ef2997ed59d861a41/releasenotes/notes/absolutely-non-inheritable-image-properties-85f7f304fdc20b61.yaml

and

https://github.com/openstack/nova/commit/dda179d3f901e4f23091f3095f1af58bc26e222e

Therefore, this patch is intended to apply a similar solution in Cinder.

Change-Id: I79d70543856c01a45e2d8c083ab8df6b9c047ebc
Closes-Bug: #1945500
"
openstack%2Fpuppet-tripleo~master~I5b84c9a6015e9f1b097331d1c4a48d35e39eedfa,openstack/puppet-tripleo,master,,I5b84c9a6015e9f1b097331d1c4a48d35e39eedfa,Remove reference to unused hieradata keys,NEW,2022-03-03 13:53:44.000000000,2022-11-15 21:12:54.000000000,,32,34,3,831779,b9ff0b7655af070bc8ff4970901b2bad6d6b65ef,40,4,11,6,9816,Takashi Kajinami,kajinamit,"Remove reference to unused hieradata keys

Currently some parameters use specific hierata keys to pick up values
but these hierata keys are not used by tht. This change removes such
unnecessary usage to reduce amount of hiera look up.

Note that the parameters updated by this change are all set by tht
parameters(or are hardcoded). Thus we don't expect any user would try
overriding these parameters using hieradata key, instead of template
parameters.

Depends-on: https://review.opendev.org/831778
Change-Id: I5b84c9a6015e9f1b097331d1c4a48d35e39eedfa
"
openstack%2Fcharm-rabbitmq-server~stable%2Fjammy~Ia54bfacee6635c1e85a0c97e22bc2a5974bda7d1,openstack/charm-rabbitmq-server,stable/jammy,bug/1991528,Ia54bfacee6635c1e85a0c97e22bc2a5974bda7d1,Update bundles to use yoga,NEW,2022-10-21 18:13:48.000000000,2022-11-15 20:35:14.000000000,,6,6,7,862397,7b5a2e71bb7dcdf5dc9bc0f04a0b0a3f4bf9d736,11,2,2,2,2424,Felipe Reyes,freyes,"Update bundles to use yoga

This change reconfigures the bundles to use OpenStack yoga, they are the
last version that support Focal and Jammy.

Func-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/958
Change-Id: Ia54bfacee6635c1e85a0c97e22bc2a5974bda7d1
Closes-Bug: #1991528
(cherry picked from commit f22bb10257d7948f9222e73ff471c56809d0cd88)
"
openstack%2Ftripleo-heat-templates~master~I9149dd5087ae6af0265f37b36de9213c9d625a3f,openstack/tripleo-heat-templates,master,user-podman-socket,I9149dd5087ae6af0265f37b36de9213c9d625a3f,Move podman socket,NEW,2022-09-15 09:44:38.000000000,2022-11-15 20:29:06.000000000,,24,44,40,857857,fff89083bb9e1e08f3ec5ce07abb99a8e61aacf4,77,6,11,2,5241,Martin Magr,mmagr,"Move podman socket

This patch creates special podman socket for sensubility purposes
on /var/lib instead of /run as it is tmpfs and so permission changes
would perish after reboot.

This patch also removes rsyslog configuration for separate HC log file.
This is not needed anymore since sensubility fetches data straight from podman
instead of parsing the log file.

Sensubility is also set to connect to QDR in scenario001-standalone job
so that it is visible in the logs that HC script succeeds.

[1] https://github.com/containers/podman/issues/12493
Depends-On: I7538def60e4fd3a7187ede0e1f5ada1b0c460f65
Change-Id: I9149dd5087ae6af0265f37b36de9213c9d625a3f
"
openstack%2Ftripleo-common~stable%2Fwallaby~I540267b22756ba64763ee2cb8f78720b7e22e7ac,openstack/tripleo-common,stable/wallaby,inventory_dir_support,I540267b22756ba64763ee2cb8f78720b7e22e7ac,Support ansible inventory merging,NEW,2022-10-19 13:30:56.000000000,2022-11-15 20:20:28.000000000,,100,658,9,861890,06620fedfd232007dbb5019b34fed01672cf60c7,22,3,4,12,6926,Bogdan Dobrelya,bogdando,"Support ansible inventory merging

tripleo-ansible-inventory was deprecated in
Ie02259336c763cfa980b59ad64f9e478d05690fb leaving no method to merge
""multistack"" inventories.

This patch restructures the inventory to allow merging via ansible
e.g by passing multiple inventory files or an inventory dir

The <plan_name> group is now a child of the ""allovercloud"" group (was
vice-versa) allowing the allovercloud group to be merged from multiple
inventory files.

The ""overcloud"" group is no longer a special case and will only exist if
that is the plan name.

generate_tripleo_ansible_inventory now generates a merged inventory to
avoid conflicts in <role_name> group vars.

 Conflicts:
	tripleo_common/inventory.py

Depends-On: I05f4989b0f14d56d3c33f91b3cccb85b729987cb
Change-Id: I540267b22756ba64763ee2cb8f78720b7e22e7ac
(cherry picked from commit 354351d7d5f0b7be52ee8c90e337827cf2ff6914)
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
"
openstack%2Fpython-designateclient~master~I70a62a4ddc59638297814682523e1e802a7fad42,openstack/python-designateclient,master,setup-metadata-upd,I70a62a4ddc59638297814682523e1e802a7fad42,Update metadata in setup.cfg,MERGED,2022-11-11 16:48:43.000000000,2022-11-15 20:11:08.000000000,2022-11-15 20:10:10.000000000,5,6,6,864298,6a8ef57dc79c503334be7cab0146784173c5e6a1,13,3,2,1,5572,Don Kehn,dekehn,"Update metadata in setup.cfg

we are using some ""aliases"" that the setuptools docs say
""are supported for compatibility reasons"" but their use
is not advised[1].

[1] https://setuptools.pypa.io/en/latest/userguide/declarative_config.html#metadata

Change-Id: I70a62a4ddc59638297814682523e1e802a7fad42
"
openstack%2Ftripleo-heat-templates~master~I12b03d9099c9434f08d42cc291f6282fc4496dbf,openstack/tripleo-heat-templates,master,,I12b03d9099c9434f08d42cc291f6282fc4496dbf,Create ephemeral heat.conf for rabbitmq/mysql config,NEW,2022-11-02 18:56:58.000000000,2022-11-15 20:10:01.000000000,,23,0,6,863432,108a2456f8fa0c5cf5cc716050e8029c089feda9,10,4,2,1,7144,James Slagle,slagle,"Create ephemeral heat.conf for rabbitmq/mysql config

Instead of relying on using the hiera CLI (which is now deprecated) from
tripleoclient, create a heat.conf for use with ephemeral Heat that sets
the needed configs for the rabbitmq transport_url and the mysql database
connection.

Change-Id: I12b03d9099c9434f08d42cc291f6282fc4496dbf
Signed-off-by: James Slagle <jslagle@redhat.com>
"
openstack%2Fswift~master~I4d0453fa0f407c0cfc0cbf0f7ee610549a5b39d9,openstack/swift,master,zanata/translations,I4d0453fa0f407c0cfc0cbf0f7ee610549a5b39d9,Imported Translations from Zanata,MERGED,2022-11-05 03:24:17.000000000,2022-11-15 20:04:11.000000000,2022-11-15 20:02:58.000000000,76,2,0,863728,12df65e3755f6cb712b06401c0fe2beb5bf49662,11,2,3,1,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I4d0453fa0f407c0cfc0cbf0f7ee610549a5b39d9
"
openstack%2Fhorizon~master~If568e66a5fbdd5ca01a2bbe246742836e021135f,openstack/horizon,master,migrate-to-jammy,If568e66a5fbdd5ca01a2bbe246742836e021135f,[DNM] Testing horizon jobs on Ubuntu jammy (22.04),NEW,2022-10-13 06:26:11.000000000,2022-11-15 19:41:47.000000000,,5,3,4,861140,1be8970a66de558ffb0b0ef3c02c29b755907b9c,23,1,11,3,29313,Vishal Manchanda,vishalmanchanda,"[DNM] Testing horizon jobs on Ubuntu jammy (22.04)

Depends-On: https://review.opendev.org/c/openstack/tempest/+/861110
Depends-On: https://review.opendev.org/c/zuul/zuul-jobs/+/864582
Change-Id: If568e66a5fbdd5ca01a2bbe246742836e021135f
"
openstack%2Fcloudkitty~master~I143ee6aa4352903921d2ab7b8d8468aedbdd6911,openstack/cloudkitty,master,add_logs_pyscripts,I143ee6aa4352903921d2ab7b8d8468aedbdd6911,Add logs to PyScripts rating process,NEW,2022-11-15 18:27:28.000000000,2022-11-15 19:09:00.000000000,,29,7,0,864578,1f91e16a63d2aa6228d061ba3f773326b4bc15db,2,1,1,1,28356,Rafael Weingartner,rafaelweingartner,"Add logs to PyScripts rating process

Change-Id: I143ee6aa4352903921d2ab7b8d8468aedbdd6911
"
openstack%2Fopenstack-ansible-os_neutron~master~I6af7f0d643ad09f98120fca9c18063b4fe4d29e9,openstack/openstack-ansible-os_neutron,master,,I6af7f0d643ad09f98120fca9c18063b4fe4d29e9,Add dep python-binary-memcached,NEW,2022-11-15 16:42:14.000000000,2022-11-15 18:58:51.000000000,,2,2,2,864572,994ff89cc27919f87f183c6d8c49efd4466fa4a5,6,2,2,2,7353,Kevin Carter,cloudnull,"Add dep python-binary-memcached

The dogpile library is attempting to load bmemcached and without the
dependencies the service will throw an excessive amount of errors
when attempting to load the library. To resolve this issue we install
the missing dependency.

* Package install for debian
* Pip install
X no RPM was found so none included in this PR

Change-Id: I6af7f0d643ad09f98120fca9c18063b4fe4d29e9
Signed-off-by: Kevin Carter <kevin@cloudnull.com>
"
openstack%2Fos-brick~stable%2Fwallaby~Ib001e2b4d1347754c2b46730bc10d86e8cdab7ad,openstack/os-brick,stable/wallaby,xena-fix-fix_encryption_symlink-stable/wallaby,Ib001e2b4d1347754c2b46730bc10d86e8cdab7ad,RBD: Fix disconnect_volume for encrypted volumes,MERGED,2022-11-15 14:26:55.000000000,2022-11-15 18:51:50.000000000,2022-11-15 17:23:42.000000000,14,1,2,864479,129da87d968d454ac578d411d97f6e2ad9fc47f8,12,3,1,3,34598,Manojkatari,mkatari,"RBD: Fix disconnect_volume for encrypted volumes

After change Ie373ab050dcc0a35c749d9a53b6cf5ca060bcb58 closing bugs
connector was broken for encrypted volumes:

<== disconnect_volume:
   exception (0ms) AttributeError(""'RBDVolumeIOWrapper' object has
   no attribute 'startswith'"") trace_logging_wrapper
   /usr/lib/python3.9/site-packages/os_brick/utils.py:162

This hapens because ""_device_path_from_symlink"" doesn't take into
account of the file handle, and we were missing a unit test for this
case.

Closes-Bug: #1981455
Change-Id: Ib001e2b4d1347754c2b46730bc10d86e8cdab7ad
(cherry picked from commit dde8f102b714e2e4001a3fe82f975cd9978ac1c5)
(cherry picked from commit 743002cc269ac1e91d8df2eee5f4fdad3d14c365)
(cherry picked from commit 3aa5d295821d6bb39a24f465b740f9ac4fb884d1)
"
openstack%2Fheat~master~I8603b59863a2199642f1144db5e06c7d6bd2680f,openstack/heat,master,neutron_openstacksdk,I8603b59863a2199642f1144db5e06c7d6bd2680f,Migrate extraroutes net and subnet to SDK,NEW,2022-10-26 14:34:48.000000000,2022-11-15 18:47:23.000000000,,187,99,10,862704,49cf130a14a4d9c1e370f4b3e0b78dd8d8e08f8a,7,1,3,30,8313,Lajos Katona,elajkat,"Migrate extraroutes net and subnet to SDK

Change-Id: I8603b59863a2199642f1144db5e06c7d6bd2680f
Story: 2009683
Task: 43977
"
openstack%2Freleases~master~Icee710a60ced96093a7776ede176ccbafe1eae3f,openstack/releases,master,u-v-last,Icee710a60ced96093a7776ede176ccbafe1eae3f,[designate-tempest-plugin] Tag ussuri-last & victoria-last,NEW,2022-11-12 23:39:18.000000000,2022-11-15 18:45:43.000000000,,8,0,4,864344,addfe13d52ce203ce4d0f4bf5c406322d865c9ea,9,3,2,2,8556,Ghanshyam,ghanshyam,"[designate-tempest-plugin] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches].

We taged ussuri-last & victoria-last for tempest[3] but forgot to do
it for the tempest plugins. Using the last hash which was tested with
ussuri and victoria jobs and can be considered as tested and compatible
tag for tempest ussuri-last and victoria-last
- https://review.opendev.org/c/openstack/designate-tempest-plugin/+/839447

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: Icee710a60ced96093a7776ede176ccbafe1eae3f
"
openstack%2Ftempest~master~Ie3bbbc80e4b2e7bca8e8b70fce1d31166220c6d3,openstack/tempest,master,wallaby-last,Ie3bbbc80e4b2e7bca8e8b70fce1d31166220c6d3,End support for stable/wallaby,NEW,2022-11-13 01:29:30.000000000,2022-11-15 18:42:27.000000000,,12,16,2,864371,a83e911dbf38d14c9a2efbc4cf8556608392969b,5,2,1,3,8556,Ghanshyam,ghanshyam,"End support for stable/wallaby

This marks the end of support for stable/wallaby
which is EM now [1]. This remove the stable/wallaby
jobs and also adds relesenote to mark the end of
support of Wallaby.

Depends-On: https://review.opendev.org/c/openstack/releases/+/862393

[1] https://releases.openstack.org/

Change-Id: Ie3bbbc80e4b2e7bca8e8b70fce1d31166220c6d3
"
openstack%2Fnova-specs~master~I6d1a832a96a56f4006e386b68882b419de912b1b,openstack/nova-specs,master,bp/ephemeral-encryption-libvirt,I6d1a832a96a56f4006e386b68882b419de912b1b,Re-propose spec for ephemeral encryption for libvirt,MERGED,2022-11-09 22:30:18.000000000,2022-11-15 18:40:14.000000000,2022-11-15 18:38:28.000000000,296,0,1,864147,7ffcfcaa545e6d0a1561b1c36b72154e7d7645ea,11,3,1,1,4690,melanie witt,melwitt,"Re-propose spec for ephemeral encryption for libvirt

Previously-approved: Zed, Yoga, Xena, Wallaby

The spec has been updated to add a couple of points about configuration
and policy to the Documentation Impact section.

Related to blueprint ephemeral-encryption-libvirt

Depends-On: https://review.opendev.org/c/openstack/nova-specs/+/864138

Change-Id: I6d1a832a96a56f4006e386b68882b419de912b1b
"
openstack%2Fnova-specs~master~I425bf537413fbb633f9dec068a247883dbf8680d,openstack/nova-specs,master,bp/ephemeral-storage-encryption,I425bf537413fbb633f9dec068a247883dbf8680d,Re-propose spec for ephemeral storage encryption,MERGED,2022-11-09 18:45:28.000000000,2022-11-15 18:38:53.000000000,2022-11-15 18:37:05.000000000,544,0,1,864138,62d6b6280645cbddc3178b6c6904abafe2beda22,9,3,1,1,4690,melanie witt,melwitt,"Re-propose spec for ephemeral storage encryption

Previously-approved: Zed, Yoga, Xena, Wallaby

The spec has been updated to reflect the consensus that we will not
expose low-level encryption options to end users for the initial
version because of the security and upgrade implications discussed.
We will instead hard-code sensible defaults for the relevant options.

Related to blueprint ephemeral-storage-encryption

Change-Id: I425bf537413fbb633f9dec068a247883dbf8680d
"
openstack%2Fneutron~master~I3bfc2c0f9566bcc6861ca91339e32257ea92c7e9,openstack/neutron,master,bug/1991965,I3bfc2c0f9566bcc6861ca91339e32257ea92c7e9,Support for minimum bandwidth rules in tunnelled networks,NEW,2022-10-07 08:14:47.000000000,2022-11-15 18:29:27.000000000,,284,93,20,860639,04047ef121eb8dcb9c6f397057f276330db474e4,65,3,13,20,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Support for minimum bandwidth rules in tunnelled networks

This patch adds support for QoS minimum bandwidth rules in tunnelled
networks. Now the ML2/OVS and ML2/OVS mechanism drivers can represent
in the Placement API the available bandwidth of the tunnelled networks
in each compute host.

Both mechanism drivers represent the compute VTEP (VXLAN) or TEP
(Geneve) interface as an IP address. This new resource provider
(by default called ""rp_tunnelled"") represents the available bandwidth
of this interface. Any new port created in a compute node that belongs
to a tunnelled network, will request to the Placement API the
corresponding bandwidth from the resource provider inventory.

This patch does not provide backend enforcement support for minimum
bandwidth rules.

NOTE: spec still under review:
  https://review.opendev.org/c/openstack/neutron-specs/+/860859

What is missing and will be added in next patches:
* Fullstack tests.
* Tempest tests, that will be pushed to the corresponding repository.

Depends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/863880

Partial-Bug: #1991965
Related-Bug: #1578989
Change-Id: I3bfc2c0f9566bcc6861ca91339e32257ea92c7e9
"
openstack%2Fplacement~master~I12dce16a7f18bb065e1412d2f2d9bd91452d8672,openstack/placement,master,,I12dce16a7f18bb065e1412d2f2d9bd91452d8672,Policy defaults improvement spec,NEW,2022-11-14 05:19:59.000000000,2022-11-15 18:00:01.000000000,,174,0,12,864385,7d9771cfce2d072b22026f2d83815f045816ad06,12,2,3,2,8556,Ghanshyam,ghanshyam,"Policy defaults improvement spec

This spec is to improve the policies default
as per the community wide goal
- https://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html

APIImpact

Change-Id: I12dce16a7f18bb065e1412d2f2d9bd91452d8672
"
openstack%2Fkeystone~master~I1ff4d48c05cef1022dc510df03104f36cdd7a953,openstack/keystone,master,add_oidc,I1ff4d48c05cef1022dc510df03104f36cdd7a953,Add oidc federation test setup,NEW,2022-11-15 16:19:29.000000000,2022-11-15 17:56:08.000000000,,317,1,1,864566,69cd89285850212b936cd548f79837f09236890a,5,7,1,6,9914,Ade Lee,alee,"Add oidc federation test setup

Add devstack testing setup for OIDC using an instance of keycloak
which is instantiated from a keycloak image.  This is largely taken
from Kristi's work in https://github.com/knikolla/devstack-plugin-oidc

This configuration is triggered by enabling the devstack service
keystone-oidc-federation.  The expectation is that either SAML2 or
OIDC is enabled, but not both.

Change-Id: I1ff4d48c05cef1022dc510df03104f36cdd7a953
"
openstack%2Fpuppet-horizon~stable%2Fzed~I5ef41b5ccc49b742172848f2ff63b08f038c114b,openstack/puppet-horizon,stable/zed,,I5ef41b5ccc49b742172848f2ff63b08f038c114b,Fix the wrong key to look up designate policies,MERGED,2022-10-31 00:19:25.000000000,2022-11-15 17:49:44.000000000,2022-11-15 17:49:44.000000000,2,2,4,862991,c5e817ee58a203e2987b56d8628109325ed79569,17,3,1,1,9816,Takashi Kajinami,kajinamit,"Fix the wrong key to look up designate policies

This change fixes the key to look up designate policies from the base
horizon class parameter. The previous value is for octavia.

Change-Id: I5ef41b5ccc49b742172848f2ff63b08f038c114b
(cherry picked from commit d906fe4ee602e89f8f88856ee0133995ec5c6026)
"
openstack%2Fneutron~master~Ie579df7126ca8d09dbedad8d2254c79ec0d3bc32,openstack/neutron,master,bug/1996527,Ie579df7126ca8d09dbedad8d2254c79ec0d3bc32,Load the required configuration options in the UT classes,MERGED,2022-11-14 23:09:10.000000000,2022-11-15 17:35:48.000000000,2022-11-15 17:33:39.000000000,2,0,1,864448,c5ee9f349548b5bc842054aa26118e205c490aa2,11,5,1,1,1131,Brian Haley,brian-haley,"Load the required configuration options in the UT classes

Some test classes are not loading the required configuration options
during the setup process. That prevents from launching thoses tests
or classes individually. This patch solves this issue by importing the
required options in the ""setUp"" test class method.

This is breaking python 3.11 on Debian, not possible to test
in the gate at the moment.

Closes-Bug: #1996527

Change-Id: Ie579df7126ca8d09dbedad8d2254c79ec0d3bc32
"
openstack%2Fneutron~master~I8312c9a0835ee9bdae9e3b2c565bf899899349c3,openstack/neutron,master,pylint-c0330-ipam,I8312c9a0835ee9bdae9e3b2c565bf899899349c3,Fix some pylint indentation warnings,MERGED,2022-11-04 17:29:32.000000000,2022-11-15 17:34:48.000000000,2022-11-15 17:33:34.000000000,30,30,0,863673,3afa1b1471097c23b81d8321460bbc2a31890c9b,11,5,1,4,1131,Brian Haley,brian-haley,"Fix some pylint indentation warnings

Running with a stricter .pylintrc generates a lot of
C0330 warnings (hanging/continued indentation). Fix
the ones in neutron/ipam.

Trivialfix

Change-Id: I8312c9a0835ee9bdae9e3b2c565bf899899349c3
"
openstack%2Fcloudkitty~master~Ibcc6af5aa5cf544be9032e33d3ac90eb1f6b14ef,openstack/cloudkitty,master,optimize_gnocchi_fetcher,Ibcc6af5aa5cf544be9032e33d3ac90eb1f6b14ef,Optimize Gnocchi fetcher,NEW,2022-11-11 14:01:59.000000000,2022-11-15 17:26:28.000000000,,138,16,4,864269,017aa96e4d1f9bd4bf740d67f45e3a6d30633373,12,1,4,3,28356,Rafael Weingartner,rafaelweingartner,"Optimize Gnocchi fetcher

Depending on the environment where CloudKitty is applied, when using
Gnocchi fetcher, if the environment is too big, CloudKitty tends to
consume to much RAM of the host where it is running. This happens
because before retrieving the scope IDs and filtering out only the
unique ones, it loads all of the Gnocchi resources to memory.

This patch proposes a change in that process, to load the chunk of
Gnocchi resources and execute the retrieval of the scope ID and
selectig only the unique ones right away. Then, in the worst case
scenario, we would only have 1000 resources being loaded to memory.

Change-Id: Ibcc6af5aa5cf544be9032e33d3ac90eb1f6b14ef
"
openstack%2Foctavia~stable%2Fwallaby~Ie6aae68e8126ad56f771ea0bc00d4005f2d27c4d,openstack/octavia,stable/wallaby,,Ie6aae68e8126ad56f771ea0bc00d4005f2d27c4d,Restart rsyslog from cloud-init in amphorav1,MERGED,2022-10-11 14:04:39.000000000,2022-11-15 17:24:03.000000000,2022-11-15 17:22:51.000000000,37,17,1,860954,6516531752f83904b0348833f5f40e38acf2b394,10,5,1,3,29244,Gregory Thiemonge,gthiemonge,"Restart rsyslog from cloud-init in amphorav1

This is a follow-up patch for commit [0], it fixes the same issue but in
amphorav1 (this part was missing in the initial patch).

[0] I550c7d2563a2d3ada07e2162383f59f104bcbbd5

Change-Id: Ie6aae68e8126ad56f771ea0bc00d4005f2d27c4d
(cherry picked from commit c011c61d13a0f097583593a0dcf3f4cd95c2f232)
(cherry picked from commit d4b0c4f5b4e80b7659e1607919e8c74621291d51)
"
openstack%2Fopenstack-ansible~master~I6ce27125d2fa670bb0f240195a59f8ea242369d9,openstack/openstack-ansible,master,,I6ce27125d2fa670bb0f240195a59f8ea242369d9,Try to adjust Apache directives for AIO,NEW,2022-10-28 14:27:19.000000000,2022-11-15 17:23:34.000000000,,3,3,1,862922,392e665196cfb185920f4d9c03883e902072eca5,5,2,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Try to adjust Apache directives for AIO

We started seing tempest failing on keystone quite frequently since
moved keystone behind Apache instead of nginx. At the same time we see
no issues. Also there are no issues logged which points towards too
small amount of threads/connection available for normal work and even
serial tempest tests. We try to minorly increase amount of threads for
Apache to see if that helps.

Change-Id: I6ce27125d2fa670bb0f240195a59f8ea242369d9
"
openstack%2Fopenstack-ansible-lxc_hosts~master~I5ac99e2b6c6e6ccd9da18ae68e1f8801f95f4f4e,openstack/openstack-ansible-lxc_hosts,master,osa/systemd_roles,I5ac99e2b6c6e6ccd9da18ae68e1f8801f95f4f4e,Replace ifupdown with native ip-link,NEW,2022-02-07 12:30:38.000000000,2022-11-15 17:22:51.000000000,,70,175,12,828120,3d8e3690ba620d1724129f8ed1a6a040c5ccdac9,38,4,15,11,28619,Dmitriy Rabotyagov,noonedeadpunk,"Replace ifupdown with native ip-link

We also leverage systemd-networkd for managing lxc-net and replace
using of custom service template for lxc-dnsmasq service with our
systemd-service role. These changes are quite tighten together, so
it's quite hard to split them in different patchsets.

Depends-On: https://review.opendev.org/c/openstack/ansible-role-systemd_service/+/861350
Change-Id: I5ac99e2b6c6e6ccd9da18ae68e1f8801f95f4f4e
"
openstack%2Fopenstack-ansible~stable%2Fwallaby~Ifd2c93a55a367902a05d6ed79406f918aaccb209,openstack/openstack-ansible,stable/wallaby,bump_osa,Ifd2c93a55a367902a05d6ed79406f918aaccb209,Bump services for EM release,NEW,2022-11-11 12:14:18.000000000,2022-11-15 17:20:28.000000000,,47,47,1,864263,91f0009dcbd45e0828f6d47e70930c524b37fc5d,8,3,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Bump services for EM release

Change-Id: Ifd2c93a55a367902a05d6ed79406f918aaccb209
"
openstack%2Fkolla-ansible~master~Ic10b410fc115646d96d2ce39d9618e7c46cb3fbc,openstack/kolla-ansible,master,config-validate,Ic10b410fc115646d96d2ce39d9618e7c46cb3fbc,Integrate oslo-config-validator,NEW,2022-11-15 14:02:20.000000000,2022-11-15 17:17:06.000000000,,162,0,1,864551,7066fad2ce69269c8117006a1d1e0def51cb0ed7,7,1,2,7,35263,Matt Crees,mattcrees,"Integrate oslo-config-validator

Regularly, we experience issues in Kolla Ansible deployments because we use
wrong options in OpenStack configuration files. This is because OpenStack
services ignore unknown options. We also need to keep on top of deprecated
options that may be removed in the future. Integrating
oslo-config-validator into Kolla Ansible will greatly help.

Adds a shared role to run oslo-config-validator on each service. Takes into
account that services have multiple containers, and these may also use
multiple config files. Service roles are extended to use this shared role.
Executed with the new command ``kolla-ansible validate-config``.

Change-Id: Ic10b410fc115646d96d2ce39d9618e7c46cb3fbc
"
openstack%2Fneutron-lib~master~I3d1c0ec074a5475091ee89f4f177b107fa61b264,openstack/neutron-lib,master,bug-1986969,I3d1c0ec074a5475091ee89f4f177b107fa61b264,Add enforce_policy on device_id parameter,MERGED,2022-10-13 11:44:01.000000000,2022-11-15 17:15:11.000000000,2022-11-15 17:14:11.000000000,1,0,10,861167,a09d23b2dd8fb825028e342d7341314643cd49ef,25,6,4,1,33607,Pierre Libeau,plibeau,"Add enforce_policy on device_id parameter

Add enforce_policy=True on port for device_id parameter to build a new
policy. The target is to authorize only admin to use this parameter.

Related-Bug: #1986969

Change-Id: I3d1c0ec074a5475091ee89f4f177b107fa61b264
"
openstack%2Fkeystone-tempest-plugin~master~I1772b65f1cc3830ac293a800a79d044a6ab69d65,openstack/keystone-tempest-plugin,master,add_oidc,I1772b65f1cc3830ac293a800a79d044a6ab69d65,Add keystone oidc tests,NEW,2022-11-15 16:42:14.000000000,2022-11-15 17:12:15.000000000,,314,1,15,864571,008a6f749cf2b12c47e5342b5f1e78cb96e9ecff,3,6,1,4,9914,Ade Lee,alee,"Add keystone oidc tests

This adds tests to test getting a token (scoped and unscoped) when keystone
is configured to use oidc for authentication.  The oidc provider is keycloak.
This is based in very large part on Kristi's work in [1] and [2].

This is not quite working yet, but is close enough that we can start the
review process.  This is related to and requires changes in the dependent
keystone patch to set up the gate and keycloak server.

[1] https://github.com/knikolla/devstack-plugin-oidc
[2] https://github.com/CCI-MOC/onboarding-tools

Depends-On: https://review.opendev.org/c/openstack/keystone/+/864566
Change-Id: I1772b65f1cc3830ac293a800a79d044a6ab69d65
"
openstack%2Fdevstack~stable%2Fyoga~I06811c0d9ee7ecddf84ef1c6dd6cff5129dbf4b1,openstack/devstack,stable/yoga,git-mark-safe-stable/yoga,I06811c0d9ee7ecddf84ef1c6dd6cff5129dbf4b1,Use proper sed separator for paths,NEW,2022-11-03 10:55:06.000000000,2022-11-15 17:10:48.000000000,,1,1,2,863451,7cfe94664f18329154f667146390a387d034b745,6,2,1,1,27838,Vadym Markov,vmarkov,"Use proper sed separator for paths

I941ef5ea90970a0901236afe81c551aaf24ac1d8 added a sed command that
should match and delete path values but used '/' as sed separator. This
leads to error in unstack.sh runs when the path also contains '/':

+./unstack.sh:main:188 sudo sed -i '/directory=/opt/stack/ d' /etc/gitconfig
sed: -e expression #1, char 13: unknown command: `o'

So this patch replace '/' separator with '+'.

Change-Id: I06811c0d9ee7ecddf84ef1c6dd6cff5129dbf4b1
(cherry picked from commit 7191c5e7e7edb1e2f28c0ce71294f61b409cf16b)
"
openstack%2Fopenstack-ansible-os_octavia~master~Ie7a6dd78d5af82a546e4d6a19ec5b256df8f64e6,openstack/openstack-ansible-os_octavia,master,osa/healthcheck,Ie7a6dd78d5af82a546e4d6a19ec5b256df8f64e6,Enable /healthcheck for Octavia API,NEW,2022-11-14 15:23:58.000000000,2022-11-15 16:56:06.000000000,,1,0,0,864419,d9ce0a02176c73fab6ad631e6400fd5504b6c541,4,1,2,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Enable /healthcheck for Octavia API

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/864553
Change-Id: Ie7a6dd78d5af82a546e4d6a19ec5b256df8f64e6
"
openstack%2Fkolla-ansible~master~Ie62e9220bad56262cad602ca1480e6ca65827819,openstack/kolla-ansible,master,,Ie62e9220bad56262cad602ca1480e6ca65827819,Generate ovn-chassis-mac-mappings on ovn-controller group,MERGED,2022-11-15 10:21:00.000000000,2022-11-15 16:53:16.000000000,2022-11-15 16:52:07.000000000,10,1,8,864510,8bf8656dbad3def707eca2d8ddd2c9bfed389b86,23,7,5,2,23084,Bartosz Bezak,b.bezak,"Generate ovn-chassis-mac-mappings on ovn-controller group

Previously ovn-chassis-mac-mappings [1] has been added only to
ovn-controller-compute group. However external ports are being
scheduled on network nodes, therefore we need also do that there.

Closes-Bug: 1995078

[1] https://github.com/ovn-org/ovn/blob/v22.09.0/controller/ovn-controller.8.xml#L239

Change-Id: Ie62e9220bad56262cad602ca1480e6ca65827819
"
openstack%2Fnova-specs~master~Id663685f518f66f7e5f656e519358ee4e0a6c20e,openstack/nova-specs,master,bp/policy-service-role-default,Id663685f518f66f7e5f656e519358ee4e0a6c20e,Policy service role spec,MERGED,2022-11-14 03:35:34.000000000,2022-11-15 16:50:02.000000000,2022-11-15 16:48:37.000000000,193,0,38,864379,dda24920941b62f1d2e676e6d40766690c14ac8f,16,4,3,1,8556,Ghanshyam,ghanshyam,"Policy service role spec

This spec is to add service role to nova service-to-service
APIs policies.

Partial implement blueprint policy-service-role-default

APIImpact

Change-Id: Id663685f518f66f7e5f656e519358ee4e0a6c20e
"
openstack%2Foctavia-tempest-plugin~master~Ia24d6754eabb8f3978d00c3627a0057cd652a604,openstack/octavia-tempest-plugin,master,fix/unskip-tests,Ia24d6754eabb8f3978d00c3627a0057cd652a604,Remove skip flag for tests skipped due to inactive bug,ABANDONED,2022-11-15 16:39:40.000000000,2022-11-15 16:40:59.000000000,,0,50,0,864569,40bde5b1b412d3a876001681844742357f40284d,2,0,1,2,30674,Lukas Piwowarski,lukas-piwowarski,"Remove skip flag for tests skipped due to inactive bug

Several tests are skipped because of story 2007979 [1] even though it
seems that the bug tracked by the story has already been resolved.

This patch removes the skip flag for these tests as the bug has already
been resolved.

[1] https://storyboard.openstack.org/#!/story/2007979
Change-Id: I532a1caccba42fe0dfb561ff981cc5ae124f22ad

Change-Id: Ia24d6754eabb8f3978d00c3627a0057cd652a604
"
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I0216dd555eacbcb37abd03a67fdd39f9244285db,openstack/tripleo-heat-templates,stable/wallaby,cell_creds-stable/wallaby,I0216dd555eacbcb37abd03a67fdd39f9244285db,Use python to template cell urls,NEW,2022-11-15 13:10:32.000000000,2022-11-15 16:35:33.000000000,,341,77,0,864475,f10d0c08d3643d92cde5e73ea1d8561edc8a6ab8,3,2,1,3,6926,Bogdan Dobrelya,bogdando,"Use python to template cell urls

Heat and Puppet cannot handle it properly due to url_parse()
not escaping url encoded special characters.

In future, this script could be reworked into an ansible plugin.
We need it as is to close the related multi-cells regression
sneaked in after Train for Wallaby.

This doesn't raise the bar for standalone roles migration plans
as we have already a plenty of container config scripts to be
migrated as well. Adding another one won't make things (much)
worse.

Related: rhbz#2089512
Change-Id: I0216dd555eacbcb37abd03a67fdd39f9244285db
(cherry picked from commit 9fe769c512a44de9772fd79b6a5bc12998c758eb)
"
openstack%2Freleases~master~Iafa98a07225670734f3e60240d466f55df4b44f1,openstack/releases,master,antelope-milestone-1,Iafa98a07225670734f3e60240d466f55df4b44f1,Release python-novaclient for Antelope-1 milestone,ABANDONED,2022-11-15 13:05:33.000000000,2022-11-15 16:29:03.000000000,,5,0,1,864536,431099b4601ebb67296c23f68e130826c0e3c345,4,3,1,1,28522,Herv√© Beraud,hberaud,"Release python-novaclient for Antelope-1 milestone

This is a library release for python-novaclient for the Antelope-1
milestone. This repository contains commits that have not been releases
for this cycle yet.

If the team is ready to process with this release, please leave a +1
to indicate we should go ahead with the release.

If the team needs more time for things about to merge, or if there is
some other reason a release should not be done at this time, please
leave a -1 with a comment indicating the status. Then update the patch
with the new commit hash to use once the team is ready to do the
release.

$ git log --oneline --no-merges 18.1.0..2af1d0c5
2af1d0c5 Remove unnecessary testing code
d4ea897b Switch to 2023.1 Python3 unit tests and generic template name
f50bcbc4 Update master for stable/zed
94d3445e MV 2.93 - Add support to rebuild boot volume

Signed-off-by: Herv√© Beraud <hberaud@redhat.com>
Change-Id: Iafa98a07225670734f3e60240d466f55df4b44f1
"
openstack%2Fopenstacksdk~master~I9607230edfbd70fd085e694c4ee3fe08088051db,openstack/openstacksdk,master,flavor-create/add-description,I9607230edfbd70fd085e694c4ee3fe08088051db,add flavor description to flavor_create,NEW,2022-11-15 14:53:15.000000000,2022-11-15 16:23:02.000000000,,4,0,0,864554,842133f88fd640ff72cd7854f799392f0991793a,2,1,1,2,35540,Samuel Kunkel,samuel.kunkel,"add flavor description to flavor_create

To properly describe a flavor via openstacksdk we add the parameter to
flavor create. If the value is not set we default to None.

Change-Id: I9607230edfbd70fd085e694c4ee3fe08088051db
"
openstack%2Fneutron~stable%2Fzed~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/zed,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:45:58.000000000,2022-11-15 16:14:02.000000000,2022-11-15 16:12:38.000000000,1,1,2,863464,97745f9be07bea9b5b9fdba354b95b959ef7c1d8,9,4,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Fstein~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/stein,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:48:23.000000000,2022-11-15 16:14:01.000000000,2022-11-15 16:12:27.000000000,1,1,0,863611,53169ec94fcb3fab186840467388ae1770b625c3,8,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Ftrain~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/train,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:48:13.000000000,2022-11-15 16:13:53.000000000,2022-11-15 16:12:23.000000000,1,1,0,863610,095fff92d7d4b30f1668843c4ef7b8ed8657bab5,8,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Fqueens~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/queens,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:49:26.000000000,2022-11-15 16:12:34.000000000,2022-11-15 16:12:34.000000000,1,1,0,863613,0e96e471aaf97d44f4849e8e31d22a5a501431ae,9,3,2,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Frocky~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/rocky,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:48:38.000000000,2022-11-15 16:12:30.000000000,2022-11-15 16:12:30.000000000,1,1,0,863612,0a2b443d49097c08792352a305c6634d91fb7f36,7,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron-specs~master~Ia2bd912e65d5091ca17f26b6cc4b4be3fc981324,openstack/neutron-specs,master,ovs-tx-steering,Ia2bd912e65d5091ca17f26b6cc4b4be3fc981324,Spec: Add port hints and hint ovs-tx-steering,MERGED,2022-10-20 12:36:51.000000000,2022-11-15 16:07:15.000000000,2022-11-15 16:06:12.000000000,136,0,19,862133,b7e53f107573e9ab2b11ddc0e43f6253ba39f29a,25,4,3,1,15554,Bence Romsics,ebenrom,"Spec: Add port hints and hint ovs-tx-steering

Change-Id: Ia2bd912e65d5091ca17f26b6cc4b4be3fc981324
Related-Bug: #1990842
"
openstack%2Fneutron~stable%2Fussuri~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/ussuri,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:47:55.000000000,2022-11-15 15:58:27.000000000,2022-11-15 15:57:12.000000000,1,1,0,863469,f3eb19fe36feb793f756526c4bac6a8c3b2e99ac,8,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Fvictoria~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/victoria,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:47:43.000000000,2022-11-15 15:58:25.000000000,2022-11-15 15:57:08.000000000,1,1,0,863468,ebcbe4aec7f21d4fc9ee82ecc9a31b8fe09c5529,8,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Fwallaby~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/wallaby,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:47:19.000000000,2022-11-15 15:56:09.000000000,2022-11-15 15:54:50.000000000,1,1,0,863467,b289cf20fcabf6307a538f88e118396950a0c1ed,8,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Fxena~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/xena,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:46:56.000000000,2022-11-15 15:51:11.000000000,2022-11-15 15:49:51.000000000,1,1,0,863466,88a5e8e44a6655b03bfc58117a86341b42864020,8,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fneutron~stable%2Fyoga~Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,openstack/neutron,stable/yoga,,Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc,Update documentation link for openSUSE index.,MERGED,2022-11-04 08:46:33.000000000,2022-11-15 15:50:43.000000000,2022-11-15 15:49:12.000000000,1,1,0,863465,b7daf9b1996927bfd087a518d8d00f14f24015cf,8,3,1,1,35025,renliang,renliang17,"Update documentation link for openSUSE index.

Change-Id: Ie8dd684a7b79b0a322b1f2d17fffb4d58cfe94fc
(cherry picked from commit 562e9704f8ed292889f5786d373f9f09cf87ae8a)
"
openstack%2Fpuppet-tripleo~stable%2Ftrain~Ideca344e4aa63b4d988a772f3b0a338eef01a310,openstack/puppet-tripleo,stable/train,,Ideca344e4aa63b4d988a772f3b0a338eef01a310,[Train ONLY] remove if statement from local ca check Current change will not work reliably. Removing this if statement will just cause the script to extract and update the CA trust on each renewal,MERGED,2022-11-14 14:47:10.000000000,2022-11-15 15:33:31.000000000,2022-11-15 15:33:31.000000000,0,3,1,864186,d4e49c454386e3f672ee04cad19407b56671420f,17,4,3,1,30074,David Sedgmen,dsedgmen,"[Train ONLY] remove if statement from local ca check
Current change will not work reliably.
Removing this if statement will just cause the script to
extract and update the CA trust on each renewal

Change-Id: Ideca344e4aa63b4d988a772f3b0a338eef01a310
"
openstack%2Fopenstack-helm-images~master~Icdf6f87de326de565237a4dfca3e2f4703bc920d,openstack/openstack-helm-images,master,,Icdf6f87de326de565237a4dfca3e2f4703bc920d,[WIP] Testing ubuntu jammy with libvirt,NEW,2022-11-14 21:22:14.000000000,2022-11-15 15:31:29.000000000,,32,0,0,864442,0bb86934f21757984717e950a41f2da30c79305b,6,1,3,2,34667,Dustin Spears,ds443n,"[WIP] Testing ubuntu jammy with libvirt

Testing libvirt with ubuntu jammy for cgroup-tools v2.0.

Change-Id: Icdf6f87de326de565237a4dfca3e2f4703bc920d
"
openstack%2Ftripleo-validations~master~I70765bfbe3f319fef8112ac633b1b3c38fb1488c,openstack/tripleo-validations,master,openstack-collection/default-node-count,I70765bfbe3f319fef8112ac633b1b3c38fb1488c,Refactoring default-node-count validation to use openstack-collection modules,NEW,2022-11-14 15:53:58.000000000,2022-11-15 15:13:18.000000000,,42,24,2,864421,c834137b3d0d84e6b626e9a334b23d9bdc26e2c1,6,1,2,3,32926,Jiri Podivin,jpodivin,"Refactoring default-node-count validation to use openstack-collection modules

Hypervisor statistics check has been dropped entirely, as it relies on
API deprecated by I515e484ade6c6455f82a3067940a418a0d7d965a[0]

[0] https://opendev.org/openstack/nova/commit/1f67ce24961a156dba56cacc75cbdd0800a7feee

Depends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/862150

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I70765bfbe3f319fef8112ac633b1b3c38fb1488c
"
openstack%2Fpython-barbicanclient~master~I6e06c2a4da8c39fe0dad32aec95e75ac2307f379,openstack/python-barbicanclient,master,secret-consumers,I6e06c2a4da8c39fe0dad32aec95e75ac2307f379,Remove test_cafile_certfile_keyfile_kwargs_set_correctly,NEW,2022-11-15 14:38:50.000000000,2022-11-15 15:04:12.000000000,,0,25,0,864552,2e5846aacdcf946dcaafbd13da0a84ae636c2bbf,2,1,1,1,34120,Andre Aranha,afariasa,"Remove test_cafile_certfile_keyfile_kwargs_set_correctly

This test needs to mock many calls to keystone, so it makes
more sense to have it as a functional test instead of a unit test.

Change-Id: I6e06c2a4da8c39fe0dad32aec95e75ac2307f379
"
openstack%2Fopenstack-ansible~stable%2Fxena~I2a2766d64cea45a353ed95d66cc2b8fd17ce819b,openstack/openstack-ansible,stable/xena,bump_osa,I2a2766d64cea45a353ed95d66cc2b8fd17ce819b,Bump OpenStack-Ansible Xena,MERGED,2022-11-14 17:02:48.000000000,2022-11-15 15:02:56.000000000,2022-11-15 15:01:34.000000000,46,35,0,864431,18f940e16269513baf7f522b73b2cda32785f0e8,9,3,1,6,28619,Dmitriy Rabotyagov,noonedeadpunk,"Bump OpenStack-Ansible Xena

Change-Id: I2a2766d64cea45a353ed95d66cc2b8fd17ce819b
"
openstack%2Fneutron~stable%2Fyoga~Ib8d193d6f84182a9f1d905e6b5c5a35b4435e003,openstack/neutron,stable/yoga,,Ib8d193d6f84182a9f1d905e6b5c5a35b4435e003,Check subnet overlapping after add router interface,NEW,2022-11-15 13:28:45.000000000,2022-11-15 14:56:15.000000000,,246,30,0,864542,8ed716a0cceac0893acf853ddfbc077d42a4e811,3,1,1,3,34451,Fernando Royo,froyo,"Check subnet overlapping after add router interface

When simultaneous attempts are made to add an interface
to the same router including overlapping networks in cidrs,
both attempts are successful. There is a check to avoid this
overlap but is performed when creating the network interface
and it is done over the ports already attached to the router,
so at this moment the check is not able to detect the
overlapping. Furthermore, the create_port operation over the
ML2 plugin  must be executed in isolated transactions, so
trying to control the execution context or adding additional
steps to the transaction is not feasible.

This patch checks once the RouterPort is created on the
neutron database if there is more than one overlapping port,
triggering in that case the exception that will remove the
the culprit of overlapping.

Conflicts:
      neutron/db/l3_db.py
(manually cherry picked from commit 1abb77d7a63cde2aa9640351f663870c14430919)

Closes-Bug: #1987666
(cherry picked from commit 1abb77d7a63cde2aa9640351f663870c14430919)
Change-Id: Ib8d193d6f84182a9f1d905e6b5c5a35b4435e003
"
openstack%2Freleases~master~I6a5057c97d428ef96c75243717b0c0ca66343cea,openstack/releases,master,u-v-last,I6a5057c97d428ef96c75243717b0c0ca66343cea,[ironic-tempest-plugin] Tag ussuri-last & victoria-last,MERGED,2022-11-13 00:24:56.000000000,2022-11-15 14:25:34.000000000,2022-11-15 14:25:34.000000000,8,0,3,864357,aee6fc67faf5f170f85c324663018447a7fba6ed,11,7,1,2,8556,Ghanshyam,ghanshyam,"[ironic-tempest-plugin] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches[3].

We taged ussuri-last & victoria-last for tempest[4] but forgot to do
it for the tempest plugins. Using the tag 2.4.0 hash which is compatible
for tempest ussuri-last and victoria-last.

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: I6a5057c97d428ef96c75243717b0c0ca66343cea
"
openstack%2Fnova~stable%2Ftrain~Ibc4bc7edf1c8d1e841c72c9188a0a62836e9f153,openstack/nova,stable/train,bug/1628606,Ibc4bc7edf1c8d1e841c72c9188a0a62836e9f153,[compute] always set instance.host in post_livemigration,NEW,2022-11-08 19:05:55.000000000,2022-11-15 14:05:27.000000000,,61,5,3,864055,926ed0fbc5e8113136575ea8290cf1e4353e441a,12,2,5,3,34860,Amit Uniyal,auniyal,"[compute] always set instance.host in post_livemigration

This change add a new _post_live_migration_update_host
function that wraps _post_live_migration and just ensures
that if we exit due to an exception instance.host is set
to the destination host.

when we are in _post_live_migration the guest has already
started running on the destination host and we cannot revert.
Sometimes admins or users will hard reboot the instance expecting
that to fix everything when the vm enters the error state after
the failed migrations. Previously this would end up recreating the
instance on the source node leading to possible data corruption if
the instance used shared storage.

Change-Id: Ibc4bc7edf1c8d1e841c72c9188a0a62836e9f153
Partial-Bug: #1628606
(cherry picked from commit 8449b7caefa4a5c0728e11380a088525f15ad6f5)
(cherry picked from commit 643b0c7d35752b214eee19b8d7298a19a8493f6b)
(cherry picked from commit 17ae907569e45cc0f5c7da9511bb668a877b7b2e)
(cherry picked from commit 15502ddedc23e6591ace4e73fa8ce5b18b5644b0)
(cherry picked from commit 43c0e40d288960760a6eaad05cb9670e01ef40d0)
(cherry picked from commit 0ac64bba8b7aba2fb358e00e970e88b32d26ef7e)
(cherry picked from commit aa9b2bb30c8e00874ade0c33cc69ccaf57577210)
"
openstack%2Fnova~stable%2Ftrain~I48dbe0aae8a3943fdde69cda1bd663d70ea0eb19,openstack/nova,stable/train,bug/1628606,I48dbe0aae8a3943fdde69cda1bd663d70ea0eb19,Adds a repoducer for post live migration fail,NEW,2022-11-08 15:42:29.000000000,2022-11-15 14:05:06.000000000,,273,197,21,863806,9ffce2897ae9498bde9d31916f98ed1e1ed9aa30,15,2,6,3,34860,Amit Uniyal,auniyal,"Adds a repoducer for post live migration fail

Adds a regression test or repoducer for post live migration
fail at destination, the possible casue can be fail to get
instance network info or  block device info

Conflicts:
	nova/tests/functional/integrated_helpers.py
	nova/tests/functional/regressions/test_bug_1628606.py
	nova/compute/manager.py

NOTE(auniyal): conflicts are due to the following changes that are not
in Train
	* I475b18272a5791aaa501ec5da1818ba22d8ec1f2 (functional: Change order of two classes)
	* I8c96b337f32148f8f5899c9b87af331b1fa41424 (functional: Remove 'api' parameter)
	* Id0e8b1c32600d53382e5ac938e403258c80221a0 (Refactor volume connection cleanup out of _post_live_migration)

Related-Bug: #1628606
Change-Id: I48dbe0aae8a3943fdde69cda1bd663d70ea0eb19
(cherry picked from commit a20baeca1f5ebb0dfe9607335a6986e9ed0e1725)
(cherry picked from commit 74a618a8118642c9fd32c4e0d502d12ac826affe)
(cherry picked from commit 71e5a1dbcc22aeaa798d3d06ce392cf73364b8db)
(cherry picked from commit 5efcc3f695e02d61cb8b881e009308c2fef3aa58)
(cherry picked from commit ed1ea71489b60c0f95d76ab05f554cd046c60bac)
(cherry picked from commit 6dda4f7ca3f25a11cd0178352ad24fe2e8b74785)
(cherry picked from commit b9669d7882db54a7512a18d6b0ee1b5a1ba8c584)
"
openstack%2Fneutron~master~I147dbdb80baa86cafa505c50a67d37be18db1bc9,openstack/neutron,master,bug/1996421,I147dbdb80baa86cafa505c50a67d37be18db1bc9,List ports belongs to current project for non-admin users.,NEW,2022-11-11 18:44:49.000000000,2022-11-15 13:58:58.000000000,,8,4,5,864303,abf9b63deb1a125c48d604b6ab3d3616bc1abd75,7,6,1,2,35507,Kiran Pawar,kpawar,"List ports belongs to current project for non-admin users.

When a network is shared between multiple projects, ""openstack port
list"" command shows ports from all projects which have access to that
network. This is a problem because each port actually has a
'project_id' property, and the port cannot be used for any instance
outside of that project. When a user attempts to start an instance
with a port from a different project, it fails with:
nova.exception.PortNotUsable

User can use --project-id=""xxxx"" as option to ""openstack port list""
command to get desired result. But this leads to updating each neutron
client and so this should be fixed in neutron at least for non-admin
users.

Closes-bug: #1996421
Change-Id: I147dbdb80baa86cafa505c50a67d37be18db1bc9
"
openstack%2Fnova-specs~master~If04931c961b71c2f5420a99b7d1a4700a1c3ef04,openstack/nova-specs,master,856164,If04931c961b71c2f5420a99b7d1a4700a1c3ef04,Clarify client changes in rebuild spec,MERGED,2022-09-06 16:16:57.000000000,2022-11-15 13:57:00.000000000,2022-11-15 13:55:50.000000000,7,6,8,856164,f7af7da1bce839fbf3f19957fa00ad91334b2dc1,12,3,2,1,27615,Rajat Dhasmana,whoami-rajat,"Clarify client changes in rebuild spec

Clarify that the changes mentioned in the volume backed instance
rebuild spec are for OpenStackClient and not novaclient.

Change-Id: If04931c961b71c2f5420a99b7d1a4700a1c3ef04
"
openstack%2Fansible-collections-openstack~stable%2F1.0.0~I5173717ecbc3c148622ed8f0dc60d23cbf70e625,openstack/ansible-collections-openstack,stable/1.0.0,fix_baremetal_node_uuid,I5173717ecbc3c148622ed8f0dc60d23cbf70e625,Fix wrong reference to Ironic Node property,NEW,2022-11-15 08:31:17.000000000,2022-11-15 13:48:46.000000000,,15,15,1,864502,d6fc702f0df6092f5b7abe1cb254084325f48e77,4,1,1,5,30566,Vanou Ishii,vanou,"Fix wrong reference to Ironic Node property

This commit fixes wrong reference to Ironic Node property.
Ansible module related to Ironic operation refers Node.uuid or
Node['uuid']. Here Node is python class defined at
openstack/baremetal/v1/node.py of openstacksdk.

However Node doesn't have property 'uuid' but 'id'. So this causes
error when we run ansible module related to Ironic.

Story: 2010427
Task: 46828
Change-Id: I5173717ecbc3c148622ed8f0dc60d23cbf70e625
"
openstack%2Fpython-openstackclient~master~I3ded9982769b4568b6dcfc49bc31ba67a6227839,openstack/python-openstackclient,master,force-cleanup,I3ded9982769b4568b6dcfc49bc31ba67a6227839,Add force option to project cleanup,NEW,2022-11-15 07:58:58.000000000,2022-11-15 13:25:48.000000000,,11,5,1,864497,099031c4c2be4e0f1a6efc89def1f4224bba2f6f,3,2,1,1,13252,Dr. Jens Harbott,jrosenboom,"Add force option to project cleanup

Sometimes it is useful to be able to use the project cleanup function in
scripts and having to add ""echo y | openstack"" isn't really nice.

Signed-off-by: Dr. Jens Harbott <harbott@osism.tech>
Change-Id: I3ded9982769b4568b6dcfc49bc31ba67a6227839
"
openstack%2Fnova-specs~master~I72fa3f605cfcf7c3dd0ff4c791be7df8f19f058b,openstack/nova-specs,master,bp/stable-compute-uuids,I72fa3f605cfcf7c3dd0ff4c791be7df8f19f058b,Robustify Compute Node Hostnames backlog spec,MERGED,2022-08-19 18:58:21.000000000,2022-11-15 13:25:05.000000000,2022-11-15 13:23:20.000000000,322,1,8,853837,3256eda85f6de908702482f2ef65ad15c58ea867,20,4,6,2,4393,Dan Smith,danms,"Robustify Compute Node Hostnames backlog spec

This is mostly a brain-dump spec on the topic of compute hosts and
how fragile they are in terms of hostname handling. There has long
been a requirement that computes can NEVER change hostnames, and we
have few tools to even detect the problem before we corrupt the
database if it happens.

Here I have documented some of the things we could do to make that
more robust, should we choose to do so. This is based on a recent
near-catastrophe and thus reflects things that would have avoided
pain in a real scenario.

Per discussion at the PTG, I am adding this as a backlog spec, to be
an overarching guide for multiple smaller specs to provide more
detailed progress towards the goals described here.

Change-Id: I72fa3f605cfcf7c3dd0ff4c791be7df8f19f058b
"
openstack%2Fcinder~master~I1519b23a44ca8e86c2a969353f275a711d51454f,openstack/cinder,master,bug/1982078,I1519b23a44ca8e86c2a969353f275a711d51454f,[SVf]: Incorrect portset value during driver intialization,MERGED,2022-07-19 10:03:37.000000000,2022-11-15 13:22:26.000000000,2022-09-15 15:14:07.000000000,10,1,15,850310,374efd15798beefbf95754d7950e782a53f88553,39,8,1,2,32074,Harsh Ailani,haailani,"[SVf]: Incorrect portset value during driver intialization

[Spectrum Virtualize family] During initialization
by default taking the portset value is set to portset0,
even when a different portset is defined in the cinder.conf

During initialization, if the portset is not defined in cinder.conf,
only then it should pick portset0. Otherwise it should pick the value
from cinder.conf

Closes-Bug: #1982078
Change-Id: I1519b23a44ca8e86c2a969353f275a711d51454f
"
openstack%2Freleases~master~Ibcdf244c5c32798d014d22a6dcf6fce600629a06,openstack/releases,master,antelope-milestone-1,Ibcdf244c5c32798d014d22a6dcf6fce600629a06,Release metalsmith for Antelope-1 milestone,NEW,2022-11-15 12:56:29.000000000,2022-11-15 13:21:12.000000000,,5,0,0,864523,50d1094f44e887f3d6b2e7c7aba16e5fdb355d7e,2,5,1,1,28522,Herv√© Beraud,hberaud,"Release metalsmith for Antelope-1 milestone

This is a library release for metalsmith for the Antelope-1
milestone. This repository contains commits that have not been releases
for this cycle yet.

If the team is ready to process with this release, please leave a +1
to indicate we should go ahead with the release.

If the team needs more time for things about to merge, or if there is
some other reason a release should not be done at this time, please
leave a -1 with a comment indicating the status. Then update the patch
with the new commit hash to use once the team is ready to do the
release.

$ git log --oneline --no-merges 1.8.0..f988377
f988377 Revert ""CI: Force ansible to version 5""
ee008f7 Allow to use Ansible OpenStack Col. 1.x.x with openstacksdk >=0.99.0
523cc1d CI: Force ansible to version 5
cc8fe24 Add Python3 antelope unit tests
951e643 Update master for stable/zed

Signed-off-by: Herv√© Beraud <hberaud@redhat.com>
Change-Id: Ibcdf244c5c32798d014d22a6dcf6fce600629a06
"
openstack%2Freleases~master~I82f0addd4189967668e116dc4a300fb71b8aeb32,openstack/releases,master,antelope-milestone-1,I82f0addd4189967668e116dc4a300fb71b8aeb32,Release sushy for Antelope-1 milestone,NEW,2022-11-15 13:08:15.000000000,2022-11-15 13:20:26.000000000,,5,0,0,864538,62c91c54abd37b9a69e006ea6d2477088c2aec05,2,5,1,1,28522,Herv√© Beraud,hberaud,"Release sushy for Antelope-1 milestone

This is a library release for sushy for the Antelope-1
milestone. This repository contains commits that have not been releases
for this cycle yet.

If the team is ready to process with this release, please leave a +1
to indicate we should go ahead with the release.

If the team needs more time for things about to merge, or if there is
some other reason a release should not be done at this time, please
leave a -1 with a comment indicating the status. Then update the patch
with the new commit hash to use once the team is ready to do the
release.

$ git log --oneline --no-merges 4.3.0..56efdee
56efdee Make server connection retries configurable
67185bf Increase server side retries
3e69fce Improve resiliency of eTag handling
1c0a35a Update release versions for yoga and zed
f00261f Fix misuse of assertTrue
19a0671 Add Python3 antelope unit tests
bf82e0b Update master for stable/zed
b619196 Fix misuse of assertIsNone

Signed-off-by: Herv√© Beraud <hberaud@redhat.com>
Change-Id: I82f0addd4189967668e116dc4a300fb71b8aeb32
"
openstack%2Fkayobe~master~I2f4f02dbd6834ffd0fa5189b818bdc91a5c168a2,openstack/kayobe,master,nova-compute-release-file,I2f4f02dbd6834ffd0fa5189b818bdc91a5c168a2,Support copying nova_compute Kolla configuration,NEW,2022-11-15 12:22:30.000000000,2022-11-15 13:20:07.000000000,,11,1,0,864518,59aaec13f16163b438963ff72f2f0edc1ac76c74,2,1,1,2,15197,Pierre Riteau,priteau,"Support copying nova_compute Kolla configuration

This folder can be used to store a Nova release file [1] specific to
nova_compute containers.

[1] https://opendev.org/openstack/nova/src/branch/master/etc/nova/release.sample

Change-Id: I2f4f02dbd6834ffd0fa5189b818bdc91a5c168a2
"
openstack%2Foctavia~master~Ie5fb25e292461baca38499091e8f9b9a53e3ddcd,openstack/octavia,master,fix_pool_create_single_lb_create_call,Ie5fb25e292461baca38499091e8f9b9a53e3ddcd,Fix pool creation with single LB create call,NEW,2022-11-10 13:51:07.000000000,2022-11-15 13:17:07.000000000,,200,21,1,864204,9a0b61eaab0f4ea9a55802dce2b74fa78bc7b72f,15,4,7,16,31664,Omer Schwartz,oschwart,"Fix pool creation with single LB create call

So far, creating a populated LB (or an LB tree) with non attached pools,
left the pools on PENDING_CREATE provisioning_state.

This patch adds the option of marking non attached pools to be active on
the MarkLBActiveInDB task.

Story 2010426
Task 46823

Change-Id: Ie5fb25e292461baca38499091e8f9b9a53e3ddcd
"
openstack%2Fopenstack-ansible-os_ironic~master~I656abb90827486bbb69bf0ccd7e990fd680f2c51,openstack/openstack-ansible-os_ironic,master,osa-ironic-tidy,I656abb90827486bbb69bf0ccd7e990fd680f2c51,Allow extra plugin installation ironic/inspector venvs,NEW,2022-11-15 10:31:44.000000000,2022-11-15 13:04:52.000000000,,8,0,0,864511,8413cac6d265b43e04ac50ca3e8bbbba2d7f507d,3,1,1,2,25023,Jonathan Rosser,jrosser,"Allow extra plugin installation ironic/inspector venvs

Ironic and inspector are extensible via the stevedore framework.
In order to add extra plugins to the ironic and inspector venvs
extra variables are needed to supply user defined lists of python
packages to install.

Change-Id: I656abb90827486bbb69bf0ccd7e990fd680f2c51
"
openstack%2Freleases~master~I40831bdc154672d9aa3bac0cbd4414788755348e,openstack/releases,master,zed-trailing-branch-cut,I40831bdc154672d9aa3bac0cbd4414788755348e,[kolla] Release kayobe for Zed and cut branch,NEW,2022-11-15 09:45:30.000000000,2022-11-15 13:03:05.000000000,,12,0,1,864506,9350c299542c2c53209cd5638e26f6762f38bb35,4,4,2,1,28522,Herv√© Beraud,hberaud,"[kolla] Release kayobe for Zed and cut branch

This release patch is to ensure, that trailing typed projects have been
branched for Zed. The deadline for these deliverables is December 14.

Please +1 if the team is ready for us to proceed with this or update/-1
if something should be changed.

Change-Id: I40831bdc154672d9aa3bac0cbd4414788755348e
"
openstack%2Freleases~master~Ic63a7eae973f974bae8b4db1d42d2bc7596c9d75,openstack/releases,master,zed-trailing-branch-cut,Ic63a7eae973f974bae8b4db1d42d2bc7596c9d75,[kolla] Release kolla for Zed and cut branch,NEW,2022-11-15 09:50:05.000000000,2022-11-15 13:02:44.000000000,,8,0,1,864508,b794d6b9106c480dd0590066afcb75bc02e1fc31,3,4,1,1,28522,Herv√© Beraud,hberaud,"[kolla] Release kolla for Zed and cut branch

This release patch is to ensure, that trailing typed projects have been
branched for Zed. The deadline for these deliverables is December 14.

Please +1 if the team is ready for us to proceed with this or update/-1
if something should be changed.

Change-Id: Ic63a7eae973f974bae8b4db1d42d2bc7596c9d75
"
openstack%2Freleases~master~Ife2e37df0fc70500af7394dfdfd543579a89019e,openstack/releases,master,zed-trailing-branch-cut,Ife2e37df0fc70500af7394dfdfd543579a89019e,[kolla] Release ansible-collection-kolla for Zed and cut branch,NEW,2022-11-15 09:43:13.000000000,2022-11-15 13:02:23.000000000,,8,0,1,864505,06b912e3387af8a990de8e46fb8bcf1ebefcebe3,3,4,1,1,28522,Herv√© Beraud,hberaud,"[kolla] Release ansible-collection-kolla for Zed and cut branch

This release patch is to ensure, that trailing typed projects have been
branched for Zed. The deadline for these deliverables is December 14.

Please +1 if the team is ready for us to proceed with this or update/-1
if something should be changed.

Change-Id: Ife2e37df0fc70500af7394dfdfd543579a89019e
"
openstack%2Freleases~master~If94dbc5e3a7883af9e7a6a91b700d4c968b7bd84,openstack/releases,master,zed-trailing-branch-cut,If94dbc5e3a7883af9e7a6a91b700d4c968b7bd84,[kolla] Release kolla-ansible for Zed and cut branch,NEW,2022-11-15 09:48:16.000000000,2022-11-15 13:02:10.000000000,,8,0,1,864507,5fb92d4081ed14d6ef3cfa73717798aa8f6e77e7,3,4,1,1,28522,Herv√© Beraud,hberaud,"[kolla] Release kolla-ansible for Zed and cut branch

This release patch is to ensure, that trailing typed projects have been
branched for Zed. The deadline for these deliverables is December 14.

Please +1 if the team is ready for us to proceed with this or update/-1
if something should be changed.

Change-Id: If94dbc5e3a7883af9e7a6a91b700d4c968b7bd84
"
openstack%2Fopenstack-ansible~stable%2Fyoga~I31dbf51bfb1ff0a02a781650f4e50f616696984b,openstack/openstack-ansible,stable/yoga,bump_osa,I31dbf51bfb1ff0a02a781650f4e50f616696984b,Bump OpenStack-Ansible Yoga,MERGED,2022-11-14 16:51:38.000000000,2022-11-15 13:00:32.000000000,2022-11-15 12:58:46.000000000,38,29,0,864428,205bfa54a87838019f6be6034825b950e1fabd7c,9,3,1,6,28619,Dmitriy Rabotyagov,noonedeadpunk,"Bump OpenStack-Ansible Yoga

Change-Id: I31dbf51bfb1ff0a02a781650f4e50f616696984b
"
openstack%2Fopenstack-ansible~stable%2Fwallaby~I3729d27b71025e896b7745de6d835d1067df365b,openstack/openstack-ansible,stable/wallaby,bump_osa,I3729d27b71025e896b7745de6d835d1067df365b,Set Wallaby to stable branch after EM-ing,NEW,2022-11-11 14:01:02.000000000,2022-11-15 12:58:50.000000000,,106,106,0,864268,00eef972156d2944ee8cc3848a62496211bf1d5f,8,3,2,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"Set Wallaby to stable branch after EM-ing

Change-Id: I3729d27b71025e896b7745de6d835d1067df365b
"
openstack%2Fcinder~master~I0e1ce867c76fcf4fb5784550c1f1f051498176a4,openstack/cinder,master,bug/1989280,I0e1ce867c76fcf4fb5784550c1f1f051498176a4,Fix wrong assertion methods,NEW,2022-09-11 14:24:42.000000000,2022-11-15 12:49:25.000000000,,51,46,4,856971,af05cba04547bfdbd5942ca9dcad38cab933f3ad,78,2,4,10,7634,Takashi Natsume,natsumet,"Fix wrong assertion methods

Change-Id: I0e1ce867c76fcf4fb5784550c1f1f051498176a4
Closes-Bug: 1989280
Signed-off-by: Takashi Natsume <takanattie@gmail.com>
"
openstack%2Fdevstack~master~I305ea626a4b622c5534d523f4b619832f9d35f8d,openstack/devstack,master,secure-rbac,I305ea626a4b622c5534d523f4b619832f9d35f8d,Add RBAC scope and new defaults setting support for Nova & Tempest,MERGED,2022-10-20 01:18:08.000000000,2022-11-15 12:18:48.000000000,2022-11-15 12:17:46.000000000,14,0,10,861930,857f4993f35fbdc83771b9632d3525766de194a1,32,4,5,2,8556,Ghanshyam,ghanshyam,"Add RBAC scope and new defaults setting support for Nova & Tempest

Nova is ready with the scope and new defaults as per the new
RBAC design. Adding devstack flag to enable the scope checks
and new defaults enforcement in nova side.

Change-Id: I305ea626a4b622c5534d523f4b619832f9d35f8d
"
openstack%2Fkolla-ansible~master~Iaa6bfb012ae847f5f6aa0a1fc1c27970ac265f93,openstack/kolla-ansible,master,,Iaa6bfb012ae847f5f6aa0a1fc1c27970ac265f93,Adds a wrapper script to run ovs-vsctl commands in the container,NEW,2022-11-03 16:59:14.000000000,2022-11-15 12:11:40.000000000,,41,0,0,863543,a82443481e17edecda728f8698f8b401ec910546,11,2,4,5,28048,Will Szumski,jovial,"Adds a wrapper script to run ovs-vsctl commands in the container

Libvirt needs to be able to plug ports into openvswitch bridges.
It does this using the ovs-vsctl command, which it searches for
in $PATH[1, 2]. This change will optionally install a wrapper
script that executes the ovs-vsctl commands in the context of the
openvswitchd container. This is useful when running libvirt on the
host whilst still running openvswitch in a container. The advantage
of this method over install the packages on the host is that it
ensures client compatability with the daemon. The default is set
to false as the wrapper could overwrite ovs-vsctl installed on the
host.

[1] https://github.com/libvirt/libvirt/blob/ee51ab86c2e52b6ff1b17a4c7ad11439fd610c9e/src/util/virnetdevopenvswitch.c#L59
[2] https://github.com/libvirt/libvirt/blob/a89b17c2a75cfbaeb9e430f88e0f8a7475eb4f54/docs/kbase/internals/command.rst#id3

Closes-Bug: #1995409
Change-Id: Iaa6bfb012ae847f5f6aa0a1fc1c27970ac265f93
"
openstack%2Fnova-specs~master~Iaa6e23cc5299a4a8f876fefdbff95fb05d19e94a,openstack/nova-specs,master,bp/nova-support-spice-compression-algorithm,Iaa6e23cc5299a4a8f876fefdbff95fb05d19e94a,Add configuration options to set SPICE compression settings,NEW,2022-07-12 10:08:52.000000000,2022-11-15 12:03:03.000000000,,207,0,54,849488,2b200d2bc47d0e4718735e96261b38a874c57e6a,51,8,5,1,34534,Manuel Bentele,bahnwaerter,"Add configuration options to set SPICE compression settings

blueprint: nova-support-spice-compression-algorithm
Change-Id: Iaa6e23cc5299a4a8f876fefdbff95fb05d19e94a
"
openstack%2Fopenstack-ansible~master~I2c72bf6324b443c6b01a7f3142ebc90768c1c9c8,openstack/openstack-ansible,master,,I2c72bf6324b443c6b01a7f3142ebc90768c1c9c8,Drop upgrade step for Octavia certificates,NEW,2022-11-13 15:21:53.000000000,2022-11-15 11:56:23.000000000,,0,47,0,864377,d74b29bde5180cc4197f8c5fca28df7110c4b8b8,6,3,1,3,28619,Dmitriy Rabotyagov,noonedeadpunk,"Drop upgrade step for Octavia certificates

With migration to PKI role for Octavia in Yoga, we added upgrade
playbook to define certificates for users that are upgrading deployment.

With SLURP releases, we either need to drop this upgrade step now or
carry on until Antelope.

Change-Id: I2c72bf6324b443c6b01a7f3142ebc90768c1c9c8
"
openstack%2Fcharm-trilio-wlm~master~Iac582dc8962d8f5985c7263c3dc994c7dbb9365d,openstack/charm-trilio-wlm,master,add-buildlock-4.2,Iac582dc8962d8f5985c7263c3dc994c7dbb9365d,Pin artifacts for repeatable builds,ABANDONED,2022-11-15 11:52:52.000000000,2022-11-15 11:53:12.000000000,,230,0,0,864516,c5751a4fac1b44219c26b4139adbe401bd963c6e,2,0,1,1,12549,gnuoy,gnuoy,"Pin artifacts for repeatable builds

Change-Id: Iac582dc8962d8f5985c7263c3dc994c7dbb9365d
"
openstack%2Fsushy~stable%2Fwallaby~I371e4a2d294a3a87eddb230f13bca713e304f948,openstack/sushy,stable/wallaby,increase-retries-stable/wallaby,I371e4a2d294a3a87eddb230f13bca713e304f948,Increase server side retries,MERGED,2022-11-09 10:07:37.000000000,2022-11-15 11:48:57.000000000,2022-11-15 11:47:56.000000000,9,3,0,864039,aad741a9133b5e33363da6ee10b50a5a246f0c78,11,4,1,3,23851,Riccardo Pittau,elfosardo,"Increase server side retries

This is to take into account possible increases in time gap between
operations from recent firmware versions, for example in Dell idrac
series 5.x where the time gap increased to almost 20 seconds from
the 10 seconds of the 4.x series, and avoid timeouts.

Change-Id: I371e4a2d294a3a87eddb230f13bca713e304f948
(cherry picked from commit 67185bf4af21c2b844b0d8824036e73c96e344d0)
"
openstack%2Fcharm-trilio-data-mover~stable%2F4.2~Ib141838812d7dcb644086fac1735bf4deee37a73,openstack/charm-trilio-data-mover,stable/4.2,binary-builds-4.2,Ib141838812d7dcb644086fac1735bf4deee37a73,Switch to binary builds,MERGED,2022-11-14 13:33:54.000000000,2022-11-15 11:37:46.000000000,2022-11-15 11:37:46.000000000,96,102,3,864411,1fe1b4282b4ac02714a7b0036699315751a38d58,12,3,1,13,12549,gnuoy,gnuoy,"Switch to binary builds

Change-Id: I56c6a5371c191f110f24c0dbdeec7c3f8730792c

(cherry picked from commit 92b3c383aee810664a5ebb7bd882350af0485ca4)
(cherry picked from commit a27764024b27c61607a7b998c583d2be67896130)
Change-Id: Ib141838812d7dcb644086fac1735bf4deee37a73
"
openstack%2Fsushy~stable%2Fxena~I371e4a2d294a3a87eddb230f13bca713e304f948,openstack/sushy,stable/xena,increase-retries-stable/xena,I371e4a2d294a3a87eddb230f13bca713e304f948,Increase server side retries,MERGED,2022-11-09 10:07:53.000000000,2022-11-15 11:34:36.000000000,2022-11-15 11:33:33.000000000,9,3,0,864040,b11ceabc413e579597e328acf787df3517512166,11,4,1,3,23851,Riccardo Pittau,elfosardo,"Increase server side retries

This is to take into account possible increases in time gap between
operations from recent firmware versions, for example in Dell idrac
series 5.x where the time gap increased to almost 20 seconds from
the 10 seconds of the 4.x series, and avoid timeouts.

Change-Id: I371e4a2d294a3a87eddb230f13bca713e304f948
(cherry picked from commit 67185bf4af21c2b844b0d8824036e73c96e344d0)
"
openstack%2Fsushy~stable%2Fyoga~I371e4a2d294a3a87eddb230f13bca713e304f948,openstack/sushy,stable/yoga,increase-retries-stable/yoga,I371e4a2d294a3a87eddb230f13bca713e304f948,Increase server side retries,MERGED,2022-11-09 10:07:19.000000000,2022-11-15 11:34:21.000000000,2022-11-15 11:33:20.000000000,9,3,0,864038,2414a59ef2e5b9f9f5cd42707d807019d5be8ebc,11,4,1,3,23851,Riccardo Pittau,elfosardo,"Increase server side retries

This is to take into account possible increases in time gap between
operations from recent firmware versions, for example in Dell idrac
series 5.x where the time gap increased to almost 20 seconds from
the 10 seconds of the 4.x series, and avoid timeouts.

Change-Id: I371e4a2d294a3a87eddb230f13bca713e304f948
(cherry picked from commit 67185bf4af21c2b844b0d8824036e73c96e344d0)
"
openstack%2Fcharm-trilio-wlm~stable%2F4.2~I4078da1276d310699c449bbd1bcb94bfe184aaaa,openstack/charm-trilio-wlm,stable/4.2,binary-builds-4.2,I4078da1276d310699c449bbd1bcb94bfe184aaaa,Switch to binary builds,MERGED,2022-11-14 17:02:34.000000000,2022-11-15 11:32:42.000000000,2022-11-15 11:32:42.000000000,93,99,2,864430,63e5c4b481efbd8749c82dbaaa0ba7a21a5b7666,11,3,1,13,12549,gnuoy,gnuoy,"Switch to binary builds

Change-Id: I7cce4e9c1f7764dd877d9118f3061fa0116a2f23

(cherry picked from commit 4928917afd1b94ebdf963bd660c7962c3700e7aa)
(cherry picked from commit afaf44089bbefba816c1a22a8b66694a997a8272)
Change-Id: I4078da1276d310699c449bbd1bcb94bfe184aaaa
"
openstack%2Fcharm-trilio-wlm~stable%2F4.2~I03e4ef8cb8db343b48abfe9eb2a2f876d363fe62,openstack/charm-trilio-wlm,stable/4.2,cut-4.2,I03e4ef8cb8db343b48abfe9eb2a2f876d363fe62,Update to target 4.2,MERGED,2022-10-20 17:04:37.000000000,2022-11-15 11:27:16.000000000,2022-11-15 11:27:16.000000000,8,7,3,862169,ed1d35c6c8f14cecf0371d45a13ff03588e5ab50,13,3,1,8,12549,gnuoy,gnuoy,"Update to target 4.2

Change-Id: I03e4ef8cb8db343b48abfe9eb2a2f876d363fe62
"
openstack%2Fcharm-trilio-horizon-plugin~stable%2F4.2~I975fb54826e23ba6a71dfd7f4dadbf3f743ffb6b,openstack/charm-trilio-horizon-plugin,stable/4.2,binary-builds-4.2,I975fb54826e23ba6a71dfd7f4dadbf3f743ffb6b,Switch to binary builds,MERGED,2022-11-14 13:29:48.000000000,2022-11-15 11:26:09.000000000,2022-11-15 11:26:09.000000000,90,93,4,864410,430af99d833d73f0ff3e96008ab2193013d2a8fc,14,3,1,12,12549,gnuoy,gnuoy,"Switch to binary builds

Change-Id: Ic27cb7683f344ef8c24763bacee44b1ed5ad0136

(cherry picked from commit 6e14aa25b130f53b73abee0ec4fa44257195b2e8)
(cherry picked from commit 79cd9bf18201546c7d4e4bb230758f44637884dc)
Change-Id: I975fb54826e23ba6a71dfd7f4dadbf3f743ffb6b
"
openstack%2Fcharm-trilio-horizon-plugin~stable%2F4.2~If1173b8d9591ca69d77d0f573226aa9d44ea550c,openstack/charm-trilio-horizon-plugin,stable/4.2,cut-4.2,If1173b8d9591ca69d77d0f573226aa9d44ea550c,Update to target 4.2,MERGED,2022-10-20 17:04:43.000000000,2022-11-15 11:22:36.000000000,2022-11-15 11:22:36.000000000,7,6,3,862170,a2a8457554382ef23be3050db39a2e1d546e14b4,12,3,1,7,12549,gnuoy,gnuoy,"Update to target 4.2

Change-Id: If1173b8d9591ca69d77d0f573226aa9d44ea550c
"
openstack%2Fcharm-trilio-data-mover~stable%2F4.2~I06dd071b5f3dc0cd90290f3b62786822ca7da1de,openstack/charm-trilio-data-mover,stable/4.2,cut-4.2,I06dd071b5f3dc0cd90290f3b62786822ca7da1de,Update to target 4.2,MERGED,2022-11-11 14:50:19.000000000,2022-11-15 11:22:30.000000000,2022-11-15 11:22:30.000000000,8,7,0,864293,58a33573816dc3d02c72894bf531fdaf134f682a,7,3,1,8,12549,gnuoy,gnuoy,"Update to target 4.2

func-test-pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/975
Initiating restore"")Change-Id: I75bf0d24ef367a65b4f18fb04f8d084191bdb822

Change-Id: I06dd071b5f3dc0cd90290f3b62786822ca7da1de
"
openstack%2Fkeystone~master~I99157759fe58df77d20cfc1c2b44f64fb31560a3,openstack/keystone,master,,I99157759fe58df77d20cfc1c2b44f64fb31560a3,LDAP connection error handling,NEW,2022-10-03 18:51:30.000000000,2022-11-15 11:07:18.000000000,,31,6,11,860118,c6d7c2b5e8fdd8abb0907b00ef95654dd06ce3ac,25,5,5,1,34520,Sergiy Markin,sm515x,"LDAP connection error handling

This PS implements LDAP connection error handling.

Change-Id: I99157759fe58df77d20cfc1c2b44f64fb31560a3
"
openstack%2Fopenstack-ansible-os_barbican~master~I612315a459e891725850743e0af20e7934319577,openstack/openstack-ansible-os_barbican,master,osa/healthcheck,I612315a459e891725850743e0af20e7934319577,Update barbican api paste,MERGED,2022-11-14 15:42:59.000000000,2022-11-15 11:07:00.000000000,2022-11-15 11:06:01.000000000,13,5,0,864420,78a1984517b6164dd92a9e23c81b78c18db17459,8,3,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Update barbican api paste

We've used quite old version of api-paste file for Barbican that
did not support microversion or healthcheck.

Change-Id: I612315a459e891725850743e0af20e7934319577
"
openstack%2Ftripleo-quickstart~master~I14a6950d201249e8675faff16ec793f63f149bf2,openstack/tripleo-quickstart,master,lp#1995702,I14a6950d201249e8675faff16ec793f63f149bf2,Removing workaround providing no longer necessary 'plan-environment.yaml',NEW,2022-11-10 08:12:31.000000000,2022-11-15 10:36:28.000000000,,0,13,7,864167,bb0b08aea82e6f6840c943b650c6c58446f05bd1,11,3,3,1,32926,Jiri Podivin,jpodivin,"Removing workaround providing no longer necessary 'plan-environment.yaml'

The file was deprecated and removed some time ago, the code producing this
stub was intended for one of the older releases and is no longer necessary.

Closes-Bug: 1995702

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I14a6950d201249e8675faff16ec793f63f149bf2
"
openstack%2Fnova~master~I909c86ab722179efcb673b66f1f81121ab8b5f66,openstack/nova,master,specs/yoga/approved/ephemeral-encryption-libvirt,I909c86ab722179efcb673b66f1f81121ab8b5f66,imagebackend: Add support to libvirt_info for LUKS based encryption,NEW,2022-01-27 18:03:18.000000000,2022-11-15 10:30:59.000000000,,51,0,2,826755,9b6aaff888bbe2c4923451cab774010b05a98058,62,6,8,2,10135,Lee Yarwood,lyarwood,"imagebackend: Add support to libvirt_info for LUKS based encryption

Change-Id: I909c86ab722179efcb673b66f1f81121ab8b5f66
"
openstack%2Fnova~master~Idb45421205f76d2d3b0576bd0504d261ed249edd,openstack/nova,master,add_hacking_rule,Idb45421205f76d2d3b0576bd0504d261ed249edd,Add a hacking rule for the setDaemon method,NEW,2022-08-25 16:22:39.000000000,2022-11-15 10:23:18.000000000,,44,0,0,854653,628e1c152cc7c5e89d5261fc6f25ec72ac24c1df,51,3,8,4,7634,Takashi Natsume,natsumet,"Add a hacking rule for the setDaemon method

Add the following hacking rule.

* N372: Don't use the setDaemon method.
        Use the daemon attribute instead.

Change-Id: Idb45421205f76d2d3b0576bd0504d261ed249edd
Related-Bug: 1987191
Signed-off-by: Takashi Natsume <takanattie@gmail.com>
"
openstack%2Fglance~master~Ib7025845656664bbbc44b4b7a160e6dfba4e783a,openstack/glance,master,863977,Ib7025845656664bbbc44b4b7a160e6dfba4e783a,DNM: Test cinder store refactoring,NEW,2022-11-08 09:36:12.000000000,2022-11-15 10:18:48.000000000,,342,297,0,863977,99b1b74692cde2c4cf96fa1becf02189e1ace439,10,1,6,1,27615,Rajat Dhasmana,whoami-rajat,"DNM: Test cinder store refactoring

Depends-On: https://review.opendev.org/c/openstack/glance_store/+/843103
Depends-On: https://review.opendev.org/c/openstack/devstack-plugin-nfs/+/763516

Change-Id: Ib7025845656664bbbc44b4b7a160e6dfba4e783a
"
openstack%2Fnova-specs~master~Ifd8f6d72f765f898e41f90dc678c8444cad8f4d4,openstack/nova-specs,master,bp/manila_shares_attachments_v2,Ifd8f6d72f765f898e41f90dc678c8444cad8f4d4,"Re-propose ""Allow Manila shares to be directly attached to an instance when using libvirt""",MERGED,2022-11-10 14:05:06.000000000,2022-11-15 10:17:16.000000000,2022-11-15 10:15:48.000000000,547,0,1,864206,b69aabaa851c176e4facc34f951dfd0e0029ad9e,10,2,2,1,16207,ribaudr,uggla,"Re-propose ""Allow Manila shares to be directly attached to an instance when using libvirt""

Implements: blueprint libvirt-virtiofs-attach-manila-shares

Change-Id: Ifd8f6d72f765f898e41f90dc678c8444cad8f4d4
"
openstack%2Freleases~master~I616705d23d95f77057a77aeee38f6cffc7fb6fa0,openstack/releases,master,wallaby-em,I616705d23d95f77057a77aeee38f6cffc7fb6fa0,[Puppet OpenStack] Transition Wallaby to EM,NEW,2022-10-21 12:53:56.000000000,2022-11-15 10:10:19.000000000,,164,0,4,862308,016b5a49d1497ccd5b54ff38a62be7a3aa225358,8,2,2,41,17685,Elod Illes,elod.illes,"[Puppet OpenStack] Transition Wallaby to EM

This transition the wallaby branch to extended maintenance.
Changes for bugfixes and things the team deems important are
still encouraged, but there will no longer be official releases
off of the branch.

Please +1 if the team is ready for us to proceed with this
transition, or -1 if there are any final backports currently in
flight that we should wait for. For the latter case, please
update the patch with the new commit hash after doing a final
release to get those changes out so we know to proceed with the
transition.

The transition deadline is November 2nd, 2022.

Change-Id: I616705d23d95f77057a77aeee38f6cffc7fb6fa0
"
openstack%2Fskyline-apiserver~master~Ic8e932cb130ed0ab7d1c118093e23d3331c1f70f,openstack/skyline-apiserver,master,,Ic8e932cb130ed0ab7d1c118093e23d3331c1f70f,docs: Update doc with how to enable ssl,MERGED,2022-11-15 09:11:46.000000000,2022-11-15 10:02:11.000000000,2022-11-15 10:01:13.000000000,7,2,0,864503,9cf3f9d8cf3d4ccdee03f678ee87dfdf9a12d18f,7,2,1,1,28706,Boxiang Zhu,ZhuBoxiang,"docs: Update doc with how to enable ssl

Update doc with how to enable ssl

Change-Id: Ic8e932cb130ed0ab7d1c118093e23d3331c1f70f
"
openstack%2Fkolla-ansible~master~I821e513d24f2a1c59240d65ad68c3b5f2080e439,openstack/kolla-ansible,master,bugfix/ovs-manila,I821e513d24f2a1c59240d65ad68c3b5f2080e439,Fix post-config of OVS for manila-share servers,NEW,2022-01-14 13:11:37.000000000,2022-11-15 10:01:19.000000000,,7,0,4,824707,277d70977dae69fea28b29fdd3299304f9d36994,14,5,2,2,10910,Stig Telfer,stigtelfer,"Fix post-config of OVS for manila-share servers

A host that is in the manila-share group, but not in controllers
network, etc., will fail service deployment if it is not using the
generic manila driver (eg, if it is using the CephFS native driver).
This is because deployment of openvswitch-vswitchd is predicated on
the drivers enabled for manila-share.  However, this predicate is not
universally applied.  Where inventory group membership is used the
dependency on openvswitch-vswitchd presence will fail.

Closes-Bug: #1993285

Change-Id: I821e513d24f2a1c59240d65ad68c3b5f2080e439
"
openstack%2Fnova-specs~master~Ic792ced5569830d7b0281d0ec99160b9e0a363a7,openstack/nova-specs,master,bp/configurable-instance-domains,Ic792ced5569830d7b0281d0ec99160b9e0a363a7,"Revert ""Revert ""Configurable instance domains""""",ABANDONED,2022-07-19 14:11:43.000000000,2022-11-15 09:59:45.000000000,,275,0,2,850352,520f322b86651cd2a2d1a25b5023158a3cf37bde,4,2,1,1,11604,sean mooney,sean-k-mooney,"Revert ""Revert ""Configurable instance domains""""

This reverts commit aaad3b4e26fd12e474e0645d1054200ba0277f0d.

After the Configurable instance domains spec was merged
it became apprent that there were a number of open issues
so we reverted the spec.

This change reintoduces the spec adressing some of the feedback
and calls out the open issues to discuss how to move forward.

Signed-off-by: Sean Mooney <work@seanmooney.info>
Change-Id: Ic792ced5569830d7b0281d0ec99160b9e0a363a7
"
openstack%2Freleases~master~Idd665176f9d2de75b3c1145422477f4828eb6e16,openstack/releases,master,wallaby-em,Idd665176f9d2de75b3c1145422477f4828eb6e16,[swift] Transition Wallaby to EM,MERGED,2022-10-21 13:06:45.000000000,2022-11-15 09:56:30.000000000,2022-11-15 09:56:30.000000000,8,0,2,862339,55f45f49459c7ae5bd3045691c69647f8f405e38,10,4,1,2,17685,Elod Illes,elod.illes,"[swift] Transition Wallaby to EM

This transition the wallaby branch to extended maintenance.
Changes for bugfixes and things the team deems important are
still encouraged, but there will no longer be official releases
off of the branch.

Please +1 if the team is ready for us to proceed with this
transition, or -1 if there are any final backports currently in
flight that we should wait for. For the latter case, please
update the patch with the new commit hash after doing a final
release to get those changes out so we know to proceed with the
transition.

The transition deadline is November 2nd, 2022.

Change-Id: Idd665176f9d2de75b3c1145422477f4828eb6e16
"
openstack%2Freleases~master~Ie524b21d91eb3e223c4ad9f450c56d7f850ad723,openstack/releases,master,wallaby-stable,Ie524b21d91eb3e223c4ad9f450c56d7f850ad723,Release swift for stable/wallaby,ABANDONED,2022-06-28 10:29:14.000000000,2022-11-15 09:50:56.000000000,,4,0,1,847939,9c13e500f693661c23541b60d5e364d4676ed522,4,2,1,1,17685,Elod Illes,elod.illes,"Release swift for stable/wallaby

This release picks up new commits to swift since
the last release from stable/wallaby.

This is being proposed as a convenience to help make sure stable
changes are being released. If the team is good with this going out,
please respond with a +1 to let the release team know it is OK to
proceed.

If it is not wanted at this time, or if there are more changes that
would be good to get merged before doing a stable release, please
leave a -1 with a comment with what the team would prefer. We can
then either abandon this patch, or wait for an update with a new
commit hash to use instead.

$ git log --oneline --no-merges 2.27.0..f56bb37f0
f56bb37f0 s3api: Use constant-time string comparisons in check_signature
6d256c76e Add FIPS CI jobs
fdba5ef59 Move CI from CentOS 8 to CentOS 8 Stream
a25a936c4 Fix cname_lookup test
c96662897 Quote paths before sending them to swob.Request.blank
67a6ab152 symlink: Ensure headers are returned as a list on py3
24c086c8d tempurl: Fix PUT upload to temp url on py3
1b436a65d gate: Make swift-multinode-rolling-upgrade voting again
056859bb0 Don't require swift be installed to have passing manager tests
223bdd736 Only test with &-delimited query strings
d47724e40 Update TOX_CONSTRAINTS_FILE for stable/wallaby
69ac74fe5 Update .gitreview for stable/wallaby

Signed-off-by: Elod Illes <elod.illes@est.tech>
Change-Id: Ie524b21d91eb3e223c4ad9f450c56d7f850ad723
"
openstack%2Fkeystone~stable%2Fxena~If6f9f72cf25769d022a970fac36cead17b2030f2,openstack/keystone,stable/xena,bug/1992183-stable/xena,If6f9f72cf25769d022a970fac36cead17b2030f2,Limit token expiration to application credential expiration,NEW,2022-10-30 02:28:19.000000000,2022-11-15 09:48:47.000000000,,42,0,0,862905,8e25d823e4b73e1f3285a4ea64976cc770cb2644,4,2,1,3,7414,David Wilde,d34dh0r53,"Limit token expiration to application credential expiration

If a token is issued with an application credential we need to check
the expiration of the application credential to ensure that the token
does not outlive the application credential. This ensures that if the
token expiration is greaten than that of the application credential it
is reset to the expiration of the application credential and a warning
is logged. Please see CVE-2022-2447 for more information.

Closes-Bug: 1992183
Change-Id: If6f9f72cf25769d022a970fac36cead17b2030f2
(cherry picked from commit 8f999d1c1f54a903c1da648ecaa2ce44acdb1fd1)
"
openstack%2Fkeystone~stable%2Fyoga~If6f9f72cf25769d022a970fac36cead17b2030f2,openstack/keystone,stable/yoga,bug/1992183-stable/yoga,If6f9f72cf25769d022a970fac36cead17b2030f2,Limit token expiration to application credential expiration,NEW,2022-10-30 02:27:25.000000000,2022-11-15 09:48:37.000000000,,42,0,0,862904,164d9522b8a150892432dbaba681c95d91d9508c,4,2,1,3,7414,David Wilde,d34dh0r53,"Limit token expiration to application credential expiration

If a token is issued with an application credential we need to check
the expiration of the application credential to ensure that the token
does not outlive the application credential. This ensures that if the
token expiration is greaten than that of the application credential it
is reset to the expiration of the application credential and a warning
is logged. Please see CVE-2022-2447 for more information.

Closes-Bug: 1992183
Change-Id: If6f9f72cf25769d022a970fac36cead17b2030f2
(cherry picked from commit 8f999d1c1f54a903c1da648ecaa2ce44acdb1fd1)
"
openstack%2Fkeystone~stable%2Fzed~If6f9f72cf25769d022a970fac36cead17b2030f2,openstack/keystone,stable/zed,bug/1992183-stable/zed,If6f9f72cf25769d022a970fac36cead17b2030f2,Limit token expiration to application credential expiration,NEW,2022-10-30 02:27:03.000000000,2022-11-15 09:47:52.000000000,,42,0,0,862903,e4e097c5bcf981199563bd721ac643900d3fb616,4,2,1,3,7414,David Wilde,d34dh0r53,"Limit token expiration to application credential expiration

If a token is issued with an application credential we need to check
the expiration of the application credential to ensure that the token
does not outlive the application credential. This ensures that if the
token expiration is greaten than that of the application credential it
is reset to the expiration of the application credential and a warning
is logged. Please see CVE-2022-2447 for more information.

Closes-Bug: 1992183
Change-Id: If6f9f72cf25769d022a970fac36cead17b2030f2
(cherry picked from commit 8f999d1c1f54a903c1da648ecaa2ce44acdb1fd1)
"
openstack%2Foslo.policy~master~If11fe2da1163d6d3f16d133aeb207a055cf30de4,openstack/oslo.policy,master,bug/1977549,If11fe2da1163d6d3f16d133aeb207a055cf30de4,Fix deprecated rule logic if the rule was deleted in policy directory.,NEW,2022-06-03 15:44:01.000000000,2022-11-15 09:45:51.000000000,,1,0,1,844611,725a3deb35370f591292223db8b979678263c4ea,7,4,3,1,32927,mitya-eremeev-2,mitya-eremeev-2,"Fix deprecated rule logic if the rule was deleted in policy directory.

The bug scenario:
- define deprecated rule in policy folder
- start a service
- enforce policies
- remove the rule in policy folder
- enforce policies

New default is applied to the rule,
but new and old defaults should be applied
(OR logic)
The patch fixes it.

Closes-Bug: 1977549
Change-Id: If11fe2da1163d6d3f16d133aeb207a055cf30de4
"
openstack%2Fcinder~master~Ie5b19330c4d2b7018bde615494b58b9f89945e02,openstack/cinder,master,bug/1982405,Ie5b19330c4d2b7018bde615494b58b9f89945e02,Fix Infinidat driver consistency groups feature,NEW,2022-08-09 11:37:20.000000000,2022-11-15 09:44:18.000000000,,192,63,3,852369,8154b08ea7a3ccb2fce083da7bd25ace8d53faee,88,1,3,3,35075,Alexander Deiter,adeiter,"Fix Infinidat driver consistency groups feature

- Fixed Infinidat driver to take into account the group
  identifier property when creating a new volume and
  add the volume to the consistency group.
- Removed mock object from driver code.

Closes-bug: #1984000
Closes-bug: #1928232
Change-Id: Ie5b19330c4d2b7018bde615494b58b9f89945e02
Signed-off-by: Alexander Deiter <adeiter@infinidat.com>
"
openstack%2Fnova-specs~master~I9adda039edbc5cf8cd14aa1af9aa96a1d700ad90,openstack/nova-specs,master,,I9adda039edbc5cf8cd14aa1af9aa96a1d700ad90,Improve multiqueue network adapter support,NEW,2022-09-01 13:54:47.000000000,2022-11-15 09:43:03.000000000,,206,0,25,855514,909b5c405d9f1c43a7ca0f3156e14e0239379727,17,3,6,1,35239,Justas Poderys,justas_napa,"Improve multiqueue network adapter support

At the moment, OpenStack has very limited support for multiqueue network
adapters. Current implementation of multiqueue vhost(user) netdev
defaults to the number of queues equal to the number of vCPUs.
Such operations model does not allign well with the hardware-offloaded
netdev usage model, where number of queues available in the underlying
hardware is fixed. Ideally, OpenStack should allow the operator to
start a VM with arbitrary number of vCPUs that is larger (or equal)
to the number of queues configured on vNICs.

Change-Id: I9adda039edbc5cf8cd14aa1af9aa96a1d700ad90
"
openstack%2Fopenstack-ansible-tests~stable%2Fstein~I99ee095bb692401d1a8dd5fff8c14a3579b09181,openstack/openstack-ansible-tests,stable/stein,,I99ee095bb692401d1a8dd5fff8c14a3579b09181,Return functional jobs to voting,NEW,2022-10-21 16:28:25.000000000,2022-11-15 09:34:49.000000000,,0,12,0,862377,c3cfc983ee8df692b9fa83f618d0bfa3bfcd2712,3,2,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Return functional jobs to voting

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible-rabbitmq_server/+/862104
Change-Id: I99ee095bb692401d1a8dd5fff8c14a3579b09181
"
openstack%2Fopenstack-ansible-os_rally~stable%2Fussuri~I57cfcf0d76ae9fa1331b9b2fad14ffb2d4c1b045,openstack/openstack-ansible-os_rally,stable/ussuri,,I57cfcf0d76ae9fa1331b9b2fad14ffb2d4c1b045,Return jobs to voting,NEW,2022-10-18 19:41:17.000000000,2022-11-15 09:34:30.000000000,,0,16,1,861790,21005bd625cd86f1109a69f5425a7093b4e19acd,7,2,2,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Return jobs to voting

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/853029
Change-Id: I57cfcf0d76ae9fa1331b9b2fad14ffb2d4c1b045
"
openstack%2Fopenstack-ansible-rabbitmq_server~stable%2Fussuri~I588f62a1ab7dc32fcfb41e3f62fe3281b84674cf,openstack/openstack-ansible-rabbitmq_server,stable/ussuri,,I588f62a1ab7dc32fcfb41e3f62fe3281b84674cf,Set erlang version to 23.3.4.12-1 for Ubuntu,NEW,2022-10-25 08:52:07.000000000,2022-11-15 09:34:03.000000000,,1,1,1,862564,78a4fbab7a6b8e880d9b4b1b2f8985040925e72d,8,2,3,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Set erlang version to 23.3.4.12-1 for Ubuntu

Prior version has been dropped from cloudsmith so we need to adjust it
one more time. And no newer versions are avaialble for CentOS 7.

Change-Id: I588f62a1ab7dc32fcfb41e3f62fe3281b84674cf
"
openstack%2Fdesignate-tempest-plugin~master~Iedd151b2e47ed62adc168a97cb6021ccb47abb0f,openstack/designate-tempest-plugin,master,fix/QueryClient,Iedd151b2e47ed62adc168a97cb6021ccb47abb0f,Fix checking of the [dns].nameservers value,NEW,2022-10-27 12:26:53.000000000,2022-11-15 09:32:29.000000000,,11,8,12,862804,4f2367f64aad61078d38c717ed67f38053802a01,25,5,10,3,30674,Lukas Piwowarski,lukas-piwowarski,"Fix checking of the [dns].nameservers value

This patch [1] introduced checking whether the CONF.dns.nameservers
is empty. If the CONF.dns.nameservers value is empty then the
initialization of the QueryClient fails. This change makes the majority
of designate-tempest-plugin tests fail even tests that do not use the
QueryClient.

This patch introduces three changes:

1) ValueError is raised only when the query() function is called so
   that only tests that actually use the query() function fail.

2) wait_for_query() function is fixed so that it never succeeds when the
   CONF.dns.nameservers value is empty.

3) Skip tests that rely upon [dns].nameserver value.

[1] https://review.opendev.org/c/openstack/designate-tempest-plugin/+/860116

Change-Id: Iedd151b2e47ed62adc168a97cb6021ccb47abb0f
"
openstack%2Fpython-openstackclient~master~I35b1cb8ff2b1735ae3a1b405d8f2071fe449ea6e,openstack/python-openstackclient,master,,I35b1cb8ff2b1735ae3a1b405d8f2071fe449ea6e,title: Add image metadef namespace command,NEW,2022-11-03 14:10:59.000000000,2022-11-15 09:29:59.000000000,,408,3,0,863525,224bad9c7fb0c8ac47e056d77691e46715003fa7,4,1,2,4,35069,TaeJun Jang,hoosa,"title: Add image metadef namespace command

add image metadef namespace create, delete, set, show command

Change-Id: I35b1cb8ff2b1735ae3a1b405d8f2071fe449ea6e
"
openstack%2Fopenstack-ansible-os_horizon~master~I4dd03f3cd13878dafb621c70dd44a4fd0ff99ae3,openstack/openstack-ansible-os_horizon,master,osa-ironic-tidy,I4dd03f3cd13878dafb621c70dd44a4fd0ff99ae3,Install ironic-ui from git source rather than a pip package,NEW,2022-11-07 18:53:47.000000000,2022-11-15 09:28:56.000000000,,1,1,1,863921,a53e72e2574cb0ca622b522601a65122e6c991cf,5,3,1,1,25023,Jonathan Rosser,jrosser,"Install ironic-ui from git source rather than a pip package

This patch changes the horizon ironic dashboard to be installed from
git sources like all of the other dashboards in an openstack-ansible
deployment.

Without this change the package installed from pypi is always the
latest released version and not aligned with the release
being deployed with openstack-ansible. This will potentially
cause the horizon service to fail to start if there is a severe
mismatch between horizon and ironic-ui.

Change-Id: I4dd03f3cd13878dafb621c70dd44a4fd0ff99ae3
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~Ia2337e2f1802257f172ecf9e88995cd12ebc31d7,openstack/tripleo-heat-templates,stable/train,ovn-ofctrl-wait-before-clear,Ia2337e2f1802257f172ecf9e88995cd12ebc31d7,Support setting ovn-ofctrl-wait-before-clear,NEW,2022-11-11 00:23:24.000000000,2022-11-15 09:01:12.000000000,,7,0,0,864239,534efe0884c0e26a9aa1a34b13f923a1e4bc02a1,4,2,1,1,5756,Terry Wilson,otherwiseguy,"Support setting ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

 Conflicts:
	deployment/ovn/ovn-controller-container-puppet.yaml

Co-Authored-By: David Hill <davidchill@hotmail.com>
Depends-On: https://review.opendev.org/c/openstack/puppet-ovn/+/863170
Change-Id: Ia2337e2f1802257f172ecf9e88995cd12ebc31d7
(cherry picked from commit ddaa270bd160f9cc7d8689a2470636eb25c14cb4)
"
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~Ia2337e2f1802257f172ecf9e88995cd12ebc31d7,openstack/tripleo-heat-templates,stable/wallaby,ovn-ofctrl-wait-before-clear,Ia2337e2f1802257f172ecf9e88995cd12ebc31d7,Support setting ovn-ofctrl-wait-before-clear,NEW,2022-11-11 00:07:28.000000000,2022-11-15 09:01:09.000000000,,7,0,0,864237,fbaf55f23f3be600283681401302dbf864c61ba0,4,2,1,1,5756,Terry Wilson,otherwiseguy,"Support setting ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

 Conflicts:
	deployment/ovn/ovn-controller-container-puppet.yaml

Co-Authored-By: David Hill <davidchill@hotmail.com>
Depends-On: https://review.opendev.org/c/openstack/puppet-ovn/+/863170
Change-Id: Ia2337e2f1802257f172ecf9e88995cd12ebc31d7
(cherry picked from commit ddaa270bd160f9cc7d8689a2470636eb25c14cb4)
"
openstack%2Ftripleo-ansible~stable%2Fzed~I49d391180c9877e2a74e9ab6853a17360c72941a,openstack/tripleo-ansible,stable/zed,ovn-ofctrl-wait-before-clear,I49d391180c9877e2a74e9ab6853a17360c72941a,Support setting ovn-ofctrl-wait-before-clear,NEW,2022-11-14 10:17:06.000000000,2022-11-15 09:00:43.000000000,,2,0,0,864396,d7401c51d95daf140392d2045d6c538bc0a22a3a,6,2,1,1,6796,Giulio Fidente,gfidente,"Support setting ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

Change-Id: I49d391180c9877e2a74e9ab6853a17360c72941a
(cherry picked from commit 567a47ef908482ee569ea6ebfd372e25e650faf1)
"
openstack%2Ftempest~master~I1a3cea4cc543aabe61483a32f71b2b9db178cecf,openstack/tempest,master,wallaby-last,I1a3cea4cc543aabe61483a32f71b2b9db178cecf,Switch back the tox constraint to master,NEW,2022-11-13 01:41:28.000000000,2022-11-15 08:30:11.000000000,,5,5,0,864373,c5a007ea70557e12616b8be61c2ca84019185ea1,3,2,1,1,8556,Ghanshyam,ghanshyam,"Switch back the tox constraint to master

Tempest 33.0.0 release hash is prepared[1] so we can
revert back to use the master constraints by default.

[1] https://review.opendev.org/c/openstack/tempest/+/864372/

Change-Id: I1a3cea4cc543aabe61483a32f71b2b9db178cecf
"
openstack%2Ftempest~master~Ia8536e783df945a273b8697b128a5115104d3c12,openstack/tempest,master,wallaby-last,Ia8536e783df945a273b8697b128a5115104d3c12,Pin stable/zed constraint in tox to release 33.0.0,NEW,2022-11-13 01:37:57.000000000,2022-11-15 08:29:53.000000000,,5,5,0,864372,c7ae676c03e8f10051b4a43d299c65bd8e9b0a24,3,2,1,1,8556,Ghanshyam,ghanshyam,"Pin stable/zed constraint in tox to release 33.0.0

We are going to release Tempest new tag 33.0.0 to declare
the end of support for stable/wallaby. stable/zed constraint
is latest stable constraints tested with current tempest hash
which is going to be used for 33.0.0 release.

Further information:
 https://docs.openstack.org/tempest/latest/requirement_upper_constraint_for_tempest.html

Change-Id: Ia8536e783df945a273b8697b128a5115104d3c12
"
openstack%2Fpython-openstackclient~master~I1c1a811c0db59250e8a20a87f25c2662bc3ab3e8,openstack/python-openstackclient,master,cinder-gaps,I1c1a811c0db59250e8a20a87f25c2662bc3ab3e8,volume: Volume names are optional,MERGED,2022-09-14 12:44:13.000000000,2022-11-15 08:27:26.000000000,2022-10-26 10:11:28.000000000,7,4,6,857670,3fc585332f79358489285eabc298e01007599128,12,4,1,3,15334,Stephen Finucane,sfinucan,"volume: Volume names are optional

Who knew?

Change-Id: I1c1a811c0db59250e8a20a87f25c2662bc3ab3e8
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
"
openstack%2Fansible-collections-openstack~master~I8ab45280badf7fc9448e2ebfc6e38648cc2dc1b7,openstack/ansible-collections-openstack,master,federation-mapping,I8ab45280badf7fc9448e2ebfc6e38648cc2dc1b7,"Refactored federation_mapping{,_info} modules",MERGED,2022-11-09 13:52:36.000000000,2022-11-15 08:18:06.000000000,2022-11-15 08:18:06.000000000,163,177,6,864117,961bdb5bd5afb81ff36ba5a21798d34e1d65732b,11,3,2,6,32962,Jakob Meng,jakobmeng@web.de,"Refactored federation_mapping{,_info} modules

Change-Id: I8ab45280badf7fc9448e2ebfc6e38648cc2dc1b7
"
openstack%2Fvalidations-libs~master~I0830d8d20a13f30b068c291b8bfda0a962c4768d,openstack/validations-libs,master,actions/argfix,I0830d8d20a13f30b068c291b8bfda0a962c4768d,Setting ValidationActions constructor args by name,NEW,2022-11-11 12:25:23.000000000,2022-11-15 07:47:19.000000000,,2,1,1,864264,b3704f39bdf34928d4a99ae9f04a403d5c293626,4,1,1,1,32926,Jiri Podivin,jpodivin,"Setting ValidationActions constructor args by name

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I0830d8d20a13f30b068c291b8bfda0a962c4768d
"
openstack%2Fci-log-processing~master~I40863ff5d29e3fc74bbe15771e6520d51551c9bf,openstack/ci-log-processing,master,,I40863ff5d29e3fc74bbe15771e6520d51551c9bf,DNM Deprecating ci log processing workflow base on Gearman,NEW,2022-11-15 07:30:09.000000000,2022-11-15 07:43:44.000000000,,2,1,0,864495,de0c684a632a7f0394c629eeefd387a996e04b6d,2,1,1,1,20676,daniel.pawlik,daniel.pawlik,"DNM Deprecating ci log processing workflow base on Gearman

The logscraper and logsender tools are working as expected in
OpenStack project.

Change-Id: I40863ff5d29e3fc74bbe15771e6520d51551c9bf
"
openstack%2Ftrove~master~I846f433ff35a9638a070382bf89e02db617dcd3d,openstack/trove,master,story/2010151,I846f433ff35a9638a070382bf89e02db617dcd3d,Fixes cluster creation error,NEW,2022-07-15 10:44:46.000000000,2022-11-15 07:34:19.000000000,,5,0,1,849984,b3c592e4de8c26e2cb03aaf4a0350bf8474f5ca8,5,1,2,2,31737,Hirotaka Wakabayashi,hiwkby,"Fixes cluster creation error

This PR adds the import statement to fix cluster creation error and adds
unit tests.

Original problem:
we have currently got `NameError: name 'common_glance' is not defined`
error when creating a cluster because I failed to edit the patch[1].

[1]: https://opendev.org/openstack/trove/commit/2f52b2fddbd30dfa68d83e3da32030fa07940ea3

Story: 2010151
Task: 45797
Change-Id: I846f433ff35a9638a070382bf89e02db617dcd3d
"
openstack%2Fproject-config~master~I5611673bfcd9bfc1e43648620ebcc9a53c2d6d12,openstack/project-config,master,project-yaml-normalization,I5611673bfcd9bfc1e43648620ebcc9a53c2d6d12,Normalize projects.yaml,MERGED,2022-11-15 02:18:01.000000000,2022-11-15 06:57:49.000000000,2022-11-15 03:07:14.000000000,7,4,0,864456,fd6f9f3e490ee82b2a6f3792535686bc81388d91,7,2,1,1,11131,OpenStack Proposal Bot,proposal-bot,"Normalize projects.yaml

Change-Id: I5611673bfcd9bfc1e43648620ebcc9a53c2d6d12
"
openstack%2Fkeystone~master~I9cb25a111c84ecb3a09158cbe44b0954df89096c,openstack/keystone,master,bug/1951632,I9cb25a111c84ecb3a09158cbe44b0954df89096c,[DNM] Add default service role support to boostrap command,NEW,2022-11-02 16:56:45.000000000,2022-11-15 06:24:58.000000000,,85,2,0,863420,7981b5f7845609ac1a6c40dfcf9df502d890ad1b,9,5,3,6,9303,Abhishek Kekane,abhishekkekane,"[DNM] Add default service role support to boostrap command

dded service role support to bootstrap command

ToDO:
 - Additional unit test coverage
 - Release note

Closes-Bug: #1951632
Change-Id: I9cb25a111c84ecb3a09158cbe44b0954df89096c
"
openstack%2Fglance~master~I0352ab6b2c00055de094ac5902b8d50941d06dcf,openstack/glance,master,bug/1983279,I0352ab6b2c00055de094ac5902b8d50941d06dcf,Fix unintentional exception inspecting VMDK,MERGED,2022-11-09 15:49:02.000000000,2022-11-15 05:00:56.000000000,2022-11-15 04:59:41.000000000,19,1,3,864128,199722a65a88f9c28b554b180ec36415ed3a51ac,9,5,1,2,4393,Dan Smith,danms,"Fix unintentional exception inspecting VMDK

It looks like a raise statement was left in the virtual_size property
handler for VMDK, which should have been converted to a log at some
point. All the other inspectors return zero for virtual_size if the
format does not match or they are unable to parse the data. This
converts that raise to a log, and adds a test to make sure we make it
far enough in the processing of the complex VMDK format to ensure that
behavior.

Closes-Bug: #1983279

Change-Id: I0352ab6b2c00055de094ac5902b8d50941d06dcf
"
openstack%2Fnova~master~I14c2684edf5e9a04c673d039d340afe23e448ff9,openstack/nova,master,,I14c2684edf5e9a04c673d039d340afe23e448ff9,Remove the redundance code in HostState.update,NEW,2022-11-14 03:56:51.000000000,2022-11-15 04:53:27.000000000,,0,3,2,864275,12f04a3017aaa5d86729cf640f637f7b0b8d59b5,16,1,2,1,31827,Jorhson Deng,dengzhaosen,"Remove the redundance code in HostState.update

The HostState is local variable in HostManager, So the updated is
None for HostState.

Change-Id: I14c2684edf5e9a04c673d039d340afe23e448ff9
"
openstack%2Fcharm-rabbitmq-server~master~I19e3d675ace7c669451ca40a20d21cef1aec6a95,openstack/charm-rabbitmq-server,master,rabbitmq-cis,I19e3d675ace7c669451ca40a20d21cef1aec6a95,Allow NRPE to collect stats in CIS hardened env,NEW,2022-10-05 01:20:34.000000000,2022-11-15 04:47:45.000000000,,108,4,3,860309,f89cd0b67737abb8b2eb2575b57ccbc5d016c126,14,4,3,5,34232,DUFOUR Olivier,odufourc,"Allow NRPE to collect stats in CIS hardened env

It removes the necessity to run the cron task as root user
and ensure the content created in /var/lib/rabbitmq belongs
to rabbitmq user and group solely.

Then giving access for nrpe user is done by adding its user
to rabbitmq group.
Also implemented in the upgrade-charm hook for ongoing
deployments

Closes-Bug: #1879524
Change-Id: I19e3d675ace7c669451ca40a20d21cef1aec6a95
"
openstack%2Ftripleo-ansible~master~Ifeb21e7ca8b5e0b0bb651ecfd4f0c6cb095853b5,openstack/tripleo-ansible,master,bug/1996482,Ifeb21e7ca8b5e0b0bb651ecfd4f0c6cb095853b5,Remove redundant check of result.rc,ABANDONED,2022-11-14 15:07:28.000000000,2022-11-15 04:43:57.000000000,,3,3,0,864417,a972b4dd2ebc263ef892aaf4ae01990c9177dcaf,4,2,1,3,9816,Takashi Kajinami,kajinamit,"Remove redundant check of result.rc

This partially reverts I74311e4c11b9dbb4858f119e109acfdaa8e81ff0 and
removes the redundant check added by it. The undefined rc attribute was
actually caused by the warn parameter which was removed in Ansible
2.14. This revert allows us to detect unexpectedly missing task result
instead of hiding it.

Change-Id: Ifeb21e7ca8b5e0b0bb651ecfd4f0c6cb095853b5
"
openstack%2Fheat-dashboard~master~If0613dd5ed8ae21693b5a0912a14978a6d13eb65,openstack/heat-dashboard,master,zanata/translations,If0613dd5ed8ae21693b5a0912a14978a6d13eb65,Imported Translations from Zanata,NEW,2022-11-15 03:58:09.000000000,2022-11-15 04:09:24.000000000,,4,4,0,864490,903d7a925aa0db3a0924e8ee6316723b2e0c687c,2,1,1,1,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: If0613dd5ed8ae21693b5a0912a14978a6d13eb65
"
openstack%2Fcharm-rabbitmq-server~stable%2Fjammy~Icc3c4918a877a7c43c049f412a85a23c5dbcbd95,openstack/charm-rabbitmq-server,stable/jammy,bug/1991528,Icc3c4918a877a7c43c049f412a85a23c5dbcbd95,Fix jammy-yoga bundle.,NEW,2022-10-21 18:13:48.000000000,2022-11-15 03:44:24.000000000,,0,3,1,862396,89bd80f009076dab4c8cdab4c83a90bd4a002dd5,6,3,1,1,2424,Felipe Reyes,freyes,"Fix jammy-yoga bundle.

This change fixes the jammy-yoga bundle placement directives.

Func-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/958
Related-Bug: #1968008
Change-Id: Icc3c4918a877a7c43c049f412a85a23c5dbcbd95
(cherry picked from commit 24d557ffdc96eddb48da88e6f74fa698b939d62d)
"
openstack%2Foslo.log~master~If528578c75c86ab560b19a53e32fca921c827878,openstack/oslo.log,master,zanata/translations,If528578c75c86ab560b19a53e32fca921c827878,Imported Translations from Zanata,NEW,2022-10-17 03:12:39.000000000,2022-11-15 03:40:41.000000000,,47,2,0,861550,47c428868256625cded1496d4aa8849c93e0a007,5,2,2,1,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: If528578c75c86ab560b19a53e32fca921c827878
"
openstack%2Fkeystone~master~I85f65708996160a6b87bc29435dab8e71a2a01d6,openstack/keystone,master,zanata/translations,I85f65708996160a6b87bc29435dab8e71a2a01d6,Imported Translations from Zanata,NEW,2022-09-15 04:19:39.000000000,2022-11-15 03:28:40.000000000,,92,5,0,857805,4aac8b018d4b85d05b0cac9c96a467a1bfeb558c,17,2,8,1,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I85f65708996160a6b87bc29435dab8e71a2a01d6
"
openstack%2Fironic~master~I12e54a2a719cd48cd16dce81e91fc9714cd2b216,openstack/ironic,master,fix-capabilities,I12e54a2a719cd48cd16dce81e91fc9714cd2b216,Fix: iRMC inspect interface sets invalid value,ABANDONED,2022-07-12 07:09:13.000000000,2022-11-15 03:11:15.000000000,,24,15,3,849455,8fcff68ea058b50bc26c1741eaf8a6c2462851c2,12,2,1,2,28806,SONG SHUKUN,song,"Fix: iRMC inspect interface sets invalid value

iRMC inspect interface sets 'trusted_boot' to unsupported value when
trusted boot is supported on bare metal side and then the server could
not be consumed by nova correctly.

This commit fixes this issue.

Story: 2010139
Task: 45769
Change-Id: I12e54a2a719cd48cd16dce81e91fc9714cd2b216
"
openstack%2Fansible-role-collect-logs~master~Ic6cd058671a5cedf8e94200937ea2bc852caf79c,openstack/ansible-role-collect-logs,master,omit_bind_mount_log,Ic6cd058671a5cedf8e94200937ea2bc852caf79c,Drop container logs collected from bind-mounted dirs,NEW,2022-11-02 14:49:08.000000000,2022-11-15 02:52:50.000000000,,6,1,6,863318,505937f1212d9e2873605506ea724a6faacded2c,14,3,1,1,34951,Yusuke Okada,yusokada,"Drop container logs collected from bind-mounted dirs

Tripleo implementation mounts /var/log/containers/<name> directories to /var/log/<name> in containers.
Such paths should be dropped, otherwise such logs are collected multiple times for each containers.
When debug is enabled, logs (especially libvirt related logs) become too large to be collected in INFO_DIR.
This patch drops paths mounted from the host.

Change-Id: Ic6cd058671a5cedf8e94200937ea2bc852caf79c
"
openstack%2Ftripleo-docs~master~I752f2ae4e3b8a282ff976890dcf5599c93797cf8,openstack/tripleo-docs,master,bug/1996537,I752f2ae4e3b8a282ff976890dcf5599c93797cf8,Switch from Centos Stream 8 to Centos Stream 9,NEW,2022-11-14 21:16:32.000000000,2022-11-15 02:51:12.000000000,,4,4,1,864441,ca4ffac712aaa3c7993ead1c1c1dc8ca461e37f0,3,1,1,1,35491,Roberto Alfieri,ralfieri,"Switch from Centos Stream 8 to Centos Stream 9

Adapt guide for tripleo trunk which is Centos Stream 9 based.

Closes-bug: 1996537
Change-Id: I752f2ae4e3b8a282ff976890dcf5599c93797cf8
"
openstack%2Fproject-config~master~Ifb985c65f6c49419ffe56586e305f015fdf088cd,openstack/project-config,master,new-project,Ifb985c65f6c49419ffe56586e305f015fdf088cd,Apply cfn repository for code and storyboard,MERGED,2022-11-01 17:28:17.000000000,2022-11-15 02:15:50.000000000,2022-11-14 13:14:51.000000000,87,0,22,863168,1f4213ac919fb24587f411fc623dcd2623b1a031,29,4,6,7,35475,Jie Niu,jieniucm,"Apply cfn repository for code and storyboard

Change-Id: Ifb985c65f6c49419ffe56586e305f015fdf088cd
"
openstack%2Fskyline-console~master~I588af877fe776dbf7d44b11ad350566bf231121f,openstack/skyline-console,master,magnum-redesign,I588af877fe776dbf7d44b11ad350566bf231121f,feature: Optimization of Magnum,MERGED,2022-11-07 08:22:01.000000000,2022-11-15 02:14:07.000000000,2022-11-08 02:30:38.000000000,101,53,0,863815,5ba32d6ddea61765934ebbf0dfa1447bee0ab24f,13,5,2,14,33689,xusongfu,xusongfu,"feature: Optimization of Magnum

1. Update some form item labels for better semantics
2. Make the template name be required when create the template
3. Support create cluster instance from template list

Change-Id: I588af877fe776dbf7d44b11ad350566bf231121f
"
openstack%2Fskyline-console~master~Iee64af2821bd034e3818166308512d946e44cbe7,openstack/skyline-console,master,global-nav,Iee64af2821bd034e3818166308512d946e44cbe7,feat: add global navigation,MERGED,2022-11-08 10:00:03.000000000,2022-11-15 02:14:01.000000000,2022-11-09 10:28:54.000000000,412,73,0,863983,985c03af9565a09701e5f49414fe326ce54705d2,13,6,2,19,30434,Jingwei.Zhang,jwzhang,"feat: add global navigation

1. Add global navigation at the left top position of the whole page
2. Update the right menu layout to adjust the global navigation
3. The global navigation show the extended menu in the console/user center/administrator

Change-Id: Iee64af2821bd034e3818166308512d946e44cbe7
"
openstack%2Fskyline-console~master~I567db87e369264d9b1d1372332868267b478cf46,openstack/skyline-console,master,global-nav,I567db87e369264d9b1d1372332868267b478cf46,feat: update menu in the layout,MERGED,2022-11-09 04:30:53.000000000,2022-11-15 02:13:53.000000000,2022-11-09 10:28:56.000000000,108,20,0,864079,e3543ed1b50f7f9661e29ce2f5882b1c55fe71a4,10,5,1,3,30434,Jingwei.Zhang,jwzhang,"feat: update menu in the layout

1. Update the menu style to adjust the global nav display
2. Update the menu open keys when the url change: the menu will auto open the current url's father menu

Change-Id: I567db87e369264d9b1d1372332868267b478cf46
"
openstack%2Fskyline-console~master~I4c12e5d57650f6ef2641ed8680e98d6919432124,openstack/skyline-console,master,global-nav,I4c12e5d57650f6ef2641ed8680e98d6919432124,feat: support search in the global navigation,MERGED,2022-11-09 07:06:55.000000000,2022-11-15 02:13:47.000000000,2022-11-09 11:57:03.000000000,91,8,1,864087,6ed2fb1a2d4259c7571a6c81112167034a2b9feb,13,5,2,5,30434,Jingwei.Zhang,jwzhang,"feat: support search in the global navigation

Support search menu in the global navagition

Change-Id: I4c12e5d57650f6ef2641ed8680e98d6919432124
"
openstack%2Fskyline-console~master~I5a698ccde7454f8d34e6d0d3ed726582708855b0,openstack/skyline-console,master,magnum-redesign,I5a698ccde7454f8d34e6d0d3ed726582708855b0,Fix the cluster and template of magnum,MERGED,2022-11-09 09:38:34.000000000,2022-11-15 02:13:39.000000000,2022-11-09 11:57:05.000000000,67,53,0,864097,5eab747fb30f1680cdba3d41dac440e1bf331c6d,12,4,4,9,33689,xusongfu,xusongfu,"Fix the cluster and template of magnum

1. When creating a cluster instance, the parameters are the same as the template, change them to optional
2. Fix some tips of form item to get a better understanding
3. Change the filter for image list by zed spec of openstack magnum user guide document

Closes-Bug: #1996046
Change-Id: I5a698ccde7454f8d34e6d0d3ed726582708855b0
"
openstack%2Fskyline-console~master~I4f781454b918662a8e46f4d4af06454df5993936,openstack/skyline-console,master,magnum-redesign,I4f781454b918662a8e46f4d4af06454df5993936,Fix the state and default value when create cluster instance,MERGED,2022-11-10 08:28:44.000000000,2022-11-15 02:13:31.000000000,2022-11-10 11:19:51.000000000,12,13,0,864190,f89ffe6149f83fa43e924d5c3821579dba5d2419,9,4,1,6,33689,xusongfu,xusongfu,"Fix the state and default value when create cluster instance

The clusterTemplate of state was not updated when clusterTemplate changed

Closes-Bug: #1996143
Change-Id: I4f781454b918662a8e46f4d4af06454df5993936
"
openstack%2Fskyline-console~master~Ie9f12f2d6747429966e62bbc0bbd72d9686864cd,openstack/skyline-console,master,global-nav,Ie9f12f2d6747429966e62bbc0bbd72d9686864cd,feat: update the click area of links in the global navigation,MERGED,2022-11-11 07:35:05.000000000,2022-11-15 02:13:11.000000000,2022-11-11 10:41:52.000000000,17,4,0,864249,7e30ad69229938c89e213ac91af3ca682ee17252,9,4,1,4,30434,Jingwei.Zhang,jwzhang,"feat: update the click area of links in the global navigation

1. Update the click area of the links in the global navigation
2. Update the proptype of the globalNav component

Change-Id: Ie9f12f2d6747429966e62bbc0bbd72d9686864cd
"
openstack%2Fskyline-console~master~I47cfc090099f3d5413012f5abee0558f78b5d94e,openstack/skyline-console,master,fix-i18n-monitor,I47cfc090099f3d5413012f5abee0558f78b5d94e,feature: Add translation for monitor center,MERGED,2022-11-11 10:16:01.000000000,2022-11-15 02:13:04.000000000,2022-11-11 13:16:49.000000000,25,27,0,864256,638ac6f2ebdeb3aeaaa384fd0bb19ffb93a3ffaa,8,4,1,3,33689,xusongfu,xusongfu,"feature: Add translation for monitor center

Added Chinese translation for monitor center

Change-Id: I47cfc090099f3d5413012f5abee0558f78b5d94e
"
openstack%2Fopenstack-helm-images~master~Ie8f059f1e4bcc7d964f71bd78f2ad3f2ec131308,openstack/openstack-helm-images,master,add-xena,Ie8f059f1e4bcc7d964f71bd78f2ad3f2ec131308,Re-enable Xena jobs,MERGED,2022-11-06 18:26:14.000000000,2022-11-15 01:48:28.000000000,2022-11-15 01:44:46.000000000,16,17,3,863775,4cc0036999a1f9011d6fdcab3b363e3b94439bf7,18,3,1,2,21420,Gage Hugo,ghugo,"Re-enable Xena jobs

With the xena jobs now working in openstack-helm, we can re-enable
the building jobs here.

Change-Id: Ie8f059f1e4bcc7d964f71bd78f2ad3f2ec131308
"
openstack%2Fpuppet-ovn~stable%2Fyoga~Ia3112b9a219b90af718c49776da49078449f09a2,openstack/puppet-ovn,stable/yoga,ovn-ofctrl-wait-before-clear-stable/yoga,Ia3112b9a219b90af718c49776da49078449f09a2,Add support for ovn-ofctrl-wait-before-clear,MERGED,2022-11-08 16:05:29.000000000,2022-11-15 01:33:35.000000000,2022-11-15 01:32:40.000000000,22,1,6,863808,b41d052d0f959b1b657c920cb7aa6166673e3963,25,4,6,3,5756,Terry Wilson,otherwiseguy,"Add support for ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

Conflicts:
	manifests/controller.pp
	spec/classes/ovn_controller_spec.rb

Change-Id: Ia3112b9a219b90af718c49776da49078449f09a2
(cherry picked from commit b5d38dcbd4cc8a56cc0d028f982accf23a19b15c)
(cherry picked from commit a8f8fe2cece2e20ee8c1c1b3e7d78cb3d780d6b9)
"
openstack%2Ftripleo-ansible~stable%2Fwallaby~Iccda95cde0e309af00ce6b918ab1acab68e548dd,openstack/tripleo-ansible,stable/wallaby,wallaby/growvols-check,Iccda95cde0e309af00ce6b918ab1acab68e548dd,Don't use meta:end_play after growvols check,NEW,2022-11-14 21:36:09.000000000,2022-11-15 01:20:22.000000000,,13,14,0,864445,d1caa13484e3a1e5c3cb4309cb7fd6adead93750,3,2,1,1,4571,Steve Baker,steve-stevebaker,"Don't use meta:end_play after growvols check

According to the documentation, meta: end_play will apply to all
hosts, which is fine if every host is deploying the same image.
However if there is a mixture of overcloud-full and
overcloud-hardened-uefi-full the playbook won't run correctly on some
hosts.

This change moves to a conditional block to run as expected on each
host.

[1] https://docs.ansible.com/ansible/latest/collections/ansible/builtin/meta_module.html

Change-Id: Iccda95cde0e309af00ce6b918ab1acab68e548dd
(cherry picked from commit 1678c3395ba8142e42ee1629bd1d258ffbdf4da1)
"
openstack%2Fironic~bugfix%2F20.2~Id2fca59bebb0745e6b16caaaa7838d1f1a2717e1,openstack/ironic,bugfix/20.2,capa-backport-to-bugfix/20.2,Id2fca59bebb0745e6b16caaaa7838d1f1a2717e1,Add support auth protocols for iRMC,MERGED,2022-11-04 01:23:58.000000000,2022-11-15 00:51:09.000000000,2022-11-15 00:49:20.000000000,40,12,1,863573,be0e687538c60b5273bc5a24829c137ad36b1661,12,2,1,6,28806,SONG SHUKUN,song,"Add support auth protocols for iRMC

This patch adds new SNMPv3 auth protocols to iRMC which are supported
from iRMC S6.

Conflicts:
	ironic/conf/irmc.py
	ironic/drivers/modules/irmc/common.py

Change-Id: Id2fca59bebb0745e6b16caaaa7838d1f1a2717e1
Story: 2010309
Task: 46353
(cherry picked from commit 233c6408389be5f3e271b46154943bc744e0290e)
"
openstack%2Fdesignate~master~Ib0fac569a255572aa2657fe2a7e4991e30f249de,openstack/designate,master,setup-metadata-upd,Ib0fac569a255572aa2657fe2a7e4991e30f249de,Update metadata in setup.cfg,MERGED,2022-11-11 01:58:39.000000000,2022-11-15 00:40:38.000000000,2022-11-15 00:39:17.000000000,6,6,8,864243,dcb61f7ffeb505c9a5a37cccd89a5c99aea957eb,15,4,2,1,5572,Don Kehn,dekehn,"Update metadata in setup.cfg

we are using some ""aliases"" that the setuptools docs say
""are supported for compatibility reasons"" but their use is not
advised[1].

[1] https://setuptools.pypa.io/en/latest/userguide/declarative_config.html#metadata

Change-Id: Ib0fac569a255572aa2657fe2a7e4991e30f249de
"
openstack%2Fironic~stable%2Fyoga~Id6f8996e4d103f849325f54fe0619b4acb43453a,openstack/ironic,stable/yoga,snmp-yoga,Id6f8996e4d103f849325f54fe0619b4acb43453a,Add SNMPv3 authentication functionality,MERGED,2022-07-22 01:27:12.000000000,2022-11-15 00:37:38.000000000,2022-11-15 00:36:25.000000000,551,60,34,850553,c274231bf5bb9260d2b13865ab20f39131d30b4b,95,5,9,10,28806,SONG SHUKUN,song,"Add SNMPv3 authentication functionality

Currently when using SNMPv3, iRMC driver does not use SNMPv3
authentication parameters so the SNMPv3 authentication will
always fail. And iRMC cannot recognize FIPS mode, so when FIPS mode
is enabled, iRMC driver could still use non-FIPS-compliant algorithms.

This commit changes iRMC driver to require and use SNMPv3
authentication parameters when 'irmc_snmp_version' is set to v3 and
also makes iRMC driver to force 'irmc_snmp_version' to v3,
'irmc_snmp_auth_proto' to SHA and 'irmc_snmp_priv_proto' to AES
when FIPS mode is enabled, because currently among the algorithms
supported by iRMC, only SHA and AES are FIPS compliant.

Conflicts:
       doc/source/admin/drivers/irmc.rst
       ironic/drivers/modules/irmc/common.py
       ironic/tests/unit/drivers/modules/irmc/test_boot.py
       ironic/tests/unit/drivers/modules/irmc/test_common.py

Change-Id: Id6f8996e4d103f849325f54fe0619b4acb43453a
Story: 2010085
Task: 45590
(cherry picked from commit 79f82c0262c84f1e317991052d065259b3a4683d)
"
openstack%2Fcharm-ceph-dashboard~master~I235eeef8ffc7f102e319eeeb4c12181e34f5a069,openstack/charm-ceph-dashboard,master,,I235eeef8ffc7f102e319eeeb4c12181e34f5a069,fix .gitreview repo reference,MERGED,2022-10-19 15:38:56.000000000,2022-11-15 00:28:57.000000000,2022-11-15 00:28:57.000000000,1,1,2,861895,b7e068f53a43737c5ebd70f64928eae11ba9d447,11,3,1,1,20634,Chris MacNaughton,Chris.MacNaughton,"fix .gitreview repo reference

Change-Id: I235eeef8ffc7f102e319eeeb4c12181e34f5a069
"
openstack%2Fopenstack-ansible~master~I1031cff1b1e13ca3e0d8c97c9cd28f25bfd5c6f1,openstack/openstack-ansible,master,,I1031cff1b1e13ca3e0d8c97c9cd28f25bfd5c6f1,[doc] Better document integrated usage of ceph-ansible,MERGED,2022-10-26 09:30:22.000000000,2022-11-15 00:16:23.000000000,2022-11-15 00:13:09.000000000,53,3,0,862676,70d27d660fa7bb3a4634c288e2b13af525a80bdd,11,3,2,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"[doc] Better document integrated usage of ceph-ansible

Upgrade path is not tested for ceph-ansible and thus we can not
recommend it's integrated usage with OSA. These nits should be
documented properly to explain the risks.

This patch is alternative implementation to more extensive one [1]

[1]  https://review.opendev.org/c/openstack/openstack-ansible/+/862508

Change-Id: I1031cff1b1e13ca3e0d8c97c9cd28f25bfd5c6f1
"
openstack%2Fopenstack-ansible~master~I74387a2e961e2b8355ea6a0c889b2f5674233ebf,openstack/openstack-ansible,master,,I74387a2e961e2b8355ea6a0c889b2f5674233ebf,Make ceph use storage network,MERGED,2022-11-09 20:46:07.000000000,2022-11-15 00:14:46.000000000,2022-11-15 00:13:07.000000000,7,4,5,864144,bb1287555c8fdff2f8c9c1d152b279ceab5bf6af,17,3,3,4,32666,Damian DƒÖbrowski,ddabrowski,"Make ceph use storage network

With current ""Ceph production example"" the difference between ceph's
public and storage network is not clear.

We assign Storage Network to compute nodes, but it's not used there.
We also asign Storage Network to ceph monitors, but it's not used there
as well.

Same problems apply to AIO environment.

As Dmitriy suggested in [1], ceph should not use mgmt network for
storage traffic.

This change makes ceph use storage network for:
- OSD<>OSD communication
- client<>OSD communication
- client<>MON communication

I think it's the most common scenario where all ceph-related traffic
uses dedicated(storage) network and do not depend on mgmt network.

This change affects both ""Ceph production example"" docs and AIO
environments.

[1] https://review.opendev.org/c/openstack/openstack-ansible/+/856566

Change-Id: I74387a2e961e2b8355ea6a0c889b2f5674233ebf
"
openstack%2Fsushy~master~I63b2a6ebd7d2a30e3165394c6418416b08c344a7,openstack/sushy,master,conf-server-side-retries,I63b2a6ebd7d2a30e3165394c6418416b08c344a7,Make server connection retries configurable,MERGED,2022-11-09 10:56:14.000000000,2022-11-15 00:07:45.000000000,2022-11-15 00:06:45.000000000,32,15,9,864102,56efdee0eefad6ec7376cc3fea1e04979164d446,22,3,5,5,23851,Riccardo Pittau,elfosardo,"Make server connection retries configurable

Adds server_side_retries and server_side_retries_delay configuration
options to customize number of retries in case of server failures, and
the time between the request retries.

Change-Id: I63b2a6ebd7d2a30e3165394c6418416b08c344a7
"
openstack%2Fsushy~stable%2Fzed~I371e4a2d294a3a87eddb230f13bca713e304f948,openstack/sushy,stable/zed,increase-retries-stable/zed,I371e4a2d294a3a87eddb230f13bca713e304f948,Increase server side retries,MERGED,2022-11-09 10:07:06.000000000,2022-11-15 00:07:42.000000000,2022-11-15 00:06:44.000000000,9,3,0,864037,6c521c5067f1042d161a7c9f04d3ed3480fd6d0e,10,3,1,3,23851,Riccardo Pittau,elfosardo,"Increase server side retries

This is to take into account possible increases in time gap between
operations from recent firmware versions, for example in Dell idrac
series 5.x where the time gap increased to almost 20 seconds from
the 10 seconds of the 4.x series, and avoid timeouts.

Change-Id: I371e4a2d294a3a87eddb230f13bca713e304f948
(cherry picked from commit 67185bf4af21c2b844b0d8824036e73c96e344d0)
"
openstack%2Fpython-barbicanclient~master~I2a0a5315daca8ce5bd6164cebbd2f917348c7675,openstack/python-barbicanclient,master,secret-consumers,I2a0a5315daca8ce5bd6164cebbd2f917348c7675,Implement microversions,NEW,2022-05-26 21:19:58.000000000,2022-11-14 23:50:18.000000000,,245,132,52,843552,f15a4690d0656c1dbec9ab025deab1a540ec08f9,58,5,20,5,9914,Ade Lee,alee,"Implement microversions

This patch introduces a new `microversion` parameter to the factory
method for the Client class.  The parameter is used to set
`default_microversion` in the HTTPClient.

Change-Id: I2a0a5315daca8ce5bd6164cebbd2f917348c7675
"
openstack%2Fopenstack-ansible-os_glance~master~I6d13e1e985f8e3bbb97b0af7063b469cb4b2dbca,openstack/openstack-ansible-os_glance,master,,I6d13e1e985f8e3bbb97b0af7063b469cb4b2dbca,Add external_lb_vip_address to glance_cors_allowed_origin by default,NEW,2022-10-20 17:06:17.000000000,2022-11-14 23:48:11.000000000,,6,1,1,862171,5bc252de44343f0fd38782f9be5a89fbdef28f8b,9,4,2,2,32666,Damian DƒÖbrowski,ddabrowski,"Add external_lb_vip_address to glance_cors_allowed_origin by default

Since ``horizon_images_upload_mode`` is enabled by default and
``glance_show_multiple_locations`` is disabled by default(turns out
it's not really required), we should add ``external_lb_vip_address`` to
``glance_cors_allowed_origin`` as default.

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/862167
Change-Id: I6d13e1e985f8e3bbb97b0af7063b469cb4b2dbca
"
openstack%2Fdesignate-specs~master~I7dcb1d40b04341e63c31c47f2df4624195d87f28,openstack/designate-specs,master,bp/zone-move,I7dcb1d40b04341e63c31c47f2df4624195d87f28,Adding a spec for implementing the zone move command in designate,MERGED,2021-06-04 05:03:15.000000000,2022-11-14 23:35:11.000000000,2022-11-14 23:34:13.000000000,109,0,31,794705,9f12598be836ed151b656ada6794e62ff1154fe6,37,5,7,2,32919,kiran pawar,kpdev,"Adding a spec for implementing the zone move command in designate

The spec include the details about the implementation of zone move.

Implements: blueprint zone-move
Change-Id: I7dcb1d40b04341e63c31c47f2df4624195d87f28
"
openstack%2Fironic~bugfix%2F21.0~Id2fca59bebb0745e6b16caaaa7838d1f1a2717e1,openstack/ironic,bugfix/21.0,capa-backport-to-bugfix/21.0,Id2fca59bebb0745e6b16caaaa7838d1f1a2717e1,Add support auth protocols for iRMC,MERGED,2022-10-24 01:51:28.000000000,2022-11-14 23:32:31.000000000,2022-11-14 23:31:25.000000000,39,11,1,862449,66b91b1a140d16e77544240cd312c153eacf6516,12,2,2,6,28806,SONG SHUKUN,song,"Add support auth protocols for iRMC

This patch adds new snmpv3 auth protocols to irmc which are supported
from irmc s6.

Change-id: Id2fca59bebb0745e6b16caaaa7838d1f1a2717e1
Story: 2010309
Task: 46353
(cherry picked from commit 233c6408389be5f3e271b46154943bc744e0290e)
"
openstack%2Fopenstack-ansible-lxc_container_create~master~I59e6504240eafdb5f0d010ff8a051078e25b1281,openstack/openstack-ansible-lxc_container_create,master,osa/systemd_roles,I59e6504240eafdb5f0d010ff8a051078e25b1281,Replace systemd_service templates with role,NEW,2022-10-14 14:43:31.000000000,2022-11-14 22:55:30.000000000,,79,133,0,861394,9bb647bf27ed3bf98f45c7d2f996709bfe7d050c,10,3,4,7,28619,Dmitriy Rabotyagov,noonedeadpunk,"Replace systemd_service templates with role

For consistency reasons we try to leverage our systemd_service role as
much as we can. Instead of maintaining separate systemd unit templates
the role can be leveraged for same purposes and reduce complexity in
this role.

Change-Id: I59e6504240eafdb5f0d010ff8a051078e25b1281
"
openstack%2Ftripleo-ansible~stable%2Fwallaby~I68a89e413b7c3eecb747386998bd36314250384b,openstack/tripleo-ansible,stable/wallaby,,I68a89e413b7c3eecb747386998bd36314250384b,Make creating/updating users idempotent,NEW,2022-11-09 08:19:58.000000000,2022-11-14 22:53:49.000000000,,41,9,2,864034,aa0deb023025731f64afc9a9c475d072fa47b601,18,4,6,2,14250,Grzegorz Grasza,xek,"Make creating/updating users idempotent

Similarly as in [1], updating user passwords causes auth tokens to
be revoked, which may cause service interrupution during a minor
update, or even cause a prolonged interruption in case of swift [2]

[1] https://bugs.launchpad.net/keystone/+bug/1647800
[2] https://bugzilla.redhat.com/show_bug.cgi?id=2097350

Change-Id: I68a89e413b7c3eecb747386998bd36314250384b
Related: rhbz#2097350
(cherry picked from commit b779d63b63735d4daa4286d8621d01e2c59de906)
"
openstack%2Fdesignate~master~I0e0d138049e6d4c31dea3cc6768cc15e59a5942c,openstack/designate,master,bug/1856442,I0e0d138049e6d4c31dea3cc6768cc15e59a5942c,Secondary zone loops AXFR transfer during zone creation,NEW,2022-11-09 17:09:47.000000000,2022-11-14 22:48:49.000000000,,3,1,3,864131,bc3ce86a63b74222bac035246b5d6db6ee0a1a54,7,3,2,1,32927,mitya-eremeev-2,mitya-eremeev-2,"Secondary zone loops AXFR transfer during zone creation

When we create a secondary zone, AXFR transfer loops indefinitely.
Normally, only one xfr should be performed.
Due to AXFR loop the zone changes status from active to pending all the time.

Co-Authored-By: ZhouHeng <zhouhenglc@inspur.com>
Closes-Bug: 1856442
Change-Id: I0e0d138049e6d4c31dea3cc6768cc15e59a5942c
"
openstack%2Fopenstack-ansible-ops~master~I70cc0192da9809798c90859937cd339ac1e1a971,openstack/openstack-ansible-ops,master,,I70cc0192da9809798c90859937cd339ac1e1a971,Set permissions on elastic data directories,MERGED,2022-10-28 09:51:48.000000000,2022-11-14 22:11:50.000000000,2022-11-14 22:10:06.000000000,9,0,2,862875,e13281a2464b68d7a618ee321433be3a4308739d,16,3,4,1,31542,Andrew Bonney,andrewbonney,"Set permissions on elastic data directories

Change-Id: I70cc0192da9809798c90859937cd339ac1e1a971
"
openstack%2Fopenstack-ansible-ops~master~I661662c0784010ca2fcc3b3d31df1a1d79dbed1e,openstack/openstack-ansible-ops,master,,I661662c0784010ca2fcc3b3d31df1a1d79dbed1e,Add support for enabling ELK stack security,MERGED,2022-10-28 09:51:48.000000000,2022-11-14 22:11:06.000000000,2022-11-14 22:10:02.000000000,355,14,0,862873,5437ddbd86660d8d98f4db9ea0a702f424557a95,15,3,5,34,31542,Andrew Bonney,andrewbonney,"Add support for enabling ELK stack security

Change-Id: I661662c0784010ca2fcc3b3d31df1a1d79dbed1e
"
openstack%2Fopenstack-ansible-ops~master~I59e7c92ebd91ceca161577e73d9f24826abedda1,openstack/openstack-ansible-ops,master,,I59e7c92ebd91ceca161577e73d9f24826abedda1,Enable cluster ID monitoring setting for beats using logstash,MERGED,2022-10-28 09:51:48.000000000,2022-11-14 22:10:04.000000000,2022-11-14 22:10:04.000000000,10,8,0,862874,2b65764a2e8360cc57b78fc32b6f0afecb29f7af,11,3,3,7,31542,Andrew Bonney,andrewbonney,"Enable cluster ID monitoring setting for beats using logstash

Change-Id: I59e7c92ebd91ceca161577e73d9f24826abedda1
"
openstack%2Fopenstack-helm-images~master~I9fd435a78d9f36ea145f7a4e0d93ac0cd23070e8,openstack/openstack-helm-images,master,remove-ussuri,I9fd435a78d9f36ea145f7a4e0d93ac0cd23070e8,Remove Ussuri image building and jobs,MERGED,2022-11-06 18:22:04.000000000,2022-11-14 22:05:53.000000000,2022-11-14 22:02:11.000000000,5,150,3,863774,e4adfc70be5af494b906eeb5fb6a3f53ea990609,17,3,2,7,21420,Gage Hugo,ghugo,"Remove Ussuri image building and jobs

Now that we've removed testing against ussuri releases in the
openstack-helm repo, we can remove the ussuri job building
and dependencies.

Change-Id: I9fd435a78d9f36ea145f7a4e0d93ac0cd23070e8
"
openstack%2Fopenstack-ansible-os_nova~master~I8eae97f9c60956049072de8b04e557671a8cdcfa,openstack/openstack-ansible-os_nova,master,osa-ironic-tidy,I8eae97f9c60956049072de8b04e557671a8cdcfa,Add nova_ironic_serialconsole_type default setting,NEW,2022-10-11 13:29:57.000000000,2022-11-14 21:42:56.000000000,,17,0,0,860948,91ef7e41d328cd2aa638ba6a8f3c7d8f81e26681,4,1,1,2,25023,Jonathan Rosser,jrosser,"Add nova_ironic_serialconsole_type default setting

This variable determines if one of the nova console proxies is
deployed alongside the nova-compute service for ironic. Currently
the only supported values are ""disabled"" and ""serialconsole""

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/860947
Change-Id: I8eae97f9c60956049072de8b04e557671a8cdcfa
"
openstack%2Fopenstack-ansible~master~I93ef5bff33ba7bf0b75539543611561e46bee3fc,openstack/openstack-ansible,master,osa-ironic-tidy,I93ef5bff33ba7bf0b75539543611561e46bee3fc,Add ironic serial console to haproxy,NEW,2022-10-11 14:58:15.000000000,2022-11-14 21:41:50.000000000,,19,2,1,860960,5e402263e42855d7043dad33726af51e2d89cd3b,8,1,2,2,25023,Jonathan Rosser,jrosser,"Add ironic serial console to haproxy

* Combine ironic and nova serial console backends when the nova
  console type is 'serialconsole'

* Create a separate ironic console frontend and backend when the
  ironic console type is different from the nova console type

* Add the serialconsole websocket to the content security policy

Change-Id: I93ef5bff33ba7bf0b75539543611561e46bee3fc
"
openstack%2Fopenstack-ansible~master~I936aa89129aeda56af9d9a1407073fccf00b7170,openstack/openstack-ansible,master,osa-ironic-tidy,I936aa89129aeda56af9d9a1407073fccf00b7170,Define a group for ironic_console,NEW,2022-10-11 13:24:04.000000000,2022-11-14 21:41:29.000000000,,4,0,0,860947,eb4853dcaabd488a41a27c00ade24d41aeaac63a,4,1,1,1,25023,Jonathan Rosser,jrosser,"Define a group for ironic_console

It is possible to install nova-serialconsole-proxy alongside
nova-compute to allow IPMI serial-over-lan consoles to be made
available through the openstack cli or through horizon.

The os_nova role needs to have logic to decide which ironic host to
install the nova serial proxy to, so we define an extra ansible group
for this purpose.

Change-Id: I936aa89129aeda56af9d9a1407073fccf00b7170
"
openstack%2Fopenstack-ansible-ops~master~I0231b0b00277f306066d4827988f9640d9a1fba7,openstack/openstack-ansible-ops,master,,I0231b0b00277f306066d4827988f9640d9a1fba7,kibana: fix installation on ubuntu jammy and other py3 only systems,NEW,2022-11-11 10:29:50.000000000,2022-11-14 21:41:06.000000000,,24,3,0,864258,2f1449b04c423861cf79ccfe8a793f71db358943,3,2,1,4,31542,Andrew Bonney,andrewbonney,"kibana: fix installation on ubuntu jammy and other py3 only systems

Change-Id: I0231b0b00277f306066d4827988f9640d9a1fba7
"
openstack%2Fswift~master~I40f1808b8aacdf8c4a26627aeaa8a78522422173,openstack/swift,master,p-proxy-529,I40f1808b8aacdf8c4a26627aeaa8a78522422173,WIP: prototype adaptive node suppressor,NEW,2022-10-21 21:00:56.000000000,2022-11-14 21:34:19.000000000,,892,90,7,862407,51771bda8cd8e992cfcc092182cb8b710731b030,17,2,6,8,7847,Alistair Coles,acoles,"WIP: prototype adaptive node suppressor

First cut at making an adaptive error limiter or rate controller.

Change-Id: I40f1808b8aacdf8c4a26627aeaa8a78522422173
"
openstack%2Fopenstack-ansible~master~If5d7777f80b67beb1e83d8f933552d0431d0f4a5,openstack/openstack-ansible,master,,If5d7777f80b67beb1e83d8f933552d0431d0f4a5,Drop usage of lxc containers proxy,MERGED,2022-10-19 07:20:17.000000000,2022-11-14 21:34:17.000000000,2022-11-14 21:32:57.000000000,0,6,3,861825,f19789e9a92a1d6e7c511af7768ce70120771766,19,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Drop usage of lxc containers proxy

We build LXC images with rpm/debootstrap and don't download external
ones for quite a while, thus we never actually use this override in our
roles and this overrided can be safely cleaned up.

Change-Id: If5d7777f80b67beb1e83d8f933552d0431d0f4a5
"
openstack%2Fopenstack-ansible-os_ironic~master~I2f67dfcf4164e009bf53e9324bd430aec4c97dcb,openstack/openstack-ansible-os_ironic,master,osa-ironic-tidy,I2f67dfcf4164e009bf53e9324bd430aec4c97dcb,Update variables for switchport introspection during inspection,NEW,2022-11-14 18:36:34.000000000,2022-11-14 20:53:49.000000000,,8,1,0,864437,9b87ffb6b7d9c3d7ec11d6f85930ea2c90f0d5a9,2,1,1,2,25023,Jonathan Rosser,jrosser,"Update variables for switchport introspection during inspection

1) The variable to allow processing hooks to be configured is used
in the ironic-inspector template but not documented in the role defaults.
Add the default and an example of usage.

2) When using LLDP to discover switchport connections during
inspection it is necessary to pass an additional kernel parameter
to the deploy image but there is no variable to allow this to
happen. This patch adds a variable that the deployer can use
to pass arbitrary kernel parameters to the deploy image.

Change-Id: I2f67dfcf4164e009bf53e9324bd430aec4c97dcb
"
openstack%2Fdevstack~master~I3ef969f6e373de103d26c9282cab94cea7ae87e5,openstack/devstack,master,debian-nv-patch1,I3ef969f6e373de103d26c9282cab94cea7ae87e5,"Revert ""Make debian-bullseye job non-voting""",MERGED,2022-11-14 06:50:45.000000000,2022-11-14 20:44:03.000000000,2022-11-14 20:42:15.000000000,0,2,2,864182,d00921a57bcd9b408817ac7feddfc49b49b9cea2,13,4,4,1,13252,Dr. Jens Harbott,jrosenboom,"Revert ""Make debian-bullseye job non-voting""

This reverts commit a4680766515ed9317b71cfb39cd0d75dc04f3d9c.

Reason for revert: Debian job got repaired

Change-Id: I3ef969f6e373de103d26c9282cab94cea7ae87e5
"
openstack%2Fos-net-config~stable%2Ftrain~I64f3ba6d086bb8814b8ea6e6b3b403c532c42e99,openstack/os-net-config,stable/train,zuul/queue,I64f3ba6d086bb8814b8ea6e6b3b403c532c42e99,Updating Zuul CI jobs for os-net-config repo,MERGED,2022-11-04 07:20:34.000000000,2022-11-14 20:31:32.000000000,2022-11-14 20:29:43.000000000,4,2,1,863592,f0d076fc1a5a6d7b295adc3a4dc2581ac9bb232c,14,5,2,1,33688,Vijayalakshmi,VijiC,"Updating Zuul CI jobs for os-net-config repo

Updated the Zuul CI layout.yaml to replace the gate job
‚Äòopenstack-tox-pep8‚Äô with the check job
‚Äòtripleo-ci-centos-8-content-provider‚Äô (which has a
dependency on ‚Äòopenstack-tox-pep8‚Äô in the os-net-config repo CI)

Change-Id: I64f3ba6d086bb8814b8ea6e6b3b403c532c42e99
(cherry picked from commit 4630bd0d598808b249c0f4e1f8ef95038c1c7f4f)
"
openstack%2Fgovernance~master~I0885701b160819f0ce3760163d67bf9e3a385fbf,openstack/governance,master,project-update,I0885701b160819f0ce3760163d67bf9e3a385fbf,Add zookeeper role under OpenStack-Ansible governance,MERGED,2022-11-01 16:47:01.000000000,2022-11-14 20:25:34.000000000,2022-11-14 20:24:32.000000000,1,0,2,863161,c170b9bf0dad1ff94ec576badce797e12188c7c2,13,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add zookeeper role under OpenStack-Ansible governance

During last PTG there was decision to provide coordination service
with OSA deployment.

Depends-On: https://review.opendev.org/c/openstack/project-config/+/863158
Change-Id: I0885701b160819f0ce3760163d67bf9e3a385fbf
"
openstack%2Fproject-config~master~Iff96fbd4d01fd8eb2bbcfb7080244d7a40811434,openstack/project-config,master,charm-manila-infinidat,Iff96fbd4d01fd8eb2bbcfb7080244d7a40811434,Add manila-infinidat charm to OpenStack charms,NEW,2022-11-08 02:45:16.000000000,2022-11-14 20:14:39.000000000,,8,0,3,863957,36ec25d96c263536ed105fc409669d009c7c8a07,15,3,7,2,30110,Nikolay Vinogradov,nikolay.vinogradov,"Add manila-infinidat charm to OpenStack charms

Add new charm that provides the Infinidat backend support
to the OpenStack Manila service.

Needed-by: I932b805e0f7d44040bad9c28ca4799f243f651af
Change-Id: Iff96fbd4d01fd8eb2bbcfb7080244d7a40811434
"
openstack%2Fproject-config~master~I51107d5483bf2326941bac720b495cdf3cfb0e8d,openstack/project-config,master,charm-infinidat-tools,I51107d5483bf2326941bac720b495cdf3cfb0e8d,Add the infinidat-tools charm to Openstack charms,NEW,2022-11-08 01:52:26.000000000,2022-11-14 20:14:20.000000000,,8,0,5,863955,963110054d923a334819f30b87c0f2eb69f236e2,15,3,6,2,30110,Nikolay Vinogradov,nikolay.vinogradov,"Add the infinidat-tools charm to Openstack charms

Change-Id: I51107d5483bf2326941bac720b495cdf3cfb0e8d
Needed-By: I081928fd0e789cca793ce1575127ceec46c906be
"
openstack%2Fproject-config~master~Ie4c09e4b93baa3d395877b4a3f28829e9a8716cf,openstack/project-config,master,charm-cinder-infinidat,Ie4c09e4b93baa3d395877b4a3f28829e9a8716cf,Add the cinder-infinidat charm to Openstack charms,NEW,2022-11-08 01:38:43.000000000,2022-11-14 20:14:03.000000000,,8,0,3,863954,98ec3136822292a8771b7b7db818ae30fbdd280c,21,3,9,2,30110,Nikolay Vinogradov,nikolay.vinogradov,"Add the cinder-infinidat charm to Openstack charms

Needed-By: I33b90b5dc9e23f146f1d0fc256317a72bd7e0630
Change-Id: Ie4c09e4b93baa3d395877b4a3f28829e9a8716cf
"
openstack%2Fproject-config~master~I718d7d0f297a05008255cf02cb4b9d1d41d7377f,openstack/project-config,master,osa/skyline,I718d7d0f297a05008255cf02cb4b9d1d41d7377f,Add repository for Skyline installation by OpenStack-Ansible,NEW,2022-11-01 17:12:40.000000000,2022-11-14 20:13:25.000000000,,8,0,2,863165,1b0dbdac3f10bcf55aee6ac275869957695f1cd7,11,4,3,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add repository for Skyline installation by OpenStack-Ansible

Needed-By: https://review.opendev.org/c/openstack/governance/+/863166
Change-Id: I718d7d0f297a05008255cf02cb4b9d1d41d7377f
"
openstack%2Fhorizon~stable%2Fvictoria~I076a97a6f943ab74a2db8bc5179a7db194009db4,openstack/horizon,stable/victoria,bug/1827120-stable/zed-stable/yoga-stable/xena-stable/wallaby-stable/victoria,I076a97a6f943ab74a2db8bc5179a7db194009db4,Fix app cred create without project_id for domain admins,NEW,2022-11-14 18:45:31.000000000,2022-11-14 20:09:29.000000000,,58,3,0,864187,37caed80e67fe71abf44a877908ffdf708239515,2,1,1,2,14567,Rodrigo Barbieri,ganso,"Fix app cred create without project_id for domain admins

Users with domain admin role that are not cloud admins are
not able to get scoped context and create an application
credential with project_id, so this change forces the
scoped context in that particular case.

Closes-bug: #1827120
Change-Id: I076a97a6f943ab74a2db8bc5179a7db194009db4
(cherry picked from commit 6eeaf9852478e25ff77c21117664ac126c5357a4)
(cherry picked from commit 778a52e66aeab883b31db729e04944eeecfec6a2)
(cherry picked from commit 13e821a079134a458b24593d9593e0e5318e6cd6)
(cherry picked from commit 084ee8aaea703d99720c0cdc2751b6479dab3b2f)
(cherry picked from commit 2f8aaa03e8ed4c2c8e3628f1f723f304b24b1f82)
"
openstack%2Foslo.log~master~I4bbcfe7db6d75188e61b9084cb02b2dd2aaa0c76,openstack/oslo.log,master,bug/1995514,I4bbcfe7db6d75188e61b9084cb02b2dd2aaa0c76,Make the eventlet logging fix execution conditional,MERGED,2022-11-11 09:27:00.000000000,2022-11-14 20:06:25.000000000,2022-11-14 20:05:21.000000000,3,2,2,864252,de615d9370681a2834cebe88acfa81b919da340c,13,6,2,1,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Make the eventlet logging fix execution conditional

This patch changes the ``log.setup()`` signature to allow a kwarg
that makes the eventlet logging fix conditional.

Some libraries that import oslo.log, replace the logging locking
handling with its own implementation. For example oslo.privsep
replaces the logging handler with its own one [1], that allows the
communication between the privileged daemon process and the service
importing the library. This local handler clashes with the
evenlet logging fix implemented in [2].

[1]https://github.com/openstack/oslo.privsep/blob/1020c6fbf54f93cad9fa36b97bcd9cf75549984a/oslo_privsep/daemon.py#L579
[2]https://review.opendev.org/c/openstack/oslo.log/+/852443

Partial-Bug: #1995514
Related-Bug: #1995091
Change-Id: I4bbcfe7db6d75188e61b9084cb02b2dd2aaa0c76
"
openstack%2Fproject-config~master~I0b0b51f2b8229e455a74308e716d33c1c189f5fe,openstack/project-config,master,osa/zookeeper,I0b0b51f2b8229e455a74308e716d33c1c189f5fe,Add zookeeper repo to zuul and gerritbot,MERGED,2022-11-01 16:52:29.000000000,2022-11-14 19:42:00.000000000,2022-11-14 19:17:27.000000000,6,0,1,863162,4c2dcf2a8daeadc40d22f2fc66b55853e3dcce99,9,2,2,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add zookeeper repo to zuul and gerritbot

Change-Id: I0b0b51f2b8229e455a74308e716d33c1c189f5fe
"
openstack%2Fmagnum~master~If583bec63a2135486e393bacb16402f6821b7ede,openstack/magnum,master,cluster-api2,If583bec63a2135486e393bacb16402f6821b7ede,WIP: Create and delete CRDs via kubectl,NEW,2022-07-26 17:35:30.000000000,2022-11-14 19:20:23.000000000,,406,15,3,851076,a4f651287e36eddcec32ed6aed8fe36fdc336807,18,1,10,3,782,John Garbutt,johngarbutt,"WIP: Create and delete CRDs via kubectl

Rather than use ClusterAPI directly, use this helm charts:
https://github.com/stackhpc/capi-helm-charts/tree/main/charts/openstack-cluster

You can create dev setup for the capi operator by installing
Azimuth in an OpenStack VM using this ansible, ideally the
same OpenStack cloud your dev magnum is talking to:
https://stackhpc.github.io/azimuth-config/try/

story: 2009780

WIP parts... almost everything, attempts create/delete.

TODO: update this list after move to helm!

1) Add missing features / interactions

In particular:
* Actually prove create works (current tests leave a failed cluster)
* See if delete should be more async, i.e. pass wait=false
* Extract kubectl via usual magnum coe credentials API
* Update to cluster size and node groups
* Template should respect the networks provided to the API
* Provide a test script using both terraform provider and CLI

2) Need to create secrets on demand with the cluster

For the moment we assume a pre-created secret per project.
as trusts don't work properly with cluster API right now.

The driver could simply create a application credential,
store the secret in kube, and use the cluster uuid to know
which app cred to delete on cluster teardown.

Will need a way to regenerate the app cred on cluster
updates somehow, for when the user that created the cluster
is removed from a project, but the project still wants to keep
the cluster alive.

3) Need better error handling e.g. on failed create

We don't spot failures where the operator fails before
adding some status into the CRD, e.g. when specifying
a badly formatted label. We just rely on the cluster
create timeout, which might be quite long.

Change-Id: If583bec63a2135486e393bacb16402f6821b7ede
"
openstack%2Fpython-barbicanclient~master~I024db27d12ea33713bda0273d8748577cc89a38d,openstack/python-barbicanclient,master,secret-consumers,I024db27d12ea33713bda0273d8748577cc89a38d,Add secret consumers Python API,NEW,2022-09-05 15:26:30.000000000,2022-11-14 18:53:34.000000000,,335,36,209,855952,170b935e6f09a22557ebebed8a772e0d41fb312c,66,5,21,7,35125,Mauricio Harley,mharley-rh,"Add secret consumers Python API

This adds the Python API for secret consumers,
similar to the container consumers API.
Also adding functional tests for both secret
and container consumers.

Co-Authored-By: Grzegorz Grasza <xek@redhat.com>
Change-Id: I024db27d12ea33713bda0273d8748577cc89a38d
"
openstack%2Fcinder~master~I46ce4c994d62c6304360dde64d6f2eeaa646c1bf,openstack/cinder,master,bug/1895035,I46ce4c994d62c6304360dde64d6f2eeaa646c1bf,Add CI Job For lvm+ceph With c-bak Enabled,NEW,2021-04-05 19:07:22.000000000,2022-11-14 18:33:48.000000000,,13,0,27,784815,08c0be976b780d3ac80164ab099e68b1279bc76d,449,2,15,1,20813,Sofia Enriquez,enriquetaso,"Add CI Job For lvm+ceph With c-bak Enabled

This patch adds a non-voting job to test backup and multibackend
features, such as restoring backups from different volume types.

Change-Id: I46ce4c994d62c6304360dde64d6f2eeaa646c1bf
"
openstack%2Fopenstack-ansible-os_ironic~master~Ib45ef9bfe5a64485b14f8ba526c1b9e4097092e6,openstack/openstack-ansible-os_ironic,master,osa/healthcheck,Ib45ef9bfe5a64485b14f8ba526c1b9e4097092e6,Enable /healtcheck for Ironic APIs,NEW,2022-11-14 16:14:33.000000000,2022-11-14 18:30:41.000000000,,6,0,0,864423,12efc6f9d1210d23bad10f3b703df3f9677beb33,3,1,2,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"Enable /healtcheck for Ironic APIs

Change-Id: Ib45ef9bfe5a64485b14f8ba526c1b9e4097092e6
"
openstack%2Fopenstack-ansible-os_sahara~master~I7707babe492dd8d348f8309e18aecba4dbf8b2a4,openstack/openstack-ansible-os_sahara,master,osa/healthcheck,I7707babe492dd8d348f8309e18aecba4dbf8b2a4,Update api-paste to enable healthcheck,NEW,2022-11-14 15:55:23.000000000,2022-11-14 18:10:53.000000000,,6,0,0,864422,32a06c7aa7196f880503ffef379659d66b846ee5,2,1,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Update api-paste to enable healthcheck

Change-Id: I7707babe492dd8d348f8309e18aecba4dbf8b2a4
"
openstack%2Ftripleo-ansible~stable%2Fwallaby~I646cd49b614a9f494e77f9893521d3c070900ed5,openstack/tripleo-ansible,stable/wallaby,,I646cd49b614a9f494e77f9893521d3c070900ed5,Move cryprography pin,NEW,2022-11-10 08:04:06.000000000,2022-11-14 17:55:08.000000000,,4,3,12,864165,4106fef31f3061f290a7bf011f85fe36c367dec0,12,5,2,4,14250,Grzegorz Grasza,xek,"Move cryprography pin

This moves the cryptography pin to ansible-requirements.txt
which is used as a constraints file[1].

[1] https://opendev.org/openstack/tripleo-ansible/src/branch/master/zuul.d/playbooks/pre.yml#L42

Related-Bug: #1995608
Change-Id: I646cd49b614a9f494e77f9893521d3c070900ed5
(cherry picked from commit c0bc395ab494ee18e77fba608cdd40762c7b8c51)
"
openstack%2Fpython-glanceclient~master~I0e7942045d883ac398bab4a7a85f2b4ac9b1ed8c,openstack/python-glanceclient,master,bug/1607317,I0e7942045d883ac398bab4a7a85f2b4ac9b1ed8c,Boolean options: use strict checking,NEW,2022-09-21 17:43:16.000000000,2022-11-14 17:53:55.000000000,,26,1,3,858785,88e3b0ad984797ec1f856429698949e4781dff3a,11,4,3,4,8122,Cyril Roelandt,cyril.roelandt.enovance,"Boolean options: use strict checking

Boolean options (such as ""--protected"" for glance md-namespace-update)
should accept a limited amount of valid values, rather than assuming an
""invalid"" value means ""False"".

The following values (no matter the case) will now be interpreted as
True: ‚Äòt‚Äô,‚Äôtrue‚Äô, ‚Äòon‚Äô, ‚Äòy‚Äô, ‚Äòyes‚Äô, or ‚Äò1‚Äô.

The following values (no matter the case) will now be interpreted as
False: ‚Äòf‚Äô, ‚Äòfalse‚Äô, ‚Äòoff‚Äô, ‚Äòn‚Äô, ‚Äòno‚Äô, or ‚Äò0‚Äô.

Change-Id: I0e7942045d883ac398bab4a7a85f2b4ac9b1ed8c
Closes-Bug: #1607317
"
openstack%2Fhorizon~master~I356e6849892ed87b2827740e265fcf15fc076cb5,openstack/horizon,master,fixattachingvideo,I356e6849892ed87b2827740e265fcf15fc076cb5,Attach video even if the exception happens in cleanup,NEW,2022-11-14 11:19:44.000000000,2022-11-14 17:47:15.000000000,,11,6,0,864402,6d7ecc144107b38101edc7b58e0b3f3519c61cb2,7,2,3,1,8648,Radomir Dopieralski,thesheep,"Attach video even if the exception happens in cleanup

The way we were handling attaching video in integration tests, it would
not attach it if the error happened in a cleanup, not in the main body
of the test. This should fix that.

Change-Id: I356e6849892ed87b2827740e265fcf15fc076cb5
"
openstack%2Fswift~master~If01b36949fac0894881191629ef3ac9aa06188a0,openstack/swift,master,,If01b36949fac0894881191629ef3ac9aa06188a0,object-server: Add API to just consolidate hashes,NEW,2022-09-26 22:39:04.000000000,2022-11-14 17:47:03.000000000,,32,12,7,859348,88eab597cd5670088dd906d1e14ee29b83cae7eb,9,1,2,1,15343,Tim Burke,tburke,"object-server: Add API to just consolidate hashes

Change-Id: If01b36949fac0894881191629ef3ac9aa06188a0
"
openstack%2Fswift~master~Id9e8b7e670a67233ac8b79da0b7b8387e302ac02,openstack/swift,master,safe-reload,Id9e8b7e670a67233ac8b79da0b7b8387e302ac02,"wsgi: Start workers in parallel, rather than serially",MERGED,2022-10-27 23:26:57.000000000,2022-11-14 17:35:28.000000000,2022-11-14 17:34:28.000000000,12,11,14,862843,f08b8e0af215ca987b7a014e6c1f5907a4df7824,20,3,3,1,15343,Tim Burke,tburke,"wsgi: Start workers in parallel, rather than serially

A single worker can take a second or two to start up, which really adds
up when you've got, say, 48 workers.

Change-Id: Id9e8b7e670a67233ac8b79da0b7b8387e302ac02
Related-Change: I83cdaa2cbd394cbd49609c65bf9c5ed026c55417
"
openstack%2Foctavia-tempest-plugin~master~I212931cc9f1d60c868f3442b1b6e6260789c763e,openstack/octavia-tempest-plugin,master,,I212931cc9f1d60c868f3442b1b6e6260789c763e,Add a new endpoint in test_server to download huge buffer,NEW,2021-03-29 07:42:37.000000000,2022-11-14 17:29:23.000000000,,51,0,5,783612,3ed2c4e1f1ca23ae3a288586a14795387da91017,6,4,1,1,29244,Gregory Thiemonge,gthiemonge,"Add a new endpoint in test_server to download huge buffer

Add a new /data/ endpoint in test_server.go, allowing the user to
download a random buffer of a user-requested size:
For instance /data/100KB returns a 100KB data buffer, /data/1GB returns
a 1GB data buffer, etc...

This could enable performance tests to use test_server.go. This could
also help testing stats API in Octavia.

Change-Id: I212931cc9f1d60c868f3442b1b6e6260789c763e
"
openstack%2Fdesignate~master~I296c5f085cce27033461be81ca58c85f095df89a,openstack/designate,master,restart-if-needed-ib,I296c5f085cce27033461be81ca58c85f095df89a,Reload Infoblox config after deleting zone,MERGED,2020-07-30 16:35:39.000000000,2022-11-14 17:25:28.000000000,2022-11-14 17:24:27.000000000,34,2,13,744013,d0e1bb18721352007c1c0356658ee73d0bed8c06,44,7,10,3,29543,Scott Solkhon,scott.solkhon,"Reload Infoblox config after deleting zone

If you delete a zone using the Infoblox backend
the zone will be deleted from Infoblox but the
zone within OpenStack will go into an ERROR state
unless an operator manually logs into Infoblox
and issues a reload of the running configuration.

This commit fixes this bug by issuing a 'restart
if needed' after deleting the zone. This does not
happen when creating zones as 'restart if needed'
can be passed through as a param into that API call.

Co-Authored-By: Jay Faulkner <jay@jvf.cc>
Change-Id: I296c5f085cce27033461be81ca58c85f095df89a
Closes-Bug: #1840253
"
openstack%2Fswift~master~I4b935a47f39642c11364f2a8d50a5f2ebb3b84f1,openstack/swift,master,p-proxy-529,I4b935a47f39642c11364f2a8d50a5f2ebb3b84f1,proxy: extract response error handling to single method,MERGED,2022-10-17 17:33:41.000000000,2022-11-14 17:19:26.000000000,2022-11-14 17:18:23.000000000,126,47,8,861652,623024848e623c4fb4f50315de48d227041670ae,24,2,5,5,7847,Alistair Coles,acoles,"proxy: extract response error handling to single method

This patch introduces a check_response method to proxy server
Application class. The method provides common checking and reporting
of backend response errors (i.e. responses with status code >=
500). This checking was previously duplicated in proxy controller
classes.

The formatting and content of error logging messages is now more
unform, which does result in changes to some logged error messages.

Change-Id: I4b935a47f39642c11364f2a8d50a5f2ebb3b84f1
"
openstack%2Fcharm-vault~master~I18aa6c9193379ea454851b6f60a8f331ef88a980,openstack/charm-vault,master,bug/1983269,I18aa6c9193379ea454851b6f60a8f331ef88a980,Implement cert cache for vault units (v3),NEW,2022-08-25 20:11:37.000000000,2022-11-14 17:18:34.000000000,,889,22,20,854676,10c125309fa5457610cf802b054625c3fd5c4a12,49,6,7,4,14567,Rodrigo Barbieri,ganso,"Implement cert cache for vault units (v3)

This cache is used to store certificates and keys
issued by the leader unit. Non-leader units read
these certificates and keep data in their
""tls-certificates"" relations up to date.
This ensures that charm units that receive certs
from vault can read from relation data of any
vault unit and receive correct data.

This patch is mostly the same as
f55055b8783ca6f3f569209b4f82285377f5ac64
but improved to avoid LP#1983269 by breaking
down the cert cache into separate key-value pairs
for each remote unit and avoiding a race-condition
caused by get-csr action.

Co-Authored-By: Rodrigo Barbieri <rodrigo.barbieri@canonical.com>

Change-Id: I18aa6c9193379ea454851b6f60a8f331ef88a980
Closes-Bug: #1940549
Closes-Bug: #1983269
"
openstack%2Fpuppet-glance~stable%2Fwallaby~I2477d5e271b017ee12546c67f4c3f3f9be89c062,openstack/puppet-glance,stable/wallaby,,I2477d5e271b017ee12546c67f4c3f3f9be89c062,Ensure [DEFAULT] show_multiple_locations is cleared,MERGED,2022-11-10 19:34:27.000000000,2022-11-14 17:02:36.000000000,2022-11-14 17:02:36.000000000,4,3,0,864179,11b99bf0882c11b204bdcdc89a727ce8e5159b4b,7,3,1,2,21129,Alan Bishop,ASBishop,"Ensure [DEFAULT] show_multiple_locations is cleared

The parameter was already deprecated, but it is still required in
some setup (eg. to leverage in-storage copy in a deployment with Ceph
used for cinder/glance).

Considering the parameter is still valid, this change ensures it is
removed by default, so that old value is properly removed from config
file.

Change-Id: I2477d5e271b017ee12546c67f4c3f3f9be89c062
(cherry picked from commit 5d977c750acf5276ce7fb7772436e9e74c2be001)
(cherry picked from commit 8e7a4c46dd474b5bee8ba1b5fb1e62f5b6bf4e5e)
(cherry picked from commit af0063b34c8d4041e9690d658ea9f0db2e07aca0)
"
openstack%2Fneutron~master~I0ef9330232e2ed5dbda6e45917c291c7385d1e0d,openstack/neutron,master,distributed_metadata_data_path,I0ef9330232e2ed5dbda6e45917c291c7385d1e0d,Code move for metadata signature function,MERGED,2022-10-19 08:05:16.000000000,2022-11-14 17:00:48.000000000,2022-11-14 16:59:33.000000000,30,34,12,861829,b7d04d5d92e56f6f246cd6db02946fe42ea3929d,29,4,3,6,9531,liuyulong,LIU-Yulong,"Code move for metadata signature function

Move _sign_instance_id to common utils for distributed metadata.

Partially-Implements: blueprint distributed-metadata-datapath
Change-Id: I0ef9330232e2ed5dbda6e45917c291c7385d1e0d
"
openstack%2Fpython-glanceclient~master~I1cd417262ed66925300ecfe7252d2e1ff9e45f46,openstack/python-glanceclient,master,bug/1578596,I1cd417262ed66925300ecfe7252d2e1ff9e45f46,image create/update: Prevent user from passing read-only properties,NEW,2022-09-21 14:47:53.000000000,2022-11-14 16:58:39.000000000,,67,13,2,858757,d1d98bf3e6927123c613ee0f159ef5f2e2d2ab98,6,2,2,2,8122,Cyril Roelandt,cyril.roelandt.enovance,"image create/update: Prevent user from passing read-only properties

Users should not be allowed to pass read-only properties to
image-create, image-create-via-import and image-update.

Change-Id: I1cd417262ed66925300ecfe7252d2e1ff9e45f46
Closes-Bug: #1578596
"
openstack%2Fhorizon~stable%2Fwallaby~I076a97a6f943ab74a2db8bc5179a7db194009db4,openstack/horizon,stable/wallaby,bug/1827120-stable/zed-stable/yoga-stable/xena-stable/wallaby,I076a97a6f943ab74a2db8bc5179a7db194009db4,Fix app cred create without project_id for domain admins,MERGED,2022-11-04 20:58:19.000000000,2022-11-14 16:55:57.000000000,2022-11-14 16:54:49.000000000,58,3,0,863629,2f8aaa03e8ed4c2c8e3628f1f723f304b24b1f82,9,4,1,2,14567,Rodrigo Barbieri,ganso,"Fix app cred create without project_id for domain admins

Users with domain admin role that are not cloud admins are
not able to get scoped context and create an application
credential with project_id, so this change forces the
scoped context in that particular case.

Closes-bug: #1827120
Change-Id: I076a97a6f943ab74a2db8bc5179a7db194009db4
(cherry picked from commit 6eeaf9852478e25ff77c21117664ac126c5357a4)
(cherry picked from commit 778a52e66aeab883b31db729e04944eeecfec6a2)
(cherry picked from commit 13e821a079134a458b24593d9593e0e5318e6cd6)
(cherry picked from commit 084ee8aaea703d99720c0cdc2751b6479dab3b2f)
"
openstack%2Fnova~master~Ib775c2210349b72b3dc033554ac6d8b35b8d2d79,openstack/nova,master,bug/1899487,Ib775c2210349b72b3dc033554ac6d8b35b8d2d79,Don't provide MTU value in metadata service if DHCP is enabled,NEW,2022-09-02 14:02:19.000000000,2022-11-14 16:52:38.000000000,,36,1,4,855664,db933a78051bc23f8e57ba5a7c21eb2c74e3bcc1,24,2,3,3,11975,Slawek Kaplonski,slaweq,"Don't provide MTU value in metadata service if DHCP is enabled

For networks with subnets with enabled DHCP service don't provide
mtu value in the metadata. That way cloud-init will not configure it
""statically"" in e.g. netplan's config file and guest OS will use MTU
value provided by the DHCP service.

Closes-Bug: #1899487
Change-Id: Ib775c2210349b72b3dc033554ac6d8b35b8d2d79
"
openstack%2Fdevstack~stable%2Frocky~Icdaaf8e6ba74e0d5f7da03a53860331bb9358e8d,openstack/devstack,stable/rocky,,Icdaaf8e6ba74e0d5f7da03a53860331bb9358e8d,[stable-only] CI: Remove Ironic test; branch EOL,NEW,2022-11-12 17:01:36.000000000,2022-11-14 16:49:34.000000000,,4,6,3,864338,0bf26a97905937f0de49d85ded9220bfc78f9527,6,1,2,1,10342,Jay Faulkner,JayF,"[stable-only] CI: Remove Ironic test; branch EOL

Ironic Rocky is EOL, remove the job.
nova-cells-v1 job is no longer defined as well

Change-Id: Icdaaf8e6ba74e0d5f7da03a53860331bb9358e8d
"
openstack%2Fmagnum~master~I32b7a91640f4f65b9662de080682761a2c182055,openstack/magnum,master,cluster-api2,I32b7a91640f4f65b9662de080682761a2c182055,Add a stub cluster_api driver,NEW,2021-10-26 15:58:21.000000000,2022-11-14 16:44:47.000000000,,95,0,1,815521,75a6364d40ef14ff117c7771d329e8d7c9760325,11,2,5,4,782,John Garbutt,johngarbutt,"Add a stub cluster_api driver

The plan is to slowly build up the ability to create K8s CRDs
instead of heat templates in a separate driver.
The starting point is adding the new experimental driver.

story: 2009780

Change-Id: I32b7a91640f4f65b9662de080682761a2c182055
"
openstack%2Fpuppet-ovn~stable%2Fzed~Ia3112b9a219b90af718c49776da49078449f09a2,openstack/puppet-ovn,stable/zed,ovn-ofctrl-wait-before-clear-stable/zed,Ia3112b9a219b90af718c49776da49078449f09a2,Add support for ovn-ofctrl-wait-before-clear,MERGED,2022-11-08 16:04:28.000000000,2022-11-14 16:44:11.000000000,2022-11-14 16:43:09.000000000,27,2,5,863807,a8f8fe2cece2e20ee8c1c1b3e7d78cb3d780d6b9,19,3,5,3,5756,Terry Wilson,otherwiseguy,"Add support for ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

Change-Id: Ia3112b9a219b90af718c49776da49078449f09a2
(cherry picked from commit b5d38dcbd4cc8a56cc0d028f982accf23a19b15c)
"
openstack%2Fcloudkitty~master~I31bc2cdf620fb5c0f561dc9de8c10d7882895cce,openstack/cloudkitty,master,fix-use-history-from-gnocchi,I31bc2cdf620fb5c0f561dc9de8c10d7882895cce,Use correct metadata for metrics gathered from gnocchi,NEW,2022-10-19 17:03:11.000000000,2022-11-14 16:37:47.000000000,,18,1,6,861908,4b89f4808818c7e15a17e5691aad26b1fd247a67,11,2,3,3,28356,Rafael Weingartner,rafaelweingartner,"Use correct metadata for metrics gathered from gnocchi

Gnocchi fixed its `aggregates` API with PR
https://github.com/gnocchixyz/gnocchi/pull/1059. Before that patch,
the `aggregates` API would only return the latest metadata for the
resource of the metric being handled. Therefore, for CloudKitty
processing and reprocessing, we would always have the possibility of
using the wrong attribute version to rate the computing resources.

With this patch we propose to always use the correct metadata for the
processing and reprocessing of CloudKitty. This means, we always use
the metadata for the timestamp that we are collecting at Gnocchi.

This also means that we need to depend on the newest version of
Gnocchi that has not been released yet.

Change-Id: I31bc2cdf620fb5c0f561dc9de8c10d7882895cce
"
openstack%2Fos-brick~master~I18b55da0d1f142818e7ea14f6eebcc0f0f0cd23f,openstack/os-brick,master,bug/1989280,I18b55da0d1f142818e7ea14f6eebcc0f0f0cd23f,Fix wrong assertion methods,NEW,2022-09-12 11:57:12.000000000,2022-11-14 16:29:22.000000000,,13,13,1,857044,dbec249645c4963d4080dd1944745efa7a7ce602,17,2,2,3,7634,Takashi Natsume,natsumet,"Fix wrong assertion methods

Replace 'called_once_with' with 'assert_called_once_with'.

Change-Id: I18b55da0d1f142818e7ea14f6eebcc0f0f0cd23f
Closes-Bug: 1989280
Signed-off-by: Takashi Natsume <takanattie@gmail.com>
"
openstack%2Fironic-tempest-plugin~master~I349e4e2e3d7dcb90c25860b34d6be19b458ff584,openstack/ironic-tempest-plugin,master,typo-fix,I349e4e2e3d7dcb90c25860b34d6be19b458ff584,Fix typo: BaremetalIdracRedfishConfigurationMolds,MERGED,2022-11-11 09:28:42.000000000,2022-11-14 16:24:55.000000000,2022-11-14 16:23:51.000000000,1,1,0,864253,4684f915b58d2c161295100802dec7076920451f,8,4,1,1,27909,Aija Jauntƒìva,ajya,"Fix typo: BaremetalIdracRedfishConfigurationMolds

Configuration in the class name was mistyped.

Change-Id: I349e4e2e3d7dcb90c25860b34d6be19b458ff584
"
openstack%2Foslo.utils~master~I8729cf180f92f43519c942e22f3b285377a5612f,openstack/oslo.utils,master,bug-1996426,I8729cf180f92f43519c942e22f3b285377a5612f,[imageutils] Fix __str__ for QemuImgInfo,MERGED,2022-11-11 21:18:15.000000000,2022-11-14 15:51:55.000000000,2022-11-14 15:50:54.000000000,4,1,1,864312,d49d5944824f15d00e04e1b9c7f8c3b03b440c95,7,2,1,2,5314,Brian Rosmaita,brian-rosmaita,"[imageutils] Fix __str__ for QemuImgInfo

Code is calling 'appened' on a list; correct this to 'append'.

Closes-bug: #1996426
Change-Id: I8729cf180f92f43519c942e22f3b285377a5612f
"
openstack%2Freleases~master~Iddaaf7639cc5f3743eb20714a868afbc3ce981e3,openstack/releases,master,wallaby-em,Iddaaf7639cc5f3743eb20714a868afbc3ce981e3,[ironic] Transition Wallaby to EM,MERGED,2022-10-21 13:00:34.000000000,2022-11-14 15:44:51.000000000,2022-11-14 15:44:51.000000000,60,0,5,862322,1ee9b929f43441a77994e35acadd5e032ea3fbed,15,7,3,15,17685,Elod Illes,elod.illes,"[ironic] Transition Wallaby to EM

This transition the wallaby branch to extended maintenance.
Changes for bugfixes and things the team deems important are
still encouraged, but there will no longer be official releases
off of the branch.

Please +1 if the team is ready for us to proceed with this
transition, or -1 if there are any final backports currently in
flight that we should wait for. For the latter case, please
update the patch with the new commit hash after doing a final
release to get those changes out so we know to proceed with the
transition.

The transition deadline is November 2nd, 2022.

Change-Id: Iddaaf7639cc5f3743eb20714a868afbc3ce981e3
"
openstack%2Fswift~stable%2Fwallaby~I4d807f3b3649a45dbb2166bb8e911c45fb9cb701,openstack/swift,stable/wallaby,,I4d807f3b3649a45dbb2166bb8e911c45fb9cb701,CI: Add nslookup_target to FIPS jobs,NEW,2022-11-04 11:24:18.000000000,2022-11-14 15:35:23.000000000,,3,0,1,863621,0bb66c3f471f3ba6375546cffdb973ccae481a88,4,1,1,1,34120,Andre Aranha,afariasa,"CI: Add nslookup_target to FIPS jobs

At some point, this became a required parameter.

Change-Id: I4d807f3b3649a45dbb2166bb8e911c45fb9cb701
Related-Change: Iebf474c9351e4246d7ab2072b48a50e93dbf0b94
(cherry picked from commit 3e6ce930b6ce00a29ff206c4d323e2f3ea51d2b2)
(cherry picked from commit b8b3f044f85fa0af4a8556bc2ed65ec6437d6dbb)
"
openstack%2Fopenstacksdk~master~I8e2ae8545cfaf32ced6d086a0921732f16282216,openstack/openstacksdk,master,857727-patch9,I8e2ae8545cfaf32ced6d086a0921732f16282216,Add support for other metadef property operations,NEW,2022-09-14 15:31:43.000000000,2022-11-14 15:29:52.000000000,,574,0,50,857727,18f5bff16e90bca97319d8b77cbf6a69a0b8c9d7,25,3,12,7,35119,jihyun huh,jhhuh,"Add support for other metadef property operations

The Image Metadata Property is not support in SDK currently.
In this patch, I added an operations of image metadata properties.

- Remove ignore files (.idea/)
- Remove failed test
- Resolve PEP8
- Resolve merge conflict
- Add functional test
- Add unit test

Co-authored-by: KIM SOJUNG <thwjd2717@gmail.com>
Co-authored-by: GA EUM KIM <rkdms7220@naver.com>
Co-authored-by: EunYoung Kim <lilac94.kim@gmail.com>
Co-authored-by: hyemin Choi <dropmoon3523@gmail.com>
Change-Id: I8e2ae8545cfaf32ced6d086a0921732f16282216
"
openstack%2Ftripleo-ansible~master~I748a7a24aeefd8dd4f465b5ab7f5352a50e71267,openstack/tripleo-ansible,master,,I748a7a24aeefd8dd4f465b5ab7f5352a50e71267,Replace deprecated PlayIterator attributes,ABANDONED,2022-10-06 03:32:01.000000000,2022-11-14 15:10:36.000000000,,15,14,1,860516,1e2ea56ca9cf61e2b8ef567873d5086299705900,13,4,4,1,9816,Takashi Kajinami,kajinamit,"Replace deprecated PlayIterator attributes

ITERATING_* attributes and FAILED_* attributes of PlayIterator has been
deprecated[1] and causes the following warning message.

```
[DEPRECATION WARNING]: PlayIterator.ITERATING_COMPLETE is deprecated,
use  ansible.play_iterator.IteratingStates.ITERATING_COMPLETE instead.
This feature  will be removed in version 2.14. Deprecation warnings can
be disabled by setting deprecation_warnings=False in ansible.cfg.
```

[1] https://github.com/ansible/ansible/pull/74511

Change-Id: I748a7a24aeefd8dd4f465b5ab7f5352a50e71267
"
openstack%2Ftripleo-ansible~master~Ifdd9a94e4153a2470662760adddc16f2635bc0c9,openstack/tripleo-ansible,master,bug/1996482,Ifdd9a94e4153a2470662760adddc16f2635bc0c9,Handle new FieldAttributes in core Ansible,ABANDONED,2022-11-14 04:43:11.000000000,2022-11-14 15:10:03.000000000,,12,5,10,864383,a1c377a08d932a38953d5c974afca776a98d599b,17,4,4,1,9816,Takashi Kajinami,kajinamit,"Handle new FieldAttributes in core Ansible

The core ansible replaced _valid_attrs by the new FieldAttributes in
Ansible 2.14[1]. This replaces usage of the old attribute to avoid
failure caused by the recent Ansible version.

[1] https://github.com/ansible/ansible/pull/73908

Closes-Bug: #1996482
Change-Id: Ifdd9a94e4153a2470662760adddc16f2635bc0c9
"
openstack%2Fneutron~stable%2Fvictoria~I50f07d41428e57e6bed9be16980a6c605b7d130e,openstack/neutron,stable/victoria,bug/1975603,I50f07d41428e57e6bed9be16980a6c605b7d130e,Allow shared net to be added on router,MERGED,2022-11-07 15:27:48.000000000,2022-11-14 15:08:26.000000000,2022-11-14 15:06:46.000000000,40,3,2,863888,9422647e8a95069385fb539673b56d33cfd57322,18,4,2,2,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Allow shared net to be added on router

This will subnets from shared networks to be added on routers using:
$ openstack router add subnet router_id subnet_id

Without this, neutron user must use a multi-router solution, which is
not convenient at all.

Conflicts:
    neutron/db/l3_db.py

Closes-Bug: #1975603
Related-Bug: #1757482

Signed-off-by: Arnaud Morin <arnaud.morin@ovhcloud.com>
Change-Id: I50f07d41428e57e6bed9be16980a6c605b7d130e
(cherry picked from commit 8619c104b886517266f5b7ae7d19816aa5764dc0)
(cherry picked from commit 05569382481fadb05cc69449b19364647a8c4cdb)
"
openstack%2Fcharm-mysql-innodb-cluster~master~Ia2a90a0e210524ec485ce0d8493350699f8a6f7e,openstack/charm-mysql-innodb-cluster,master,bug/1989505,Ia2a90a0e210524ec485ce0d8493350699f8a6f7e,Invoke create_databases_and_users on upgrade,MERGED,2022-09-29 21:32:15.000000000,2022-11-14 15:02:10.000000000,2022-11-14 12:18:10.000000000,6,0,13,859901,662656055d0a55dcadf9649801300c719c47e54c,36,4,4,1,14567,Rodrigo Barbieri,ganso,"Invoke create_databases_and_users on upgrade

Fix for missing allowed_units is implemented through an
interface code change, but the 'create_databases_and_users'
method needs to be invoked to update the relation-data
during upgrade so the fix can be delivered.

Partial-bug: #1989505
Change-Id: Ia2a90a0e210524ec485ce0d8493350699f8a6f7e
"
openstack%2Ftripleo-validations~master~I68b83bc9c035a4f3cfc04afb098ceb04de602691,openstack/tripleo-validations,master,openstack-collection/node-disks,I68b83bc9c035a4f3cfc04afb098ceb04de602691,Adjusting node-disks validation for new authentication procedures,NEW,2022-10-14 14:57:36.000000000,2022-11-14 14:35:30.000000000,,47,351,5,861396,802f84ce119d758f0e8cf83d492accb798908b91,9,4,3,8,32926,Jiri Podivin,jpodivin,"Adjusting node-disks validation for new authentication procedures

Validation will now only verify primary disk of the node.
Description of the role and validation itself now includes
further instructions and explanation.

Validation failure message now recommends introspection as a next step.

node-disks.py module, associated tests and documentation were deleted

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I68b83bc9c035a4f3cfc04afb098ceb04de602691
"
openstack%2Fpython-tripleoclient~master~I22354b47b4687f1a0e81522062fd99281c9314cb,openstack/python-tripleoclient,master,formatting,I22354b47b4687f1a0e81522062fd99281c9314cb,Removing superflous linebreak character,NEW,2022-11-11 09:43:58.000000000,2022-11-14 14:34:33.000000000,,1,2,2,864255,8628b07d96054d0d54b957b2bc940ddc2e2581f6,4,6,1,1,32926,Jiri Podivin,jpodivin,"Removing superflous linebreak character

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I22354b47b4687f1a0e81522062fd99281c9314cb
"
openstack%2Fopenstack-ansible-os_ironic~master~Ida20e6835c6ca1c941fa76eadecf3d49e8b1239f,openstack/openstack-ansible-os_ironic,master,,Ida20e6835c6ca1c941fa76eadecf3d49e8b1239f,Ensure nginx config is present for ironic inspector,NEW,2022-11-14 12:41:52.000000000,2022-11-14 14:29:52.000000000,,42,0,0,864406,1a9a6077d2aec4d8ee015881f2d38e88f63ff729,2,1,1,1,25023,Jonathan Rosser,jrosser,"Ensure nginx config is present for ironic inspector

In an LXC deployment, nginx runs in both the ironc-api and
ironic-inspector containers. The api container can use ipxe to
boot the deployment and user images when `ironic_ipxe_enabled'
is true. The inspector container can use ipxe to independantly
serve the deploy images during inspection.

On a metal deployment these nginx instances are co-located on the
same host and share the same config files and directory structure
so no additional config is needed for inspectors nginx instance.

In an LXC depoyment the api and inspector containers need their
own individual nginx configuration to be written. This patch adds
that configuration for inspector.

A future patch could refactor the code so that only one set of
tasks is needed to deploy the nginx config to both inspector
and api.

Change-Id: Ida20e6835c6ca1c941fa76eadecf3d49e8b1239f
"
openstack%2Fcloudkitty~master~I46b09ee11821620f7eab6758961ce651f3c8af46,openstack/cloudkitty,master,deprecate-elasticsearch,I46b09ee11821620f7eab6758961ce651f3c8af46,Announce future deprecation of Elasticsearch,NEW,2022-11-14 14:18:54.000000000,2022-11-14 14:28:34.000000000,,7,0,0,864412,addb4d6aa865f3b0a5bde20238bdb629aa624a4a,2,1,1,1,15197,Pierre Riteau,priteau,"Announce future deprecation of Elasticsearch

Change-Id: I46b09ee11821620f7eab6758961ce651f3c8af46
"
openstack%2Freleases~master~Icdda02ee168e868ef64546ea8c573f01e60346c2,openstack/releases,master,u-v-last,Icdda02ee168e868ef64546ea8c573f01e60346c2,[keystone-tempest-plugin] Tag ussuri-last & victoria-last,NEW,2022-11-13 00:46:34.000000000,2022-11-14 14:22:38.000000000,,8,0,0,864365,54c466abc378479aca796e1e50c39adabd4e4437,5,4,2,2,8556,Ghanshyam,ghanshyam,"[keystone-tempest-plugin] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches[3].

We taged ussuri-last & victoria-last for tempest[4] but forgot to do
it for the tempest plugins. Using the tag 0.9.0 hash which is compatible
for tempest ussuri-last and victoria-last.

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: Icdda02ee168e868ef64546ea8c573f01e60346c2
"
openstack%2Fcharm-trilio-dm-api~stable%2F4.2~I68851c0c8541761eff6e07e8cce88575b5418606,openstack/charm-trilio-dm-api,stable/4.2,binary-builds-4.2,I68851c0c8541761eff6e07e8cce88575b5418606,Switch to binary builds,MERGED,2022-11-08 10:05:08.000000000,2022-11-14 14:15:45.000000000,2022-11-14 14:15:45.000000000,88,92,0,863984,116b8feecfbcfff423b12ddbbb1e39fcfc641c93,10,3,2,12,12549,gnuoy,gnuoy,"Switch to binary builds

func-test-pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/975

(cherry picked from commit 579f5374eb2494a118728b341eec9c92bac75d1c)
(cherry picked from commit cbb28c0ee5e1ec27b4540a1bd331de4b973a83e1)

Change-Id: I68851c0c8541761eff6e07e8cce88575b5418606
"
openstack%2Fhorizon~master~Ia45577538ee79b2b469901da978187c10029e85e,openstack/horizon,master,fail-attach-resources,Ia45577538ee79b2b469901da978187c10029e85e,Raise exception if transfer_available_resource fails,NEW,2022-11-14 11:53:25.000000000,2022-11-14 14:14:23.000000000,,10,7,1,864405,f9fd2319f549bc9e015e7a77c2ae0468de81e636,4,1,2,3,8648,Radomir Dopieralski,thesheep,"Raise exception if transfer_available_resource fails

The function transfer_available_resource fails quietly if it fails to
find the resource specified. Added an exception in that case, so the
tests fail earlier.

I also made it take a list of resources, as was originally intended.

Change-Id: Ia45577538ee79b2b469901da978187c10029e85e
"
openstack%2Fcharm-trilio-wlm~master~I7035ea0afec6d7e7232c4250b68afe905a6efd67,openstack/charm-trilio-wlm,master,binary-builds,I7035ea0afec6d7e7232c4250b68afe905a6efd67,Add required build packages,MERGED,2022-10-28 08:58:39.000000000,2022-11-14 14:13:00.000000000,2022-11-14 14:13:00.000000000,4,0,1,862871,4928917afd1b94ebdf963bd660c7962c3700e7aa,9,3,1,1,12549,gnuoy,gnuoy,"Add required build packages

Building the charm in LP is failing *1 due to missing packages.

*1  https://launchpad.net/~openstack-charmers/charm-trilio-wlm/+charm/charm-trilio-wlm.master.latest/+build/4935/+files/buildlog_charm_ubuntu_focal_s390x_charm-trilio-wlm.master.latest_BUILDING.txt.g!z

Change-Id: I7035ea0afec6d7e7232c4250b68afe905a6efd67
"
openstack%2Fcharm-cinder-lvm~master~I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,openstack/charm-cinder-lvm,master,fix-lvm-target-helper,I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,Fix target_helper config for >= Wallaby,NEW,2022-02-09 15:24:04.000000000,2022-11-14 14:06:43.000000000,,69,5,14,828574,0780db3b219ae1b9ae2f92273e578c0f9329ee30,41,6,9,3,33717,Luciano Lo Giudice,lmlg,"Fix target_helper config for >= Wallaby

Starting with the release of Wallaby, the 'tgtadm' package is
now the default target helper, which doesn't work for cinder-lvm.
As such, we need to explicitly set the new package to 'lioadm'.

Closes-Bug: #1949074
Change-Id: I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc
(cherry picked from commit f9ce4b472100dae79c79d0f2b5ce1e0619ec8a0b)
"
openstack%2Fcharm-cinder-lvm~stable%2Fzed~I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,openstack/charm-cinder-lvm,stable/zed,fix-lvm-target-helper,I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,Fix target_helper config for >= Wallaby,NEW,2022-10-16 18:59:44.000000000,2022-11-14 14:06:01.000000000,,69,5,1,861307,4142d9e6a0319c7533214f18e4e4b286d43d7280,7,3,2,3,20870,Alex Kavanagh,ajkavanagh,"Fix target_helper config for >= Wallaby

Starting with the release of Wallaby, the 'tgtadm' package is
now the default target helper, which doesn't work for cinder-lvm.
As such, we need to explicitly set the new package to 'lioadm'.

Closes-Bug: #1949074
Change-Id: I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc
"
openstack%2Fcharm-cinder-lvm~stable%2Fwallaby~I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,openstack/charm-cinder-lvm,stable/wallaby,fix-lvm-target-helper,I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,Fix target_helper config for >= Wallaby,NEW,2022-10-14 13:30:11.000000000,2022-11-14 14:05:52.000000000,,69,5,1,861377,0dd832b737285f62b25fa9fa49b17693d2992e1f,12,3,2,3,10058,Erlon R. Cruz,sombrafam,"Fix target_helper config for >= Wallaby

Starting with the release of Wallaby, the 'tgtadm' package is
now the default target helper, which doesn't work for cinder-lvm.
As such, we need to explicitly set the new package to 'lioadm'.

Closes-Bug: #1949074
Change-Id: I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc
(cherry picked from commit f9ce4b472100dae79c79d0f2b5ce1e0619ec8a0b)
(cherry picked from commit 0780db3b219ae1b9ae2f92273e578c0f9329ee30)
(cherry picked from commit f94d6deabcd32b100a8b27d0f9c8064b53d79653)
(cherry picked from commit 4a17d804fc50a1f9784752fb37af81dcef6665b6)
"
openstack%2Fcharm-cinder-lvm~stable%2Fxena~I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,openstack/charm-cinder-lvm,stable/xena,fix-lvm-target-helper,I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,Fix target_helper config for >= Wallaby,NEW,2022-10-14 13:30:59.000000000,2022-11-14 14:05:43.000000000,,69,5,1,861378,4a17d804fc50a1f9784752fb37af81dcef6665b6,12,3,2,3,10058,Erlon R. Cruz,sombrafam,"Fix target_helper config for >= Wallaby

Starting with the release of Wallaby, the 'tgtadm' package is
now the default target helper, which doesn't work for cinder-lvm.
As such, we need to explicitly set the new package to 'lioadm'.

Closes-Bug: #1949074
Change-Id: I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc
(cherry picked from commit f9ce4b472100dae79c79d0f2b5ce1e0619ec8a0b)
(cherry picked from commit 0780db3b219ae1b9ae2f92273e578c0f9329ee30)
(cherry picked from commit f94d6deabcd32b100a8b27d0f9c8064b53d79653)
"
openstack%2Fcharm-cinder-lvm~stable%2Fyoga~I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,openstack/charm-cinder-lvm,stable/yoga,fix-lvm-target-helper,I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc,Fix target_helper config for >= Wallaby,NEW,2022-10-14 13:31:21.000000000,2022-11-14 14:05:36.000000000,,69,5,6,861379,f94d6deabcd32b100a8b27d0f9c8064b53d79653,19,5,2,3,10058,Erlon R. Cruz,sombrafam,"Fix target_helper config for >= Wallaby

Starting with the release of Wallaby, the 'tgtadm' package is
now the default target helper, which doesn't work for cinder-lvm.
As such, we need to explicitly set the new package to 'lioadm'.

Closes-Bug: #1949074
Change-Id: I4d88d1e30d8b2b133bd575a76d0dc5e566415cbc
(cherry picked from commit f9ce4b472100dae79c79d0f2b5ce1e0619ec8a0b)
(cherry picked from commit 0780db3b219ae1b9ae2f92273e578c0f9329ee30)
"
openstack%2Ftripleo-docs~master~I4bc8a691a75438471d36ee866f6de25e4ec7ee92,openstack/tripleo-docs,master,,I4bc8a691a75438471d36ee866f6de25e4ec7ee92,Update documentation about deployment status,MERGED,2022-11-02 06:09:17.000000000,2022-11-14 14:01:16.000000000,2022-11-14 14:00:18.000000000,15,46,0,863195,3b584b8f4f0f6bbfdb89d0d8a3a77451856b22c8,9,3,1,1,9816,Takashi Kajinami,kajinamit,"Update documentation about deployment status

This change fixes the documentation explaining how to obtain deployment
status.

- Deployment status is now determined based on the local file, instead
  of Heat + Mistral.
- The workflow subcommands no longer work since Mistral was removed.
- The openstack overcloud failures command was removed by [1].

[1] 7cef22cc68d6af316ef9fbf60cb093c209c31215

Change-Id: I4bc8a691a75438471d36ee866f6de25e4ec7ee92
"
openstack%2Fproject-config~master~I83d53d801f7f0e27769fda7e1a606d90726f98b2,openstack/project-config,master,osa/zookeeper,I83d53d801f7f0e27769fda7e1a606d90726f98b2,Add another role for Zookeeper installation,MERGED,2022-11-01 16:31:44.000000000,2022-11-14 13:59:02.000000000,2022-11-14 13:03:32.000000000,7,0,3,863158,c07db5b876295f8743637049113bb1a5d0f81560,13,4,3,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add another role for Zookeeper installation

During PTG it was decided that we need to provide coordination service
as part as OpenStack-Ansible deployment and decided to stop on Zookeeper
as most feature-complete solution. With that we looked for alternative
role that's present under opendev umbrella, but according to
our experience [1] of contribution to that repo it feels tought
to try to re-use it as it's missing some aspects that we feel essential
to have. Based on that we decided to re-write the role from scratch
and maintain it additionally to already existing one.

[1] https://review.opendev.org/q/project:+windmill/ansible-role-zookeeper+AND+owner:noonedeadpunk

Needed-By: https://review.opendev.org/c/openstack/governance/+/863161
Change-Id: I83d53d801f7f0e27769fda7e1a606d90726f98b2
"
openstack%2Ftripleo-docs~master~I7420904aef6e3ebf74a36f8a3c420482cde1b2d9,openstack/tripleo-docs,master,deployment-docs,I7420904aef6e3ebf74a36f8a3c420482cde1b2d9,Node scaling now covered by baremetal_provision,MERGED,2022-10-19 23:07:05.000000000,2022-11-14 13:52:51.000000000,2022-11-14 13:51:51.000000000,3,30,0,861927,9bc4ab7bf8761deb517511f3c15a1679e4bb6910,16,3,5,1,30073,Brendan Shephard,bshephar,"Node scaling now covered by baremetal_provision

Node scaling with ephemeral Heat no longer works this way. Instead
users should follow the baremetal_provision guide on node scaling:
https://docs.openstack.org/project-deploy-guide/tripleo-docs/latest/provisioning/baremetal_provision.html#scaling-the-overcloud

Change-Id: I7420904aef6e3ebf74a36f8a3c420482cde1b2d9
"
openstack%2Ftripleo-docs~master~I5f9f8961749cf9ac09b87692733c51896ba4d58f,openstack/tripleo-docs,master,deployment-docs,I5f9f8961749cf9ac09b87692733c51896ba4d58f,Update config-download documentation,NEW,2022-11-03 02:57:39.000000000,2022-11-14 13:52:31.000000000,,125,41,2,863470,529c24cccdf9153bf5ec0702afafbe76381e26a3,4,2,1,1,30073,Brendan Shephard,bshephar,"Update config-download documentation

The config-download documentation is still outdated in some parts
referring to since removed functionality. This change removes the
no longer relevant information, and updates include the most recent
information.

Change-Id: I5f9f8961749cf9ac09b87692733c51896ba4d58f
"
openstack%2Fmagnum~master~Ied76095f1f1c57c6af93d1a6094baa6c7cc31c9b,openstack/magnum,master,remove_mesos,Ied76095f1f1c57c6af93d1a6094baa6c7cc31c9b,Drop mesos driver,MERGED,2021-12-09 13:28:58.000000000,2022-11-14 13:50:50.000000000,2022-11-14 13:49:47.000000000,4,5275,6,821213,d3d28594b3d2c4b2f62258b8f59812e6ccd55497,28,4,7,74,28008,Guilherme,guilhermesp,"Drop mesos driver

The coe mesos has not been maitenaned for quite some
time and hasn't got much attetion from the community
in general. As discussed in the mailing list [1] we
are dropping for now.

In this patch, we start by removing the mesos driver
and its test cases. This part of the code has no impact
for other drivers. Then we can clean up mesos references
that affect the API.

[1] http://lists.openstack.org/pipermail/openstack-discuss/2021-December/026230.html

Conflicts:
	lower-constraints.txt
	tox.ini

Change-Id: Ied76095f1f1c57c6af93d1a6094baa6c7cc31c9b
"
openstack%2Ftripleo-ansible~stable%2Fwallaby~I6852de27f68f4dcf2cac44a80b3a491db1996d9f,openstack/tripleo-ansible,stable/wallaby,,I6852de27f68f4dcf2cac44a80b3a491db1996d9f,Fix molecule jobs broken with latest cryptography,NEW,2022-11-14 10:29:41.000000000,2022-11-14 13:50:13.000000000,,4,3,0,864183,fec6066a9a9dad2f8dea334f9157890ec6584afe,3,2,1,2,14250,Grzegorz Grasza,xek,"Fix molecule jobs broken with latest cryptography

Pin cryptography to < 37.0.0[1].

Also, changes tripleo_keystone_resources role to use
centos:stream9 image.

[1] https://github.com/pyca/cryptography/issues/7126

Closes-Bug: #1995608
Change-Id: I6852de27f68f4dcf2cac44a80b3a491db1996d9f
(cherry picked from commit 0e0a80a8ab56b5bd6903a8b169d058b352843f2a)
"
openstack%2Fopenstack-ansible-os_ironic~master~I2fb8921099706f50243d013a97bd5b54dddaaabd,openstack/openstack-ansible-os_ironic,master,osa-ironic-tidy,I2fb8921099706f50243d013a97bd5b54dddaaabd,Remove duplicate creation of nginx config directory,NEW,2022-11-14 11:26:28.000000000,2022-11-14 13:48:55.000000000,,0,1,1,864403,51072fd6a1c251a100a75451bb8c6b1f45317f67,4,1,1,1,25023,Jonathan Rosser,jrosser,"Remove duplicate creation of nginx config directory

ironic_nginx_conf_path already defaults to 'conf.d' so there
is no need to make it again.

Change-Id: I2fb8921099706f50243d013a97bd5b54dddaaabd
"
openstack%2Ftripleo-docs~master~Ib508e98c35c83e295324a5900cf2325427d8158a,openstack/tripleo-docs,master,lp#1995702,Ib508e98c35c83e295324a5900cf2325427d8158a,Removing irrelavant references to 'plan-environment.yaml',MERGED,2022-11-04 12:45:21.000000000,2022-11-14 13:48:48.000000000,2022-11-14 13:47:13.000000000,2,42,0,863642,a046cc707f09d30b5a100948b50977df40ade2e9,8,3,1,2,32926,Jiri Podivin,jpodivin,"Removing irrelavant references to 'plan-environment.yaml'

The file and associated CLI commands were removed in wallaby
and are therefore no longer relevant for more recent releases.

Information about the file for FFU between older releases was
kept, as it is presumably still relevant.

Closes-Bug: lp#1995702

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: Ib508e98c35c83e295324a5900cf2325427d8158a
"
openstack%2Ftripleo-ansible~stable%2Fzed~I646cd49b614a9f494e77f9893521d3c070900ed5,openstack/tripleo-ansible,stable/zed,molecule/cryptography-stable/zed,I646cd49b614a9f494e77f9893521d3c070900ed5,Move cryprography pin,NEW,2022-11-10 10:04:39.000000000,2022-11-14 13:39:45.000000000,,5,3,5,864172,dc51d894588f213fd2c8d48b793e748afbcc648e,21,4,1,5,28223,Cedric Jeanneret,cjeanner,"Move cryprography pin

This moves the cryptography pin to ansible-requirements.txt
which is used as a constraints file[1].

[1] https://opendev.org/openstack/tripleo-ansible/src/branch/master/zuul.d/playbooks/pre.yml#L42

Related-Bug: #1995608
Change-Id: I646cd49b614a9f494e77f9893521d3c070900ed5
(cherry picked from commit c0bc395ab494ee18e77fba608cdd40762c7b8c51)
"
openstack%2Ftripleo-ansible~master~I16bdabe5f70a6f034028a241793f2c5bc4142d3d,openstack/tripleo-ansible,master,remove-redundant-template,I16bdabe5f70a6f034028a241793f2c5bc4142d3d,Removes redundant bonds_vlans_storage nic template,NEW,2022-11-11 15:02:45.000000000,2022-11-14 13:38:43.000000000,,0,39,1,864294,245e226955389631f48ac04cd2e67259485febed,6,2,1,1,19740,Christopher Brown,snecklifter,"Removes redundant bonds_vlans_storage nic template

This template is identical to bonds_vlans save for one line
which is hardcoded here.

Change-Id: I16bdabe5f70a6f034028a241793f2c5bc4142d3d
"
openstack%2Fheat~master~I3ae3e8d3132f8e100067fb86460b7c3f3ae35d07,openstack/heat,master,story/2010265,I3ae3e8d3132f8e100067fb86460b7c3f3ae35d07,Fix an assert statement,NEW,2022-08-31 14:31:45.000000000,2022-11-14 13:19:47.000000000,,2,3,1,855375,aa5f59f18ec1c043df9d0a706ea60fdb5bfc879a,15,4,4,1,7634,Takashi Natsume,natsumet,"Fix an assert statement

Fix an assert statement
in heat/tests/aws/test_eip.py.

Change-Id: I3ae3e8d3132f8e100067fb86460b7c3f3ae35d07
Story: 2010265
Task: 46164
Signed-off-by: Takashi Natsume <takanattie@gmail.com>
"
openstack%2Foctavia~master~I7fed37a9cd8cc0c3187f57a2551ab7a9d87d33c1,openstack/octavia,master,story/2010284,I7fed37a9cd8cc0c3187f57a2551ab7a9d87d33c1,Fix wrong assertion methods,NEW,2022-09-11 04:07:48.000000000,2022-11-14 13:19:35.000000000,,68,52,3,856916,aafdcefddcaec0ab73229ab75514abb3b4aee7b3,14,3,5,7,7634,Takashi Natsume,natsumet,"Fix wrong assertion methods

Replace 'has_calls' with 'assert_has_calls'.

Change-Id: I7fed37a9cd8cc0c3187f57a2551ab7a9d87d33c1
Story: 2010284
Task: 46255
Signed-off-by: Takashi Natsume <takanattie@gmail.com>
"
openstack%2Fneutron~master~Id9138652f5f07ef12fa682e182fe210019e8f975,openstack/neutron,master,pylint-c0330-plugins,Id9138652f5f07ef12fa682e182fe210019e8f975,Fix some pylint indentation warnings,MERGED,2022-11-09 00:48:50.000000000,2022-11-14 13:13:09.000000000,2022-11-14 13:10:49.000000000,201,206,1,864072,b1714a2b9d9e9c1aa79b9296bb76c6e59ccb617a,12,5,1,19,1131,Brian Haley,brian-haley,"Fix some pylint indentation warnings

Running with a stricter .pylintrc generates a lot of
C0330 warnings (hanging/continued indentation). Fix
the ones in neutron/plugins.

Trivialfix

Change-Id: Id9138652f5f07ef12fa682e182fe210019e8f975
"
openstack%2Fneutron~master~I9311cfe5efc51552008072d84aa238e5d0c9de60,openstack/neutron,master,pylint-c0330-db,I9311cfe5efc51552008072d84aa238e5d0c9de60,Fix some pylint indentation warnings,MERGED,2022-11-09 00:50:23.000000000,2022-11-14 13:12:14.000000000,2022-11-14 13:10:45.000000000,165,165,1,864073,55b16d7b7c5e85422c4db47ba666f2de95ef0e15,13,4,1,27,1131,Brian Haley,brian-haley,"Fix some pylint indentation warnings

Running with a stricter .pylintrc generates a lot of
C0330 warnings (hanging/continued indentation). Fix
the ones in neutron/db.

Trivialfix

Change-Id: I9311cfe5efc51552008072d84aa238e5d0c9de60
"
openstack%2Fdevstack~master~I399685ed1f864f8f1ce7295ed6f83336cfccbd81,openstack/devstack,master,fix-typo-configuration-doc,I399685ed1f864f8f1ce7295ed6f83336cfccbd81,[Doc] Fix Glance image size limit command,MERGED,2022-09-22 02:30:07.000000000,2022-11-14 13:11:53.000000000,2022-11-14 13:10:53.000000000,1,1,6,858838,f49b435e98cd9d119179d98829241954b8d73669,11,4,1,1,5689,Masayuki Igawa,igawa,"[Doc] Fix Glance image size limit command

This commit fixes the configuration document which mentions how to
change Glance default image size quota at runtime because we don't have
`openstack registered limit update` command but
`openstack registered limit set` command[1].

[1] https://docs.openstack.org/python-openstackclient/latest/cli/command-objects/registered-limit.html#registered-limit-set

Change-Id: I399685ed1f864f8f1ce7295ed6f83336cfccbd81
"
openstack%2Ftripleo-docs~master~I3046dc0a5ea703a8db5af85191827d3f009299a8,openstack/tripleo-docs,master,,I3046dc0a5ea703a8db5af85191827d3f009299a8,Scaling: reusing node index,NEW,2021-06-21 22:26:04.000000000,2022-11-14 13:11:09.000000000,,36,0,2,797356,9e6b94fe379910cc0853aeb883b13822e98970cd,10,5,2,1,27419,David Vallee Delisle,dvd,"Scaling: reusing node index

Adding section about reusing node index during scale down/up

Change-Id: I3046dc0a5ea703a8db5af85191827d3f009299a8
"
openstack%2Fneutron-lib~master~Ie72061bdb14a9f937dd0a9067ea7e32daba899d5,openstack/neutron-lib,master,mutable-mtu,Ie72061bdb14a9f937dd0a9067ea7e32daba899d5,Add warning about mtu update and libvirt limitation,MERGED,2022-10-21 09:26:22.000000000,2022-11-14 13:06:34.000000000,2022-11-14 13:05:32.000000000,7,0,8,862284,6d3f037ea3ecb8bc1d446bf5c699636b0f7fd504,19,5,3,1,11975,Slawek Kaplonski,slaweq,"Add warning about mtu update and libvirt limitation

It was discussed during the PTG [1].

[1] https://etherpad.opendev.org/p/neutron-antelope-ptg#L336

Change-Id: Ie72061bdb14a9f937dd0a9067ea7e32daba899d5
"
openstack%2Fkolla-ansible~master~Ib3dba0a3741d918a189edfa43041207a59392f07,openstack/kolla-ansible,master,,Ib3dba0a3741d918a189edfa43041207a59392f07,docs: Octavia OVN provider,MERGED,2022-11-14 10:47:29.000000000,2022-11-14 13:00:58.000000000,2022-11-14 12:59:55.000000000,46,23,5,864398,6c0c2b9850114ba05a210e291a670621f570842f,14,3,2,2,14826,Mark Goddard,mgoddard,"docs: Octavia OVN provider

Change-Id: Ib3dba0a3741d918a189edfa43041207a59392f07
"
openstack%2Fcharm-horizon-k8s~main~I3dafeff3332202d6c91d8e477d5a40ce98131017,openstack/charm-horizon-k8s,main,clear-active-status,I3dafeff3332202d6c91d8e477d5a40ce98131017,Clean active status for unit,MERGED,2022-11-14 11:17:57.000000000,2022-11-14 12:58:08.000000000,2022-11-14 12:17:46.000000000,5,1,0,864401,a9c0abb9bcd27a17c7d6382e561b55f7e5b5dbd1,10,3,2,1,935,James Page,james-page,"Clean active status for unit

Ensure that no unit level message is set when setting the
unit status.  This allows deployment tooling to correctly
assess when deployment is complete.

Provide the URL for horizon as part of the application
status message.

Change-Id: I3dafeff3332202d6c91d8e477d5a40ce98131017
"
openstack%2Fnova~master~I059ab0ebfd58b96b9dc44213fcb2286df6685bf8,openstack/nova,master,bp/mks-proxy,I059ab0ebfd58b96b9dc44213fcb2286df6685bf8,Add mksproxy files,NEW,2022-10-31 16:52:44.000000000,2022-11-14 12:56:29.000000000,,285,26,2,863090,1215ffde27f72d58b60f4a42dd843f383d82c70d,18,2,3,16,33952,alecorps,alecorps7,"Add mksproxy files

MKS is the protocol for accessing the console of a virtual machine running on VMware vSphere.
It is pretty much the same as VNC except the authentication part.
This PR to provide a MKS proxy for VMware ESXi console of type MKS based on websocketproxy.
Change-Id: Ieb40c53524fda0445776917a71de2e1e384d7de2

Change-Id: I059ab0ebfd58b96b9dc44213fcb2286df6685bf8
"
openstack%2Ftripleo-ansible~master~Icaa639af18b46fe81c5e37682c10aeab317929c8,openstack/tripleo-ansible,master,standalone-roles,Icaa639af18b46fe81c5e37682c10aeab317929c8,tripleo_nova_compute: use config_template for configuration,NEW,2022-11-01 21:05:14.000000000,2022-11-14 12:56:27.000000000,,7,15,6,863181,4e06b0ea9671d26a9fec96166722b64236746622,19,4,1,2,7144,James Slagle,slagle,"tripleo_nova_compute: use config_template for configuration

Switch to using openstack.config_template for configuring nova.conf
instead of inifile. openstack.config_template is much more performant,
and supports the ListOpt and MultiStrOpt configuration types used in
OpenStack.

Also adds a missing environment variable to ansible-test-env-podman.rc
for running the tripleo_compute_node molecule test locally.

Change-Id: Icaa639af18b46fe81c5e37682c10aeab317929c8
Signed-off-by: James Slagle <jslagle@redhat.com>
"
openstack%2Fneutron~stable%2Fussuri~I50f07d41428e57e6bed9be16980a6c605b7d130e,openstack/neutron,stable/ussuri,bug/1975603,I50f07d41428e57e6bed9be16980a6c605b7d130e,Allow shared net to be added on router,MERGED,2022-11-07 15:28:05.000000000,2022-11-14 12:52:57.000000000,2022-11-14 12:51:48.000000000,40,3,2,863889,4b52a8efb1dc2dd6cc336ea2ff1c62aab3d0e3e1,12,4,2,2,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Allow shared net to be added on router

This will subnets from shared networks to be added on routers using:
$ openstack router add subnet router_id subnet_id

Without this, neutron user must use a multi-router solution, which is
not convenient at all.

Conflicts:
    neutron/db/l3_db.py

Closes-Bug: #1975603
Related-Bug: #1757482

Signed-off-by: Arnaud Morin <arnaud.morin@ovhcloud.com>
Change-Id: I50f07d41428e57e6bed9be16980a6c605b7d130e
(cherry picked from commit 8619c104b886517266f5b7ae7d19816aa5764dc0)
(cherry picked from commit 05569382481fadb05cc69449b19364647a8c4cdb)
"
openstack%2Fneutron~stable%2Ftrain~I50f07d41428e57e6bed9be16980a6c605b7d130e,openstack/neutron,stable/train,bug/1975603,I50f07d41428e57e6bed9be16980a6c605b7d130e,Allow shared net to be added on router,MERGED,2022-11-07 15:28:20.000000000,2022-11-14 12:49:12.000000000,2022-11-14 12:48:03.000000000,40,3,2,863890,f5c973f62e35f6fb73b13cb3f8ebde793cffd62b,14,4,2,2,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Allow shared net to be added on router

This will subnets from shared networks to be added on routers using:
$ openstack router add subnet router_id subnet_id

Without this, neutron user must use a multi-router solution, which is
not convenient at all.

Conflicts:
    neutron/db/l3_db.py

Closes-Bug: #1975603
Related-Bug: #1757482

Signed-off-by: Arnaud Morin <arnaud.morin@ovhcloud.com>
Change-Id: I50f07d41428e57e6bed9be16980a6c605b7d130e
(cherry picked from commit 8619c104b886517266f5b7ae7d19816aa5764dc0)
(cherry picked from commit 05569382481fadb05cc69449b19364647a8c4cdb)
"
openstack%2Fcloudkitty~master~Iad296f54f6701af84e168796aec9b1033a2a8a2d,openstack/cloudkitty,master,groupby-timeframes,Iad296f54f6701af84e168796aec9b1033a2a8a2d,Add groupby options by different timeframes,NEW,2022-10-18 18:57:37.000000000,2022-11-14 12:46:56.000000000,,169,30,1,861786,5bc61d07b426e6b06e3b23411bc2754df5e7c78a,8,1,4,12,28356,Rafael Weingartner,rafaelweingartner,"Add groupby options by different timeframes

Introduce new default groupby options: (i) time: to group data by
hourly; (ii) time-d: to group data by day of the year; (iii) time-w:
to group data by week of the year; (iv) month: to group data by month;
and, (v) year: to group data by year. If you have old data in
CloudKitty and you wish to use these group by methods, you will need
to reprocess the desired timeframe.

Closes: https://storyboard.openstack.org/#!/story/2009839
Story: #2009839

Change-Id: Iad296f54f6701af84e168796aec9b1033a2a8a2d
"
openstack%2Fcinder-tempest-plugin~master~I6f5d5c6bf6c30045752064c666dd8892adbad643,openstack/cinder-tempest-plugin,master,bug/1895035,I6f5d5c6bf6c30045752064c666dd8892adbad643,Add Backup Restore Multibackend Tests,NEW,2022-03-28 20:13:09.000000000,2022-11-14 12:35:37.000000000,,128,1,26,835512,3e8bc14e6f698d798599ba62a6ff55667bdc6dd3,56,8,12,2,20813,Sofia Enriquez,enriquetaso,"Add Backup Restore Multibackend Tests

This patch adds two backup and restore tempest tests. These tests aim to
restore to different volume backend types. To make it more organized, a
new scenario/test_volume_backup_restore.py file is added.

Finally, this patch bumps the tempest version to 31.0.0 to include
https://review.opendev.org/c/openstack/tempest/+/843542.

Change-Id: I6f5d5c6bf6c30045752064c666dd8892adbad643
"
openstack%2Fbarbican-tempest-plugin~master~I5e00a188268ef1c25eed8bf3a37197918e529427,openstack/barbican-tempest-plugin,master,bug/2125404,I5e00a188268ef1c25eed8bf3a37197918e529427,"Intreduce a new test for ""cve_2022_3100""",NEW,2022-10-27 11:37:51.000000000,2022-11-14 12:28:44.000000000,,52,3,44,862796,6d173e6740caeff3fc7aa584542a5308e4011eba,20,3,7,2,34637,Milana Levy,millevy,"Intreduce a new test for ""cve_2022_3100""

The exploit is that a malicious user with a Keystone account is able to decrypt
any secret as long as they know the secret's ID by using a specifically crafted
query string:
GET /v1/secrets/{secret-id}/payload?target.secret.read=read

Related-bug: #2125404

Change-Id: I5e00a188268ef1c25eed8bf3a37197918e529427
"
openstack%2Fpython-glanceclient~master~I6e8dbae32c3a24d3fbeebcea5bfe0dd9ae247035,openstack/python-glanceclient,master,unhardcode-DEFAULT_PAGE_SIZE,I6e8dbae32c3a24d3fbeebcea5bfe0dd9ae247035,Unhardcode the value of DEFAULT_PAGE_SIZE from the tests,NEW,2022-01-12 20:38:22.000000000,2022-11-14 12:28:28.000000000,,34,23,1,824480,4bb406d3774be4ad40f561a583f213a7b2a9133e,7,1,3,4,8122,Cyril Roelandt,cyril.roelandt.enovance,"Unhardcode the value of DEFAULT_PAGE_SIZE from the tests

The value of DEFAULT_PAGE_SIZE (20) was hardcoded in multiple places in
the tests, which means all the tests would break should we ever want to
change that value.

Co-Authored-By:	Èü©Êò•Ëïæ <1922361860@qq.com>

Change-Id: I6e8dbae32c3a24d3fbeebcea5bfe0dd9ae247035
"
openstack%2Fpython-glanceclient~master~I1da347e31e828fd2359f0935a4da47257116d4cb,openstack/python-glanceclient,master,remove-unicode,I1da347e31e828fd2359f0935a4da47257116d4cb,Remove unicode-related Python2-only code,NEW,2022-09-13 14:53:43.000000000,2022-11-14 12:28:12.000000000,,32,61,2,857462,fc8f9ac2edfb4daa0c48a650515de3e8eba18232,5,2,2,8,8122,Cyril Roelandt,cyril.roelandt.enovance,"Remove unicode-related Python2-only code

This commit:
- removes the old ""u"" prefix from all strings
- removes the unicode_key_value_to_string function

Change-Id: I1da347e31e828fd2359f0935a4da47257116d4cb
"
openstack%2Fopenstack-ansible-os_ironic~master~I7a43b7a1a393591ec85c1c91d37171f8c090878b,openstack/openstack-ansible-os_ironic,master,osa-ironic-tidy,I7a43b7a1a393591ec85c1c91d37171f8c090878b,Fix inspector auth config for ironic-api,NEW,2022-11-14 09:47:42.000000000,2022-11-14 12:15:28.000000000,,1,1,0,864395,6f622302b8294ddd2b1d09024a4b44fb356e1ba2,4,2,1,1,25023,Jonathan Rosser,jrosser,"Fix inspector auth config for ironic-api

This config block must be set on the ironic-api service so that it
can authenticate with the ironic-inspector service. With no config
in this block on the ironic-api service there is just an auth
failure when trying to inspect a baremetal node.

Change-Id: I7a43b7a1a393591ec85c1c91d37171f8c090878b
"
openstack%2Fneutron~stable%2Fwallaby~Ic8891e2deef4bb5e72cf7d7f37b043e936adbc00,openstack/neutron,stable/wallaby,bug/1991092-stable/wallaby,Ic8891e2deef4bb5e72cf7d7f37b043e936adbc00,Port provisioning should retry only for VM ports,MERGED,2022-11-04 11:09:31.000000000,2022-11-14 11:48:26.000000000,2022-11-14 11:47:09.000000000,23,2,1,863620,5b1379391110756cbefe942d361da7438a9aa484,12,3,1,2,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Port provisioning should retry only for VM ports

The port provisioning method ``Ml2Plugin._port_provisioned`` creates
an active wait to provision a port if the port is unbound since [1].
But this active wait should consider only VM ports in the case of
live migration, as described in the LP bug [2]. This wait should
not consider auxiliary Neutron ports or baremetal ports (we don't
live-migrate then).

[1]https://review.opendev.org/c/openstack/neutron/+/855257
[2]https://bugs.launchpad.net/neutron/+bug/1988199

Closes-Bug: #1991092
Change-Id: Ic8891e2deef4bb5e72cf7d7f37b043e936adbc00
(cherry picked from commit 21491efd9f8ce6df98cb58c26da7896d75cb4a8b)
"
openstack%2Fneutron~stable%2Fxena~Ic8891e2deef4bb5e72cf7d7f37b043e936adbc00,openstack/neutron,stable/xena,bug/1991092-stable/xena,Ic8891e2deef4bb5e72cf7d7f37b043e936adbc00,Port provisioning should retry only for VM ports,MERGED,2022-11-04 11:09:15.000000000,2022-11-14 11:48:22.000000000,2022-11-14 11:47:05.000000000,23,2,1,863619,a2df23ac90dda51869f24c51b30b22ae4d61c229,12,3,1,2,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Port provisioning should retry only for VM ports

The port provisioning method ``Ml2Plugin._port_provisioned`` creates
an active wait to provision a port if the port is unbound since [1].
But this active wait should consider only VM ports in the case of
live migration, as described in the LP bug [2]. This wait should
not consider auxiliary Neutron ports or baremetal ports (we don't
live-migrate then).

[1]https://review.opendev.org/c/openstack/neutron/+/855257
[2]https://bugs.launchpad.net/neutron/+bug/1988199

Closes-Bug: #1991092
Change-Id: Ic8891e2deef4bb5e72cf7d7f37b043e936adbc00
(cherry picked from commit 21491efd9f8ce6df98cb58c26da7896d75cb4a8b)
"
openstack%2Fci-log-processing~master~Ia5a86eaef48732e952e39528d980d698b72f50a3,openstack/ci-log-processing,master,,Ia5a86eaef48732e952e39528d980d698b72f50a3,Change setup.cfg variables,MERGED,2022-11-14 11:00:21.000000000,2022-11-14 11:22:40.000000000,2022-11-14 11:21:48.000000000,2,2,0,864400,ce7aba29a147a01a096766fae393776cd3dd9e75,8,6,1,1,20676,daniel.pawlik,daniel.pawlik,"Change setup.cfg variables

The metadata generation is failing due improper/missing values set
in setup.cfg file.

Change-Id: Ia5a86eaef48732e952e39528d980d698b72f50a3
"
openstack%2Fneutron~stable%2Fzed~I7cec8b53e72e7abf34012906e6adfecf079525af,openstack/neutron,stable/zed,bug/1987666-stable/zed,I7cec8b53e72e7abf34012906e6adfecf079525af,Check subnet overlapping after add router interface,MERGED,2022-11-02 11:06:58.000000000,2022-11-14 11:16:55.000000000,2022-11-14 11:15:48.000000000,246,30,5,863271,71801fba9143b4e341037695c9a95a6ddc722766,29,4,1,3,8213,Claudiu Belu,claudiub,"Check subnet overlapping after add router interface

When simultaneous attempts are made to add an interface
to the same router including overlapping networks in cidrs,
both attempts are successful. There is a check to avoid this
overlap but is performed when creating the network interface
and it is done over the ports already attached to the router,
so at this moment the check is not able to detect the
overlapping. Furthermore, the create_port operation over the
ML2 plugin  must be executed in isolated transactions, so
trying to control the execution context or adding additional
steps to the transaction is not feasible.

This patch checks once the RouterPort is created on the
neutron database if there is more than one overlapping port,
triggering in that case the exception that will remove the
the culprit of overlapping.

Closes-Bug: #1987666
Change-Id: I7cec8b53e72e7abf34012906e6adfecf079525af
(cherry picked from commit 1abb77d7a63cde2aa9640351f663870c14430919)
"
openstack%2Ftempest~master~I8ca059a4702471d4d30ea5a06079859eba3f5a81,openstack/tempest,master,bp/volume-backed-server-rebuild,I8ca059a4702471d4d30ea5a06079859eba3f5a81,Add test to rebuild volume backed instance,NEW,2022-02-25 18:47:36.000000000,2022-11-14 11:13:17.000000000,,165,0,69,831018,166070f32fb6931a1b9690bff840acff93dd4349,124,7,24,4,27615,Rajat Dhasmana,whoami-rajat,"Add test to rebuild volume backed instance

This feature is available from compute API version 2.93
and cinder API version 3.68.

Depends-On: https://review.opendev.org/c/openstack/nova/+/830883
Depends-On: https://review.opendev.org/c/openstack/cinder/+/855288

Change-Id: I8ca059a4702471d4d30ea5a06079859eba3f5a81
"
openstack%2Fmagnum-specs~master~I0750ec7440c1fa329104a524cf6779203e842c7c,openstack/magnum-specs,master,clusterapi-driver,I0750ec7440c1fa329104a524cf6779203e842c7c,Add Cluster API Kubernetes COE driver,NEW,2022-01-12 21:48:29.000000000,2022-11-14 11:12:27.000000000,,271,0,77,824488,5990a7eeaaad4941331947841b52f5710b184036,30,7,7,2,10910,Stig Telfer,stigtelfer,"Add Cluster API Kubernetes COE driver

This spec proposes a new driver class that implements Kubernetes
cluster orchestration using Cluster API. The intention of this
proposal is to create a simplified Kubernetes driver that takes
advantage of a broader cross-infrastructure community using Cluster
API.

story: 2009780
Change-Id: I0750ec7440c1fa329104a524cf6779203e842c7c
"
openstack%2Ftempest~master~Ia11448362b7bf2bd1a02a6190d6a4905c0d04f03,openstack/tempest,master,,Ia11448362b7bf2bd1a02a6190d6a4905c0d04f03,Exclude lengthy tests from tempest-centos9-stream-fips,NEW,2022-11-01 16:57:18.000000000,2022-11-14 11:07:31.000000000,,28,0,5,863163,16ff0b7eef0bb21a66c39cecd7d0935809d7c172,20,4,4,1,22873,Martin Kopec,mkopec,"Exclude lengthy tests from tempest-centos9-stream-fips

There are 15 tests which take more than 180 seconds, the reason
is that VM spawning takes longer on a centos with FIPS.
Let's skip those tests temporarily to save some CI time.

Change-Id: Ia11448362b7bf2bd1a02a6190d6a4905c0d04f03
"
openstack%2Fmanila~stable%2Fyoga~Ic3d3d32c3f7d624846f644601ee1ca01a103882a,openstack/manila,stable/yoga,bug/1989250,Ic3d3d32c3f7d624846f644601ee1ca01a103882a,Fix misuse of assertTrue,MERGED,2022-11-02 11:46:45.000000000,2022-11-14 11:03:51.000000000,2022-11-14 11:02:41.000000000,4,3,1,863274,74928a3afdb26205069c9cbcc0ea52cceaf560db,11,3,1,2,35453,Silviu Paval,silviupaval,"Fix misuse of assertTrue

Change-Id: Ic3d3d32c3f7d624846f644601ee1ca01a103882a
Closes-Bug: 1989250
Signed-off-by: Takashi Natsume <takanattie@gmail.com>
(cherry picked from commit c8c4989d43a317fe485ec1796fabb3f49dd6e758)
"
openstack%2Fcharm-interface-mysql-router~master~I5bcf9362cd7f6adea308942013dac37e84a6c504,openstack/charm-interface-mysql-router,master,bug/1989505,I5bcf9362cd7f6adea308942013dac37e84a6c504,Fix stale allowed_units by using app-bag,NEW,2022-10-01 12:33:30.000000000,2022-11-14 10:47:33.000000000,,207,127,2,860050,f47d7bad342da110af18afc6a23450e219564fb7,5,2,2,4,14567,Rodrigo Barbieri,ganso,"Fix stale allowed_units by using app-bag

Stale data is read from the db-router relation if
the leader is not the lowest numbered unit.

This change refactors the requires module to use
Endpoint class to enable use of app-bag to read
the app-data.

Partial-bug: #1989505
Change-Id: I5bcf9362cd7f6adea308942013dac37e84a6c504
"
openstack%2Fcharm-horizon-k8s~main~Id1e63599618a14e7865a2159020595f433f65f70,openstack/charm-horizon-k8s,main,status-fix,Id1e63599618a14e7865a2159020595f433f65f70,Ensure use of compound status in parent class,MERGED,2022-11-14 09:09:52.000000000,2022-11-14 10:38:34.000000000,2022-11-14 09:52:23.000000000,1,1,1,864394,210795fe69beed58a6c89f3803fbb0d5adcfe3aa,8,3,1,1,935,James Page,james-page,"Ensure use of compound status in parent class

Use the compound status object from the parent class rather than
a direct set of the status from the concrete implementation in
this charm.

Change-Id: Id1e63599618a14e7865a2159020595f433f65f70
"
openstack%2Fvenus~master~I7475fdec93262e0b9783526a90e1c706cffc00d5,openstack/venus,master,,I7475fdec93262e0b9783526a90e1c706cffc00d5,Add a unit test case 'invalid_index_type'.,MERGED,2022-11-14 07:58:03.000000000,2022-11-14 10:32:58.000000000,2022-11-14 10:31:20.000000000,9,0,2,864277,ab0d345de37ee0749ffbfc0eb0287a45c83878df,13,3,3,1,34375,hejunli,hejunli,"Add a unit test case 'invalid_index_type'.

Change-Id: I7475fdec93262e0b9783526a90e1c706cffc00d5
"
openstack%2Fvenus~master~If07af5fe90381deb830f6ac9b5c674b2ad7a7899,openstack/venus,master,,If07af5fe90381deb830f6ac9b5c674b2ad7a7899,Supplement a unit test case 'valid_index_type'.,MERGED,2022-11-14 06:31:32.000000000,2022-11-14 10:32:17.000000000,2022-11-14 10:31:19.000000000,10,2,3,864276,9adc236bc1302596912426f3bf6af3f6521d509c,16,3,4,1,34375,hejunli,hejunli,"Supplement a unit test case 'valid_index_type'.

Change-Id: If07af5fe90381deb830f6ac9b5c674b2ad7a7899
"
openstack%2Ftripleo-ansible~master~I49d391180c9877e2a74e9ab6853a17360c72941a,openstack/tripleo-ansible,master,ovn-ofctrl-wait-before-clear,I49d391180c9877e2a74e9ab6853a17360c72941a,Support setting ovn-ofctrl-wait-before-clear,MERGED,2022-11-01 18:21:25.000000000,2022-11-14 10:25:30.000000000,2022-11-07 21:11:32.000000000,2,0,8,863172,567a47ef908482ee569ea6ebfd372e25e650faf1,25,5,2,1,5756,Terry Wilson,otherwiseguy,"Support setting ovn-ofctrl-wait-before-clear

Support was added for this option [1] to avoid dataplane downtime
during ovn upgrades where schema changes have happened. This
adds the ability for us to configure it.

[1] https://patchwork.ozlabs.org/project/ovn/patch/20220808182845.2746916-2-mmichels@redhat.com/

Change-Id: I49d391180c9877e2a74e9ab6853a17360c72941a
"
openstack%2Fcharm-neutron-api~master~Idfc9158f07ac09ba9cb29b71678185489c707d79,openstack/charm-neutron-api,master,try-out-dpe,Idfc9158f07ac09ba9cb29b71678185489c707d79,Try out DPE edge charms for mysql{-router},NEW,2022-10-28 06:49:26.000000000,2022-11-14 10:14:30.000000000,,10,9,2,862861,806bb4a7e04808ccb8ec04c887bc10c52670f9a7,12,3,4,1,935,James Page,james-page,"Try out DPE edge charms for mysql{-router}

Update jammy-yoga bundle to see how this all hangs together.

Change-Id: Idfc9158f07ac09ba9cb29b71678185489c707d79
"
openstack%2Foctavia~stable%2Fxena~Icbbab19fabc90f4f4ea63a0ffdf75bb00144b745,openstack/octavia,stable/xena,fips-compatibility-cs9-stable/yoga-stable/xena,Icbbab19fabc90f4f4ea63a0ffdf75bb00144b745,Change FIPS jobs to centos-9-stream,MERGED,2022-09-07 11:30:45.000000000,2022-11-14 09:59:06.000000000,2022-11-14 09:57:22.000000000,8,16,1,856197,980b8e79cd6261c74e79026736f9ad5fd79ce35d,14,4,3,1,34120,Andre Aranha,afariasa,"Change FIPS jobs to centos-9-stream

It also fixed the missing nslookup_target variable for ansible.

Change-Id: Icbbab19fabc90f4f4ea63a0ffdf75bb00144b745
(cherry picked from commit 6d7464303ee554de2a598502486574e2a9a4e3f7)
(cherry picked from commit ef76cbf7dec92071f04f57f117a2d852218f9071)
"
openstack%2Fcinder~master~I5cb0b3469c5e5b4110e0e612a502cc2dcb342a67,openstack/cinder,master,tatlin-unified-remove-unused,I5cb0b3469c5e5b4110e0e612a502cc2dcb342a67,Tatlin Unified driver - remove unused code,NEW,2022-10-24 12:30:04.000000000,2022-11-14 09:57:17.000000000,,7,108,2,862489,a25287d6d7904b786f1b0cc50a0dc8e0dbc97de2,29,3,1,4,13671,Vladislav Belogrudov,vb,"Tatlin Unified driver - remove unused code

Implements: blueprint yadro-tatlin-unified-refactoring
Change-Id: I5cb0b3469c5e5b4110e0e612a502cc2dcb342a67
"
openstack%2Ftripleo-heat-templates~master~I672364d8358064626ac84dbda05da9151e5d568e,openstack/tripleo-heat-templates,master,standalone-roles,I672364d8358064626ac84dbda05da9151e5d568e,Updates for chrony role,NEW,2022-05-18 21:48:40.000000000,2022-11-14 09:19:42.000000000,,1,18,5,842439,2592360ec6399406c085753eb44e067cc4e0d45a,26,5,7,1,7144,James Slagle,slagle,"Updates for chrony role

Updates the chrony-baremetal-ansible.yaml template to match the updated
ansible-role-chrony task refactorings.

Change-Id: I672364d8358064626ac84dbda05da9151e5d568e
Signed-off-by: James Slagle <jslagle@redhat.com>
"
openstack%2Fnova~master~I134a4060ace2678f76ae3606bf117c07194a8d92,openstack/nova,master,bug/1980720,I134a4060ace2678f76ae3606bf117c07194a8d92,Adds check for VM snapshot fail while quiesce,NEW,2022-08-04 13:45:02.000000000,2022-11-14 08:50:56.000000000,,36,3,28,852171,45fb55397f88b18dfd6044652679d06e68de0e53,99,6,12,5,34860,Amit Uniyal,auniyal,"Adds check for VM snapshot fail while quiesce

Added check if quiesce fails because libvirt fails to connect with
qemu guest agent inside instance

Closes-Bug: #1980720
Change-Id: I134a4060ace2678f76ae3606bf117c07194a8d92
"
openstack%2Fnova~master~I223995b5f8cb72cb47d04e969819efe4885dfc88,openstack/nova,master,bug/1980720,I223995b5f8cb72cb47d04e969819efe4885dfc88,Adds regression functional test for 1980720,NEW,2022-10-14 10:24:01.000000000,2022-11-14 08:43:22.000000000,,95,0,11,861357,eb1397642b3610a61cf0396c16553992245e286d,22,3,3,3,34860,Amit Uniyal,auniyal,"Adds regression functional test for 1980720

Related-Bug: #1980720
Change-Id: I223995b5f8cb72cb47d04e969819efe4885dfc88
"
openstack%2Fdevstack~master~I0fc6a8e66e365ac49c6c7ceb4c71c68714b9f541,openstack/devstack,master,fix-bullseye,I0fc6a8e66e365ac49c6c7ceb4c71c68714b9f541,Fix dbcounter install on Debian Bullseye,MERGED,2022-11-09 20:02:53.000000000,2022-11-14 08:41:29.000000000,2022-11-14 08:40:26.000000000,16,1,1,864142,97b2a51d6beee4fd58b93027d823d6fd90f5c11f,10,2,3,1,4146,Clark Boylan,cboylan,"Fix dbcounter install on Debian Bullseye

The dbcounter install on Debian Bullseye is broken in a really fun way.
The problem is that we end up mixing pypi openssl and distro
cryptography under pip and those two versions of libraries are not
compatible.

The reason this happens is that debian's pip package debundles the pip
deps. This splits them out into /usr/share/python-wheels and it will
prefer distro versions of libraries over pypi installed versions of
libraries. But if a pypi version is installed and a distro version is
not then the pypi version is used. If the pypi version of library A does
not work with distro version of library B then debundled pip breaks.
This has happened with crypytography and pyOpenSSL.

This happens because urllib3 (a debundled pip dep) appears to use
pyopenssl conditionally. Novnc depends on python3-cryptography, and
openstack depends on cryptogrpahy from pypi ensuring we get both a
distro and a pypi version installed. However, pyOpenSSL is only pulled
in from pypi via openstack deps. This leaves debundled urllib3
attempting to use pypi pyOpenSSL with distro cryptography and that combo
isn't valid due to an interface change.

To fix this we install python3-openssl ensuring that debundled pip will
use distro pyOpenSSL with distro cryptography making everything happy
again. But we only do this when we install novnc as novnc is what pulls
in distro cryptography in the first place. We can't simply install
python3-openssl on all debuntu platforms because this breaks Ubuntu
Focal in the other direction. On Ubuntu focal distro pip uses distro
pyOpenSSL when no pypi pyOpenSSl is installed (prior to keystone
install) and is not compatible with pypi cryptography.

Honestly, this whole intersection between distro and pypi installs of
cryptography and pyOpenSSL could probably be made cleaner. One option
would be for us to always install the constraints version of both
packages from pypi and the distro pacakges very early in the devstack
run. But that seems far more complicated so I'm not attempting that
here.

Change-Id: I0fc6a8e66e365ac49c6c7ceb4c71c68714b9f541
"
openstack%2Ftripleo-ansible~master~If86a9843e548293084201c5ed21ebe7b68baee41,openstack/tripleo-ansible,master,,If86a9843e548293084201c5ed21ebe7b68baee41,tripleo_boostrap: Fix undefined .rc attribute,ABANDONED,2022-11-14 08:17:53.000000000,2022-11-14 08:39:05.000000000,,1,1,0,864390,db6aac9dcdedb0a087a0f0e28b1b7d356c3aaa8e,2,0,1,1,9816,Takashi Kajinami,kajinamit,"tripleo_boostrap: Fix undefined .rc attribute

This change fixes the following error found in the latest CI run with
Ansible 2.14.

```
Deploy required packages to bootstrap TripleO | standalone |
error={""msg"": ""The conditional check 'rpm_query_result.rc > 0' failed.
The error was: error while evaluating conditional (rpm_query_result.rc
> 0): 'dict object' has no attribute 'rc'. ...}
```

Change-Id: If86a9843e548293084201c5ed21ebe7b68baee41
"
openstack%2Fheat-dashboard~stable%2Fussuri~I4b6bef322a668a805abcd4bc472d30f6d1df3a0a,openstack/heat-dashboard,stable/ussuri,,I4b6bef322a668a805abcd4bc472d30f6d1df3a0a,Set False to include_empty_option,NEW,2022-10-10 13:58:07.000000000,2022-11-14 08:18:43.000000000,,8,5,1,860845,c58c0c2d8c1335450cb6c0ad6a7d3307f228d45a,4,1,1,1,30073,Brendan Shephard,bshephar,"Set False to include_empty_option

In _populate_custom_choices(), all methods called at the method have
True as a second argument. It means that the default values sepcified
in a stack are not shown as default when launch stack form.
The fileds always show 'Select Flavor/Image/Network'.
Users doesn't expect to choose default value by hand.
This change shows the default values defined at a template.

Also, image_field_data() doesn't use parameter, include_empty_option.
This change modfies the method to change the behavior based on the
parameter.

Closes-Bug: #1619465
Change-Id: I4b6bef322a668a805abcd4bc472d30f6d1df3a0a
(cherry picked from commit 792f8cbe4ac6f39aa41b0905e3b68f2a8c1e5fb1)
(cherry picked from commit c8456777df8d02847f90f62fe76a3dd46924be8b)
"
openstack%2Fheat-dashboard~stable%2Fvictoria~I4b6bef322a668a805abcd4bc472d30f6d1df3a0a,openstack/heat-dashboard,stable/victoria,,I4b6bef322a668a805abcd4bc472d30f6d1df3a0a,Set False to include_empty_option,NEW,2022-10-10 13:57:55.000000000,2022-11-14 08:09:46.000000000,,8,5,1,860844,39f2c70270a9f6934f6e3b42d9860aa2582e9a53,4,1,1,1,30073,Brendan Shephard,bshephar,"Set False to include_empty_option

In _populate_custom_choices(), all methods called at the method have
True as a second argument. It means that the default values sepcified
in a stack are not shown as default when launch stack form.
The fileds always show 'Select Flavor/Image/Network'.
Users doesn't expect to choose default value by hand.
This change shows the default values defined at a template.

Also, image_field_data() doesn't use parameter, include_empty_option.
This change modfies the method to change the behavior based on the
parameter.

Closes-Bug: #1619465
Change-Id: I4b6bef322a668a805abcd4bc472d30f6d1df3a0a
(cherry picked from commit 792f8cbe4ac6f39aa41b0905e3b68f2a8c1e5fb1)
(cherry picked from commit c8456777df8d02847f90f62fe76a3dd46924be8b)
"
openstack%2Fheat-dashboard~stable%2Ftrain~I4b6bef322a668a805abcd4bc472d30f6d1df3a0a,openstack/heat-dashboard,stable/train,,I4b6bef322a668a805abcd4bc472d30f6d1df3a0a,Set False to include_empty_option,NEW,2022-10-10 13:58:17.000000000,2022-11-14 08:08:14.000000000,,8,5,2,860846,3fe2acebcdf308235b8e1ddba838d46dc8c84e8d,6,1,1,1,30073,Brendan Shephard,bshephar,"Set False to include_empty_option

In _populate_custom_choices(), all methods called at the method have
True as a second argument. It means that the default values sepcified
in a stack are not shown as default when launch stack form.
The fileds always show 'Select Flavor/Image/Network'.
Users doesn't expect to choose default value by hand.
This change shows the default values defined at a template.

Also, image_field_data() doesn't use parameter, include_empty_option.
This change modfies the method to change the behavior based on the
parameter.

Closes-Bug: #1619465
Change-Id: I4b6bef322a668a805abcd4bc472d30f6d1df3a0a
(cherry picked from commit 792f8cbe4ac6f39aa41b0905e3b68f2a8c1e5fb1)
(cherry picked from commit c8456777df8d02847f90f62fe76a3dd46924be8b)
"
openstack%2Fkolla-ansible~master~I48488a24d6c8a03cd129929347b1bdac25f198b0,openstack/kolla-ansible,master,support-skyline,I48488a24d6c8a03cd129929347b1bdac25f198b0,[CI] Add skyline scenario,NEW,2022-10-18 02:42:59.000000000,2022-11-14 07:57:14.000000000,,98,0,8,861687,faa92451ae005bec1ce8cd281f16c32362fdae60,81,5,30,8,28706,Boxiang Zhu,ZhuBoxiang,"[CI] Add skyline scenario

Skyline is a new service for dashboard.
This patch adds a CI scenario which tests Skyline deployment.

Depends-On: https://review.opendev.org/c/openstack/kolla/+/826948
Depends-On: https://review.opendev.org/c/openstack/kolla-ansible/+/828464

Implements: blueprint skyline
Change-Id: I48488a24d6c8a03cd129929347b1bdac25f198b0
"
openstack%2Fopenstacksdk~master~I87cf7e7378b7fe6276b521be362f3e5d51427c00,openstack/openstacksdk,master,nova-gaps,I87cf7e7378b7fe6276b521be362f3e5d51427c00,Accept queries when listing migrations,MERGED,2022-10-26 02:07:51.000000000,2022-11-14 07:49:50.000000000,2022-11-14 07:48:49.000000000,12,2,0,862664,19012058a3d78b490e4543cc5c71eb54386d16cf,11,3,2,2,35355,Daniel Wilson,dannosliwcd,"Accept queries when listing migrations

Change the migration() function in the compute proxy to accept query
parameters as kwargs.

Change-Id: I87cf7e7378b7fe6276b521be362f3e5d51427c00
"
openstack%2Fdevstack~stable%2Fqueens~I2b076e2ed4bd762fd887162a3fd774c0e0206d3a,openstack/devstack,stable/queens,,I2b076e2ed4bd762fd887162a3fd774c0e0206d3a,[stable-only] CI: Remove Ironic test; branch EOL,NEW,2022-11-12 17:00:43.000000000,2022-11-14 07:47:27.000000000,,0,2,1,864337,b04ae6c3541ed803a4bd0f026d1d9d0842c61d20,4,1,1,1,10342,Jay Faulkner,JayF,"[stable-only] CI: Remove Ironic test; branch EOL

Ironic queens is EOL, remove the job.

Change-Id: I2b076e2ed4bd762fd887162a3fd774c0e0206d3a
"
openstack%2Fglance~master~I51f07a569f35d14c3872d7f135ccead426abdf4b,openstack/glance,master,,I51f07a569f35d14c3872d7f135ccead426abdf4b,"In method add_with_multihash, there has a param position error.",ABANDONED,2022-11-14 06:48:22.000000000,2022-11-14 07:11:51.000000000,,1,1,0,864388,1a56caea7ff91e64b64b12368ccacd0234552c16,4,0,3,1,33881,LiZekun,joeylee666666,"In method add_with_multihash, there has a param position error.

method add_with_multihash is definated in glance_store/backend.py.

Change-Id: I51f07a569f35d14c3872d7f135ccead426abdf4b
"
openstack%2Fneutron~stable%2Frocky~I600d0a4bb3629c360ead2f7ebad2cee58b15137e,openstack/neutron,stable/rocky,,I600d0a4bb3629c360ead2f7ebad2cee58b15137e,[stable-only] CI: Remove Ironic test; branch EOL,NEW,2022-11-12 17:03:29.000000000,2022-11-14 07:05:44.000000000,,0,2,1,864339,2656e75ed47a6b2cb048e0a9d49db7870064f37d,3,1,1,1,10342,Jay Faulkner,JayF,"[stable-only] CI: Remove Ironic test; branch EOL

Ironic rocky is EOL, remove the job.

Change-Id: I600d0a4bb3629c360ead2f7ebad2cee58b15137e
"
openstack%2Ftacker-specs~master~I4269fbb79e3fb5641aeefe7ae9ada3f81317b443,openstack/tacker-specs,master,migrate-to-jammy,I4269fbb79e3fb5641aeefe7ae9ada3f81317b443,[DNM]Testing tacker-specs jobs in Ubuntu jammy (22.04),NEW,2022-11-14 05:05:29.000000000,2022-11-14 06:57:47.000000000,,1,0,0,864384,2f7ceab2ced2607182ae3d575c1dfe3167dfde14,4,1,2,1,32102,Manpreet Kaur,manpreet,"[DNM]Testing tacker-specs jobs in Ubuntu jammy (22.04)

Change-Id: I4269fbb79e3fb5641aeefe7ae9ada3f81317b443
Depends-On: https://review.opendev.org/c/openstack/tempest/+/861110
"
openstack%2Ftacker~master~I8a9e763a0ef7df07135ebfbdcc9fa104b778ee77,openstack/tacker,master,,I8a9e763a0ef7df07135ebfbdcc9fa104b778ee77,CNF Deployment failed due to missing Default VIM,MERGED,2022-04-12 08:25:10.000000000,2022-11-14 06:54:14.000000000,2022-11-14 06:53:04.000000000,4,4,1,837499,594fffcc0e17e3c579f33858846ae61d2eed71f5,13,4,3,1,34026,Ashutosh Mishra,ashutosh,"CNF Deployment failed due to missing Default VIM

This patch makes kubernetes VIM as Default VIM,
in ""ETSI NFV-SOL CNF Deployment"" Documentation.

Closes-Bug: 1968680
Change-Id: I8a9e763a0ef7df07135ebfbdcc9fa104b778ee77
"
openstack%2Fdevstack~master~Ia571d1dab45eb1bbb8665373d416515d3c95fb14,openstack/devstack,master,debian-nv,Ia571d1dab45eb1bbb8665373d416515d3c95fb14,Make debian-bullseye job non-voting,MERGED,2022-11-09 18:13:21.000000000,2022-11-14 06:50:45.000000000,2022-11-09 22:43:42.000000000,2,0,2,864135,a4680766515ed9317b71cfb39cd0d75dc04f3d9c,9,2,1,1,4393,Dan Smith,danms,"Make debian-bullseye job non-voting

As noted in the QA meeting this week, this job is failing due to
something that seems outside of our control:

https://meetings.opendev.org/meetings/qa/2022/qa.2022-11-08-15.00.log.html

Make it non-voting until that is resolved.

Change-Id: Ia571d1dab45eb1bbb8665373d416515d3c95fb14
"
openstack%2Ftacker~master~Icb79f357dafe852888ccbf22da6702b5f2ad428b,openstack/tacker,master,migrate-to-jammy,Icb79f357dafe852888ccbf22da6702b5f2ad428b,WIP:Testing Tacker jobs in Ubuntu jammy (22.04),NEW,2022-10-13 05:40:35.000000000,2022-11-14 06:38:56.000000000,,66,12,15,861137,03ee74bcb14005fc0f5e9efbf93e78fc1242c8be,35,3,6,1,32102,Manpreet Kaur,manpreet,"WIP:Testing Tacker jobs in Ubuntu jammy (22.04)

Depends-On: https://review.opendev.org/c/openstack/tempest/+/861110
Depends-On: https://review.opendev.org/c/openstack/mistral/+/864080
Change-Id: Icb79f357dafe852888ccbf22da6702b5f2ad428b
"
openstack%2Fopenstack-ansible-galera_server~stable%2Fxena~I116ffbccfa1af8a1bfdfc2007a8c2c1f2da7d079,openstack/openstack-ansible-galera_server,stable/xena,,I116ffbccfa1af8a1bfdfc2007a8c2c1f2da7d079,Bump mariadb version.,MERGED,2022-11-08 17:49:19.000000000,2022-11-14 05:31:46.000000000,2022-11-14 05:30:51.000000000,8,1,2,864052,d65197c8696ca8dc1cbfd6af376494df56fea8ee,16,3,2,2,32666,Damian DƒÖbrowski,ddabrowski,"Bump mariadb version.

Bump minor mariadb version to 10.6.9.
Currently used version(10.6.8) is affected by the bug[1] which causes
mariabackups to be very large(they unnecesarily contain binary logs).

[1] https://jira.mariadb.org/browse/MDEV-28758

Change-Id: I116ffbccfa1af8a1bfdfc2007a8c2c1f2da7d079
"
openstack%2Fpuppet-openstack_spec_helper~stable%2Fvictoria~I37c115739ef9ff6daa2ec29e11fe41d9d4f3f39f,openstack/puppet-openstack_spec_helper,stable/victoria,,I37c115739ef9ff6daa2ec29e11fe41d9d4f3f39f,Victoria-only: Pin public_suffix in CentOS 8,NEW,2022-11-14 04:23:36.000000000,2022-11-14 05:07:13.000000000,,5,0,0,864382,99ec3a404eb4315fa46f9ebfaac09995998c2d97,3,2,1,1,9816,Takashi Kajinami,kajinamit,"Victoria-only: Pin public_suffix in CentOS 8

The latest public_suffix, 5.0.0, requires Ruby >= 2.6 . Let's pin it
to avoid failure during bundle install in CentOS 8.

Change-Id: I37c115739ef9ff6daa2ec29e11fe41d9d4f3f39f
"
openstack%2Fnova~master~I33ea5454b773c0a7fb74051f218d5473a2ae86f4,openstack/nova,master,,I33ea5454b773c0a7fb74051f218d5473a2ae86f4,Remove the redundance code in HostState.update,ABANDONED,2022-11-14 03:51:08.000000000,2022-11-14 04:34:44.000000000,,0,3,0,864274,9c5072f09cdee0944cdec2bc0d83a8891b7c667c,7,1,2,1,31827,Jorhson Deng,dengzhaosen,"Remove the redundance code in HostState.update

The HostState is local variable in HostManager, So the updated is
None for HostState.

Change-Id: I33ea5454b773c0a7fb74051f218d5473a2ae86f4
"
openstack%2Ftripleo-puppet-elements~stable%2Fzed~I366bf97db7e3ee82a9fb70770fdc1de0db14f963,openstack/tripleo-puppet-elements,stable/zed,,I366bf97db7e3ee82a9fb70770fdc1de0db14f963,Move tuned_profiles_cpu_partitioning dependency in overcloud-base,NEW,2022-11-04 01:12:12.000000000,2022-11-14 03:53:19.000000000,,2,24,0,863460,dbedc655992f200b679e6e5125c1a054a52df6ce,3,5,1,5,9816,Takashi Kajinami,kajinamit,"Move tuned_profiles_cpu_partitioning dependency in overcloud-base

The tuned-profiles-cpu-partitioning package is needed by Tuned service
deployed on all roles, including Ceph. This change moves the pacakge
dependency into overcloud-base to reflect that.

Without it, images built from overcloud-ceph-storage would not deploy
successfully.

Change-Id: I366bf97db7e3ee82a9fb70770fdc1de0db14f963
(cherry picked from commit edbc5c3b614a9b399e399a62b7b7caf38e006fff)
"
openstack%2Ftripleo-docs~master~Ia68d3469318dd423ceb0843c39d3ac2734a5f264,openstack/tripleo-docs,master,typos,Ia68d3469318dd423ceb0843c39d3ac2734a5f264,Fix typos in doc pages,MERGED,2022-09-20 11:18:25.000000000,2022-11-14 03:44:28.000000000,2022-11-14 03:43:22.000000000,75,75,3,858516,6901c3aa8aefafc7a58a12e6c47b76ebb37f3934,12,7,2,42,20733,Rajesh Tailor,rajesht,"Fix typos in doc pages

Change-Id: Ia68d3469318dd423ceb0843c39d3ac2734a5f264
"
openstack%2Fpuppet-openstack-integration~stable%2Fzed~Ib5e3b759d47675055b0cecc48bea4dd1b7179a91,openstack/puppet-openstack-integration,stable/zed,,Ib5e3b759d47675055b0cecc48bea4dd1b7179a91,Switch to RDO Zed,MERGED,2022-11-07 15:11:09.000000000,2022-11-14 03:30:41.000000000,2022-11-14 03:30:41.000000000,8,8,1,863883,deaae8b0931c400435521b51dcb381137dc70967,7,3,1,2,9816,Takashi Kajinami,kajinamit,"Switch to RDO Zed

Change-Id: Ib5e3b759d47675055b0cecc48bea4dd1b7179a91
"
openstack%2Fvenus~master~Iea328d91fa8296cb24c5bdcbd851e944dc5f9b38,openstack/venus,master,,Iea328d91fa8296cb24c5bdcbd851e944dc5f9b38,Fix pbr version check,MERGED,2022-10-28 12:08:56.000000000,2022-11-14 02:44:24.000000000,2022-11-14 02:42:53.000000000,1,1,2,862886,665230ea54697fced42dfaf0ecf1c8e07b2053d4,8,3,1,1,22629,Michal Nasiadka,mnasiadka,"Fix pbr version check

Currently pbr version check uses 'venus' as package name, while
python package name is openstack-venus (as per setup.cfg).

This results in following when running venus-api or venus-manager:

Traceback (most recent call last):
  File ""/var/lib/kolla/venv/lib/python3.10/site-packages/pbr/version.py"", line 475, in _get_version_from_importlib_metadata
    distribution = importlib_metadata.distribution(self.package)
  File ""/usr/lib/python3.10/importlib/metadata/__init__.py"", line 957, in distribution
    return Distribution.from_name(distribution_name)
  File ""/usr/lib/python3.10/importlib/metadata/__init__.py"", line 548, in from_name
    raise PackageNotFoundError(name)
importlib.metadata.PackageNotFoundError: No package metadata was found for venus

Change-Id: Iea328d91fa8296cb24c5bdcbd851e944dc5f9b38
"
openstack%2Fheat~master~I5db9cc7f9a13db05a7d0ab0320e53bfdf4b419d9,openstack/heat,master,zanata/translations,I5db9cc7f9a13db05a7d0ab0320e53bfdf4b419d9,Imported Translations from Zanata,MERGED,2022-09-24 03:37:17.000000000,2022-11-14 02:13:18.000000000,2022-11-14 02:09:22.000000000,17,375,0,859183,5451b9854bf2d6fd0f82211f29c7ff4dcf431267,30,2,7,11,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I5db9cc7f9a13db05a7d0ab0320e53bfdf4b419d9
"
openstack%2Fnova~master~Icfba423fda037be9cf071022283985297a989b07,openstack/nova,master,,Icfba423fda037be9cf071022283985297a989b07,Add os_vif in nova-config-generator,NEW,2022-11-07 15:35:02.000000000,2022-11-14 02:12:55.000000000,,1,0,0,863891,6b9342f6e256f5e182dde19b68315cc820f34109,8,4,1,1,11583,Arnaud Morin,arnaudmorin,"Add os_vif in nova-config-generator

Some config in os_vif are affecting nova behavior, so we should add them
in nova.conf.sample in order to let people fine-tune this on demand
without looking into code.

This will also change the nova config reference docs.o.o

Signed-off-by: Arnaud Morin <arnaud.morin@ovhcloud.com>
Change-Id: Icfba423fda037be9cf071022283985297a989b07
"
openstack%2Fvenus~master~Ieec144dac453a57680513fadb5146f3c1db4b393,openstack/venus,master,,Ieec144dac453a57680513fadb5146f3c1db4b393,Add a test case to search_logs.,MERGED,2022-11-11 09:44:47.000000000,2022-11-14 01:25:50.000000000,2022-11-14 01:24:46.000000000,17,0,1,864270,8abfaa3ff2b6770ef06c6c1080dc48dfad92a432,9,3,1,1,34375,hejunli,hejunli,"Add a test case to search_logs.

Change-Id: Ieec144dac453a57680513fadb5146f3c1db4b393
"
openstack%2Fvenus~master~Id9a750a6b51590ce5a896432c55c5fb8527e3a54,openstack/venus,master,,Id9a750a6b51590ce5a896432c55c5fb8527e3a54,Add a test case 'valid type' to search_params.,MERGED,2022-11-11 03:12:46.000000000,2022-11-14 01:07:57.000000000,2022-11-14 01:07:06.000000000,8,0,1,863308,3f5cd82428974f9ba180986060c0a6884cfe17ac,8,4,1,1,34375,hejunli,hejunli,"Add a test case 'valid type' to search_params.

Change-Id: Id9a750a6b51590ce5a896432c55c5fb8527e3a54
"
openstack%2Fvenus~master~Icc9721e5c46afe7d98be0ec67cb446e97edeef8a,openstack/venus,master,,Icc9721e5c46afe7d98be0ec67cb446e97edeef8a,Add A unit test case to search_params.,MERGED,2022-11-10 06:25:07.000000000,2022-11-14 01:06:25.000000000,2022-11-14 01:05:27.000000000,8,0,2,863306,ddd8761f779659f789246cbaa5163796eee33d2f,14,3,3,1,34375,hejunli,hejunli,"Add A unit test case to search_params.

Change-Id: Icc9721e5c46afe7d98be0ec67cb446e97edeef8a
"
openstack%2Fvenus~master~I5424c2ec3c3b1fe4bf1bbdb4f4f6dee6578de0a8,openstack/venus,master,,I5424c2ec3c3b1fe4bf1bbdb4f4f6dee6578de0a8,Add unit test for controller api,MERGED,2022-11-06 04:00:06.000000000,2022-11-14 01:04:26.000000000,2022-11-14 01:03:28.000000000,30,0,12,863772,16ac2c94d92871cf59d0800d4e14b4f65a33af32,15,5,5,1,31412,Wenping Song,songwenping,"Add unit test for controller api

Change-Id: I5424c2ec3c3b1fe4bf1bbdb4f4f6dee6578de0a8
"
openstack%2Fcinder~master~I81883eeb56bc27ea568a1a4bcfe45744eec78e8c,openstack/cinder,master,,I81883eeb56bc27ea568a1a4bcfe45744eec78e8c,Storage node configuration,NEW,2021-12-23 11:10:33.000000000,2022-11-13 03:49:28.000000000,,2,2,26,822822,9fd41690b6473a6ccc6cb41ccdefe4c67ad1fd0a,110,14,7,1,30615,Tushar Trambak Gite,tushargite96,"Storage node configuration

update install command for LVM packages

Partial-Bug: #1892274
Change-Id: I81883eeb56bc27ea568a1a4bcfe45744eec78e8c
"
openstack%2Ftrove-dashboard~master~I7e067aeae2b6ca2502b66040271aae1b1c279877,openstack/trove-dashboard,master,zanata/translations,I7e067aeae2b6ca2502b66040271aae1b1c279877,Imported Translations from Zanata,NEW,2022-09-24 02:45:27.000000000,2022-11-13 03:31:31.000000000,,5,5,0,859175,de58e57b810640a30c5e192eb2688922dccd263c,7,2,3,1,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I7e067aeae2b6ca2502b66040271aae1b1c279877
"
openstack%2Fnova~stable%2Fzed~I77fdfa9cffbd44b2889f49f266b2582bcc6a4267,openstack/nova,stable/zed,bug/1982284,I77fdfa9cffbd44b2889f49f266b2582bcc6a4267,"Handle ""no RAM info was set"" migration case",NEW,2022-10-07 18:43:09.000000000,2022-11-13 02:21:30.000000000,,40,0,2,860732,00396fa9396324780c09161ed57a86b7e458c26f,7,4,1,3,4690,melanie witt,melwitt,"Handle ""no RAM info was set"" migration case

This handles the case where the live migration monitoring thread may
race and call jobStats() after the migration has completed resulting in
the following error:

    libvirt.libvirtError: internal error: migration was active, but no
    RAM info was set

Closes-Bug: #1982284
Change-Id: I77fdfa9cffbd44b2889f49f266b2582bcc6a4267
(cherry picked from commit 9fea934c71d3c2fa7fdd80c67d94e18466c5cf9a)
"
openstack%2Freleases~master~Icc58e0246d91af4d69925764027e426e03e3a259,openstack/releases,master,,Icc58e0246d91af4d69925764027e426e03e3a259,Release and branch cut test for 2023.1 Antelope,NEW,2022-10-10 19:01:29.000000000,2022-11-13 01:47:56.000000000,,8,0,4,860869,eca9ff5f8a74aa869c984efee15cfd192a7678ba,8,3,2,1,17685,Elod Illes,elod.illes,"Release and branch cut test for 2023.1 Antelope

Change-Id: Icc58e0246d91af4d69925764027e426e03e3a259
"
openstack%2Freleases~master~Ife104eaa4d75936e2514145153b1e70ca8ea054b,openstack/releases,master,u-v-last,Ife104eaa4d75936e2514145153b1e70ca8ea054b,[heat-tempest-plugin] Tag ussuri-last & victoria-last,NEW,2022-11-13 00:52:29.000000000,2022-11-13 01:38:42.000000000,,8,0,0,864368,9a9ac0bb631e4c137c1eeca37d65b538191d1b93,5,3,3,2,8556,Ghanshyam,ghanshyam,"[heat-tempest-plugin] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches[3].

We taged ussuri-last & victoria-last for tempest[4] but forgot to do
it for the tempest plugins. Using the tag 1.5.0 hash which is compatible
for tempest ussuri-last and victoria-last.

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: Ife104eaa4d75936e2514145153b1e70ca8ea054b
"
openstack%2Freleases~master~I9971b6c79daea039c970aca534c8a74a64b03b0f,openstack/releases,master,u-v-last,I9971b6c79daea039c970aca534c8a74a64b03b0f,[senlin-tempest-plugin] Tag ussuri-last & victoria-last,NEW,2022-11-13 00:54:36.000000000,2022-11-13 01:20:26.000000000,,8,0,0,864369,68804212d070c3be68a2ca0cb552c994cb89d7dc,2,2,1,2,8556,Ghanshyam,ghanshyam,"[senlin-tempest-plugin] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches[3].

We taged ussuri-last & victoria-last for tempest[4] but forgot to do
it for the tempest plugins. Using the tag 1.5.0 hash which is compatible
for tempest ussuri-last and victoria-last.

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: I9971b6c79daea039c970aca534c8a74a64b03b0f
"
openstack%2Freleases~master~Ie3f45da86e426070651ce3fbb01b4c20aba7456e,openstack/releases,master,u-v-last,Ie3f45da86e426070651ce3fbb01b4c20aba7456e,[sahara-tests] Tag ussuri-last & victoria-last,NEW,2022-11-13 00:56:22.000000000,2022-11-13 01:20:22.000000000,,8,0,0,864370,d98f8e87db00a507f24cc78d5b725b81b3a6282c,2,2,1,2,8556,Ghanshyam,ghanshyam,"[sahara-tests] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches[3].

We taged ussuri-last & victoria-last for tempest[4] but forgot to do
it for the tempest plugins. Using the tag 0.15.0 hash which is compatible
for tempest ussuri-last and victoria-last.

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: Ie3f45da86e426070651ce3fbb01b4c20aba7456e
"
openstack%2Freleases~master~Ie5f2f3d9de1ce53c0190d56e9d454018fd666eef,openstack/releases,master,u-v-last,Ie5f2f3d9de1ce53c0190d56e9d454018fd666eef,[cinder-tempest-plugin] Tag ussuri-last & victoria-last,NEW,2022-11-12 23:32:52.000000000,2022-11-13 00:20:52.000000000,,8,0,0,864343,9ba3b2d072f9e6880501a0f17584e0eee076e4e9,2,3,1,2,8556,Ghanshyam,ghanshyam,"[cinder-tempest-plugin] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches[3].

We taged ussuri-last & victoria-last for tempest[4] but forgot to do
it for the tempest plugins. Using 1.3.0 tag hash which is compatible
and used for cinder ussuri and victoria testing.

- https://github.com/openstack/cinder/blob/ea54727fd2600337e1a9f91a443feb3993a117f8/.zuul.yaml#L225
- https://github.com/openstack/cinder/blob/5cb0a8bb7d9c67ccc3bc44190170036fbc00a704/.zuul.yaml#L277

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: Ie5f2f3d9de1ce53c0190d56e9d454018fd666eef
"
openstack%2Freleases~master~I613857a888af91a1543e87def14c78d7c9c26c00,openstack/releases,master,u-v-last,I613857a888af91a1543e87def14c78d7c9c26c00,[mistral-tempest-plugin] Tag ussuri-last & victoria-last,NEW,2022-11-13 00:04:20.000000000,2022-11-13 00:20:28.000000000,,8,0,0,864349,4388899bab3e92cb076f39387ced87153294e407,2,3,1,2,8556,Ghanshyam,ghanshyam,"[mistral-tempest-plugin] Tag ussuri-last & victoria-last

Ussuri and Victoria branches are in Extended Maintenance[1].
Once any stable branch is moved to EM state then, Tempest and
its plugins needs to be released[2] so that we have the compatible
tags to test the EM stable branches[3].

We taged ussuri-last & victoria-last for tempest[4] but forgot to do
it for the tempest plugins. Using the tag 1.4.0 hash which is compatible
for tempest ussuri-last and victoria-last.

[1] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[2] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html
[3] https://review.opendev.org/c/openstack/releases/+/843039

Change-Id: I613857a888af91a1543e87def14c78d7c9c26c00
"
openstack%2Fcinder~master~I10135877889a17c6ae6274f8be1b992294bf65d3,openstack/cinder,master,tatlin-unified-rename-tatlin-api,I10135877889a17c6ae6274f8be1b992294bf65d3,Tatlin unified driver - rename tatlin_api object,NEW,2022-10-24 12:30:59.000000000,2022-11-12 21:30:54.000000000,,40,39,1,862490,ec95a5624dc9cf744a37022e8b9ecc60423fe9be,32,3,2,3,13671,Vladislav Belogrudov,vb,"Tatlin unified driver - rename tatlin_api object

In Tatlin Unified driver client object incorrectly is called
tatlin_api. TatlinAPI is a different type and does not have
Tatlin*Client methods. Renamed to tatlin_client.

Implements: blueprint yadro-tatlin-unified-refactoring
Change-Id: I10135877889a17c6ae6274f8be1b992294bf65d3
"
openstack%2Fpyeclib~master~I04389d6bf7bf399ed17ce09f251e02606e425677,openstack/pyeclib,master,,I04389d6bf7bf399ed17ce09f251e02606e425677,Import setuptools before distutils,NEW,2022-11-12 15:51:24.000000000,2022-11-12 16:35:27.000000000,,3,3,0,864336,7f728998748416f390756932770899a185e28718,3,1,1,1,35532,Stefano Rivera,stefanor,"Import setuptools before distutils

setuptools 60 uses its own bundled version of distutils, by default. It
injects this into sys.modules, at import time. So we need to make sure
that it is imported, before anything else imports distutils, to ensure
everything is using the same distutils version.

This change in setuptools is to prepare for Python 3.12, which will drop
distutils.

Fixes: https://bugs.debian.org/1022470
Change-Id: I04389d6bf7bf399ed17ce09f251e02606e425677
"
openstack%2Fos-net-config~stable%2Ftrain~Ida0c78ba7784d452165999af4dd955b0129cfdaf,openstack/os-net-config,stable/train,ifcfg_cherry_pick,Ida0c78ba7784d452165999af4dd955b0129cfdaf,Mellanox NICs' ifcfg-scripts should not be removed when no CONFIG change exists,MERGED,2022-11-04 05:31:13.000000000,2022-11-12 12:56:01.000000000,2022-11-12 12:54:58.000000000,3,2,4,863587,a598d011dcc5f1f5d3d5f610d91be40fd157c842,13,4,3,1,33688,Vijayalakshmi,VijiC,"Mellanox NICs' ifcfg-scripts should not be removed when no CONFIG change exists

os-net-config is triggering reconfiguration/flapping of
mellanox nics even when there are no changes in the NIC configs.
Added check to NOT remove ifcfg-* scripts for Mellonox NICs when
DPDK/Bond is enabled

Resolves: rhbz#2131248
Change-Id: Ida0c78ba7784d452165999af4dd955b0129cfdaf
(cherry picked from commit e752fbac782f357f1445a609ff90e1dee6c3492d)
"
openstack%2Fnova~master~Ia838b461cdb4f9c347bbe55c0769e0776d8c6e93,openstack/nova,master,test-images-type-raw,Ia838b461cdb4f9c347bbe55c0769e0776d8c6e93,"DNM test ephemeral encryption + resize: qcow2, raw",NEW,2022-10-22 02:19:03.000000000,2022-11-12 08:25:53.000000000,,103,73,5,862416,f4b826d9a56b5b570621da1171b299ea235e3b31,50,1,10,5,4690,melanie witt,melwitt,"DNM test ephemeral encryption + resize: qcow2, raw

Depends-On: https://review.opendev.org/c/openstack/devstack/+/864160
Depends-On: https://review.opendev.org/c/openstack/nova/+/772273

Change-Id: Ia838b461cdb4f9c347bbe55c0769e0776d8c6e93
"
openstack%2Fnova~master~I35cbc7b3f314605e256fb76d4be1ff1a109d50a3,openstack/nova,master,specs/yoga/approved/ephemeral-encryption-libvirt,I35cbc7b3f314605e256fb76d4be1ff1a109d50a3,libvirt: Introduce support for qcow2 with LUKS,NEW,2021-01-25 09:49:29.000000000,2022-11-12 07:58:26.000000000,,241,91,3,772273,9bece95f6c10c64056fb3f27479807b1859cf1e8,87,2,14,11,10135,Lee Yarwood,lyarwood,"libvirt: Introduce support for qcow2 with LUKS

This includes support for resize image and snapshot image in addition to
create image.

A new unit test test_driver_capabilities_flat is also added ahead of
support for the RAW image backend. The Flat image backend was the only
backend that did not have a driver capabilities unit test.

TODOs

- Tests for:
  - rebuild from image w/ encryption to without
  - rebuild from image without encryption to encryption
  - 409 if flavor and image encryption options conflict
  - reject resize from flavor with encryption to one without

- Adding support to the raw backend for luks

This is going to take converting the initial RAW base into RAW LUKS.

- Adding support to the rbd backend for luks

https://docs.ceph.com/en/latest/rbd/rbd-encryption/

- Deprecating the existing ephemeral encryption implementation
- Tests, as you can see most of the stack doesn't have tests.
- Documentation, lots of docs.

Change-Id: I35cbc7b3f314605e256fb76d4be1ff1a109d50a3
"
openstack%2Fneutron-vpnaas~master~I95fa73ebc4841061909b51dd8e2dba259c4c0c7c,openstack/neutron-vpnaas,master,oslo_master_periodic,I95fa73ebc4841061909b51dd8e2dba259c4c0c7c,CI: Add openstack-tox-py39-with-oslo-master to periodic weekly queue,NEW,2022-10-20 12:09:51.000000000,2022-11-12 02:29:57.000000000,,3,0,0,862108,d1b1f94b1b7aaa559b43e222974e0e92d811aff7,3,2,1,1,8313,Lajos Katona,elajkat,"CI: Add openstack-tox-py39-with-oslo-master to periodic weekly queue

Change-Id: I95fa73ebc4841061909b51dd8e2dba259c4c0c7c
"
openstack%2Fheat~master~I9d9c41f5eaebae00c21f9b07c9a9e9c8ea0c9b86,openstack/heat,master,,I9d9c41f5eaebae00c21f9b07c9a9e9c8ea0c9b86,Keep request-id at version negotiation,NEW,2022-11-11 21:06:21.000000000,2022-11-11 22:29:54.000000000,,6,6,0,864311,62365269210b147ef99729051aad395583e9f64f,3,1,1,1,27838,Vadym Markov,vmarkov,"Keep request-id at version negotiation

Proposed patch calls version negotiation middleware before handling of
request-id. It allows to keep request-id unchanged for the whole request
processing

Change-Id: I9d9c41f5eaebae00c21f9b07c9a9e9c8ea0c9b86
"
openstack%2Fkeystoneauth~master~I98d5d4490b3d5667677cdd19f3c7b39abe6044ef,openstack/keystoneauth,master,,I98d5d4490b3d5667677cdd19f3c7b39abe6044ef,Keep request-id at redirect,NEW,2022-11-11 21:03:14.000000000,2022-11-11 22:13:04.000000000,,13,0,0,864309,26f0cc2ed0f84ae87c45126086b76b8392479b13,2,1,1,2,27838,Vadym Markov,vmarkov,"Keep request-id at redirect

Currently when redirects are used, the request id can get lost on redirect.
Proposed patch reuses req-id from redirect response and passes it to
actual request

Change-Id: I98d5d4490b3d5667677cdd19f3c7b39abe6044ef
"
openstack%2Fmanila~master~Ifab3ec9de2abeb1af8e6499feca0236e1ee22fcf,openstack/manila,master,bug/1967760,Ifab3ec9de2abeb1af8e6499feca0236e1ee22fcf,Shorten snapshots names in CephFS drivers,NEW,2022-10-21 14:13:34.000000000,2022-11-11 21:25:43.000000000,,41,14,1,862348,c86523d5909a2d61e03fb29f4c0c71b67cf18205,10,2,2,3,6413,Victoria Martinez de la Cruz,vkmc,"Shorten snapshots names in CephFS drivers

The name set to snapshots in the CephFS drivers
is generated appending the snapshot id with the
snapshot instance id.

This is a problem because Ceph has a limitation
in the name of the subvolumes (shares) being created.

What happens then is, when trying to create a snapshot,
the snapshot gets created with a truncated name and it cannot
be accessed later.

This change drops the snapshot instance id from the
assigned name in order to avoid this limitation.

Closes-Bug: #1967760

Change-Id: Ifab3ec9de2abeb1af8e6499feca0236e1ee22fcf
"
openstack%2Fopenstack-ansible-os_neutron~master~If8ca3f2035ada97cff248ad49771eefab95c6c23,openstack/openstack-ansible-os_neutron,master,ovn-ssl,If8ca3f2035ada97cff248ad49771eefab95c6c23,[WIP] add ovn ssl config,NEW,2022-10-21 19:50:49.000000000,2022-11-11 20:21:50.000000000,,185,13,2,862403,00ee560f0da539db322d75d9b2a34814b57fad9a,32,1,18,10,13095,Marc Gari√©py,mgariepy,"[WIP] add ovn ssl config

Create ssl-certs for ovn deployment

Change-Id: If8ca3f2035ada97cff248ad49771eefab95c6c23
"
openstack%2Fnova~master~I5c447e630aaf1413a5eac89c2e8103506d245221,openstack/nova,master,glance-locations,I5c447e630aaf1413a5eac89c2e8103506d245221,Test ceph-multistore with a real image,MERGED,2022-10-10 17:55:02.000000000,2022-11-11 19:14:04.000000000,2022-11-11 19:12:15.000000000,46,16,27,860864,010983e80374ef6538c965d3db3247cda1bc6edc,149,4,25,3,4393,Dan Smith,danms,"Test ceph-multistore with a real image

This inflates the cirros image to 1G for a more realistic scenario.
Technically we should have been doing something like this all along,
as the deployment guidance for ceph is to use a raw image, not a qcow2
one, so this also increases our accuracy to real-life.

We also need to up the volume size tempest uses for various tests
to make sure we will fit.

Change-Id: I5c447e630aaf1413a5eac89c2e8103506d245221
"
openstack%2Fcharm-designate~master~I50693d6e85b2ce427ff184555cdfae66096f3f6c,openstack/charm-designate,master,functional-test-sources,I50693d6e85b2ce427ff184555cdfae66096f3f6c,Use the default source origin for mysql & rabbit,MERGED,2022-11-11 15:46:13.000000000,2022-11-11 19:06:02.000000000,2022-11-11 19:06:02.000000000,0,8,1,864296,f87d01015bebbc7758612f27082f4108ceb94a7d,8,3,1,2,8992,Billy Olsen,billy-olsen,"Use the default source origin for mysql & rabbit

The functional test bundles specify that the mysql and rabbit
services should use the openstack-origin reference field, but this
is not actually relevant to the rabbit/mysql charms (e.g. it doesn't
make sense to install rabbit from cloud:jammy-zed as rabbit is from
the distro).

Change-Id: I50693d6e85b2ce427ff184555cdfae66096f3f6c
"
openstack%2Fopenstack-zuul-jobs~master~I893eaf117125e67e8b0f4387222290387885fe76,openstack/openstack-zuul-jobs,master,,I893eaf117125e67e8b0f4387222290387885fe76,Use ubuntu-focal for announce-release job for stable,ABANDONED,2022-11-11 11:09:32.000000000,2022-11-11 19:04:33.000000000,,18,0,0,864261,91b83d2bf9d5bd765b123b043a314a093d66f502,4,2,1,1,17685,Elod Illes,elod.illes,"Use ubuntu-focal for announce-release job for stable

The default nodeset was changed to ubuntu-jammy recently and
announce-release job started to fail with that. The reason is that the
job installs binary dependencies of the deliverables to avoid garbage
content when composing the announce mail and it seems lot of projects
hold old dependencies (mostly python2 related packages) that don't
exist anymore under Ubuntu Jammy.

To avoid the failure, this patch pins the nodeset to ubuntu-focal for
stable branches (only those, which are still in 'Maintained phase' as
releases can be made only from those).

Change-Id: I893eaf117125e67e8b0f4387222290387885fe76
"
openstack%2Fos-vif~stable%2Fstein~I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7,openstack/os-vif,stable/stein,stein-ref,I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7,Fix - os-vif fails to get the correct UpLink Representor,ABANDONED,2020-12-08 11:37:55.000000000,2022-11-11 18:39:18.000000000,,74,8,0,765974,aef047a34384a055abfc15f703df59af4ec47437,11,4,3,3,32296,Mamduh,Mamduh,"Fix - os-vif fails to get the correct UpLink Representor

Till kernel 5.7 PF and VF representors are exposed as virtual device.
They are not linked to its parent PCI device like how uplink
representor is linked.

Starting from kernel 5.8 due to new change [1] the PF and VF representors are
linked to their parent PCI device, and so ""get_ifname_by_pci_address"" fails
to get the correct UpLink Representor.

This patch modifys the behviour of ""get_ifname_by_pci_address"" to
check the physical port name of the netdev in
vf_pci_addr_path/physfn/net to match the formart for the uplink ""p\d+"".

[1] https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=123f0f53dd64b67e34142485fe866a8a581f12f1

Closes-Bug: #1892132
Change-Id: I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7
(cherry picked from commit 3c63ee065a53649c700121a7947c399f23dca95a)
"
openstack%2Fos-vif~stable%2Fstein~I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76,openstack/os-vif,stable/stein,stein-refactor-linux-net,I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76,Refactor code of linux_net to more cleaner and increase performace,ABANDONED,2020-12-08 07:51:57.000000000,2022-11-11 18:39:13.000000000,,139,188,2,765914,41adc262dac2c2a5647b4c08a4376ffb01731ced,27,4,7,2,32296,Mamduh,Mamduh,"Refactor code of linux_net to more cleaner and increase performace

The patch adds new functions '_get_phys_port_name' for reading physical
port name of the SR-IOV port and '_get_phys_switch_id' for reading
physical port switch ID of the SR-IOV port, in addition to refactoring
'get_representor_port' to use the new functions and decrease calls for
""_get_pf_func"" and netdevs associated with the PF will now be processed
in the loop, however it will not be matching 'phys_port_name' which
ensures the correct behaviour.

In addition to updating the unit test for linux_net and remove not
needed mocks

Conflicts:
      vif_plug_ovs/linux_net.py

Related-Bug: #1892132
Change-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76
(cherry picked from commit cda2a020f1ef92ebdd62c592cbad987977f240e6)
"
openstack%2Fnova~stable%2Fstein~I53f3a062ce419d1142d7dd3103fab565bb105e05,openstack/nova,stable/stein,bug/1756823,I53f3a062ce419d1142d7dd3103fab565bb105e05,Exec systemd-run without --user flag in Quobyte driver,ABANDONED,2019-05-22 12:47:17.000000000,2022-11-11 18:38:20.000000000,,142,71,8,660705,876f89abda9156ece1e8bd09e812be36d2b36c71,49,12,4,3,13915,Silvan Kaiser,kaisers,"Exec systemd-run without --user flag in Quobyte driver

Removes the --user flag from the systemd based mount command in the
Quobyte driver. This prevents mount failures due to:
- Older systemd releases not supporting the --user flag (e.g. CentOS)
- Systemd versions having a bug preventing running the --scope and
  --user flags together
- processutils context not allowing mount to run with this flag
(see bug referenced below for details)

Furthermore the systemd detection is fixed.

Note: The privsep extension originally included in the change is
not part of this backport.

Closes-Bug: #1756823

Change-Id: I53f3a062ce419d1142d7dd3103fab565bb105e05
(cherry picked from commit 7231f7dee10fa8f9e6cead026f6a5ae3f5b15ae4)
"
openstack%2Fnova~stable%2Fstein~Iaaeae9281301f14f4ae9b43f4a06de58b699fd68,openstack/nova,stable/stein,bug/1779845,Iaaeae9281301f14f4ae9b43f4a06de58b699fd68,Hide hypervisor id on windows guests,ABANDONED,2019-06-06 11:57:35.000000000,2022-11-11 18:38:09.000000000,,97,10,0,663616,dde1e727909b6b0cefea3bc60fad086b58044329,16,10,1,5,9373,Vlad Gusev,s10,"Hide hypervisor id on windows guests

Blueprints hide-hypervisor-id-flavor-extra-spec [1] and
add-kvm-hidden-feature [2] allow hiding KVM's signature for guests,
which is necessary for Nvidia drivers to work in VMs with passthrough
GPUs.  While this works well for linux guests on KVM, it doesn't work
for Windows guests.

For them, KVM emulates some HyperV features. With the
current implementation, KVM's signature is hidden, but HyperV's is not,
and Nvidia drivers don't work in Windows VMs.

This change generates an extra element in the libvirt xml for Windows
guests on KVM which obfuscates HyperV's signature too, controlled by the
existing image and flavor parameters (img_hide_hypervisor_id and
hide_hypervisor_id correspondingly). The extra xml element is
  <vendor_id state='on' value='1234567890ab'/>
in features/hyperv.

[1] https://blueprints.launchpad.net/nova/+spec/hide-hypervisor-id-flavor-extra-spec
[2] https://blueprints.launchpad.net/nova/+spec/add-kvm-hidden-feature

Change-Id: Iaaeae9281301f14f4ae9b43f4a06de58b699fd68
Closes-Bug: 1779845
(cherry picked from commit ca543438e183b2bd97a08ef781ddeab8303354ed)
"
openstack%2Fnova~stable%2Fstein~I642b1e3ed6de2be4dcc19fe214f84095d2e1d31a,openstack/nova,stable/stein,bug/1825584,I642b1e3ed6de2be4dcc19fe214f84095d2e1d31a,Silence amqp heartbeat warning,ABANDONED,2020-05-14 12:20:33.000000000,2022-11-11 18:38:04.000000000,,22,0,0,728059,f77b645620ab1450e076cfca069695f04f603a3c,19,10,1,1,11604,sean mooney,sean-k-mooney,"Silence amqp heartbeat warning

When the nova api is executing under uWSGI or MOD_WSGI
the lifetime of the amqp heartbeat thread is controlled
by the wsgi server. As a result when the nova api is run
in this configuration we expect that the heartbeat thread
will be suspended and heartbeats will be missed when the wsgi
server suspends execution of the wsgi application.

This change adds a python logging filter to suppress
the reporting of heartbeat warnings as this behavior is
expected. Since the operator cannot do anything to address
the issue the warning is just noise and many operators
and customers find it to be off-putting.

Change-Id: I642b1e3ed6de2be4dcc19fe214f84095d2e1d31a
Closes-Bug: #1825584
(cherry picked from commit d6f664524dfa4eecbe3e16fda0fec5359faf84c6)
(cherry picked from commit 2d98d7c6c241701d5f82cb8031fa738618ebb915)
(cherry picked from commit bb8a5415d024f77412711da11c46e34591bf6782)
"
openstack%2Fnova~stable%2Fstein~Id094dd90efde09b9a835d4492f4a92b8f8ad296e,openstack/nova,stable/stein,,Id094dd90efde09b9a835d4492f4a92b8f8ad296e,Fix invalid assert_has_calls,ABANDONED,2020-09-14 10:33:09.000000000,2022-11-11 18:38:00.000000000,,4,4,0,751754,f80e55dd28fa48e51b079e838dc513069534d835,5,4,1,1,10135,Lee Yarwood,lyarwood,"Fix invalid assert_has_calls

This is to fix the invalid assert_has_calls usage,
""assert_has_calls = "" should be ""assert_has_calls("".

Change-Id: Id094dd90efde09b9a835d4492f4a92b8f8ad296e
(cherry picked from commit 8cb9b84f283e58841a58d5d79b15268ca5da504d)
(cherry picked from commit 674d1cbabcf5ab2a84718cd1fc7eccaabbb59839)
(cherry picked from commit c02a60265319281c2bf385360102c69fdccf3676)
"
openstack%2Fnova~stable%2Fstein~Ibe236988af24a3b43508eec4efbe52a4ed05d45f,openstack/nova,stable/stein,bug/1818847-stable/stein,Ibe236988af24a3b43508eec4efbe52a4ed05d45f,libvirt: Use 'writeback' QEMU cache mode when 'none' is not viable,ABANDONED,2020-08-20 13:38:52.000000000,2022-11-11 18:37:52.000000000,,79,29,0,747163,d0fd29330186386396893523a133c2f92efa943c,8,7,1,4,9373,Vlad Gusev,s10,"libvirt: Use 'writeback' QEMU cache mode when 'none' is not viable

When configuring QEMU cache modes for Nova instances, we use
'writethrough' when 'none' is not available.  But that's not correct,
because of our misunderstanding of how cache modes work.  E.g. the
function disk_cachemode() in the libvirt driver assumes that
'writethrough' and 'none' cache modes have the same behaviour with
respect to host crash safety, which is not at all true.

The misunderstanding and complexity stems from not realizing that each
QEMU cache mode is a shorthand to toggle *three* booleans.  Refer to the
convenient cache mode table in the code comment (in
nova/virt/libvirt/driver.py).

As Kevin Wolf (thanks!), QEMU Block Layer maintainer, explains (I made
a couple of micro edits for clarity):

    The thing that makes 'writethrough' so safe against host crashes is
    that it never keeps data in a ""write cache"", but it calls fsync()
    after _every_ write.  This is also what makes it horribly slow.  But
    'cache=none' doesn't do this and therefore doesn't provide this kind
    of safety.  The guest OS must explicitly flush the cache in the
    right places to make sure data is safe on the disk.  And OSes do
    that.

    So if 'cache=none' is safe enough for you, then 'cache=writeback'
    should be safe enough for you, too -- because both of them have the
    boolean 'cache.writeback=on'.  The difference is only in
    'cache.direct', but 'cache.direct=on' only bypasses the host kernel
    page cache and data could still sit in other caches that could be
    present between QEMU and the disk (such as commonly a volatile write
    cache on the disk itself).

So use 'writeback' mode instead of the debilitatingly slow
'writethrough' for cases where the O_DIRECT-based 'none' is unsupported.

Do the minimum required update to the `disk_cachemodes` config help
text.  (In a future patch, rewrite the cache modes documentation to fix
confusing fragments and outdated information.)

Closes-Bug: #1818847
Change-Id: Ibe236988af24a3b43508eec4efbe52a4ed05d45f
Signed-off-by: Kashyap Chamarthy <kchamart@redhat.com>
Looks-good-to-me'd-by: Kevin Wolf <kwolf@redhat.com>
(cherry picked from commit b9dc86d8d646472195070022ff7ae4c372bef4ca)
"
openstack%2Fnova~stable%2Fstein~Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c,openstack/nova,stable/stein,,Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c,libvirt: Log exception when unable to import rbd or rados,ABANDONED,2020-10-14 20:25:23.000000000,2022-11-11 18:37:47.000000000,,20,7,0,758243,cd7a1877a40b794e62086939d94b89bf928b61e9,7,5,1,1,10135,Lee Yarwood,lyarwood,"libvirt: Log exception when unable to import rbd or rados

This should help provide some context when the RbdDriver later raises a
RuntimeError if rbd or rados hasn't been imported correctly.

Change-Id: Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c
(cherry picked from commit aa16dd09ebeb21d0b81682b0b6026de0fe4f23b7)
(cherry picked from commit 961a355fb314975ee169cbe9ef88eb8537294253)
(cherry picked from commit 22c86f92ce7ef86675ee8265d43b21997e0df4bc)
(cherry picked from commit 9c58a663b7999260e1683bae6a828d118aa44fd5)
"
openstack%2Fnova~stable%2Fstein~I34c68df1e6330dab1524aa0abec733610211a407,openstack/nova,stable/stein,bug/1894966-stable/stein,I34c68df1e6330dab1524aa0abec733610211a407,"api: Set min, maxItems for server_group.policies field",ABANDONED,2021-01-27 16:40:46.000000000,2022-11-11 18:37:36.000000000,,22,9,0,772721,77899969c38b31b7b7623516e5ffd5b6b4a2766a,6,3,1,3,9373,Vlad Gusev,s10,"api: Set min, maxItems for server_group.policies field

As noted inline, the 'policies' field may be a list but it expects one
of two items.

Change-Id: I34c68df1e6330dab1524aa0abec733610211a407
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Closes-Bug: #1894966
(cherry picked from commit 32c43fc8017ee89d4e6cdf79086d87735a00f0c0)
(cherry picked from commit 781210bd598c3e0ee9bd6a7db5d25688b5fc0131)
(cherry picked from commit 1634d3f59ace0206131992e31ee2d4b64123d7e8)
"
openstack%2Fnova~stable%2Fstein~I72e85855f621d3a51cd58d14247abd302dcd958b,openstack/nova,stable/stein,bug/1894966-stable/stein,I72e85855f621d3a51cd58d14247abd302dcd958b,tests: Add regression test for bug 1894966,ABANDONED,2021-01-27 16:38:26.000000000,2022-11-11 18:37:27.000000000,,41,0,0,772720,1fd75035d688bba668cd594b213c1ed3a2516203,5,3,1,1,9373,Vlad Gusev,s10,"tests: Add regression test for bug 1894966

You must specify the 'policies' field. Currently, not doing so will
result in a HTTP 500 error code. This should be a 4xx error. Add a test
to demonstrate the bug before we provide a fix.

Changes:
  nova/tests/functional/regressions/test_bug_1894966.py

NOTE(stephenfin): Need to update 'super' call to Python 2-compatible
variant.

Change-Id: I72e85855f621d3a51cd58d14247abd302dcd958b
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Related-Bug: #1894966
(cherry picked from commit 2c66962c7a40d8ef4fab54324e06edcdec1bd716)
(cherry picked from commit 94d24e3e8d04488abdebd4969daf98b780125297)
(cherry picked from commit cf6db29168c4ee9a34f3b3ebdd1deae31f95f203)
"
openstack%2Fnova~stable%2Fstein~Ia2007bc63ef09931ea0197cef29d6a5614ed821a,openstack/nova,stable/stein,bug/1905701,Ia2007bc63ef09931ea0197cef29d6a5614ed821a,libvirt: Skip encryption metadata lookups if secret already exists on host,ABANDONED,2020-12-07 09:40:04.000000000,2022-11-11 18:37:23.000000000,,42,1,0,765772,21c3682bb3d5975dfa352a543b762ffab8322305,14,1,3,3,10135,Lee Yarwood,lyarwood,"libvirt: Skip encryption metadata lookups if secret already exists on host

When connecting an encrypted volume to a host the _attach_encryptor
method will be called in order to either call a legacy os-brick
encryptor *or* configure a libvirt secret used by libvirt and QEMU to
natively decrypt LUKSv1 encrypted volumes. To create this libvirt secret
the configured key manager will be queried to provide and then decode
the associated secret before this is stashed within libvirt.

This change simply skips the above when an existing libvirt secret
associated with the target volume is found on the host already.

While this obviously optimises basic instance lifecycle flows such as a
simple power off and on it additionally resolves a more convoluted use
case when the ``[DEFAULT]/resume_guests_state_on_host_boot``
configurable is enabled. In this case the compute service has no request
context with which to query the key manager when attempting to restart
instances with encrypted volumes attached. As a result any attempt by
the compute service to restart an instance with an attached encrypted
volume would previously fail.

Closes-Bug: #1905701
Change-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a
(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)
(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)
(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)
(cherry picked from commit d47679779189e43941881c6212d6db2052a19867)
"
openstack%2Fnova~stable%2Fstein~Ic5ce2580e7638a47f1ffddb4edbb503bf490504c,openstack/nova,stable/stein,bug/1896621,Ic5ce2580e7638a47f1ffddb4edbb503bf490504c,compute: Lock by instance.uuid lock during swap_volume,ABANDONED,2020-10-19 09:06:24.000000000,2022-11-11 18:37:19.000000000,,26,2,0,758734,3934507474582fdaf0e743beb735db79bd9ce0cd,15,4,3,1,10135,Lee Yarwood,lyarwood,"compute: Lock by instance.uuid lock during swap_volume

The libvirt driver is currently the only virt driver implementing swap
volume within Nova. While libvirt itself does support moving between
multiple volumes attached to the same instance at the same time the
current logic within the libvirt driver makes a call to
virDomainGetXMLDesc that fails if there are active block jobs against
any disk attached to the domain.

This change simply uses an instance.uuid based lock in the compute layer
to serialise requests to swap_volume to avoid this from being possible.

Closes-Bug: #1896621
Change-Id: Ic5ce2580e7638a47f1ffddb4edbb503bf490504c
(cherry picked from commit 6cf449bdd0d4beb95cf12311e7d2f8669e625fac)
(cherry picked from commit eebf94b6540fcd16826067fac544b5a3238842a3)
(cherry picked from commit f7ba1aab5f6f76ba88d6cc63cde2ec246ee61ec5)
(cherry picked from commit fb81b16df09bedadecca9acd234ef137a427e02a)
"
openstack%2Fnova~stable%2Fstein~I0e068043d8267ab91535413d950a3e154c2234f7,openstack/nova,stable/stein,bug/1923206-stable/stein,I0e068043d8267ab91535413d950a3e154c2234f7,libvirt: Ignore device already in the process of unplug errors,ABANDONED,2021-05-26 09:12:43.000000000,2022-11-11 18:37:14.000000000,,55,1,0,793044,1cfe6d2506329fa2ad64bfbdd700da77f5edcd50,4,2,1,2,9373,Vlad Gusev,s10,"libvirt: Ignore device already in the process of unplug errors

At present QEMU will raise an error to libvirt when a device_del request
is made for a device that has already partially detached through a
previous request. This is outlined in more detail in the following
downstream Red Hat QEMU bug report:

Get libvirtError ""Device XX is already in the process of unplug"" [..]
https://bugzilla.redhat.com/show_bug.cgi?id=1878659

Within Nova we can actually ignore this error and allow our existing
retry logic to attempt again after a short wait, hopefully allowing the
original request to complete removing the device from the domain.

This change does this and should result in one of the following
device_del requests raising a VIR_ERR_DEVICE_MISSING error from libvirt.
_try_detach_device should then translate that libvirt error into a
DeviceNotFound exception which is itself then ignored by all
detach_device_with_retry callers and taken to mean that the device has
detached successfully.

Closes-Bug: #1923206
Change-Id: I0e068043d8267ab91535413d950a3e154c2234f7
(cherry picked from commit 0a7d3794c6dc39976b4cbfe12b1688230ac895a8)
(cherry picked from commit 972a86d61f6b6f0f3d1af549b081854e6ff016bc)
(cherry picked from commit 4496dfe72020a9e658b04edcba90ddf7f578465f)
(cherry picked from commit 5acc9316310028ccb3603d1ff7f0870018f834cd)
(cherry picked from commit 1032219508e5ac0c2819b80010840eb00afe3313)
"
openstack%2Fnova~stable%2Fstein~I77b28b9cc8f99b159f628f4655d85ff305a71db8,openstack/nova,stable/stein,bug/1876301,I77b28b9cc8f99b159f628f4655d85ff305a71db8,compute: Validate a BDMs disk_bus when provided,ABANDONED,2020-08-03 20:56:56.000000000,2022-11-11 18:37:09.000000000,,39,4,0,744554,4daae0a36b2cf59109a4d579f7a4da9bdff1d09c,12,6,2,7,10135,Lee Yarwood,lyarwood,"compute: Validate a BDMs disk_bus when provided

Previously disk_bus values were never validated and could easily end up
being ignored by the underlying virt driver and hypervisor.

For example, a common mistake made by users is to request a virtio-scsi
disk_bus when using the libvirt virt driver. This however isn't a valid
bus and is ignored, defaulting back to the virtio (virtio-blk) bus.

This change adds a simple validation in the compute API using the
potential disk_bus values provided by the DiskBus field class as used
when validating the hw_*_bus image properties.

Conflicts:
  nova/objects/fields.py

NOTE(lyarwood): Conflict as Ibf01437a051815019581ca02d1c5da25c43d09ff
not being present in stable/stein. As a result the comment relating to
editing the DiskBus class from that change is squashed here for context.

Closes-Bug: #1876301
Change-Id: I77b28b9cc8f99b159f628f4655d85ff305a71db8
(cherry picked from commit 5913bd889f9d3dfc8d154415e666c821054c229d)
(cherry picked from commit fb31ae430a2e4f8869e77e31ea0d6a9478f6aa61)
(cherry picked from commit bbc562c572f328cc6ffa9cdbff83ae64672fe5b8)
"
openstack%2Fnova~stable%2Fstein~I17357d85f845d4160cb7c7784772530a1e92af76,openstack/nova,stable/stein,bug/1885528,I17357d85f845d4160cb7c7784772530a1e92af76,Make _rebase_with_qemu_img() generic,ABANDONED,2021-03-16 11:01:16.000000000,2022-11-11 18:37:05.000000000,,36,23,2,780784,356d4ad4c402ac2ac99889c9e08583b87bbfd6a8,15,3,4,2,10135,Lee Yarwood,lyarwood,"Make _rebase_with_qemu_img() generic

Move volume_delete related logic away from this method, in order to make
it generic and usable elsewhere.

Change-Id: I17357d85f845d4160cb7c7784772530a1e92af76
Related-Bug: #1732428
(cherry picked from commit ce2203456660083119cdbb7e73c1ad15e6e0a074)
(cherry picked from commit 2e89699c3301bf801784c637b6919752fcd3503f)
(cherry picked from commit c61ceac5d0d0844db85791da167cf224ce360a5f)
"
openstack%2Fnova~stable%2Fstein~I58dca95251b607eaff602783fee2fc38e2421944,openstack/nova,stable/stein,bug/1885528,I58dca95251b607eaff602783fee2fc38e2421944,Use absolute path during qemu img rebase,ABANDONED,2020-10-09 11:59:27.000000000,2022-11-11 18:37:00.000000000,,33,6,3,757085,59d3f4e4da7f0dab5fa0936975412327e02ea034,19,4,6,2,10135,Lee Yarwood,lyarwood,"Use absolute path during qemu img rebase

During an assisted volume snapshot delete request from Cinder nova
removes the snapshot from the backing file chain. During that nova
checks the existence of such file. However in some cases (see the bug
report) the path is relative and therefore os.path.exists fails.

This patch makes sure that nova uses the volume absolute path to make
the backing file path absolute as well.

Closes-Bug #1885528

Change-Id: I58dca95251b607eaff602783fee2fc38e2421944
(cherry picked from commit b9333125790682f9d60bc74fdbb12a098565e7c2)
(cherry picked from commit 831abc9f83a2d3f517030f881e7da724417fea93)
(cherry picked from commit c2044d4bd0919860aa2d49687ba9c6ef6f7d37e8)
(cherry picked from commit e926ec75e29dcdf3b671811533587bba246a8c45)
"
openstack%2Fnova~stable%2Fstein~I8296e4be9f0706fab043451b856efadbb7bd41f6,openstack/nova,stable/stein,bug/1929886,I8296e4be9f0706fab043451b856efadbb7bd41f6,Honor [neutron]http_retries in the manual client,ABANDONED,2021-06-07 20:43:43.000000000,2022-11-11 18:36:55.000000000,,3,0,1,795138,73c9f45b9590586549ce46df8e2f15b8e3b31b44,19,3,2,2,9373,Vlad Gusev,s10,"Honor [neutron]http_retries in the manual client

Change Ifb3afb13aff7e103c2e80ade817d0e63b624604a added a nova side
config option for specifying neutron client retries that maps to the
ksa connect_retries config option to provide parity with the cinder and
glance clients that have nova side config options.

That change missed passing CONF.neutron.http_retries to the manual
client used for calling the port binding API. This sets the
connect_retries attribute on the manual ksa client so http_retries
will be honored.

Closes-Bug: #1929886
Related-Bug: #1866937

Change-Id: I8296e4be9f0706fab043451b856efadbb7bd41f6
(cherry picked from commit 56eb253e9febccf721df6bca4eb851ad26cb70a6)
(cherry picked from commit 46aa3f4ec769e948d9eb73604bf9b66f4b0230b0)
(cherry picked from commit f20346bc00a30c914cbefb48009db776f8e00b09)
(cherry picked from commit b96f93ed8633d6fd0725c4a11366ffbf38056e65)
(cherry picked from commit 74e6c821fcb8f686a9b91c093b1db834b59c2856)
"
openstack%2Fnova~stable%2Fstein~I639dd5af7c039da546eaf9ccce56cbaaa38fa79a,openstack/nova,stable/stein,bug/1908075-stable/stein,I639dd5af7c039da546eaf9ccce56cbaaa38fa79a,Add regression test for bug #1908075,ABANDONED,2021-09-21 10:51:13.000000000,2022-11-11 18:36:50.000000000,,122,0,0,810191,7ae5416299d52f34e03c095c671465f76912fd6e,3,2,1,1,9373,Vlad Gusev,s10,"Add regression test for bug #1908075

NOTE(lyarwood): The following changes are required to allow the test to
pass on stable/train.

- InstanceHelperMixin pulled in for access to a better
  _build_minimal_create_server_request method
- api_major_version defined in test class
- Fake image service stubbed out directing in test class
- A simple _create_server method is in-lined within the class

Related-Bug: #1908075
Change-Id: I639dd5af7c039da546eaf9ccce56cbaaa38fa79a
(cherry picked from commit ee3a8f02253f1f652785c07ea0be6464ab4bcc11)
(cherry picked from commit 8e2a3dd2f08a2f0c420bc1da9c02ff6b128c06c5)
(cherry picked from commit 92ee874947f745508bcd4636fc3f9551bde28b9e)
"
openstack%2Fnova~stable%2Fstein~Idec2d31cbba497dc4b20912f3388ad2341951d23,openstack/nova,stable/stein,bug/1753676,Idec2d31cbba497dc4b20912f3388ad2341951d23,Abort live-migration during instance_init,ABANDONED,2021-09-01 09:49:55.000000000,2022-11-11 18:36:46.000000000,,34,5,1,806881,db23083dddbea5c2f534c26c602ca0238b73771d,22,6,2,2,9373,Vlad Gusev,s10,"Abort live-migration during instance_init

When compute service restart during a live-migration,
we lose live-migration monitoring thread. In that case
it is better to early abort live-migration job before resetting
state of instance, this will avoid API to accept further
action while unmanaged migration process still run in background.
It also avoid unexpected/dangerous behavior as describe in related bug.

Conflicts:
	nova/compute/manager.py

NOTE(s10): Conflict is due to Ia1b3ab0b66fdaf569f6c7a09510f208ee28725b2
not being in Stein

Change-Id: Idec2d31cbba497dc4b20912f3388ad2341951d23
Closes-Bug: #1753676
(cherry picked from commit ebcf6e4ce576285949c5a202f2d7d21dc03156ef)
(cherry picked from commit 6fa8540f2ce40aacca4fcf588a050ed26f66d24c)
"
openstack%2Fnova~stable%2Fstein~I48dcb7faa17fe9f8346445a1746cff5845baf358,openstack/nova,stable/stein,bug/1897528,I48dcb7faa17fe9f8346445a1746cff5845baf358,Reproduce bug 1897528,ABANDONED,2021-11-04 12:25:22.000000000,2022-11-11 18:36:40.000000000,,37,0,0,816656,386287b6a7d495b94115576b2c498b786e4c0628,9,2,3,1,9373,Vlad Gusev,s10,"Reproduce bug 1897528

The nova-compute fails to start if the hypervisor has PCI addresses
32bit domain.

Change-Id: I48dcb7faa17fe9f8346445a1746cff5845baf358
Related-Bug: #1897528
(cherry picked from commit 976ac722d36439d16ea4ec1bf5037c482c89ef55)
(cherry picked from commit 0354d4d9f47354e2b4fc0b2343c27e734fe2e494)
(cherry picked from commit 8e9859b95c537738d97ade41a8d09670de27ef8d)
(cherry picked from commit a0d3e6846c8e03ff141343c9bab9d4cbd2066dfc)
"
openstack%2Fnova~stable%2Fstein~I59a0746b864610b6a314078cf5661d3d2b84b1d4,openstack/nova,stable/stein,bug/1897528,I59a0746b864610b6a314078cf5661d3d2b84b1d4,Ignore PCI devices with 32bit domain,ABANDONED,2021-11-04 12:37:33.000000000,2022-11-11 18:36:26.000000000,,79,16,0,816682,1f7c5ed9ae6cc32a9bac5bc85e6718fe41c9e41b,8,2,2,5,9373,Vlad Gusev,s10,"Ignore PCI devices with 32bit domain

Nova and QEMU[1] supports PCI devices with a PCI address that has 16 bit
domain. However there are hypervisors that reports PCI addresses with
32 bit domain. While today we cannot assign these to guests this should
not prevent the nova-compute service to start.

This patch changes the PCI manager to ignore such PCI devices.

Please note that this patch does not change fact that nova does not
allow specifying PCI addresses with 32bit domain in the
[pci]/passthrough_whitelist configuration. Such configuration is still
rejected at nova-compute service startup.

Closes-Bug: #1897528

[1] https://github.com/qemu/qemu/blob/f2a1cf9180f63e88bb38ff21c169da97c3f2bad5/hw/core/qdev-properties.c#L993

NOTE(s10): conflict in doc/source/admin/pci-passthrough.rst is due to
I2ac7df7d235f0af25f5a99bc8f6abddbae2cb3af not being in Stein.

Change-Id: I59a0746b864610b6a314078cf5661d3d2b84b1d4
(cherry picked from commit 8c9d6fc8f073cde78b79ae259c9915216f5d59b0)
(cherry picked from commit 90ffc553d7f4152a6a4a8708787150d3c3c40b03)
(cherry picked from commit 22daca3e7f33e89b937f03a89db63cf25489e3c9)
(cherry picked from commit f03f46ee8846571be44e6995eafcb400a0f492e5)
"
openstack%2Fnova~stable%2Fstein~Ie36401c782f023d1d5f2623732619105dc2cfa24,openstack/nova,stable/stein,bug/1927677,Ie36401c782f023d1d5f2623732619105dc2cfa24,Reject open redirection in the console proxy,ABANDONED,2021-07-29 22:03:00.000000000,2022-11-11 18:36:22.000000000,,74,0,7,802935,c30711bfde264784060413953c69c122f69ac122,36,3,5,3,9373,Vlad Gusev,s10,"Reject open redirection in the console proxy

NOTE(melwitt): This is the combination of two commits, the bug fix and
a followup change to the unit test to enable it also run on
Python < 3.6.

Our console proxies (novnc, serial, spice) run in a websockify server
whose request handler inherits from the python standard
SimpleHTTPRequestHandler. There is a known issue [1] in the
SimpleHTTPRequestHandler which allows open redirects by way of URLs
in the following format:

  http://vncproxy.my.domain.com//example.com/%2F..

which if visited, will redirect a user to example.com.

We can intercept a request and reject requests that pass a redirection
URL beginning with ""//"" by implementing the
SimpleHTTPRequestHandler.send_head() method containing the
vulnerability to reject such requests with a 400 Bad Request.

This code is copied from a patch suggested in one of the issue comments
[2].

Closes-Bug: #1927677

[1] https://bugs.python.org/issue32084
[2] https://bugs.python.org/issue32084#msg306545

Reduce mocking in test_reject_open_redirect for compat

This is a followup for change Ie36401c782f023d1d5f2623732619105dc2cfa24
to reduce mocking in the unit test coverage for it.

While backporting the bug fix, it was found to be incompatible with
earlier versions of Python < 3.6 due to a difference in internal
implementation [1].

This reduces the mocking in the unit test to be more agnostic to the
internals of the StreamRequestHandler (ancestor of
SimpleHTTPRequestHandler) and work across Python versions >= 2.7.

Related-Bug: #1927677

[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286

Change-Id: I546d376869a992601b443fb95acf1034da2a8f36
(cherry picked from commit 214cabe6848a1fdb4f5941d994c6cc11107fc4af)
(cherry picked from commit 9c2f29783734cb5f9cb05a08d328c10e1d16c4f1)
(cherry picked from commit 94e265f3ca615aa18de0081a76975019997b8709)
(cherry picked from commit d43b88a33407b1253e7bce70f720a44f7688141f)

Change-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24
(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)
(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)
(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)
(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)
(cherry picked from commit 04d48527b62a35d912f93bc75613a6cca606df66)
"
openstack%2Fnova~stable%2Fstein~Ie904d1513b5cf76d6d5f6877545e8eb378dd5499,openstack/nova,stable/stein,bug/1946729,Ie904d1513b5cf76d6d5f6877545e8eb378dd5499,Add a WA flag waiting for vif-plugged event during reboot,ABANDONED,2021-11-19 16:51:28.000000000,2022-11-11 18:36:18.000000000,,149,9,0,818601,3afb13a205d2424022beb6a8e538da383abdd06f,4,1,1,5,9708,Balazs Gibizer,gibi,"Add a WA flag waiting for vif-plugged event during reboot

The libvirt driver power on and hard reboot destroys the domain first
and unplugs the vifs then recreate the domain and replug the vifs.
However nova does not wait for the network-vif-plugged event before
unpause the domain. This can cause that the domain starts running and
requesting IP via DHCP before the networking backend finished plugging
the vifs.

So this patch adds a workaround config option to nova to wait for
network-vif-plugged events during hard reboot the same way as nova waits
for this event during new instance spawn.

This logic cannot be enabled unconditionally as not all neutron
networking backend sending plug time events to wait for. Also the logic
needs to be vnic_type dependent as ml2/ovs and the in tree sriov backend
often deployed together on the same compute. While ml2/ovs sends plug
time event the sriov backend does not send it reliably. So the
configuration is not just a boolean flag but a list of vnic_types
instead. This way the waiting for the plug time event for a vif that is
handled by ml2/ovs is possible while the instance has other vifs handled
by the sriov backend where no event can be expected.

Conflicts:
      .zuul.yaml due to Ie3dc90862c895a8bd9bff4511a16254945f45478 not in
      stable/stein
      nova/conf/workarounds.py due to
      I069b6b1d28eaf1eee5c7fb8d0fdef9c0c229a1bf not in stable/stein

Change-Id: Ie904d1513b5cf76d6d5f6877545e8eb378dd5499
Closes-Bug: #1946729
(cherry picked from commit 68c970ea9915a95f9828239006559b84e4ba2581)
(cherry picked from commit 0c41bfb8c5c60f1cc930ae432e6be460ee2e97ac)
(cherry picked from commit 89c4ff5f7b45f1a5bed8b6b9b4586fceaa391bfb)
(cherry picked from commit c531fdcc192afb5af628ac567cb0ff8aa3eab052)
(cherry picked from commit 35e071470e2c5597444a7b85211a01e7fbc7c68b)
(cherry picked from commit 870d8148ef1fc0c72554f24a20aec091e69a5656)
"
openstack%2Fnova~stable%2Fstein~Id2d8d72d30075200d2b07b847c4e5568599b0d3b,openstack/nova,stable/stein,bug/1901707,Id2d8d72d30075200d2b07b847c4e5568599b0d3b,only wait for plugtime events in pre-live-migration,ABANDONED,2021-12-07 10:00:25.000000000,2022-11-11 18:36:13.000000000,,39,9,6,820682,da56c045eba7b7f53ec2962ea8b6d744b383817a,14,4,2,3,9373,Vlad Gusev,s10,"only wait for plugtime events in pre-live-migration

This change modifies _get_neutron_events_for_live_migration
to filter the event to just the subset that will be sent
at plug-time.

Currently neuton has a bug where by the dhcp agent
send a network-vif-plugged event during live migration after
we update the port profile with ""migrating-to:""
this cause a network-vif-plugged event to be sent for
configuration where vif_plugging in nova/os-vif is a noop.

when that is corrected the current logic in nova cause the migration
to time out as its waiting for an event that will never arrive.

This change filters the set of events we wait for to just the plug
time events.

Conflicts:
    nova/tests/unit/compute/test_compute_mgr.py

Related-Bug: #1815989
Closes-Bug: #1901707
Change-Id: Id2d8d72d30075200d2b07b847c4e5568599b0d3b
(cherry picked from commit 8b33ac064456482158b23c2a2d52f819ebb4c60e)
(cherry picked from commit ef348c4eb3379189f290217c9351157b1ebf0adb)
(cherry picked from commit d9c833d5a404dfa206e08c97543e80cb613b3f0b)
(cherry picked from commit c0a36d917794fed77e75ba9ed853c01a77b540bd)
"
openstack%2Fnova~stable%2Fstein~I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527,openstack/nova,stable/stein,,I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527,Gracefull recovery when attaching volume fails,ABANDONED,2022-02-18 08:44:29.000000000,2022-11-11 18:36:09.000000000,,62,3,0,829859,9425ad78a95da2d8dc5309dd32867dbc0a3d21a4,7,1,2,3,29074,Felix Huettner,felix.huettner,"Gracefull recovery when attaching volume fails

When trying to attach a volume to an already running instance the nova-api
requests the nova-compute service to create a BlockDeviceMapping. If the
nova-api does not receive a response within `rpc_response_timeout` it will
treat the request as failed and raise an exception.

There are multiple cases where nova-compute actually already processed the
request and just the reply did not reach the nova-api in time (see bug report).
After the failed request the database will contain a BlockDeviceMapping entry
for the volume + instance combination that will never be cleaned up again.
This entry also causes the nova-api to reject all future attachments of this
volume to this instance (as it assumes it is already attached).

To work around this we check if a BlockDeviceMapping has already been created
when we see a messaging timeout. If this is the case we can safely delete it
as the compute node has already finished processing and we will no longer pick
it up.
This allows users to try the request again.

A previous fix was abandoned but without a clear reason ([1]).

[1]: https://review.opendev.org/c/openstack/nova/+/731804

Closes-Bug: 1960401
Change-Id: I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527
(cherry picked from commit 9eb116b99ce32bc69c4abf8ec3b0179ef89a8860)
"
openstack%2Fnova~stable%2Fstein~I92f35514efddcb071c7094370b79d91d34c5bc72,openstack/nova,stable/stein,bug/1937375,I92f35514efddcb071c7094370b79d91d34c5bc72,compute: Avoid duplicate BDMs during reserve_block_device_name,ABANDONED,2021-08-06 14:27:55.000000000,2022-11-11 18:36:05.000000000,,41,6,0,803763,fc33fd8b7e935d8e6a690c18a0907875ac181dcf,5,1,1,3,29074,Felix Huettner,felix.huettner,"compute: Avoid duplicate BDMs during reserve_block_device_name

When attaching a volume to a running instance the nova-api validates
that the volume is not already attached to the instance. However
nova-compute is responsible for actually creating the BDM entry in the
database. If sending attach requests fast enough it can be possible
that the same ""attach_volume"" request can be sent to nova-compute for
the same volume/instance combination.

To work around this we add a check in nova-compute to validate that
the volume has not been attached in the mean time.

Closes-Bug: #1937375
Change-Id: I92f35514efddcb071c7094370b79d91d34c5bc72
(cherry picked from commit 2209b0007fe85d7c5439e0bfdfe2120c63898fa2)
(cherry picked from commit 2bee83b8a980b2bd9e276b75aa74253f8c0d0a70)
(cherry picked from commit 303c7a7c35044240f1546a5f960c1a4e6482f385)
(cherry picked from commit deefea82efd87b001acce7cf8d0fc2915062228b)
(cherry picked from commit 6ef97792387bf010b92da1e06beefc04d22ff5ff)
"
openstack%2Fnova~stable%2Fstein~I332d4f33ea6b9506cc24ac12e5c0994f208a3107,openstack/nova,stable/stein,bug/1937375,I332d4f33ea6b9506cc24ac12e5c0994f208a3107,Add functional test for bug 1937375,ABANDONED,2021-08-06 14:27:55.000000000,2022-11-11 18:36:01.000000000,,115,0,0,803762,975806f3995e7b09c477859aadd8a5771acd2771,4,2,1,1,29074,Felix Huettner,felix.huettner,"Add functional test for bug 1937375

- InstanceHelperMixin pulled in for access to a better
  _build_minimal_create_server_request method
- api_major_version defined in test class
- Fake image service stubbed out directing in test class
- A simple _create_server method is in-lined within the class

Related-Bug: #1937375
Change-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107
(cherry picked from commit 2ffd9738602531e93495a1feca76bbb687c3e72c)
(cherry picked from commit 7a9e3dcd172f187cf93f406b09f49d2ded9bd90d)
(cherry picked from commit 68b2d5f797896768229db1cf28feb22a984daf81)
(cherry picked from commit 2a67e8794f916af07a05c550dca01d7fca625caf)
(cherry picked from commit 051a14674195e5d37b931d3b59366656801bc8a1)
"
openstack%2Fnova~stable%2Fstein~Ifaa10fedcfcaa564db5524a3e648ff7548a49cd3,openstack/nova,stable/stein,,Ifaa10fedcfcaa564db5524a3e648ff7548a49cd3,DNM: check CI health,ABANDONED,2022-08-23 13:12:22.000000000,2022-11-11 18:35:57.000000000,,1,0,0,854184,1e0d98d9418c74bc06cba0e9a2df079220b9f312,4,1,1,1,17685,Elod Illes,elod.illes,"DNM: check CI health

Change-Id: Ifaa10fedcfcaa564db5524a3e648ff7548a49cd3
"
openstack%2Fnova~stable%2Fstein~I95f68be76330ff09e5eabb5ef8dd9a18f5547866,openstack/nova,stable/stein,bug/1927677,I95f68be76330ff09e5eabb5ef8dd9a18f5547866,address open redirect with 3 forward slashes,ABANDONED,2021-11-08 15:29:17.000000000,2022-11-11 18:35:53.000000000,,33,6,0,817037,df6f8eb8c037abee7e14461eb3a541f5af83a75c,5,3,1,2,17685,Elod Illes,elod.illes,"address open redirect with 3 forward slashes

Ie36401c782f023d1d5f2623732619105dc2cfa24 was intended
to address OSSA-2021-002 (CVE-2021-3654) however after its
release it was discovered that the fix only worked
for urls with 2 leading slashes or more then 4.

This change adresses the missing edgecase for 3 leading slashes
and also maintian support for rejecting 2+.

Change-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866
co-authored-by: Matteo Pozza
Closes-Bug: #1927677
(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)
(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)
(cherry picked from commit 9588cdbfd4649ea53d60303f2d10c5d62a070a07)
(cherry picked from commit 0997043f459ac616b594363b5b253bd0ae6ed9eb)
(cherry picked from commit 8906552cfc2525a44251d4cf313ece61e57251eb)
"
openstack%2Fnova~stable%2Fstein~Ie3129ee395427337e9abcef2f938012608f643e1,openstack/nova,stable/stein,bug/1945646-stable/train-stable/stein,Ie3129ee395427337e9abcef2f938012608f643e1,Ensure MAC addresses characters are in the same case,ABANDONED,2022-09-02 11:49:57.000000000,2022-11-11 18:35:48.000000000,,51,3,0,855553,bfe619e3d980db1e40ce2573a9df5a4b1bf53a9d,3,1,1,2,9373,Vlad Gusev,s10,"Ensure MAC addresses characters are in the same case

Currently neutron can report ports to have MAC addresses
in upper case when they're created like that. In the meanwhile
libvirt configuration file always stores MAC in lower case
which leads to KeyError while trying to retrieve migrate_vif.

Closes-Bug: #1945646
Change-Id: Ie3129ee395427337e9abcef2f938012608f643e1
(cherry picked from commit 6a15169ed9f16672c2cde1d7f27178bb7868c41f)
(cherry picked from commit 63a6388f6a0265f84232731aba8aec1bff3c6d18)
(cherry picked from commit 6c3d5de659e558e8f6ee353475b54ff3ca7240ee)
(cherry picked from commit 28d0059c1f52e51add31bff50f1f6e443c938792)
(cherry picked from commit 184a3c976faed38907af148a533bc6e9faa410f5)
(cherry picked from commit a5da31ec1ea1d1c7b4df146857982699ebdc328e)
"
openstack%2Fnova~stable%2Fstein~I69ef8d7e5ec1aabc0beb87652fa14eba2bc72ba5,openstack/nova,stable/stein,,I69ef8d7e5ec1aabc0beb87652fa14eba2bc72ba5,CI: Ironic is EOL'ing Stein; remove jobs,ABANDONED,2022-10-10 22:22:22.000000000,2022-11-11 18:35:43.000000000,,0,7,0,860880,5fdd7a0bd89b6930a2806d6b0410fcf8009eb047,4,1,1,1,10342,Jay Faulkner,JayF,"CI: Ironic is EOL'ing Stein; remove jobs

Ironic is EOL'ing support for Stein; remove CI jobs related to Ironic
stein.

Change-Id: I69ef8d7e5ec1aabc0beb87652fa14eba2bc72ba5
"
openstack%2Fos-vif~stable%2Frocky~I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76,openstack/os-vif,stable/rocky,rep-fix-rocky-backport,I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76,Refactor code of linux_net to more cleaner and increase performace,ABANDONED,2020-12-08 10:21:53.000000000,2022-11-11 18:34:07.000000000,,139,188,1,765962,246b7178414a23e99b3329c5383c4df244724384,17,4,5,2,32296,Mamduh,Mamduh,"Refactor code of linux_net to more cleaner and increase performace

The patch adds new functions '_get_phys_port_name' for reading physical
port name of the SR-IOV port and '_get_phys_switch_id' for reading
physical port switch ID of the SR-IOV port, in addition to refactoring
'get_representor_port' to use the new functions and decrease calls for
""_get_pf_func"" and netdevs associated with the PF will now be processed
in the loop, however it will not be matching 'phys_port_name' which
ensures the correct behaviour.

In addition to updating the unit test for linux_net and remove not
needed mocks

Conflicts:
      vif_plug_ovs/tests/unit/test_linux_net.py

Related-Bug: #1892132
Change-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76
(cherry picked from commit 41adc262dac2c2a5647b4c08a4376ffb01731ced)
"
openstack%2Fos-vif~stable%2Frocky~I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7,openstack/os-vif,stable/rocky,rep-fix-rocky-backport,I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7,Fix - os-vif fails to get the correct UpLink Representor,ABANDONED,2020-12-08 11:46:36.000000000,2022-11-11 18:34:03.000000000,,75,9,0,765977,32d87ffdfb97aa7fbac3894d292762f6c70d54b5,13,4,4,3,32296,Mamduh,Mamduh,"Fix - os-vif fails to get the correct UpLink Representor

Till kernel 5.7 PF and VF representors are exposed as virtual device.
They are not linked to its parent PCI device like how uplink
representor is linked.

Starting from kernel 5.8 due to new change [1] the PF and VF representors are
linked to their parent PCI device, and so ""get_ifname_by_pci_address"" fails
to get the correct UpLink Representor.

This patch modifys the behviour of ""get_ifname_by_pci_address"" to
check the physical port name of the netdev in
vf_pci_addr_path/physfn/net to match the formart for the uplink ""p\d+"".

[1] https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=123f0f53dd64b67e34142485fe866a8a581f12f1

Conflicts:
    vif_plug_ovs/linux_net.py

Closes-Bug: #1892132
Change-Id: I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7
(cherry picked from commit aef047a34384a055abfc15f703df59af4ec47437)
"
openstack%2Fnova~stable%2Frocky~I925513d33e4508a4c09e35553792761cdf4bb1ee,openstack/nova,stable/rocky,Bug1882341,I925513d33e4508a4c09e35553792761cdf4bb1ee,"Instance failed to spawn: UEFINotSupported when I create instance in host with MIPS architecture, it got an error ""UEFINotSupported: UEFI is not supported""",ABANDONED,2020-07-08 11:51:15.000000000,2022-11-11 18:33:31.000000000,,15,3,3,739958,c25e281ccc7b8e3e4083cae73b767b948bca2584,11,6,1,2,32006,XiaolinZhao,zhaoxiaolin,"Instance failed to spawn: UEFINotSupported
when I create instance in host with MIPS architecture, it got an error ""UEFINotSupported: UEFI is not supported""

Fixes Bug1882341

Change-Id: I925513d33e4508a4c09e35553792761cdf4bb1ee
"
openstack%2Fnova~stable%2Frocky~I526693dcf7ab15f836d086d173c1746e316c565a,openstack/nova,stable/rocky,my-branch-rocky,I526693dcf7ab15f836d086d173c1746e316c565a,Perfect unit test of 'test_no_migrations_have_downgrade'.,ABANDONED,2020-03-31 01:40:28.000000000,2022-11-11 18:33:26.000000000,,11,6,0,716118,4ece9a896865ed5f0d87344407685eb930e5419e,6,4,1,1,31460,wangjiajing,wangjiajing,"Perfect unit test of 'test_no_migrations_have_downgrade'.

Change-Id: I526693dcf7ab15f836d086d173c1746e316c565a
"
openstack%2Fnova~stable%2Frocky~I0de9cc9643159c7479adf06b06633e7823020f92,openstack/nova,stable/rocky,bug/1751923,I0de9cc9643159c7479adf06b06633e7823020f92,Force refresh instance info_cache during heal,ABANDONED,2019-08-29 14:28:42.000000000,2022-11-11 18:33:21.000000000,,203,11,0,679271,0f5919bb5460dc872b03cbf672348b9a3ef10a30,19,8,3,4,6737,Edward Hope-Morley,hopem,"Force refresh instance info_cache during heal

If the instance info_cache is corrupted somehow, like during
a host reboot and the ports aren't wired up properly or
a mistaken policy change in neutron results in nova resetting
the info_cache to an empty list, the _heal_instance_info_cache
is meant to fix it (once the current state of the ports for
the instance in neutron is corrected). However, the task is
currently only refreshing the cache *based* on the current contents
of the cache, which defeats the purpose of neutron being the source
of truth for the ports attached to the instance.

This change makes the _heal_instance_info_cache periodic task
pass a ""force_refresh"" kwarg, which defaults to False for backward
compatibility with other methods that refresh the cache after
operations like attach/detach interface, and if True will make
nova get the current state of the ports for the instance from neutron
and fully rebuild the info_cache.

To not lose port order in info_cache this change takes original order
from nova historical data that are stored as VirtualInterfaceList
objects. For ports that are not registered as VirtualInterfaces
objects it will add them at the end of port_order list. Due to this
for instances older than Newton another patch was introduced to fill
missing VirtualInterface objects in the DB [1].

Long-term we should be able to refactor some of the older refresh
code which leverages the cache to instead use the refresh_vif_id
kwarg so that we do targeted cache updates when we do things like
attach and detach ports, but that's a change for another day.

[1] https://review.openstack.org/#/c/614167

Co-Authored-By: Maciej Jozefczyk <maciej.jozefczyk@corp.ovh.com>
Closes-Bug: #1751923
(cherry picked from commit ba44c155ce1dcefede9741722a0525820d6da2b8)

Change-Id: I0de9cc9643159c7479adf06b06633e7823020f92
"
openstack%2Fnova~stable%2Frocky~If8e689796b81592078bfdb759f8a5c08f9565144,openstack/nova,stable/rocky,,If8e689796b81592078bfdb759f8a5c08f9565144,"""[stable-only]"" Removed the quoted section",ABANDONED,2020-08-04 11:32:31.000000000,2022-11-11 18:33:16.000000000,,0,24,4,744681,a5d2d6f6f5299277c00ad3c1d7fc12e26e56de56,13,5,3,1,30905,Harshavardhan Metla,harsha24,"""[stable-only]"" Removed the quoted section

Removed the quoted section from 
https://docs.openstack.org/nova/rocky/install/controller-install-rdo.html

Change-Id: If8e689796b81592078bfdb759f8a5c08f9565144
Closes-Bug: #1700999
"
openstack%2Fnova~stable%2Frocky~Id094dd90efde09b9a835d4492f4a92b8f8ad296e,openstack/nova,stable/rocky,,Id094dd90efde09b9a835d4492f4a92b8f8ad296e,Fix invalid assert_has_calls,ABANDONED,2020-09-14 10:33:32.000000000,2022-11-11 18:32:57.000000000,,4,4,0,751755,a7c198f6c9aa83adc85910a62fcd02293e03f597,5,4,1,1,10135,Lee Yarwood,lyarwood,"Fix invalid assert_has_calls

This is to fix the invalid assert_has_calls usage,
""assert_has_calls = "" should be ""assert_has_calls("".

Change-Id: Id094dd90efde09b9a835d4492f4a92b8f8ad296e
(cherry picked from commit 8cb9b84f283e58841a58d5d79b15268ca5da504d)
(cherry picked from commit 674d1cbabcf5ab2a84718cd1fc7eccaabbb59839)
(cherry picked from commit c02a60265319281c2bf385360102c69fdccf3676)
(cherry picked from commit f80e55dd28fa48e51b079e838dc513069534d835)
"
openstack%2Fnova~stable%2Frocky~I2c7df1bd51a7e674d75d520a38b89f971a0aa474,openstack/nova,stable/rocky,bug/1896463,I2c7df1bd51a7e674d75d520a38b89f971a0aa474,Set instance host and drop migration under lock,ABANDONED,2020-10-07 02:38:11.000000000,2022-11-11 18:32:49.000000000,,211,12,0,756421,793fb7f81eefd7a2a4e5880c5f03029fb8317e9d,8,6,1,5,24713,Wonil Choi,wonil22,"Set instance host and drop migration under lock

The _update_available_resources periodic makes resource allocation
adjustments while holding the COMPUTE_RESOURCE_SEMAPHORE based on the
list of instances assigned to the host of the resource tracker and
based on the migrations where the source or the target host is the host
of the resource tracker. So if the instance.host or the migration
context changes without holding the COMPUTE_RESOURCE_SEMAPHORE while
the _update_available_resources task is running then there will be data
inconsistency in the resource tracker.

This patch makes sure that during evacuation the instance.host and the
migration context is changed while holding the semaphore.

Change-Id: I2c7df1bd51a7e674d75d520a38b89f971a0aa474
Closes-Bug: #1896463
(cherry picked from commit 12446c168d44709df6c1735ed97ed1df2ff2e321)
"
openstack%2Fnova~stable%2Frocky~Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c,openstack/nova,stable/rocky,,Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c,libvirt: Log exception when unable to import rbd or rados,ABANDONED,2020-10-14 20:25:39.000000000,2022-11-11 18:32:44.000000000,,20,7,0,758244,f42d4c1afbf64cac295a36741d49013bd23e3205,7,5,1,1,10135,Lee Yarwood,lyarwood,"libvirt: Log exception when unable to import rbd or rados

This should help provide some context when the RbdDriver later raises a
RuntimeError if rbd or rados hasn't been imported correctly.

Change-Id: Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c
(cherry picked from commit aa16dd09ebeb21d0b81682b0b6026de0fe4f23b7)
(cherry picked from commit 961a355fb314975ee169cbe9ef88eb8537294253)
(cherry picked from commit 22c86f92ce7ef86675ee8265d43b21997e0df4bc)
(cherry picked from commit 9c58a663b7999260e1683bae6a828d118aa44fd5)
(cherry picked from commit cd7a1877a40b794e62086939d94b89bf928b61e9)
"
openstack%2Fnova~stable%2Frocky~I0c3b9cfe96bcc3d7b6106c3e972ee9e2f79e419b,openstack/nova,stable/rocky,bugfix_doc-stable/rocky,I0c3b9cfe96bcc3d7b6106c3e972ee9e2f79e419b,Remove deprecated nova-consoleauth reference from doc,ABANDONED,2018-10-30 01:29:25.000000000,2022-11-11 18:32:33.000000000,,4,5,1,614055,80dc320c67b13bf83b65d05f4f8ade6fa766d4dc,19,11,2,1,19779,Chason Chan,chenxing,"Remove deprecated nova-consoleauth reference from doc

Because nova-consoleauth had deprecated since version 18.0.0,
it is better not to give reference of this service in verify operation
documentation file.

Closes-Bug: #1798787
Change-Id: I0c3b9cfe96bcc3d7b6106c3e972ee9e2f79e419b
(cherry picked from commit bc479a992d32d485291e1ec5f37ccff0db39961a)
"
openstack%2Fnova~stable%2Frocky~I335113f0ec59516cb337d34b6fc9078ea202130f,openstack/nova,stable/rocky,bug/1775934,I335113f0ec59516cb337d34b6fc9078ea202130f,Sanity check instance mapping during scheduling,ABANDONED,2020-11-16 17:50:17.000000000,2022-11-11 18:32:26.000000000,,120,17,0,762899,9b507c21aeeab876cd6a222d68f981fc923e8504,9,6,1,2,4690,melanie witt,melwitt,"Sanity check instance mapping during scheduling

mnaser reported a weird case where an instance was found
in both cell0 (deleted there) and in cell1 (not deleted
there but in error state from a failed build). It's unclear
how this could happen besides some weird clustered rabbitmq
issue where maybe the schedule and build request to conductor
happens twice for the same instance and one picks a host and
tries to build and the other fails during scheduling and is
buried in cell0.

To avoid a split brain situation like this, we add a sanity
check in _bury_in_cell0 to make sure the instance mapping is
not pointing at a cell when we go to update it to cell0.
Similarly a check is added in the schedule_and_build_instances
flow (the code is moved to a private method to make it easier
to test).

Worst case is this is unnecessary but doesn't hurt anything,
best case is this helps avoid split brain clustered rabbit
issues.

Closes-Bug: #1775934

Change-Id: I335113f0ec59516cb337d34b6fc9078ea202130f
(cherry picked from commit 5b552518e1abdc63fb33c633661e30e4b2fe775e)
(cherry picked from commit efc35b1c5293c7c6c85f8cf9fd9d8cd8de71d1d5)
(cherry picked from commit c895d3e6bca562225d70e8f81255f38970f7fcda)
"
openstack%2Fnova~stable%2Frocky~I2c195df5fcf844c0587933b5b5995bdca1a3ebed,openstack/nova,stable/rocky,bug/1895220-stable/rocky,I2c195df5fcf844c0587933b5b5995bdca1a3ebed,Fix unplugging VIF when migrate/resize VM,ABANDONED,2020-11-24 01:37:50.000000000,2022-11-11 18:32:21.000000000,,83,10,1,763898,a4096daae8f6311495fa138aa2ccdc1d6c5e6622,10,2,2,3,28910,DatLQ,datlq,"Fix unplugging VIF when migrate/resize VM

When migrating/resizing VM to destination
host that has VIF type difference from source VIF
type, it fails due to exception in unplugging
VIF on source host after user perform a confirmation
action.

This change unplugs the vifs in resize_instance and
wraps the call to unplug in confirm with an try except
block. the call to unplug_vifs in confirm is not removed
to support rolling upgrades but a todo is added to remove
it after the Wallaby release.

Change-Id: I2c195df5fcf844c0587933b5b5995bdca1a3ebed
Closes-Bug: #1895220
(cherry picked from commit 66c7f00e1d9d7c0eebe46eb4b24b2b21f7413789)
"
openstack%2Fnova~stable%2Frocky~Ia2007bc63ef09931ea0197cef29d6a5614ed821a,openstack/nova,stable/rocky,bug/1905701,Ia2007bc63ef09931ea0197cef29d6a5614ed821a,libvirt: Skip encryption metadata lookups if secret already exists on host,ABANDONED,2020-12-07 09:40:30.000000000,2022-11-11 18:32:16.000000000,,42,1,0,765773,42dbcd370202dbbcd9c339f09f3323553a5295a1,6,1,1,3,10135,Lee Yarwood,lyarwood,"libvirt: Skip encryption metadata lookups if secret already exists on host

When connecting an encrypted volume to a host the _attach_encryptor
method will be called in order to either call a legacy os-brick
encryptor *or* configure a libvirt secret used by libvirt and QEMU to
natively decrypt LUKSv1 encrypted volumes. To create this libvirt secret
the configured key manager will be queried to provide and then decode
the associated secret before this is stashed within libvirt.

This change simply skips the above when an existing libvirt secret
associated with the target volume is found on the host already.

While this obviously optimises basic instance lifecycle flows such as a
simple power off and on it additionally resolves a more convoluted use
case when the ``[DEFAULT]/resume_guests_state_on_host_boot``
configurable is enabled. In this case the compute service has no request
context with which to query the key manager when attempting to restart
instances with encrypted volumes attached. As a result any attempt by
the compute service to restart an instance with an attached encrypted
volume would previously fail.

Closes-Bug: #1905701
Change-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a
(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)
(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)
(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)
(cherry picked from commit d47679779189e43941881c6212d6db2052a19867)
(cherry picked from commit dfca56f64cd7884b6da98db43348303d220cf25e)
"
openstack%2Fnova~stable%2Frocky~Ic5ce2580e7638a47f1ffddb4edbb503bf490504c,openstack/nova,stable/rocky,bug/1896621,Ic5ce2580e7638a47f1ffddb4edbb503bf490504c,compute: Lock by instance.uuid lock during swap_volume,ABANDONED,2020-10-19 09:06:59.000000000,2022-11-11 18:32:09.000000000,,26,2,0,758735,8504c900edd0808770d9c4014a58a2b3b29ef6c3,15,3,2,1,10135,Lee Yarwood,lyarwood,"compute: Lock by instance.uuid lock during swap_volume

The libvirt driver is currently the only virt driver implementing swap
volume within Nova. While libvirt itself does support moving between
multiple volumes attached to the same instance at the same time the
current logic within the libvirt driver makes a call to
virDomainGetXMLDesc that fails if there are active block jobs against
any disk attached to the domain.

This change simply uses an instance.uuid based lock in the compute layer
to serialise requests to swap_volume to avoid this from being possible.

Closes-Bug: #1896621
Change-Id: Ic5ce2580e7638a47f1ffddb4edbb503bf490504c
(cherry picked from commit 6cf449bdd0d4beb95cf12311e7d2f8669e625fac)
(cherry picked from commit eebf94b6540fcd16826067fac544b5a3238842a3)
(cherry picked from commit f7ba1aab5f6f76ba88d6cc63cde2ec246ee61ec5)
(cherry picked from commit 6540161933ec007d3de01dfc420595664781aa37)
(cherry picked from commit 9be0c52439f50ed0fbb9657577c227ce9bb7fc6d)
"
openstack%2Fnova~stable%2Frocky~I58dca95251b607eaff602783fee2fc38e2421944,openstack/nova,stable/rocky,bug/1885528,I58dca95251b607eaff602783fee2fc38e2421944,Use absolute path during qemu img rebase,ABANDONED,2021-03-16 11:12:32.000000000,2022-11-11 18:32:04.000000000,,33,6,1,780788,8fc3b17b124703e32d25270e3ff90974591d658f,4,2,1,2,10135,Lee Yarwood,lyarwood,"Use absolute path during qemu img rebase

During an assisted volume snapshot delete request from Cinder nova
removes the snapshot from the backing file chain. During that nova
checks the existence of such file. However in some cases (see the bug
report) the path is relative and therefore os.path.exists fails.

This patch makes sure that nova uses the volume absolute path to make
the backing file path absolute as well.

Closes-Bug #1885528

NOTE(lyarwood): Conflict caused by I897999e8a4601694213f068367eae9608cdc7bbb
not being present in stable/rocky.

Conflicts:
  nova/tests/unit/virt/libvirt/test_driver.py

Change-Id: I58dca95251b607eaff602783fee2fc38e2421944
(cherry picked from commit b9333125790682f9d60bc74fdbb12a098565e7c2)
(cherry picked from commit 831abc9f83a2d3f517030f881e7da724417fea93)
(cherry picked from commit c2044d4bd0919860aa2d49687ba9c6ef6f7d37e8)
(cherry picked from commit 351072eb0950ea4a4e573d5525ed4c5dc7d6fa30)
(cherry picked from commit 80c64b455cbb646b920755eb35fa2c5fa5df81b2)
"
openstack%2Fnova~stable%2Frocky~I17357d85f845d4160cb7c7784772530a1e92af76,openstack/nova,stable/rocky,bug/1885528,I17357d85f845d4160cb7c7784772530a1e92af76,Make _rebase_with_qemu_img() generic,ABANDONED,2021-03-16 11:12:32.000000000,2022-11-11 18:31:59.000000000,,37,23,1,780787,8a065c15a228d41e5c99a449cf53192e92a96c2d,4,2,1,2,10135,Lee Yarwood,lyarwood,"Make _rebase_with_qemu_img() generic

Move volume_delete related logic away from this method, in order to make
it generic and usable elsewhere.

NOTE(lyarwood): Conflicts due to I9bcc66b0dc203e08222276bced77d4409c3adcea
and I897999e8a4601694213f068367eae9608cdc7bbb not being present in
stable/rocky.

Conflicts:
  nova/virt/libvirt/driver.py

Change-Id: I17357d85f845d4160cb7c7784772530a1e92af76
Related-Bug: #1732428
(cherry picked from commit ce2203456660083119cdbb7e73c1ad15e6e0a074)
(cherry picked from commit 2e89699c3301bf801784c637b6919752fcd3503f)
(cherry picked from commit ffcb1705cbb6ddaa3fa4d8881f416f25b763b5e7)
(cherry picked from commit 43cea4a744930daf3459a3bad294fe60ae135e37)
"
openstack%2Fnova~stable%2Frocky~I2a1a5f804ed878d80771b7bb090248da3a6d1331,openstack/nova,stable/rocky,,I2a1a5f804ed878d80771b7bb090248da3a6d1331,Documentation Bug with PLacement API port,ABANDONED,2020-05-27 10:17:35.000000000,2022-11-11 18:31:48.000000000,,6,6,0,731141,23272f8e1b52d6acb1f3b5e4aabf9c9e1f00b9ec,8,4,1,1,31916,vinay harsha mitta,vinay_m,"Documentation Bug with PLacement API port

In ""Install and configure Controller node in openSUSE and SUSE Linux
Enterprise."" Document ,the default Placement API port for controller
node was mentioned as ""8780"" ,but in ubuntu and RedHat related Docs
contain ""8778"" as default port. So modified from ""8780"" to ""8778"" to
maintain a consistency.

Change-Id: I2a1a5f804ed878d80771b7bb090248da3a6d1331
Closes-Bug: #1759839
"
openstack%2Fnova~stable%2Frocky~I6a4252b0c12c41c233299f30ce8294fef21c7b40,openstack/nova,stable/rocky,bug/1788014,I6a4252b0c12c41c233299f30ce8294fef21c7b40,libvirt: check job status for VIR_DOMAIN_EVENT_SUSPENDED_MIGRATED event,ABANDONED,2020-03-04 13:39:38.000000000,2022-11-11 18:31:44.000000000,,90,32,3,711233,1b66fc9c03dbfeeb1ef3dd42b67297f995d86823,40,12,4,5,17685,Elod Illes,elod.illes,"libvirt: check job status for VIR_DOMAIN_EVENT_SUSPENDED_MIGRATED event

Change Ic5cab99944df9e501ba2032eb96911c36304494d added handling for
the VIR_DOMAIN_EVENT_SUSPENDED_MIGRATED event during live migration
but failed to distinguish between the live migration actually succeeding
or failing before queueing the EVENT_LIFECYCLE_MIGRATION_COMPLETED
up into the ComputeManager.handle_lifecycle_event method.

As a result, failed live migrations will inadvertantly trigger
activation of the port bindings on the destination host, which
deactivates the source host port bindings, and then
_rollback_live_migration will delete those activated dest host port
bindings and leave the source host port bindings deactivated.

In this change, if we get the VIR_DOMAIN_EVENT_SUSPENDED_MIGRATED
event, we attempt to get the job status to determine the course to
take and only queue the EVENT_LIFECYCLE_MIGRATION_COMPLETED event,
which triggers the dest host port activation, if we can determine
the live migration job completed successfully. Otherwise we simply
report the guest as paused, the same as before Ic5cab9994.

Conflicts:
    nova/tests/unit/virt/libvirt/fakelibvirt.py
    nova/tests/unit/virt/libvirt/test_migration.py
    nova/virt/libvirt/host.py

NOTE(elod.illes): The conflict of test_migration.py is due to not
having patch Ife89a705892ad96de6d5f8e68b6e4b99063a7512 in stable/rocky.
The conflicts of fakelibvirt.py and host.py are due to patch
I0981c0349f163120939c3ddb9aeac82a01ceacd0 is not present in
stable/rocky and we cannot backport either, because the minimum libvirt
version is still 1.3.1 and that patch would require 3.0.0.

Change-Id: I6a4252b0c12c41c233299f30ce8294fef21c7b40
Closes-Bug: #1788014
(cherry picked from commit aa87b9c288d316b85079e681e0df24354ec1912c)
(cherry picked from commit 27bfd0bc6233c25114504bb363402807752a7ece)
(cherry picked from commit 6310e693039cc3b6d2808915a3b4daf7bbffb9a8)
"
openstack%2Fnova~stable%2Frocky~Ie36401c782f023d1d5f2623732619105dc2cfa24,openstack/nova,stable/rocky,bug/1927677-stable/rocky,Ie36401c782f023d1d5f2623732619105dc2cfa24,Reject open redirection in the console proxy,ABANDONED,2021-08-02 13:39:06.000000000,2022-11-11 18:31:40.000000000,,74,0,0,803182,93f271338d301af53f873c207e67b2c4239b3bc6,4,2,1,3,20312,Jacek Tomasiak,skazi,"Reject open redirection in the console proxy

NOTE(melwitt): This is the combination of two commits, the bug fix and
a followup change to the unit test to enable it also run on
Python < 3.6.

Our console proxies (novnc, serial, spice) run in a websockify server
whose request handler inherits from the python standard
SimpleHTTPRequestHandler. There is a known issue [1] in the
SimpleHTTPRequestHandler which allows open redirects by way of URLs
in the following format:

  http://vncproxy.my.domain.com//example.com/%2F..

which if visited, will redirect a user to example.com.

We can intercept a request and reject requests that pass a redirection
URL beginning with ""//"" by implementing the
SimpleHTTPRequestHandler.send_head() method containing the
vulnerability to reject such requests with a 400 Bad Request.

This code is copied from a patch suggested in one of the issue comments
[2].

Closes-Bug: #1927677

[1] https://bugs.python.org/issue32084
[2] https://bugs.python.org/issue32084#msg306545

Reduce mocking in test_reject_open_redirect for compat

This is a followup for change Ie36401c782f023d1d5f2623732619105dc2cfa24
to reduce mocking in the unit test coverage for it.

While backporting the bug fix, it was found to be incompatible with
earlier versions of Python < 3.6 due to a difference in internal
implementation [1].

This reduces the mocking in the unit test to be more agnostic to the
internals of the StreamRequestHandler (ancestor of
SimpleHTTPRequestHandler) and work across Python versions >= 2.7.

Related-Bug: #1927677

[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286

Change-Id: I546d376869a992601b443fb95acf1034da2a8f36
(cherry picked from commit 214cabe6848a1fdb4f5941d994c6cc11107fc4af)
(cherry picked from commit 9c2f29783734cb5f9cb05a08d328c10e1d16c4f1)
(cherry picked from commit 94e265f3ca615aa18de0081a76975019997b8709)
(cherry picked from commit d43b88a33407b1253e7bce70f720a44f7688141f)

Change-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24
(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)
(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)
(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)
(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)
(cherry picked from commit 5cb4d618ca67e622bbae24c768f9bdf408570986)
"
openstack%2Fnova~stable%2Frocky~I83817f7301680801beaee375825f02eda526eda1,openstack/nova,stable/rocky,bug/1865040,I83817f7301680801beaee375825f02eda526eda1,Validate id as integer for os-aggregates,ABANDONED,2020-11-27 12:27:46.000000000,2022-11-11 18:31:35.000000000,,85,21,0,764309,ad8aca7965dd7cc95e151056a74b63deecbe90a1,12,4,1,2,15334,Stephen Finucane,sfinucan,"Validate id as integer for os-aggregates

According to the api-ref, the id passed to calls in os-aggregates is
supposed to be an integer. No function validated this, so any value
passed to these functions would directly reach the DB. While this is
fine for SQLite, making a query with a string for an integer column on
other databases like PostgreSQL results in a DBError exception and thus
a HTTP 500 instead of 400 or 404.

This commit adds validation for the id parameter the same way it's
already done for other endpoints.

Change-Id: I83817f7301680801beaee375825f02eda526eda1
Closes-Bug: 1865040
(cherry picked from commit 2e70a1717f25652912886cbefa3f40e6df908c00)
(cherry picked from commit 4653245ddcf989ebac4b964a41d881d78cf9ae2c)
(cherry picked from commit 9448291d8f3ff6bef85d3bca4aa21c1e6036b3f1)
"
openstack%2Fnova~stable%2Frocky~I332d4f33ea6b9506cc24ac12e5c0994f208a3107,openstack/nova,stable/rocky,backport_rocky_1937375,I332d4f33ea6b9506cc24ac12e5c0994f208a3107,Add functional test for bug 1937375,ABANDONED,2021-08-06 14:29:55.000000000,2022-11-11 18:31:32.000000000,,115,0,0,803764,9a123489f412e0e49db7cf5b36e82bbcf930ff15,3,2,1,1,29074,Felix Huettner,felix.huettner,"Add functional test for bug 1937375

- InstanceHelperMixin pulled in for access to a better
  _build_minimal_create_server_request method
- api_major_version defined in test class
- Fake image service stubbed out directing in test class
- A simple _create_server method is in-lined within the class

Related-Bug: #1937375
Change-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107
(cherry picked from commit 2ffd9738602531e93495a1feca76bbb687c3e72c)
(cherry picked from commit 7a9e3dcd172f187cf93f406b09f49d2ded9bd90d)
(cherry picked from commit 68b2d5f797896768229db1cf28feb22a984daf81)
(cherry picked from commit 2a67e8794f916af07a05c550dca01d7fca625caf)
(cherry picked from commit 051a14674195e5d37b931d3b59366656801bc8a1)
(cherry picked from commit 975806f3995e7b09c477859aadd8a5771acd2771)
"
openstack%2Fnova~stable%2Frocky~Ie62d3566230aa3e2786d129adbb2e3570b06e4c6,openstack/nova,stable/rocky,bug/1899541,Ie62d3566230aa3e2786d129adbb2e3570b06e4c6,Prevent archiving of pci_devices records because of 'instance_uuid',ABANDONED,2020-11-02 18:16:55.000000000,2022-11-11 18:31:22.000000000,,21,2,0,760985,661179de486e710f260e448b005e3383038337b8,11,4,2,2,4690,melanie witt,melwitt,"Prevent archiving of pci_devices records because of 'instance_uuid'

Currently in the archive_deleted_rows code, we will attempt to clean up
""residue"" of deleted instance records by assuming any table with a
'instance_uuid' column represents data tied to an instance's lifecycle
and delete such records.

This behavior poses a problem in the case where an instance has a PCI
device allocated and someone deletes the instance. The 'instance_uuid'
column in the pci_devices table is used to track the allocation
association of a PCI with an instance. There is a small time window
during which the instance record has been deleted but the PCI device
has not yet been freed from a database record perspective as PCI
devices are freed during the _complete_deletion method in the compute
manager as part of the resource tracker update call.

Records in the pci_devices table are anyway not related to the
lifecycle of instances so they should not be considered residue to
clean up if an instance is deleted. This adds a condition to avoid
archiving pci_devices on the basis of an instance association.

Closes-Bug: #1899541

Change-Id: Ie62d3566230aa3e2786d129adbb2e3570b06e4c6
(cherry picked from commit 1c256cf774693e2395ae8fe4a7a2f416a7aeb03a)
(cherry picked from commit 09784db62fcd01124a101c4c69cab6e71e1ac781)
(cherry picked from commit 79df36fecf8c8be5ae9d59397882ac844852043e)
(cherry picked from commit e3bb6119cf2d0a503768979312aea4d10cf85cda)
(cherry picked from commit da91b19d8be3b9cad8f713a3218a08e2d50238c8)
"
openstack%2Fnova~stable%2Frocky~Ic9133f6bc14d4fe766d37a438bf52c33e89da768,openstack/nova,stable/rocky,bug/1613770,Ic9133f6bc14d4fe766d37a438bf52c33e89da768,Improve error log when snapshot fails,ABANDONED,2021-03-25 12:01:27.000000000,2022-11-11 18:31:18.000000000,,12,0,0,782983,57d340f1a336796c30677a723beccc713ae81dd0,18,6,1,3,10135,Lee Yarwood,lyarwood,"Improve error log when snapshot fails

If snapshot creation via glance fails due to lack of space or over
quota, we want to have a clearer error message.

Change-Id: Ic9133f6bc14d4fe766d37a438bf52c33e89da768
Closes-Bug: #1613770
(cherry picked from commit 024bf10d8aec5e58111793a9652b16682eb61b7c)
(cherry picked from commit 9e9c022bde3a3ffdf0dd87e21bf9afde0dbc1e74)
(cherry picked from commit 446c9c56109329208193e3c9b106a0a2eb3cd9ce)
"
openstack%2Fnova~stable%2Frocky~Ie904d1513b5cf76d6d5f6877545e8eb378dd5499,openstack/nova,stable/rocky,bug/1946729,Ie904d1513b5cf76d6d5f6877545e8eb378dd5499,Add a WA flag waiting for vif-plugged event during reboot,ABANDONED,2021-11-19 16:56:33.000000000,2022-11-11 18:31:14.000000000,,147,9,0,818604,75e48ce99938c9803efb15ab639b1adee9e3ebb3,5,1,2,5,9708,Balazs Gibizer,gibi,"Add a WA flag waiting for vif-plugged event during reboot

The libvirt driver power on and hard reboot destroys the domain first
and unplugs the vifs then recreate the domain and replug the vifs.
However nova does not wait for the network-vif-plugged event before
unpause the domain. This can cause that the domain starts running and
requesting IP via DHCP before the networking backend finished plugging
the vifs.

So this patch adds a workaround config option to nova to wait for
network-vif-plugged events during hard reboot the same way as nova waits
for this event during new instance spawn.

This logic cannot be enabled unconditionally as not all neutron
networking backend sending plug time events to wait for. Also the logic
needs to be vnic_type dependent as ml2/ovs and the in tree sriov backend
often deployed together on the same compute. While ml2/ovs sends plug
time event the sriov backend does not send it reliably. So the
configuration is not just a boolean flag but a list of vnic_types
instead. This way the waiting for the plug time event for a vif that is
handled by ml2/ovs is possible while the instance has other vifs handled
by the sriov backend where no event can be expected.

Conflicts:
      nova/conf/workarounds.py due to
      If874f018ea996587e178219569c2903c2ee923cf not in stable/rocky

The stable/rocky specific changes:

* The smart-nic vnic_type is removed from the allowed values as that
  type is added in stein

Change-Id: Ie904d1513b5cf76d6d5f6877545e8eb378dd5499
Closes-Bug: #1946729
(cherry picked from commit 68c970ea9915a95f9828239006559b84e4ba2581)
(cherry picked from commit 0c41bfb8c5c60f1cc930ae432e6be460ee2e97ac)
(cherry picked from commit 89c4ff5f7b45f1a5bed8b6b9b4586fceaa391bfb)
(cherry picked from commit c531fdcc192afb5af628ac567cb0ff8aa3eab052)
(cherry picked from commit 35e071470e2c5597444a7b85211a01e7fbc7c68b)
(cherry picked from commit 870d8148ef1fc0c72554f24a20aec091e69a5656)
(cherry picked from commit 3afb13a205d2424022beb6a8e538da383abdd06f)
"
openstack%2Fnova~stable%2Frocky~I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527,openstack/nova,stable/rocky,,I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527,Gracefull recovery when attaching volume fails,ABANDONED,2022-02-18 08:51:39.000000000,2022-11-11 18:31:06.000000000,,62,3,2,829860,b6933e54394cb47476f3c40227ba9367116cb374,10,1,2,3,29074,Felix Huettner,felix.huettner,"Gracefull recovery when attaching volume fails

When trying to attach a volume to an already running instance the nova-api
requests the nova-compute service to create a BlockDeviceMapping. If the
nova-api does not receive a response within `rpc_response_timeout` it will
treat the request as failed and raise an exception.

There are multiple cases where nova-compute actually already processed the
request and just the reply did not reach the nova-api in time (see bug report).
After the failed request the database will contain a BlockDeviceMapping entry
for the volume + instance combination that will never be cleaned up again.
This entry also causes the nova-api to reject all future attachments of this
volume to this instance (as it assumes it is already attached).

To work around this we check if a BlockDeviceMapping has already been created
when we see a messaging timeout. If this is the case we can safely delete it
as the compute node has already finished processing and we will no longer pick
it up.
This allows users to try the request again.

A previous fix was abandoned but without a clear reason ([1]).

[1]: https://review.opendev.org/c/openstack/nova/+/731804

Closes-Bug: 1960401
Change-Id: I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527
(cherry picked from commit 9eb116b99ce32bc69c4abf8ec3b0179ef89a8860)
"
openstack%2Fnova~stable%2Frocky~I92f35514efddcb071c7094370b79d91d34c5bc72,openstack/nova,stable/rocky,backport_rocky_1937375,I92f35514efddcb071c7094370b79d91d34c5bc72,compute: Avoid duplicate BDMs during reserve_block_device_name,ABANDONED,2021-08-06 14:29:55.000000000,2022-11-11 18:31:01.000000000,,41,6,0,803765,273c2e8358a8c36d44c9592326a2f833082a9196,4,1,1,3,29074,Felix Huettner,felix.huettner,"compute: Avoid duplicate BDMs during reserve_block_device_name

When attaching a volume to a running instance the nova-api validates
that the volume is not already attached to the instance. However
nova-compute is responsible for actually creating the BDM entry in the
database. If sending attach requests fast enough it can be possible
that the same ""attach_volume"" request can be sent to nova-compute for
the same volume/instance combination.

To work around this we add a check in nova-compute to validate that
the volume has not been attached in the mean time.

Closes-Bug: #1937375
Change-Id: I92f35514efddcb071c7094370b79d91d34c5bc72
(cherry picked from commit 2209b0007fe85d7c5439e0bfdfe2120c63898fa2)
(cherry picked from commit 2bee83b8a980b2bd9e276b75aa74253f8c0d0a70)
(cherry picked from commit 303c7a7c35044240f1546a5f960c1a4e6482f385)
(cherry picked from commit deefea82efd87b001acce7cf8d0fc2915062228b)
(cherry picked from commit 6ef97792387bf010b92da1e06beefc04d22ff5ff)
(cherry picked from commit fc33fd8b7e935d8e6a690c18a0907875ac181dcf)
"
openstack%2Fnova~stable%2Frocky~Id3e4452883f6a3cf44ff58b39ded82e882e28c23,openstack/nova,stable/rocky,cherry-pick-in-gate-queue,Id3e4452883f6a3cf44ff58b39ded82e882e28c23,"Move 'check-cherry-picks' test to gate, n-v check",ABANDONED,2021-08-16 09:19:21.000000000,2022-11-11 18:30:54.000000000,,23,1,2,804654,6ce541d821633263c3f497397d9515bb2f471628,11,2,2,2,17685,Elod Illes,elod.illes,"Move 'check-cherry-picks' test to gate, n-v check

This currently runs in the 'check' pipeline, as part of the pep8 job,
which causes otherwise perfectly valid backports to report as failing
CI. There's no reason a stable core shouldn't be encouraged to review
these patches: we simply want to prevent them *merging* before their
parent(s). Resolve this conflict by moving the check to separate voting
job in the 'gate' pipeline as well as a non-voting job in the 'check'
pipeline to catch more obvious issues.

Conflicts:
    .zuul.yaml

NOTE(elod.illes): conflict is due to multiple patches, for example
- Iae3fcac484f060e8dbeef299d594b8ade8ab3b70 that set lower-constraints
  job as non-voting, then I514f6b337ffefef90a0ce9ab0b4afd083caa277e
  that deletes the lower-constraints job
- I1832da2190be5ef2b04953938860a56a43e8cddf that was added in stein and
  is not going to be backported to rocky

Change-Id: Id3e4452883f6a3cf44ff58b39ded82e882e28c23
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
(cherry picked from commit 98b01c9a59df4912f5a162c2c52d1f00c84d24c2)
(cherry picked from commit fef0305abefbf165fecb883f03bce97f525a790a)
(cherry picked from commit b7677ae08ae151858ecb0e67039e54bb3df89700)
(cherry picked from commit 91314f7fbba312d4438fa446804f692d316512a8)
(cherry picked from commit de94f429474713a68d5efc53677bc468f02dc112)
(cherry picked from commit 1960b50f0d9646e12a8e8849579fab8c047885a8)
"
openstack%2Fnova~stable%2Frocky~I6f4ed6479cacc39ca803e9d96eb402e41bd291d7,openstack/nova,stable/rocky,,I6f4ed6479cacc39ca803e9d96eb402e41bd291d7,CI: Ironic is EOL'ing rocky; remove jobs,ABANDONED,2022-10-10 22:20:39.000000000,2022-11-11 18:30:48.000000000,,0,20,0,860879,85711c7a9ef6f190cea08c201d6047ee3759cb85,4,1,1,1,10342,Jay Faulkner,JayF,"CI: Ironic is EOL'ing rocky; remove jobs

Ironic is EOLing the rocky release. Removes Ironic jobs from nova
for rocky since we are retiring the branch.

Change-Id: I6f4ed6479cacc39ca803e9d96eb402e41bd291d7
"
openstack%2Fos-vif~stable%2Fqueens~I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76,openstack/os-vif,stable/queens,rep-fix-queens-backport,I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76,Refactor code of linux_net to more cleaner and increase performace,ABANDONED,2020-12-08 11:17:51.000000000,2022-11-11 18:29:16.000000000,,139,188,1,765941,2c80fccf3fb7e34039b9e487363853b5df06e515,15,5,4,2,32296,Mamduh,Mamduh,"Refactor code of linux_net to more cleaner and increase performace

The patch adds new functions '_get_phys_port_name' for reading physical
port name of the SR-IOV port and '_get_phys_switch_id' for reading
physical port switch ID of the SR-IOV port, in addition to refactoring
'get_representor_port' to use the new functions and decrease calls for
""_get_pf_func"" and netdevs associated with the PF will now be processed
in the loop, however it will not be matching 'phys_port_name' which
ensures the correct behaviour.

In addition to updating the unit test for linux_net and remove not
needed mocks

Related-Bug: #1892132
Change-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76
(cherry picked from commit 246b7178414a23e99b3329c5383c4df244724384)
"
openstack%2Fos-vif~stable%2Fqueens~I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7,openstack/os-vif,stable/queens,rep-fix-queens-backport,I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7,Fix - os-vif fails to get the correct UpLink Representor,ABANDONED,2020-12-08 11:55:42.000000000,2022-11-11 18:29:09.000000000,,75,9,0,765983,add5a0fc5ad7668721809ba3ed98b7159ebedb9a,11,4,3,3,32296,Mamduh,Mamduh,"Fix - os-vif fails to get the correct UpLink Representor

Till kernel 5.7 PF and VF representors are exposed as virtual device.
They are not linked to its parent PCI device like how uplink
representor is linked.

Starting from kernel 5.8 due to new change [1] the PF and VF representors are
linked to their parent PCI device, and so ""get_ifname_by_pci_address"" fails
to get the correct UpLink Representor.

This patch modifys the behviour of ""get_ifname_by_pci_address"" to
check the physical port name of the netdev in
vf_pci_addr_path/physfn/net to match the formart for the uplink ""p\d+"".

[1] https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=123f0f53dd64b67e34142485fe866a8a581f12f1

Closes-Bug: #1892132
Change-Id: I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7
(cherry picked from commit 32d87ffdfb97aa7fbac3894d292762f6c70d54b5)
"
openstack%2Fnova~stable%2Fqueens~I6b33fcbc4d616dcc9b126ed744846acf2b56c5af,openstack/nova,stable/queens,bug/1751923,I6b33fcbc4d616dcc9b126ed744846acf2b56c5af,Force refresh instance info_cache during heal,ABANDONED,2019-08-29 14:37:02.000000000,2022-11-11 18:24:48.000000000,,203,188,0,679274,56d90ee3e6e93b5361c38959761c0f29ffe35924,7,5,1,5,6737,Edward Hope-Morley,hopem,"Force refresh instance info_cache during heal

If the instance info_cache is corrupted somehow, like during
a host reboot and the ports aren't wired up properly or
a mistaken policy change in neutron results in nova resetting
the info_cache to an empty list, the _heal_instance_info_cache
is meant to fix it (once the current state of the ports for
the instance in neutron is corrected). However, the task is
currently only refreshing the cache *based* on the current contents
of the cache, which defeats the purpose of neutron being the source
of truth for the ports attached to the instance.

This change makes the _heal_instance_info_cache periodic task
pass a ""force_refresh"" kwarg, which defaults to False for backward
compatibility with other methods that refresh the cache after
operations like attach/detach interface, and if True will make
nova get the current state of the ports for the instance from neutron
and fully rebuild the info_cache.

To not lose port order in info_cache this change takes original order
from nova historical data that are stored as VirtualInterfaceList
objects. For ports that are not registered as VirtualInterfaces
objects it will add them at the end of port_order list. Due to this
for instances older than Newton another patch was introduced to fill
missing VirtualInterface objects in the DB [1].

Long-term we should be able to refactor some of the older refresh
code which leverages the cache to instead use the refresh_vif_id
kwarg so that we do targeted cache updates when we do things like
attach and detach ports, but that's a change for another day.

[1] https://review.openstack.org/#/c/614167

Also contains partial cherry-pick of commit 4c93003 - which deletes
support for the deprectated virtual-interfaces api call that is
deprecated in queens - and removes unit test removed as part of that
commit which conflicts with this patch.

Co-Authored-By: Maciej Jozefczyk <maciej.jozefczyk@corp.ovh.com>
Closes-Bug: #1751923
(cherry picked from commit ba44c155ce1dcefede9741722a0525820d6da2b8)
(cherry picked from commit ca5867d5644fdf1c74cc786ee71876ceb8c419bd)

Change-Id: I6b33fcbc4d616dcc9b126ed744846acf2b56c5af
"
openstack%2Fnova~stable%2Fqueens~Ic2b82146d28be64b363b0b8e2e8d180b515bc0a0,openstack/nova,stable/queens,bug/1780799,Ic2b82146d28be64b363b0b8e2e8d180b515bc0a0,delete consumers which no longer have allocations,ABANDONED,2019-12-05 01:51:03.000000000,2022-11-11 18:24:43.000000000,,151,3,0,697398,06d36fb35190366404fd2def4b9791388e158a1a,8,8,1,2,4690,melanie witt,melwitt,"delete consumers which no longer have allocations

We made the decision [1] to delete consumer records when those consumers
no longer had any allocations referring to them (as opposed to keeping
those consumer records around and incrementing the consumer generation
for them).

This patch adds a small check within the larger
AllocationList.create_all() and AllocationList.delete_all() DB
transactions that deletes consumer records when no allocation records
remain that reference that consumer. This patch does not, however,
attempt to clean up any ""orphaned"" consumer records that may have been
created in previous calls to PUT|POST /allocations that removed the last
remaining allocations for a consumer.

[1] https://goo.gl/DpAGbW

Closes-bug: #1780799

Conflicts:
  nova/api/openstack/placement/objects/consumer.py
  nova/api/openstack/placement/objects/resource_provider.py
  nova/tests/functional/api/openstack/placement/db/test_consumer.py

NOTE(melwitt): This is a heavily hand-modified backport as the
consumer.py and test_consumer.py files do not exist in Queens. Changes
are applied to resource_provider.py and test_resource_provider.py
instead as these are the appropriate locations for this functionality in
Queens. Other than differences to use the appropriate Queens methods
where the Rocky versions did not exist, the main difference from the
original change is that the seen_consumers logic needed to be changed to
add a seen_consumer before the 'if alloc.used == 0' loop continuation in
order for detection and deletion of consumers without allocations to
work.

Change-Id: Ic2b82146d28be64b363b0b8e2e8d180b515bc0a0
(cherry picked from commit f0f680b492c82f4f5c4163b0534dacc315b6dce5)
"
openstack%2Fnova~stable%2Fqueens~Id40440cdf31b3cc32a899bfd694b537a70703e9c,openstack/nova,stable/queens,bug/1734204,Id40440cdf31b3cc32a899bfd694b537a70703e9c,hardware: fix memory check usage for small/large pages,ABANDONED,2020-03-31 14:54:20.000000000,2022-11-11 18:24:37.000000000,,223,100,2,716328,2e5753eba530c1fc48477dee402553743537d4f6,17,10,2,3,11805,Corey Bryant,coreycb,"hardware: fix memory check usage for small/large pages

When huge pages are requested, we need to examine the host cell's
specific huge page amounts, not the amount of physical memory
associated with the host NUMA node.

Also when no pagesize is requested we should consider to compute
memory usage based on small pages since the amount of physical memory
available may also include some large pages.

The unit-tests has been updated to pass correct NUMACell mempages
information since the check is not done based on the pages available
on host. Also that the test 'test_host_usage_contiguous' to reflect to
correct update of pages availalbes on hist based on instance usage.

Closes-bug: #1734204
Signed-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>
(cherry picked from commit 8241deee197206d5458a61884ce08e1c2c2603d9)
(cherry picked from commit 5e69018038176a60abbb3c879ae7ac7f12b8341a)

Conflicts:
 nova/tests/unit/compute/test_resource_tracker.py
 nova/tests/unit/virt/test_hardware.py

Change-Id: Id40440cdf31b3cc32a899bfd694b537a70703e9c
"
openstack%2Fnova~stable%2Fqueens~I0322d872bdff68936033a6f5a54e8296a6fb3434,openstack/nova,stable/queens,,I0322d872bdff68936033a6f5a54e8296a6fb3434,Block rebuild when NUMA topology changed,ABANDONED,2020-01-17 17:48:56.000000000,2022-11-11 18:24:32.000000000,,360,19,2,703140,d76b3390488a77ec875dab6a4c2d79fda03c5496,13,6,2,7,11604,sean mooney,sean-k-mooney,"Block rebuild when NUMA topology changed

If the image change during a rebuild it's possible for the request
NUMA topology to change. As a rebuild uses a noop claim in the
resource tracker the NUMA topology will not be updated as part of
a rebuild.

If the NUMA constraints do not change, a rebuild will continue as normal.
If the new constraints conflict with the existing NUMA constraints of the
instance the rebuild will be rejected without altering the status of the
instance.

This change introduces an API check to block rebuild when the NUMA
requirements for the new image do not match the existing NUMA constraints.
This is in line with the previous check introduced to prevent the rebuild of
volume-backed instances which similarly are not supported.

This change adds functional tests to assert the expected behaviour of
rebuilding NUMA instances with new images. This change also asserts that
in place rebuilds of numa instances is currently not supported.

Conflicts:
    nova/api/openstack/compute/servers.py
    nova/tests/functional/integrated_helpers.py
    nova/tests/functional/libvirt/test_numa_servers.py
    nova/tests/unit/compute/test_compute_api.py

NOTE(sean-k-mooney):
nova/tests/functional/libvirt/test_numa_servers.py
was modifed to mock the libvirt connection in the
NUMAServersRebuildTests setUp function and to do
a partial backport of I621f5111d1cccf3dc2c2ea6767ce879bc286e42b
to provide the NUMAServersTestBase class.

Closes-Bug: #1763766
Partial-implements: blueprint inplace-rebuild-of-numa-instances
Change-Id: I0322d872bdff68936033a6f5a54e8296a6fb3434
(cherry picked from commit 6f5358ac1992b17b7f3f99d9a32290e0d4740dae)
(cherry picked from commit 745de99063bf77704a7f0610fe9e3647257eaa50)
(cherry picked from commit 061e25015a93c345e39b7b340ad166c378d072ee)
(cherry picked from commit 62dc74b61cf87d3ed9d5e93d1c2c5182f2ae7d50)
"
openstack%2Fnova~stable%2Fqueens~I8975e524cd5a9c7dfb065bb2dc8ceb03f1b89e7b,openstack/nova,stable/queens,,I8975e524cd5a9c7dfb065bb2dc8ceb03f1b89e7b,FUP for in-place numa rebuild,ABANDONED,2020-01-17 17:48:56.000000000,2022-11-11 18:24:27.000000000,,40,33,0,703142,db625745edb3c490984dc6fed8471c0e5f81cbab,11,5,2,6,11604,sean mooney,sean-k-mooney,"FUP for in-place numa rebuild

This patch addresses a number of typos and minor
issues raised during review of [1][2]. A summary
of the changes are corrections to typos in comments,
a correction to the exception message, an update to
the release note and the addition of debug logging.

[1] I0322d872bdff68936033a6f5a54e8296a6fb3434
[2] I48bccc4b9adcac3c7a3e42769c11fdeb8f6fd132

Related-Bug: #1804502
Related-Bug: #1763766

Conflicts:
    nova/tests/functional/libvirt/test_numa_servers.py
NOTE(sean-k-mooney): conflict was due to the use of
NUMAHostInfo instead of HostInfo.

Change-Id: I8975e524cd5a9c7dfb065bb2dc8ceb03f1b89e7b
(cherry picked from commit f6060ab6b54261ff50b8068732f6e509619d713e)
(cherry picked from commit 48bb9a9663374936221144bb6a24688128a51146)
(cherry picked from commit 1d6018b880158fbaf34c17c6044583d1f2ca2aa3)
(cherry picked from commit 1919b9648ac18e2330f3e5f22aa58f271abea545)
"
openstack%2Fnova~stable%2Fqueens~Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c,openstack/nova,stable/queens,,Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c,libvirt: Log exception when unable to import rbd or rados,ABANDONED,2020-10-14 20:28:39.000000000,2022-11-11 18:24:22.000000000,,20,7,0,758245,26e34bf802babf6d9275a313fc1f3ef826d2a362,7,5,1,1,10135,Lee Yarwood,lyarwood,"libvirt: Log exception when unable to import rbd or rados

This should help provide some context when the RbdDriver later raises a
RuntimeError if rbd or rados hasn't been imported correctly.

NOTE(lyarwood): Conflict as I745b3433a447aeec819781e0ee26df6e6c70530a
is not present on stable/queens.

Conflicts:
    nova/virt/libvirt/storage/rbd_utils.py

Change-Id: Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c
(cherry picked from commit aa16dd09ebeb21d0b81682b0b6026de0fe4f23b7)
(cherry picked from commit 961a355fb314975ee169cbe9ef88eb8537294253)
(cherry picked from commit 22c86f92ce7ef86675ee8265d43b21997e0df4bc)
(cherry picked from commit 9c58a663b7999260e1683bae6a828d118aa44fd5)
(cherry picked from commit cd7a1877a40b794e62086939d94b89bf928b61e9)
(cherry picked from commit f42d4c1afbf64cac295a36741d49013bd23e3205)
"
openstack%2Fnova~stable%2Fqueens~Ie62d3566230aa3e2786d129adbb2e3570b06e4c6,openstack/nova,stable/queens,bug/1899541,Ie62d3566230aa3e2786d129adbb2e3570b06e4c6,Prevent archiving of pci_devices records because of 'instance_uuid',ABANDONED,2020-11-02 18:22:34.000000000,2022-11-11 18:24:17.000000000,,21,2,0,760987,54e8af9af15404fd81814775896db65b9b24091b,5,3,1,2,4690,melanie witt,melwitt,"Prevent archiving of pci_devices records because of 'instance_uuid'

Currently in the archive_deleted_rows code, we will attempt to clean up
""residue"" of deleted instance records by assuming any table with a
'instance_uuid' column represents data tied to an instance's lifecycle
and delete such records.

This behavior poses a problem in the case where an instance has a PCI
device allocated and someone deletes the instance. The 'instance_uuid'
column in the pci_devices table is used to track the allocation
association of a PCI with an instance. There is a small time window
during which the instance record has been deleted but the PCI device
has not yet been freed from a database record perspective as PCI
devices are freed during the _complete_deletion method in the compute
manager as part of the resource tracker update call.

Records in the pci_devices table are anyway not related to the
lifecycle of instances so they should not be considered residue to
clean up if an instance is deleted. This adds a condition to avoid
archiving pci_devices on the basis of an instance association.

Closes-Bug: #1899541

Conflicts:
    nova/tests/functional/db/test_archive.py

NOTE(melwitt): The conflict is because change
I6f87cf03d49be6bfad2c5e6f0c8accf0fab4e6ee (Add simple db purge command)
is not in Queens.

Change-Id: Ie62d3566230aa3e2786d129adbb2e3570b06e4c6
(cherry picked from commit 1c256cf774693e2395ae8fe4a7a2f416a7aeb03a)
(cherry picked from commit 09784db62fcd01124a101c4c69cab6e71e1ac781)
(cherry picked from commit 79df36fecf8c8be5ae9d59397882ac844852043e)
(cherry picked from commit e3bb6119cf2d0a503768979312aea4d10cf85cda)
(cherry picked from commit da91b19d8be3b9cad8f713a3218a08e2d50238c8)
(cherry picked from commit 661179de486e710f260e448b005e3383038337b8)
"
openstack%2Fnova~stable%2Fqueens~I335113f0ec59516cb337d34b6fc9078ea202130f,openstack/nova,stable/queens,bug/1775934,I335113f0ec59516cb337d34b6fc9078ea202130f,Sanity check instance mapping during scheduling,ABANDONED,2020-11-16 17:53:01.000000000,2022-11-11 18:24:12.000000000,,120,17,0,762903,aea214a6233cde55a830eda9f2b0f32debc519fb,7,5,1,2,4690,melanie witt,melwitt,"Sanity check instance mapping during scheduling

mnaser reported a weird case where an instance was found
in both cell0 (deleted there) and in cell1 (not deleted
there but in error state from a failed build). It's unclear
how this could happen besides some weird clustered rabbitmq
issue where maybe the schedule and build request to conductor
happens twice for the same instance and one picks a host and
tries to build and the other fails during scheduling and is
buried in cell0.

To avoid a split brain situation like this, we add a sanity
check in _bury_in_cell0 to make sure the instance mapping is
not pointing at a cell when we go to update it to cell0.
Similarly a check is added in the schedule_and_build_instances
flow (the code is moved to a private method to make it easier
to test).

Worst case is this is unnecessary but doesn't hurt anything,
best case is this helps avoid split brain clustered rabbit
issues.

Closes-Bug: #1775934

Change-Id: I335113f0ec59516cb337d34b6fc9078ea202130f
(cherry picked from commit 5b552518e1abdc63fb33c633661e30e4b2fe775e)
(cherry picked from commit efc35b1c5293c7c6c85f8cf9fd9d8cd8de71d1d5)
(cherry picked from commit c895d3e6bca562225d70e8f81255f38970f7fcda)
(cherry picked from commit 9b507c21aeeab876cd6a222d68f981fc923e8504)
"
openstack%2Fnova~stable%2Fqueens~I83817f7301680801beaee375825f02eda526eda1,openstack/nova,stable/queens,bug/1865040,I83817f7301680801beaee375825f02eda526eda1,Validate id as integer for os-aggregates,ABANDONED,2020-11-27 12:29:00.000000000,2022-11-11 18:24:05.000000000,,85,21,0,764310,3d691d948e8d2c61a76602ad18f61475c0437a09,7,2,1,2,15334,Stephen Finucane,sfinucan,"Validate id as integer for os-aggregates

According to the api-ref, the id passed to calls in os-aggregates is
supposed to be an integer. No function validated this, so any value
passed to these functions would directly reach the DB. While this is
fine for SQLite, making a query with a string for an integer column on
other databases like PostgreSQL results in a DBError exception and thus
a HTTP 500 instead of 400 or 404.

This commit adds validation for the id parameter the same way it's
already done for other endpoints.

Change-Id: I83817f7301680801beaee375825f02eda526eda1
Closes-Bug: 1865040
(cherry picked from commit 2e70a1717f25652912886cbefa3f40e6df908c00)
(cherry picked from commit 4653245ddcf989ebac4b964a41d881d78cf9ae2c)
(cherry picked from commit 9448291d8f3ff6bef85d3bca4aa21c1e6036b3f1)
(cherry picked from commit ad8aca7965dd7cc95e151056a74b63deecbe90a1)
"
openstack%2Fnova~stable%2Fqueens~Ic5ce2580e7638a47f1ffddb4edbb503bf490504c,openstack/nova,stable/queens,bug/1896621,Ic5ce2580e7638a47f1ffddb4edbb503bf490504c,compute: Lock by instance.uuid lock during swap_volume,ABANDONED,2020-10-19 09:07:21.000000000,2022-11-11 18:23:52.000000000,,26,2,0,758736,a89f46cb3b2c8965696bc59875b75dcdb6728897,8,3,2,1,10135,Lee Yarwood,lyarwood,"compute: Lock by instance.uuid lock during swap_volume

The libvirt driver is currently the only virt driver implementing swap
volume within Nova. While libvirt itself does support moving between
multiple volumes attached to the same instance at the same time the
current logic within the libvirt driver makes a call to
virDomainGetXMLDesc that fails if there are active block jobs against
any disk attached to the domain.

This change simply uses an instance.uuid based lock in the compute layer
to serialise requests to swap_volume to avoid this from being possible.

Closes-Bug: #1896621
Change-Id: Ic5ce2580e7638a47f1ffddb4edbb503bf490504c
(cherry picked from commit 6cf449bdd0d4beb95cf12311e7d2f8669e625fac)
(cherry picked from commit eebf94b6540fcd16826067fac544b5a3238842a3)
(cherry picked from commit f7ba1aab5f6f76ba88d6cc63cde2ec246ee61ec5)
(cherry picked from commit 6540161933ec007d3de01dfc420595664781aa37)
(cherry picked from commit 9be0c52439f50ed0fbb9657577c227ce9bb7fc6d)
(cherry picked from commit 8504c900edd0808770d9c4014a58a2b3b29ef6c3)
"
openstack%2Fnova~stable%2Fqueens~I17357d85f845d4160cb7c7784772530a1e92af76,openstack/nova,stable/queens,bug/1885528,I17357d85f845d4160cb7c7784772530a1e92af76,Make _rebase_with_qemu_img() generic,ABANDONED,2021-03-16 11:16:56.000000000,2022-11-11 18:23:47.000000000,,36,23,0,780789,d209a501e66a6a21eeb5a0883bb94fd1c4de2947,4,2,1,2,10135,Lee Yarwood,lyarwood,"Make _rebase_with_qemu_img() generic

Move volume_delete related logic away from this method, in order to make
it generic and usable elsewhere.

NOTE(lyarwood): Conflict as I9bd80adc244c64277d2d00e7d79c3002c8f9d57e
isn't present on stable/queens.

Conflicts:
  nova/tests/unit/virt/libvirt/test_driver.py

Change-Id: I17357d85f845d4160cb7c7784772530a1e92af76
Related-Bug: #1732428
(cherry picked from commit ce2203456660083119cdbb7e73c1ad15e6e0a074)
(cherry picked from commit 2e89699c3301bf801784c637b6919752fcd3503f)
(cherry picked from commit ffcb1705cbb6ddaa3fa4d8881f416f25b763b5e7)
(cherry picked from commit 43cea4a744930daf3459a3bad294fe60ae135e37)
(cherry picked from commit 8a065c15a228d41e5c99a449cf53192e92a96c2d)
"
openstack%2Fnova~stable%2Fqueens~I58dca95251b607eaff602783fee2fc38e2421944,openstack/nova,stable/queens,bug/1885528,I58dca95251b607eaff602783fee2fc38e2421944,Use absolute path during qemu img rebase,ABANDONED,2021-03-16 11:16:56.000000000,2022-11-11 18:23:43.000000000,,33,6,0,780790,f531193a33d3ac20e2bb3f1a2328d1f55ded3e33,7,2,2,2,10135,Lee Yarwood,lyarwood,"Use absolute path during qemu img rebase

During an assisted volume snapshot delete request from Cinder nova
removes the snapshot from the backing file chain. During that nova
checks the existence of such file. However in some cases (see the bug
report) the path is relative and therefore os.path.exists fails.

This patch makes sure that nova uses the volume absolute path to make
the backing file path absolute as well.

Closes-Bug #1885528

Change-Id: I58dca95251b607eaff602783fee2fc38e2421944
(cherry picked from commit b9333125790682f9d60bc74fdbb12a098565e7c2)
(cherry picked from commit 831abc9f83a2d3f517030f881e7da724417fea93)
(cherry picked from commit c2044d4bd0919860aa2d49687ba9c6ef6f7d37e8)
(cherry picked from commit 351072eb0950ea4a4e573d5525ed4c5dc7d6fa30)
(cherry picked from commit 80c64b455cbb646b920755eb35fa2c5fa5df81b2)
(cherry picked from commit 8fc3b17b124703e32d25270e3ff90974591d658f)
"
openstack%2Fnova~stable%2Fqueens~Ic9133f6bc14d4fe766d37a438bf52c33e89da768,openstack/nova,stable/queens,bug/1613770,Ic9133f6bc14d4fe766d37a438bf52c33e89da768,Improve error log when snapshot fails,ABANDONED,2021-03-25 12:02:13.000000000,2022-11-11 18:23:38.000000000,,12,0,0,782984,d186a0a08cca65e06f0dfff07bc6592d3cc1c79f,5,2,1,3,10135,Lee Yarwood,lyarwood,"Improve error log when snapshot fails

If snapshot creation via glance fails due to lack of space or over
quota, we want to have a clearer error message.

Change-Id: Ic9133f6bc14d4fe766d37a438bf52c33e89da768
Closes-Bug: #1613770
(cherry picked from commit 024bf10d8aec5e58111793a9652b16682eb61b7c)
(cherry picked from commit 9e9c022bde3a3ffdf0dd87e21bf9afde0dbc1e74)
(cherry picked from commit 446c9c56109329208193e3c9b106a0a2eb3cd9ce)
(cherry picked from commit 57d340f1a336796c30677a723beccc713ae81dd0)
"
openstack%2Fnova~stable%2Fqueens~Ie698db56dfab5cdc03826c8ca0e8c60ad5f2cdc9,openstack/nova,stable/queens,bug/1810977,Ie698db56dfab5cdc03826c8ca0e8c60ad5f2cdc9,Fix typo,ABANDONED,2020-09-22 09:07:37.000000000,2022-11-11 18:23:34.000000000,,1,1,0,753261,f6eb83c3d671f6c88af0db8da5f346bf6933e87c,12,8,1,1,15334,Stephen Finucane,sfinucan,"Fix typo

Change-Id: Ie698db56dfab5cdc03826c8ca0e8c60ad5f2cdc9
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
(cherry picked from commit 37593defd4c6e87d68725b021c9653ee78150f46)
(cherry picked from commit 444d65221cc7a20a73fa38aa1ca41d7957b0198e)
"
openstack%2Fnova~stable%2Fqueens~I5f5c621f2f0fa1bc18ee9a97d17085107a5dee53,openstack/nova,stable/queens,bug/1734204,I5f5c621f2f0fa1bc18ee9a97d17085107a5dee53,hardware: fix memory check usage for small/large pages,ABANDONED,2020-05-11 14:27:34.000000000,2022-11-11 18:23:30.000000000,,247,121,0,726867,4d57c91a0feb75a66c92f54a16dc2da0f476b98c,35,11,4,3,935,James Page,james-page,"hardware: fix memory check usage for small/large pages

When huge pages are requested, we need to examine the host cell's
specific huge page amounts, not the amount of physical memory
associated with the host NUMA node.

Also when no pagesize is requested we should consider to compute
memory usage based on small pages since the amount of physical memory
available may also include some large pages.

The unit-tests has been updated to pass correct NUMACell mempages
information since the check is not done based on the pages available
on host. Also that the test 'test_host_usage_contiguous' to reflect to
correct update of pages availalbes on hist based on instance usage.

Conflicts:
  nova/tests/unit/compute/test_resource_tracker.py
  nova/tests/unit/virt/test_hardware.py

NOTE(stephenfin): Conflicts are due to the absence of changes
I8982ab25338969cd98621f79b7fbec8af43d12c5 (""Don't filter out sibling
sets with one core"") and If6eb402428f29416ce01dfc32474248c560ae019
(""hardware: Start accounting for networks in NUMA fitting""), plus some
other closely related patches, all of which are too invasive to
backport.

Closes-bug: #1734204
Change-Id: I5f5c621f2f0fa1bc18ee9a97d17085107a5dee53
Signed-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>
(cherry picked from commit 8241deee197206d5458a61884ce08e1c2c2603d9)
(cherry picked from commit 5e69018038176a60abbb3c879ae7ac7f12b8341a)
"
openstack%2Fnova~stable%2Fqueens~I890b2c81cd49c1c601e9baee6a249709d0f6810e,openstack/nova,stable/queens,bug/1810977,I890b2c81cd49c1c601e9baee6a249709d0f6810e,Fix overcommit for NUMA-based instances,ABANDONED,2020-05-11 14:34:50.000000000,2022-11-11 18:23:26.000000000,,60,19,0,726868,ff13026bf25bacc6b3b5fb842c88720354703f87,28,9,4,3,935,James Page,james-page,"Fix overcommit for NUMA-based instances

Change I5f5c621f2f0fa1bc18ee9a97d17085107a5dee53 modified how we
evaluated available memory for instances with a NUMA topology.
Previously, we used a non-pagesize aware check unless the user had
explicitly requested a specific pagesize. This means that for instances
without pagesize requests, nova considers hugepages as available memory
when deciding if a host has enough available memory for the instance.

The aforementioned change modified this so that all NUMA-based
instances, whether they had hugepages or not, would use the
pagesize-aware check. Unfortunately the functionality it was reusing to
do this was functionality previously only used for hugepages. Hugepages
cannot be oversubscribed so we did not take oversubscription into
account, comparing against available memory on the host (i.e. memory not
consumed by other instances) rather than total memory. This is OK when
using hugepages but not small pages, where overcommit is OK.

Given that overcommit is already handled elsewhere in the code, we
simply modify the non-hugepage code path to check for available memory
of the lowest pagesize vs. total memory.

Change-Id: I890b2c81cd49c1c601e9baee6a249709d0f6810e
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Closes-Bug: #1810977
(cherry picked from commit b24ad3780bc872d1a17907909cd6bcbea7e804b3)
(cherry picked from commit 780ccfcbdea919b196c18372d1c66bc88b4fa48c)
"
openstack%2Fnova~stable%2Fqueens~I2a6ccaff904c1f0759d55feeeef0ec1da32c65df,openstack/nova,stable/queens,bug/1798688,I2a6ccaff904c1f0759d55feeeef0ec1da32c65df,Remove allocations before setting vm_status to SHELVED_OFFLOADED,ABANDONED,2021-01-22 14:32:25.000000000,2022-11-11 18:23:20.000000000,,25,13,0,771986,6101380051cd7dbd3613bfa7358710cb14f03bee,10,3,1,2,10135,Lee Yarwood,lyarwood,"Remove allocations before setting vm_status to SHELVED_OFFLOADED

Tempest is intermittently failing a test which does the
following:

1. Create a server.
2. Shelve offload it.
3. Unshelve it.

Tempest waits for the server status to be SHELVED_OFFLOADED
before unshelving the server, which goes through the
scheduler to pick a compute node and claim resources on it.

When shelve offloading a server, the resource allocations
for the instance and compute node it was on are cleared, which
will also delete the internal consumer record in the placement
service.

The race is that the allocations are removed during shelve
offload *after* the server status changes to SHELVED_OFFLOADED.
This leaves a window where unshelve is going through the
scheduler and gets the existing allocations for the instance,
which are non-empty and have a consumer generation. The
claim_resources method in the scheduler then uses that
consumer generation when PUTing the allocations. That PUT
fails because in between the GET and PUT of the allocations,
placement has deleted the internal consumer record. When
PUTing the new allocations with a non-null consumer generation,
placement returns a 409 conflict error because for a new
consumer it expects the ""consumer_generation"" parameter to be
None.

This change handles the race by simply making sure the allocations
are deleted (along with the related consumer record in placement)
*before* the instance.vm_status is changed.

Change-Id: I2a6ccaff904c1f0759d55feeeef0ec1da32c65df
Closes-Bug: #1798688
(cherry picked from commit 6369f39244558b147f7b0796269d9a86ce9b12d8)
(cherry picked from commit 1121a59edb48fe133df14bfd4384eef04ce687a7)
"
openstack%2Fnova~stable%2Fqueens~If9acc054100a6733f3659a15dd9fc2d462e84d64,openstack/nova,stable/queens,bug/1841363,If9acc054100a6733f3659a15dd9fc2d462e84d64,libvirt:driver:Disallow AIO=native when 'O_DIRECT' is not available,ABANDONED,2020-09-11 11:27:47.000000000,2022-11-11 18:23:16.000000000,,75,0,0,751249,657c1a82f9bbf3cd3ce5e8365d06cd1ff93502fd,12,7,2,3,10135,Lee Yarwood,lyarwood,"libvirt:driver:Disallow AIO=native when 'O_DIRECT' is not available

Because of the libvirt issue[1], there is a bug[2] that if we set cache mode
whose write semantic is not O_DIRECT (.i.e unsafe, writeback or writethrough),
there will be a problem with the volume drivers
(.i.e nova.virt.libvirt.volume.LibvirtISCSIVolumeDriver,
nova.virt.libvirt.volume.LibvirtNFSVolumeDriver and so on), which designate
native io explicitly.

That problem will generate a libvirt xml for the instance,
whose content contains

```
...
<disk ... >
  <driver ... cache='unsafe/writeback/writethrough' io='native' />
</disk>
...
```
In turn, it will fail to start the instance or attach the disk.

> When qemu is configured with a block device that has aio=native set, but
> the cache mode doesn't use O_DIRECT (i.e. isn't cache=none/directsync or any
> unnamed mode with explicit cache.direct=on), then the raw-posix block driver
> for local files and block devices will silently fall back to aio=threads.
> The blockdev-add interface rejects such combinations, but qemu can't
> change the existing legacy interfaces that libvirt uses today.

[1]: https://github.com/libvirt/libvirt/commit/058384003db776c580d0e5a3016a6384e8eb7b92
[2]: https://bugzilla.redhat.com/show_bug.cgi?id=1086704

Closes-Bug: #1841363
Change-Id: If9acc054100a6733f3659a15dd9fc2d462e84d64
(cherry picked from commit af2405e1181d70cdf60bcd0e40b3e80f2db2e3a6)
(cherry picked from commit 0bd58921a1fcaffcc4fac25f63434c9cab93b061)
(cherry picked from commit d92fe4f3e69db51b7bbad52a1fe1740e37bade9a)
(cherry picked from commit cc2f45ebb03326c757abbfaef4de3e2c1fa4ead2)
(cherry picked from commit 6e6440fe97c07489ab6b70029a22fa0b9b70bc02)
"
openstack%2Fnova~stable%2Fqueens~Ia2007bc63ef09931ea0197cef29d6a5614ed821a,openstack/nova,stable/queens,bug/1905701,Ia2007bc63ef09931ea0197cef29d6a5614ed821a,libvirt: Skip encryption metadata lookups if secret already exists on host,ABANDONED,2020-12-07 09:41:03.000000000,2022-11-11 18:23:12.000000000,,42,1,0,765774,d3c574cc368d1be1e883394aefd06158f9638281,9,2,2,3,10135,Lee Yarwood,lyarwood,"libvirt: Skip encryption metadata lookups if secret already exists on host

When connecting an encrypted volume to a host the _attach_encryptor
method will be called in order to either call a legacy os-brick
encryptor *or* configure a libvirt secret used by libvirt and QEMU to
natively decrypt LUKSv1 encrypted volumes. To create this libvirt secret
the configured key manager will be queried to provide and then decode
the associated secret before this is stashed within libvirt.

This change simply skips the above when an existing libvirt secret
associated with the target volume is found on the host already.

While this obviously optimises basic instance lifecycle flows such as a
simple power off and on it additionally resolves a more convoluted use
case when the ``[DEFAULT]/resume_guests_state_on_host_boot``
configurable is enabled. In this case the compute service has no request
context with which to query the key manager when attempting to restart
instances with encrypted volumes attached. As a result any attempt by
the compute service to restart an instance with an attached encrypted
volume would previously fail.

Closes-Bug: #1905701
Change-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a
(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)
(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)
(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)
(cherry picked from commit d47679779189e43941881c6212d6db2052a19867)
(cherry picked from commit dfca56f64cd7884b6da98db43348303d220cf25e)
(cherry picked from commit 42dbcd370202dbbcd9c339f09f3323553a5295a1)
"
openstack%2Fnova~stable%2Fqueens~I332d4f33ea6b9506cc24ac12e5c0994f208a3107,openstack/nova,stable/queens,backport_queens_1937375,I332d4f33ea6b9506cc24ac12e5c0994f208a3107,Add functional test for bug 1937375,ABANDONED,2021-08-06 14:30:48.000000000,2022-11-11 18:23:07.000000000,,115,0,0,803766,87e62bdbfc3dd3ae120abb4a36b8fae8280acac2,3,2,1,1,29074,Felix Huettner,felix.huettner,"Add functional test for bug 1937375

- InstanceHelperMixin pulled in for access to a better
  _build_minimal_create_server_request method
- api_major_version defined in test class
- Fake image service stubbed out directing in test class
- A simple _create_server method is in-lined within the class

Related-Bug: #1937375
Change-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107
(cherry picked from commit 2ffd9738602531e93495a1feca76bbb687c3e72c)
(cherry picked from commit 7a9e3dcd172f187cf93f406b09f49d2ded9bd90d)
(cherry picked from commit 68b2d5f797896768229db1cf28feb22a984daf81)
(cherry picked from commit 2a67e8794f916af07a05c550dca01d7fca625caf)
(cherry picked from commit 051a14674195e5d37b931d3b59366656801bc8a1)
(cherry picked from commit 975806f3995e7b09c477859aadd8a5771acd2771)
(cherry picked from commit 9a123489f412e0e49db7cf5b36e82bbcf930ff15)
"
openstack%2Fnova~stable%2Fqueens~Id3e4452883f6a3cf44ff58b39ded82e882e28c23,openstack/nova,stable/queens,cherry-pick-in-gate-queue,Id3e4452883f6a3cf44ff58b39ded82e882e28c23,"Move 'check-cherry-picks' test to gate, n-v check",ABANDONED,2021-08-16 11:55:04.000000000,2022-11-11 18:23:03.000000000,,23,1,0,804730,2c4703d4c79820d0596b7e09a5a291099d464dac,7,2,1,2,17685,Elod Illes,elod.illes,"Move 'check-cherry-picks' test to gate, n-v check

This currently runs in the 'check' pipeline, as part of the pep8 job,
which causes otherwise perfectly valid backports to report as failing
CI. There's no reason a stable core shouldn't be encouraged to review
these patches: we simply want to prevent them *merging* before their
parent(s). Resolve this conflict by moving the check to separate voting
job in the 'gate' pipeline as well as a non-voting job in the 'check'
pipeline to catch more obvious issues.

Conflicts:
    .zuul.yaml

NOTE(elod.illes): conflict is due to multiple patches, for example
- Iae3fcac484f060e8dbeef299d594b8ade8ab3b70 was only added to rocky
- I8630ea11c3067ed934de2ef27a63432418e98c33 was added to rocky

Change-Id: Id3e4452883f6a3cf44ff58b39ded82e882e28c23
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
(cherry picked from commit 98b01c9a59df4912f5a162c2c52d1f00c84d24c2)
(cherry picked from commit fef0305abefbf165fecb883f03bce97f525a790a)
(cherry picked from commit b7677ae08ae151858ecb0e67039e54bb3df89700)
(cherry picked from commit 91314f7fbba312d4438fa446804f692d316512a8)
(cherry picked from commit de94f429474713a68d5efc53677bc468f02dc112)
(cherry picked from commit 1960b50f0d9646e12a8e8849579fab8c047885a8)
(cherry picked from commit e9442f36d5aa0d0d2410315d3a6681d9e3a14ec5)
"
openstack%2Fnova~stable%2Fqueens~Ie904d1513b5cf76d6d5f6877545e8eb378dd5499,openstack/nova,stable/queens,bug/1946729,Ie904d1513b5cf76d6d5f6877545e8eb378dd5499,Add a WA flag waiting for vif-plugged event during reboot,ABANDONED,2021-11-19 17:00:04.000000000,2022-11-11 18:22:56.000000000,,147,9,0,818605,b214f5bed0abbf265aa9e2efe2d7ce4fda955a41,6,1,3,5,9708,Balazs Gibizer,gibi,"Add a WA flag waiting for vif-plugged event during reboot

The libvirt driver power on and hard reboot destroys the domain first
and unplugs the vifs then recreate the domain and replug the vifs.
However nova does not wait for the network-vif-plugged event before
unpause the domain. This can cause that the domain starts running and
requesting IP via DHCP before the networking backend finished plugging
the vifs.

So this patch adds a workaround config option to nova to wait for
network-vif-plugged events during hard reboot the same way as nova waits
for this event during new instance spawn.

This logic cannot be enabled unconditionally as not all neutron
networking backend sending plug time events to wait for. Also the logic
needs to be vnic_type dependent as ml2/ovs and the in tree sriov backend
often deployed together on the same compute. While ml2/ovs sends plug
time event the sriov backend does not send it reliably. So the
configuration is not just a boolean flag but a list of vnic_types
instead. This way the waiting for the plug time event for a vif that is
handled by ml2/ovs is possible while the instance has other vifs handled
by the sriov backend where no event can be expected.

Change-Id: Ie904d1513b5cf76d6d5f6877545e8eb378dd5499
Closes-Bug: #1946729
(cherry picked from commit 68c970ea9915a95f9828239006559b84e4ba2581)
(cherry picked from commit 0c41bfb8c5c60f1cc930ae432e6be460ee2e97ac)
(cherry picked from commit 89c4ff5f7b45f1a5bed8b6b9b4586fceaa391bfb)
(cherry picked from commit c531fdcc192afb5af628ac567cb0ff8aa3eab052)
(cherry picked from commit 35e071470e2c5597444a7b85211a01e7fbc7c68b)
(cherry picked from commit 870d8148ef1fc0c72554f24a20aec091e69a5656)
(cherry picked from commit 3afb13a205d2424022beb6a8e538da383abdd06f)
(cherry picked from commit 75e48ce99938c9803efb15ab639b1adee9e3ebb3)
"
openstack%2Fnova~stable%2Fqueens~I92f35514efddcb071c7094370b79d91d34c5bc72,openstack/nova,stable/queens,backport_queens_1937375,I92f35514efddcb071c7094370b79d91d34c5bc72,compute: Avoid duplicate BDMs during reserve_block_device_name,ABANDONED,2021-08-06 14:30:48.000000000,2022-11-11 18:22:51.000000000,,41,6,0,803767,e70b2294acf254d198e4be05d39608bdd3477f9c,4,1,1,3,29074,Felix Huettner,felix.huettner,"compute: Avoid duplicate BDMs during reserve_block_device_name

When attaching a volume to a running instance the nova-api validates
that the volume is not already attached to the instance. However
nova-compute is responsible for actually creating the BDM entry in the
database. If sending attach requests fast enough it can be possible
that the same ""attach_volume"" request can be sent to nova-compute for
the same volume/instance combination.

To work around this we add a check in nova-compute to validate that
the volume has not been attached in the mean time.

Closes-Bug: #1937375
Change-Id: I92f35514efddcb071c7094370b79d91d34c5bc72
(cherry picked from commit 2209b0007fe85d7c5439e0bfdfe2120c63898fa2)
(cherry picked from commit 2bee83b8a980b2bd9e276b75aa74253f8c0d0a70)
(cherry picked from commit 303c7a7c35044240f1546a5f960c1a4e6482f385)
(cherry picked from commit deefea82efd87b001acce7cf8d0fc2915062228b)
(cherry picked from commit 6ef97792387bf010b92da1e06beefc04d22ff5ff)
(cherry picked from commit fc33fd8b7e935d8e6a690c18a0907875ac181dcf)
(cherry picked from commit 273c2e8358a8c36d44c9592326a2f833082a9196)
"
openstack%2Fnova~stable%2Fqueens~I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527,openstack/nova,stable/queens,,I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527,Gracefull recovery when attaching volume fails,ABANDONED,2022-02-18 08:55:13.000000000,2022-11-11 18:22:46.000000000,,62,3,4,829861,2ab79946e9cd0d8897c0d14558941626a463b613,19,1,5,3,29074,Felix Huettner,felix.huettner,"Gracefull recovery when attaching volume fails

When trying to attach a volume to an already running instance the nova-api
requests the nova-compute service to create a BlockDeviceMapping. If the
nova-api does not receive a response within `rpc_response_timeout` it will
treat the request as failed and raise an exception.

There are multiple cases where nova-compute actually already processed the
request and just the reply did not reach the nova-api in time (see bug report).
After the failed request the database will contain a BlockDeviceMapping entry
for the volume + instance combination that will never be cleaned up again.
This entry also causes the nova-api to reject all future attachments of this
volume to this instance (as it assumes it is already attached).

To work around this we check if a BlockDeviceMapping has already been created
when we see a messaging timeout. If this is the case we can safely delete it
as the compute node has already finished processing and we will no longer pick
it up.
This allows users to try the request again.

A previous fix was abandoned but without a clear reason ([1]).

[1]: https://review.opendev.org/c/openstack/nova/+/731804

Closes-Bug: 1960401
Depends-on: Ibd32d30aacae65702d0ccbdb8a02b1667ec4e8ee
Change-Id: I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527
(cherry picked from commit 9eb116b99ce32bc69c4abf8ec3b0179ef89a8860)
"
openstack%2Fnova~stable%2Fqueens~I48bccc4b9adcac3c7a3e42769c11fdeb8f6fd132,openstack/nova,stable/queens,,I48bccc4b9adcac3c7a3e42769c11fdeb8f6fd132,Disable NUMATopologyFilter on rebuild,ABANDONED,2020-01-17 17:48:56.000000000,2022-11-11 18:22:42.000000000,,19,7,1,703141,476a9dcefa4425ee0e1beafd7fd2d9d106b9d8fd,13,6,2,3,11604,sean mooney,sean-k-mooney,"Disable NUMATopologyFilter on rebuild

This change leverages the new NUMA constraint checking added in
in I0322d872bdff68936033a6f5a54e8296a6fb3434 to allow the
NUMATopologyFilter to be skipped on rebuild.

As the new behavior of rebuild enfroces that no changes
to the numa constraints are allowed on rebuild we no longer
need to execute the NUMATopologyFilter. Previously
the NUMATopologyFilter would process the rebuild request
as if it was a request to spawn a new instnace as the
numa_fit_instance_to_host function is not rebuild aware.

As such prior to this change a rebuild would only succeed
if a host had enough additional capacity for a second instance
on the same host meeting the requirement of the new image and
existing flavor. This behavior was incorrect on two counts as
a rebuild uses a noop claim. First the resouce usage cannot
change so it was incorrect to require the addtional capacity
to rebuild an instance. Secondly it was incorrect not to assert
the resouce usage remained the same.

I0322d872bdff68936033a6f5a54e8296a6fb3434 adressed guarding the
rebuild against altering the resouce usage and this change
allows in place rebuild.

This change found a latent bug that will be adressed in a follow
up change and updated the functional tests to note the incorrect
behavior.

Conflicts:
    nova/tests/functional/libvirt/test_numa_servers.py

Change-Id: I48bccc4b9adcac3c7a3e42769c11fdeb8f6fd132
Closes-Bug: #1804502
Implements: blueprint inplace-rebuild-of-numa-instances
(cherry picked from commit 3f9411071d4c1a04ab0b68fd635597bf6959c0ca)
(cherry picked from commit 94c0362918169a1fa06aa6cf5a483e9285d7b91f)
(cherry picked from commit 6001bff0ff18a9712b538114f9ea57d086b4961b)
(cherry picked from commit 4071a1aeddfa055ba643d422538c9eb6f78ed660)
"
openstack%2Fnova~stable%2Fqueens~I655a5f19cae6bded3b0158cd639dc45656f9b005,openstack/nova,stable/queens,,I655a5f19cae6bded3b0158cd639dc45656f9b005,WIP: [stable-only] Remove grenade jobs,ABANDONED,2022-08-23 18:23:40.000000000,2022-11-11 18:22:35.000000000,,0,165,0,854252,7959208f73dccce3e963f08d1e6c8f2ff4615bd4,4,1,1,3,17685,Elod Illes,elod.illes,"WIP: [stable-only] Remove grenade jobs

Pike transitioned to End of Life as its gate was broken, so now queens
is the oldest branch that is still open and can be maintained (as it is
in Extended Maintenance). This patch removes the grenade jobs as those
would use stable/pike as the 'from' state, which cannot be maintained
anymore.

Change-Id: I655a5f19cae6bded3b0158cd639dc45656f9b005
"
openstack%2Fnova~stable%2Fqueens~Ideaf8a88762ce046c2f16a42deff472658a63d82,openstack/nova,stable/queens,,Ideaf8a88762ce046c2f16a42deff472658a63d82,Remove Ironic jobs for queens,ABANDONED,2022-10-10 17:26:47.000000000,2022-11-11 18:22:29.000000000,,0,35,0,860862,2465187bc5e81ecb8b899c080de2c1fcbbd2a400,6,1,1,1,10342,Jay Faulkner,JayF,"Remove Ironic jobs for queens

Removing jobs per
https://docs.openstack.org/project-team-guide/stable-branches.html#end-of-life
since Ironic queens is being EOL'd.

Change-Id: Ideaf8a88762ce046c2f16a42deff472658a63d82
"
openstack%2Fneutron-lbaas~stable%2Fstein~I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0,openstack/neutron-lbaas,stable/stein,bug/1779194,I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0,neutron-lbaas haproxy agent prevent vif unplug when failover occurs,ABANDONED,2019-06-19 12:54:50.000000000,2022-11-11 18:15:31.000000000,,29,19,0,666280,0072f5d869528ca4022cb98279ef2aa3f7ca4eb1,17,7,2,4,17685,Elod Illes,elod.illes,"neutron-lbaas haproxy agent prevent vif unplug when failover occurs

When lbaas fails over after an agent is unresponsive, the dead
agent on coming up should not unplug the vif port, if the lbaas
is active on other agent and when failover is configured.

This patch fixes the problem.

Story: #2003672
Change-Id: I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0
(cherry picked from commit 72399374b222bd4a9d192081bfab2344af27fdd3)
"
openstack%2Fneutron-lbaas~stable%2Frocky~I74648fc016f490c83890568fdd482ef0fdd8fa61,openstack/neutron-lbaas,stable/rocky,,I74648fc016f490c83890568fdd482ef0fdd8fa61,nlbaas2octavia: do not change SG owned by user,ABANDONED,2019-02-13 11:22:30.000000000,2022-11-11 18:14:54.000000000,,14,7,0,636596,eb5b6e37af98a69321d437bf9d79558a993a3d59,4,6,1,1,6579,Nir Magnezi,nmagnezi,"nlbaas2octavia: do not change SG owned by user

When a user associated a VIP to his own security group, the migration
should not change its ownership.

Change-Id: I74648fc016f490c83890568fdd482ef0fdd8fa61
(cherry picked from commit aba049283eb6efe77c613b6641189128ba1d9f45)
"
openstack%2Fneutron-lbaas~stable%2Frocky~Ic268ea3cdcf809f62ba1ab3ebf8ab6d22f871404,openstack/neutron-lbaas,stable/rocky,635076-stable/rocky,Ic268ea3cdcf809f62ba1ab3ebf8ab6d22f871404,Improve performance on get and create/update/delete requests,ABANDONED,2019-06-17 14:56:09.000000000,2022-11-11 18:14:47.000000000,,55,24,0,665696,0b8ce159f581a35037941cc22cd9e972e9f6f048,9,5,1,2,29244,Gregory Thiemonge,gthiemonge,"Improve performance on get and create/update/delete requests

This change follows up on the previous performance improvements
and does the same for crud requests.
I9d67f0966561baaefb50ae97b943ff6593e194eb
I32328c5206b9cd6fb8d8764c079f22b6ea8bfa9e

We remove from_sqlalchemy_model and the related object intermediary
representation from the get_loabalancer, get_pool, get_listener,
get_healthmonitor, get_l7policy, get_l7policy_rule,
get_pool_member.

Instead it more directly transforms from the SQLAlchemy model to the
required api dictionary format. Thus this entirely skips loading a few
relations that walking the intermediary object model triggered without
the target output needing them.

This is in particular important on calls like _get_driver_for_loadbalancer
as it previously would load the loadbalancer and all related objects
just to get the provider name for the loadbalancer.

Story: 2004949
Task: 29365

Change-Id: Ic268ea3cdcf809f62ba1ab3ebf8ab6d22f871404
(cherry picked from commit 0295eccea62eaf89ff1785e71f45e8a21a32ad7c)
"
openstack%2Fneutron-lbaas~stable%2Frocky~I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0,openstack/neutron-lbaas,stable/rocky,bug/1779194-stable/rocky,I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0,neutron-lbaas haproxy agent prevent vif unplug when failover occurs,ABANDONED,2018-09-01 08:27:16.000000000,2022-11-11 18:14:41.000000000,,29,19,0,599167,c7539a75b37bc3d3e5f93306359c50f0f01bb236,11,6,2,4,6593,Dirk Mueller,dmllr,"neutron-lbaas haproxy agent prevent vif unplug when failover occurs

When lbaas fails over after an agent is unresponsive, the dead
agent on coming up should not unplug the vif port, if the lbaas
is active on other agent and when failover is configured.

This patch fixes the problem.

Change-Id: I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0
Closes-Bug: #1779194
(cherry picked from commit 72399374b222bd4a9d192081bfab2344af27fdd3)
"
openstack%2Fneutron-lbaas~stable%2Frocky~Ie5eff9f7733a3bcec90a8e3829036aa6d425444a,openstack/neutron-lbaas,stable/rocky,bug/1779194-stable/rocky,Ie5eff9f7733a3bcec90a8e3829036aa6d425444a,Unplug tap from bridge on agent recovery after failover,ABANDONED,2020-08-19 12:49:04.000000000,2022-11-11 18:14:36.000000000,,9,8,0,746914,177113cb6a8dcaa182d460bf76712b3d487eefc7,5,2,1,1,2733,Darragh O'Reilly,darragh-oreilly,"Unplug tap from bridge on agent recovery after failover

When allow_automatic_lbaas_agent_failover is eanbled, loadbalancers
can somethmes fail over to other agents due to missed status reports.
This can lead to a situation where some loadbalancers are runing on
more than one agent at the same time.

When the original agent recovers, it just kills the haproxy instance,
but there remains more than one tap interface with the same mac/ip
addresses repling to arp requests. This can create problems for some
physical networks when the neutron network type is vlan.

This patch fixes that by also unpluging the tap interface from the
bridge. Note the unplug_vip_port RPC is not called in this case.

Change-Id: Ie5eff9f7733a3bcec90a8e3829036aa6d425444a
"
openstack%2Fneutron-lbaas~stable%2Fqueens~Ic268ea3cdcf809f62ba1ab3ebf8ab6d22f871404,openstack/neutron-lbaas,stable/queens,635076-stable/rocky-stable/queens,Ic268ea3cdcf809f62ba1ab3ebf8ab6d22f871404,Improve performance on get and create/update/delete requests,ABANDONED,2019-06-17 14:59:16.000000000,2022-11-11 18:14:02.000000000,,55,24,0,665700,ccb828ffdb2f7edf0f2d4012710147ed1b06402a,5,3,1,2,29244,Gregory Thiemonge,gthiemonge,"Improve performance on get and create/update/delete requests

This change follows up on the previous performance improvements
and does the same for crud requests.
I9d67f0966561baaefb50ae97b943ff6593e194eb
I32328c5206b9cd6fb8d8764c079f22b6ea8bfa9e

We remove from_sqlalchemy_model and the related object intermediary
representation from the get_loabalancer, get_pool, get_listener,
get_healthmonitor, get_l7policy, get_l7policy_rule,
get_pool_member.

Instead it more directly transforms from the SQLAlchemy model to the
required api dictionary format. Thus this entirely skips loading a few
relations that walking the intermediary object model triggered without
the target output needing them.

This is in particular important on calls like _get_driver_for_loadbalancer
as it previously would load the loadbalancer and all related objects
just to get the provider name for the loadbalancer.

Story: 2004949
Task: 29365

Change-Id: Ic268ea3cdcf809f62ba1ab3ebf8ab6d22f871404
(cherry picked from commit 0295eccea62eaf89ff1785e71f45e8a21a32ad7c)
"
openstack%2Fneutron-lbaas~stable%2Fqueens~I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0,openstack/neutron-lbaas,stable/queens,bug/1779194-stable/queens,I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0,neutron-lbaas haproxy agent prevent vif unplug when failover occurs,ABANDONED,2018-09-01 08:27:30.000000000,2022-11-11 18:13:46.000000000,,29,19,0,599168,afb4737729990cd7257e569ce7b98e27229de56c,9,5,2,4,6593,Dirk Mueller,dmllr,"neutron-lbaas haproxy agent prevent vif unplug when failover occurs

When lbaas fails over after an agent is unresponsive, the dead
agent on coming up should not unplug the vif port, if the lbaas
is active on other agent and when failover is configured.

This patch fixes the problem.

Change-Id: I76c38b20eb72c1dba0a0a2a140bbe77053aa3ed0
Closes-Bug: #1779194
(cherry picked from commit 72399374b222bd4a9d192081bfab2344af27fdd3)
"
openstack%2Fmagnum~stable%2Fstein~Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,openstack/magnum,stable/stein,,Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,Don't use OpenDev infra mirror for F29 images,ABANDONED,2021-11-02 22:00:24.000000000,2022-11-11 18:11:14.000000000,,1,3,0,816411,94d81e298af1a0db51d0850981b66c501f7ec638,4,1,2,1,7118,Ian Wienand,iwienand,"Don't use OpenDev infra mirror for F29 images

OpenDev infra is going to remove these images from the mirrors.
Directly reference the upstream images.

Cherry-Picked-From: cea527a6435b2dff5ee5a06815da242914103f96
Change-Id: Ie3c8dff0bad6db483b54086afed0402ef24b0b4b
"
openstack%2Fmagnum~stable%2Frocky~Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,openstack/magnum,stable/rocky,,Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,Don't use OpenDev infra mirror for F29 images,ABANDONED,2021-11-02 22:01:40.000000000,2022-11-11 18:10:58.000000000,,1,3,0,816412,167701be246dc426aee6874c7a42aeae9736ce72,3,1,1,1,7118,Ian Wienand,iwienand,"Don't use OpenDev infra mirror for F29 images

OpenDev infra is going to remove these images from the mirrors.
Directly reference the upstream images.

Cherry-Picked-From: cea527a6435b2dff5ee5a06815da242914103f96
Change-Id: Ie3c8dff0bad6db483b54086afed0402ef24b0b4b
"
openstack%2Fmagnum~stable%2Fqueens~Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,openstack/magnum,stable/queens,,Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,Don't use OpenDev infra mirror for F27 images,ABANDONED,2021-11-02 22:04:33.000000000,2022-11-11 18:10:31.000000000,,1,3,0,816414,232694834caf57b23052b71f75c5893f01cbb20b,3,1,1,1,7118,Ian Wienand,iwienand,"Don't use OpenDev infra mirror for F27 images

OpenDev infra is going to remove these images from the mirrors.
Directly reference the upstream images.

Cherry-Picked-From: cea527a6435b2dff5ee5a06815da242914103f96
Change-Id: Ie3c8dff0bad6db483b54086afed0402ef24b0b4b
"
openstack%2Freleases~master~I06c6488b8fb8d780dd38c5e25dfd2e4545427745,openstack/releases,master,nova-eol-qrs,I06c6488b8fb8d780dd38c5e25dfd2e4545427745,"[nova] Proposing EOL of Queens, Rocky and Stein",MERGED,2022-10-24 18:36:02.000000000,2022-11-11 18:01:16.000000000,2022-11-11 18:01:16.000000000,68,0,6,862520,482006797813efe80eef6faa149da510da2cdf3b,13,5,1,17,17685,Elod Illes,elod.illes,"[nova] Proposing EOL of Queens, Rocky and Stein

This patch transition stable/queens, stable/rocky, stable/stein
branches of Nova team's repositories to End of Life.
Mail was sent to ML [1] with details about the reasons.

[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-October/030980.html

Change-Id: I06c6488b8fb8d780dd38c5e25dfd2e4545427745
"
openstack%2Fkayobe~master~Idf5ee822b03ba40179803c981500a6bad37594bf,openstack/kayobe,master,,Idf5ee822b03ba40179803c981500a6bad37594bf,Move to Rocky Linux 9,NEW,2022-09-02 12:40:50.000000000,2022-11-11 17:55:05.000000000,,373,251,51,855656,d9d040454090ce07971ccec730dc745faee72d5c,123,3,61,51,23084,Bartosz Bezak,b.bezak,"Move to Rocky Linux 9

non-voting Centos Stream 9 CI overcloud job is using RL9 container
images (as kolla CI is not building CS9 images anymore)

Depends-on: https://review.opendev.org/c/openstack/kolla-ansible/+/839715
Change-Id: Idf5ee822b03ba40179803c981500a6bad37594bf
"
openstack%2Fneutron~stable%2Fvictoria~I99d27d568f66c6330f6373843d096c6ee1b4ec54,openstack/neutron,stable/victoria,bug/1940074,I99d27d568f66c6330f6373843d096c6ee1b4ec54,Handle all portbinding attrs in case of bulk port creation,MERGED,2022-11-04 15:28:39.000000000,2022-11-11 17:54:42.000000000,2022-11-11 17:53:28.000000000,24,0,3,863664,ae2d009866291857aa6ef682fb818f85a4e7e780,18,3,1,2,15554,Bence Romsics,ebenrom,"Handle all portbinding attrs in case of bulk port creation

Bulk port creation should honor binding:vnic_type
and binding:profile attributes from request.

Closes-Bug: #1940074
Change-Id: I99d27d568f66c6330f6373843d096c6ee1b4ec54
(cherry picked from commit 3640ffa0c6968a2f802a9809e4f318fb229dad7d)
(cherry picked from commit 85126425c529fbee74ae8a9a7289e3ba28665228)
"
openstack%2Ftripleo-ansible~master~Iccda95cde0e309af00ce6b918ab1acab68e548dd,openstack/tripleo-ansible,master,growvols-check,Iccda95cde0e309af00ce6b918ab1acab68e548dd,Don't use meta:end_play after growvols check,MERGED,2022-10-30 20:44:24.000000000,2022-11-11 17:44:08.000000000,2022-11-11 17:44:08.000000000,13,14,0,862984,1678c3395ba8142e42ee1629bd1d258ffbdf4da1,8,4,1,1,4571,Steve Baker,steve-stevebaker,"Don't use meta:end_play after growvols check

According to the documentation, meta: end_play will apply to all
hosts, which is fine if every host is deploying the same image.
However if there is a mixture of overcloud-full and
overcloud-hardened-uefi-full the playbook won't run correctly on some
hosts.

This change moves to a conditional block to run as expected on each
host.

[1] https://docs.ansible.com/ansible/latest/collections/ansible/builtin/meta_module.html

Change-Id: Iccda95cde0e309af00ce6b918ab1acab68e548dd
"
openstack%2Fneutron~master~Ib1278af20c3b3b057712453cb249aba34b684a21,openstack/neutron,master,bug/1987281,Ib1278af20c3b3b057712453cb249aba34b684a21,Add and delete multiple ip addresses in one priv call,NEW,2022-09-02 15:43:00.000000000,2022-11-11 16:59:49.000000000,,186,27,12,855677,aacf2229ef1ac2a7663393857fc47d8abe4889d0,55,5,8,6,34271,Miro Tomaska,mtomaska,"Add and delete multiple ip addresses in one priv call

Created new add_ip_addresses privileged function
which takes an iterable of cidrs and adds them
in one privileged call. This is so we dont have to
take on additional priv overhead when calling
add_ip_address in a loop.
For parity, performed the same change on the
delete_ip_address function.

Closes-Bug: #1987281
Partial-Bug: #1981113
Change-Id: Ib1278af20c3b3b057712453cb249aba34b684a21
"
openstack%2Freleases~master~I25750d216c2da28539cbc5c1d19ebc77f289475c,openstack/releases,master,,I25750d216c2da28539cbc5c1d19ebc77f289475c,release-test test release,MERGED,2022-11-11 15:37:49.000000000,2022-11-11 16:58:08.000000000,2022-11-11 16:58:08.000000000,5,0,2,864295,0ae9b85cfc6e63bf0e05419c30187e02c1be0058,10,4,1,1,17685,Elod Illes,elod.illes,"release-test test release

This tests the announce-release job fix that removed the bindep task
from its pretask [1].

[1] https://review.opendev.org/c/openstack/openstack-zuul-jobs/+/864267

Change-Id: I25750d216c2da28539cbc5c1d19ebc77f289475c
"
openstack%2Fopenstacksdk~master~I0da8ec51ab94a094dc0e7d89aedf1830a08fd150,openstack/openstacksdk,master,nova-gaps,I0da8ec51ab94a094dc0e7d89aedf1830a08fd150,Fix server action request generation,MERGED,2022-11-10 04:20:43.000000000,2022-11-11 16:35:38.000000000,2022-11-11 16:34:22.000000000,6,6,1,864159,0bf4d86e5a6509095c9f01def41f9b8dd928d21a,8,2,1,4,35355,Daniel Wilson,dannosliwcd,"Fix server action request generation

Server action request paths were not interpolating server_id. This
change marks server_id for interpolation in the ServerAction base_path,
and uses request_id as the identifier for server actions.

Change-Id: I0da8ec51ab94a094dc0e7d89aedf1830a08fd150
"
openstack%2Fkolla-ansible~master~I0c8739077ad41609596f7687bf2fd3628eb082c5,openstack/kolla-ansible,master,refactor/rework_quickstart_guide,I0c8739077ad41609596f7687bf2fd3628eb082c5,Rework the Quickstart Guide to make it easier for Newcomers,NEW,2022-10-20 09:14:49.000000000,2022-11-11 16:18:00.000000000,,31,291,48,861953,9e03828ead2a345fa41ffdcabca6fd9786fd316e,26,2,12,1,34533,Ramona Beermann,ramonarautenberg,"Rework the Quickstart Guide to make it easier for Newcomers

There are too many ways in one guide for the deployment. This
makes it hard for newcomers to stay at one track and get a working
installation. I reworked this from many possible ways to two.
Only virtual enviroment and non virtual enviroment. For the
developer guide I will make a new patchset.

Signed-off-by: Ramona Beermann <rautenberg@osism.tech>
Change-Id: I0c8739077ad41609596f7687bf2fd3628eb082c5
"
openstack%2Fcharm-ceph-dashboard~master~I8c14d6ab03fab3830d6da632b5dec1065d9068b2,openstack/charm-ceph-dashboard,master,bug/1990248,I8c14d6ab03fab3830d6da632b5dec1065d9068b2,Add job matcher. This allows query to distinguish between ceph clusters using job label.,NEW,2022-09-22 08:58:10.000000000,2022-11-11 15:59:14.000000000,,474,201,17,858874,0e604abccb9bfdb0bbf4464e9817975bac53b7dd,31,3,3,13,35007,Chi Wai CHAN,Ray,"Add job matcher. This allows query to distinguish between ceph clusters
using job label.

Closes-Bug: #1990248
Change-Id: I8c14d6ab03fab3830d6da632b5dec1065d9068b2
"
openstack%2Fpython-glanceclient~master~I7ccc628a23c9ebdaeedcb9e6d43559f497ce9555,openstack/python-glanceclient,master,bug/1561828,I7ccc628a23c9ebdaeedcb9e6d43559f497ce9555,schema_args: Do not generate option for read-only properties,MERGED,2022-09-20 16:09:55.000000000,2022-11-11 15:56:04.000000000,2022-11-11 15:55:05.000000000,15,19,6,858549,74fa43665719ddc830999fa15bb052a87d69dd14,13,4,2,3,8122,Cyril Roelandt,cyril.roelandt.enovance,"schema_args: Do not generate option for read-only properties

The schema_args decorator generates command line options based on the
properties defined in a schema. This commit makes sure read-only
properties are skipped during this process, since trying to modify their
value would result in a Glance error.

Closes-Bug: #1561828
Change-Id: I7ccc628a23c9ebdaeedcb9e6d43559f497ce9555
"
openstack%2Ftripleo-ansible~master~I78a3c5361276d8f2a7cf42e95a32592f26606dee,openstack/tripleo-ansible,master,,I78a3c5361276d8f2a7cf42e95a32592f26606dee,Drop unused vars for cells v2 discover tasks,NEW,2022-11-02 13:53:29.000000000,2022-11-11 15:50:06.000000000,,0,2,1,863312,7220011bf86396308ac5445590de6d849ad7a83c,6,2,1,1,6926,Bogdan Dobrelya,bogdando,"Drop unused vars for cells v2 discover tasks

Change-Id: I78a3c5361276d8f2a7cf42e95a32592f26606dee
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
"
openstack%2Fneutron~master~I34c44b88468f4f70e94fe7a449642d2a70d7bd05,openstack/neutron,master,bug/1995091,I34c44b88468f4f70e94fe7a449642d2a70d7bd05,DNM Test FT timeout with oslo master,ABANDONED,2022-11-02 14:19:02.000000000,2022-11-11 15:44:57.000000000,,25,83,2,863315,b08cea73386735bde6702ab96d06dc8b14570823,43,2,17,5,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"DNM Test FT timeout with oslo master

CI job failing: neutron-functional-with-oslo-master

https://bugs.launchpad.net/neutron/+bug/1995091

Depends-On: https://review.opendev.org/c/openstack/oslo.log/+/864018

Related-Bug: #1995091
Change-Id: I34c44b88468f4f70e94fe7a449642d2a70d7bd05
"
openstack%2Fneutron~master~Ia2a66cfd3fd1380c5204109742d44f09160548d2,openstack/neutron,master,bug/1981113,Ia2a66cfd3fd1380c5204109742d44f09160548d2,Improve agent provision performance for large networks,NEW,2022-10-13 00:57:47.000000000,2022-11-11 15:34:14.000000000,,364,128,31,861124,c69ba4bb6ea11df8be41d826f431de8e75aa4877,31,7,4,2,34271,Miro Tomaska,mtomaska,"Improve agent provision performance for large networks

Before this patch, the metadata agent would provision network namespace
for all subnets under a network(datapath) as soon as the first
VM(vif port) was mounted on the chassis. This operation can take very
long time for networks with lots of subnets. See the linked bug for
more details.
This patch changes this mechanism to ""lazy load"" where metadata agent
provisions metadata namespace with only the subnets belonging to the
active ports on the chassis. This results in virtually constant
throughput not effected by the number of subnets.

Closes-Bug: #1981113
Change-Id: Ia2a66cfd3fd1380c5204109742d44f09160548d2
"
openstack%2Fopenstack-zuul-jobs~master~Id3eeb168dd72e379fd8bf3fba0407ce1c1314ecb,openstack/openstack-zuul-jobs,master,,Id3eeb168dd72e379fd8bf3fba0407ce1c1314ecb,Remove bindep for announce-release job,MERGED,2022-11-11 13:59:38.000000000,2022-11-11 15:12:27.000000000,2022-11-11 15:11:30.000000000,0,3,1,864267,c794f36e58be1af384ae3f800cfe5b00a43f2a9a,12,3,2,1,17685,Elod Illes,elod.illes,"Remove bindep for announce-release job

The bindep install causes problem for announce-release and it seems
unnecessary for this job, so let's get rid of it.

Change-Id: Id3eeb168dd72e379fd8bf3fba0407ce1c1314ecb
"
openstack%2Fnova~master~I7077aea2abcf3cab67592879ebd1fde066bfcac5,openstack/nova,master,trivial-fix,I7077aea2abcf3cab67592879ebd1fde066bfcac5,Correct config help message related options,MERGED,2022-11-11 10:42:40.000000000,2022-11-11 14:48:13.000000000,2022-11-11 14:47:02.000000000,9,0,1,864259,ac42c43e431b2bd1089910cd52aec8552a8e9755,15,2,1,4,20733,Rajesh Tailor,rajesht,"Correct config help message related options

The options list in 'Related Options:' section doesn't rendered
as bulleted list for some params because of missing blank line.

This changes adds missing blank line wherever needed in [1].
[1] https://docs.openstack.org/nova/latest/configuration/config.html

Change-Id: I7077aea2abcf3cab67592879ebd1fde066bfcac5
"
openstack%2Fmagnum~master~Ib9142ab17d562b1d7ccf1409a9e0d934585a094d,openstack/magnum,master,,Ib9142ab17d562b1d7ccf1409a9e0d934585a094d,Remove send_cluster_metrics,NEW,2022-11-11 13:46:47.000000000,2022-11-11 14:20:17.000000000,,5,204,0,864266,496f1d74205ec12bfbb6dcbb42d576776a398455,2,1,1,4,8064,Jake Yip,jake,"Remove send_cluster_metrics

This period job has been deprecated since Change
I3ca0f2e96fe63870406cc5323f08fa018ac6e8be in Rocky/Stein.

As it defaults to disabled, it causes logs like the following to be sent
over and over again.

 Running periodic task MagnumPeriodicTasks._send_cluster_metrics
 Skip sending cluster metrics _send_cluster_metrics

Remove the code totally as it has basically been a noop for a few
cycles.

Change-Id: Ib9142ab17d562b1d7ccf1409a9e0d934585a094d
"
openstack%2Foslo.privsep~master~I7a4c55228064cb2dd4f4a359cdd81fd288baaf68,openstack/oslo.privsep,master,bug/1995514,I7a4c55228064cb2dd4f4a359cdd81fd288baaf68,Setup logging without fixing evenlet logging,NEW,2022-11-11 09:35:13.000000000,2022-11-11 13:43:56.000000000,,3,2,1,864254,cccc1641be1c833b31772b746bc8e57e94d0c474,4,3,1,2,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Setup logging without fixing evenlet logging

Since [1], ``oslo_log.log.setup`` can be called without applying the
fix for eventlet in native threads [2]. This fix clashes with the
oslo.privsep logging handler that replaces the original one. This
handler is implemented to allow the sync between the daemon process
and the process making the privileged call.

[1]https://review.opendev.org/c/openstack/oslo.log/+/864252
[2]https://review.opendev.org/c/openstack/oslo.log/+/852443

Closes-Bug: #1995514
Related-Bug: #1995091
Change-Id: I7a4c55228064cb2dd4f4a359cdd81fd288baaf68
"
openstack%2Fpython-openstackclient~master~I9c0bd09c50dac568ca1980a6b53a6c544b85c2aa,openstack/python-openstackclient,master,bug_server_list,I9c0bd09c50dac568ca1980a6b53a6c544b85c2aa,Fix server list error with --long and -c options,NEW,2022-10-24 17:23:40.000000000,2022-11-11 13:33:30.000000000,,6,3,8,862513,42a3e7c14cb1783d01e60264ac872bdf1df7d1f9,9,3,1,2,31335,Thobias Trevisan,thobiast,"Fix server list error with --long and -c options

Using options --long and -c and specifying same columns added
by --long option, it passes duplicated column names to prettytable and
report the following error:

Field names must be unique!

This patch removes duplicated columns.

Change-Id: I9c0bd09c50dac568ca1980a6b53a6c544b85c2aa
"
openstack%2Fopenstack-ansible~master~I6119b0bfc27d173610657f39ebb717e0a18b247e,openstack/openstack-ansible,master,,I6119b0bfc27d173610657f39ebb717e0a18b247e,Install dynamic-inventory as console_script,NEW,2022-11-02 17:24:20.000000000,2022-11-11 12:57:21.000000000,,56,2,3,863423,b01174513a1c22b20e9697493ab6f9d0c42416f1,8,2,3,3,28619,Dmitriy Rabotyagov,noonedeadpunk,"Install dynamic-inventory as console_script

If you want to store openstack_deploy content you want it's content
to be relevant. However, at the moment it's quite hard to predict how
inventory will be generated if/when adding some new host to it.

Installing dynamic_inventory script as a console_script will allow you
to create quite simple tox env to update openstack_inventory.json
on local machine right after changing config and simplify life of
operator. Also this way you don't need to clone openstack-ansible

Change-Id: I6119b0bfc27d173610657f39ebb717e0a18b247e
"
openstack%2Ftripleo-heat-templates~master~If834cb6f4dcb5039873573f48a2fd522be8699e2,openstack/tripleo-heat-templates,master,tripleo-pcmk-decouple,If834cb6f4dcb5039873573f48a2fd522be8699e2,Cinder/Manila: Decouple service/pacemaker set up,NEW,2022-06-20 00:30:59.000000000,2022-11-11 12:52:24.000000000,,11,36,8,846534,efaaa88b60690add2a430d8412c819a72e31c62b,15,4,4,3,9816,Takashi Kajinami,kajinamit,"Cinder/Manila: Decouple service/pacemaker set up

This change is a prep work to separate pacemaker manifest and service
manifest in puppet-tripleo.
Currently the pacemaker manifests are used while container puppet run
but these manifests are effectively same as the service manifests
because we do not enable any pacemaker resources in container puppet
run.
Usage of service manifests is just redundant and can cause overhead.
Decoupling service manifest would help us offload the config management
to another tooling (eg. ansible).

Change-Id: If834cb6f4dcb5039873573f48a2fd522be8699e2
"
openstack%2Ftripleo-common~master~I63def768e3a2d43dd73d7ab5ced3a779b7469f65,openstack/tripleo-common,master,drop-python-dev-from-bindep,I63def768e3a2d43dd73d7ab5ced3a779b7469f65,Remove python-dev from bindep,NEW,2022-11-07 10:11:01.000000000,2022-11-11 12:51:41.000000000,,0,1,0,863856,bdf5106c1e0be3c37991b504c18d724fbf8e4f0f,4,5,1,1,28522,Herv√© Beraud,hberaud,"Remove python-dev from bindep

It is no longer supported by jammy and lead us to the following errors with the announce-release job.

```
No package matching 'python-dev' is available
```

Change-Id: I63def768e3a2d43dd73d7ab5ced3a779b7469f65
"
openstack%2Ftripleo-ansible~master~I05f79b5675ceb5d56622001ef94f0a47ffd0bc87,openstack/tripleo-ansible,master,standalone-roles,I05f79b5675ceb5d56622001ef94f0a47ffd0bc87,Default molecule verifier to ansible for podman driver,NEW,2022-09-14 19:43:49.000000000,2022-11-11 12:44:55.000000000,,8,13,1,857763,f797d30b492026e1807bc2492a9af4441ffe1412,8,3,2,6,7144,James Slagle,slagle,"Default molecule verifier to ansible for podman driver

ansible is the default verifier for molecule, however this patch sets it
explicitly for the podman driver for readability.

The login_defs, tripleo_kernel, and tripleo_sshd roles still had their
verifiers set to testinfra in their individual molecule.yml configs.
That resulted in the verify.yml for these roles being ignored and never
executed. That configuration is removed in favor of just inheriting the
config from the base molecule config for the podman driver.

This also updates the _skeleton_role_ to remove the verifier configured
as testinfra.

Note that many other roles still have their verifier set to testinfra,
however they have no ansible tests in a verify.yml or any pytests
defined. These can be cleaned up in a different patch.

Signed-off-by: James Slagle <jslagle@redhat.com>
Change-Id: I05f79b5675ceb5d56622001ef94f0a47ffd0bc87
"
