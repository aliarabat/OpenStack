id,project,branch,topic,change_id,subject,status,created,updated,submitted,insertions,deletions,total_comment_count,number,current_revision,discussion_messages_count,reviewers_count,revisions_count,files_count,owner_account_id,owner_name,owner_username,commit_message
openstack%2Ftripleo-heat-templates~stable%2Ftrain~Id6f612a91255b3158be821c363ca852c6b5d7496,openstack/tripleo-heat-templates,stable/train,,Id6f612a91255b3158be821c363ca852c6b5d7496,Add new parameter PublicTLSCACert,MERGED,2020-06-29 20:44:51.000000000,2020-07-08 03:19:10.000000000,2020-07-08 03:17:35.000000000,15,16,0,738507,889163cd83c80708e96f9f2fb6c63b2af5555604,21,7,1,6,11589,Harry Rybacki,hrybacki,"Add new parameter PublicTLSCACert

We've been using InternalTLSCAFile parameter when enabling
public TLS for undercloud and is quite confusing. We recently
changed to use it in clouds.yaml and it would break when
both public and internal TLS are enabled for overcloud and both
use different CA certs. This adds a new parameter which we
will use in clouds.yaml, that would default to empty string
assuming that the certificates are trusted.

Closes-Bug: #1883818
Change-Id: Id6f612a91255b3158be821c363ca852c6b5d7496
Depends-On: https://review.opendev.org/737998
(cherry picked from commit 2acb0d376b66375ba000369b24fc3354365b2601)
"
openstack%2Fpuppet-tripleo~stable%2Fussuri~I89c848bdae1b997b38a5164302acdcca94619471,openstack/puppet-tripleo,stable/ussuri,ffu-ceph-nfs-stable/ussuri,I89c848bdae1b997b38a5164302acdcca94619471,Add FFU support for ceph_nfs,MERGED,2020-07-07 14:41:06.000000000,2020-07-08 03:17:33.000000000,2020-07-08 03:17:33.000000000,6,1,0,739781,2a34eb1c669120dde05332189f125d3a1586b9fb,11,9,1,1,25402,Francesco Pantano,fmount,"Add FFU support for ceph_nfs

This patch fixes the ceph_nfs upgrade process checking
for the short_name variable definition.
This is required to properly handle the FFU process for
this service.

Change-Id: I89c848bdae1b997b38a5164302acdcca94619471
(cherry picked from commit 4243119d09ff9ee88aea71496753658f9d06d934)
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I84287d9c1ef110511c66743f9a3a22709077b0cb,openstack/tripleo-heat-templates,stable/train,bug/1885619-stable/train,I84287d9c1ef110511c66743f9a3a22709077b0cb,Exclude /etc/hostname,MERGED,2020-07-06 14:14:56.000000000,2020-07-08 03:17:31.000000000,2020-07-08 03:17:31.000000000,11,2,0,739497,39945d5630c0d83a8b7fafd6b45e945c3e89c800,15,6,2,1,3153,Emilien Macchi,emilienm,"Exclude /etc/hostname

Similar to the previous patch where we excluded /etc/hosts, it turns out
that /etc/hostname is also a special file that cannot be synced in via
kolla because they are bindmounted internally.

https://github.com/containers/libpod/blob/6ac009d5304127f6758be157c7302646e5a481e5/libpod/container_internal_linux.go#L1236

Additionally this change includes cleanup for end users who may have hit
LP#1860607 and allows folks who have hit this to just simply rerun the
deployment and not have to manually cleanup the synced files.

Change-Id: I84287d9c1ef110511c66743f9a3a22709077b0cb
Closes-Bug: #1885619
(cherry picked from commit 777920dfba58fa7b26c063fa5d6df0203009d12c)
"
openstack%2Ftripleo-ci~master~I5f4a771ebdbb9b2496e9534624a48f38dc87c98f,openstack/tripleo-ci,master,1884922,I5f4a771ebdbb9b2496e9534624a48f38dc87c98f,Trigger standalone ipa job on changes to puppet rabbitmq,MERGED,2020-07-02 19:14:22.000000000,2020-07-08 02:25:28.000000000,2020-07-08 02:25:27.000000000,2,0,1,739133,c3dbd8b6f7a68dcb2dc633986d8ce84f083403d5,15,5,2,1,9592,wes hayutin,weshayutin,"Trigger standalone ipa job on changes to puppet rabbitmq

The multinode-IPA jobs broke due to changes in
https://review.opendev.org/#/c/739133.
See comments in: 
https://bugs.launchpad.net/tripleo/+bug/1886068.

This review adds the multinode-IPA job to
trigger on changes to puppet rabbitmq that
could impact TLS internal used in the IPA job.

Related-Bug: #1884922
Change-Id: I5f4a771ebdbb9b2496e9534624a48f38dc87c98f
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I2670840c9beac06f8b8ffc6eaecc88b9119ad298,openstack/tripleo-heat-templates,stable/train,collaps/host/train,I2670840c9beac06f8b8ffc6eaecc88b9119ad298,Collapse host prep tasks,MERGED,2020-07-06 16:03:02.000000000,2020-07-08 02:25:25.000000000,2020-07-08 02:25:25.000000000,14,10,0,739528,4f3597daf91409d1c287a271d452bb148e50d42a,11,5,2,1,3153,Emilien Macchi,emilienm,"Collapse host prep tasks

Since plays cannot be parallelized with a free-like strategy, we should
have a single play that runs all host prep tasks rather than blocks of
plays for each defined role. By switching to this method we have a
single play that handles the host prep tasks concept that can be run all
at once across a cloud.

Change-Id: I2670840c9beac06f8b8ffc6eaecc88b9119ad298
(cherry picked from commit 3ef8f6008d41a88642d66a6a24c67210f773f87e)
"
openstack%2Ftripleo-ansible~master~I3d38d406e9f63008f7060f31cc9ff378e97120bb,openstack/tripleo-ansible,master,739415,I3d38d406e9f63008f7060f31cc9ff378e97120bb,Login with buildah too to allow registry access with buildah,MERGED,2020-07-06 06:54:02.000000000,2020-07-08 01:49:26.000000000,2020-07-08 00:36:25.000000000,17,1,0,739415,067a315df92248f83103e5b4b7ec8424c9b5d6a9,22,7,3,2,13861,yatin,yatinkarel,"Login with buildah too to allow registry access with buildah

buildah login and podman login with root do not share same
authfile, buildah uses /run/containers/0/auth.json while
podman uses /run/user/0/containers/auth.json resulted from
$XDG_RUNTIME_DIR.

To ensure both podman and buildah can access the configured
registry, run login command with both.

It's mainly needed as container images are being pushed
with tripleoclient using sudo buildah push and buildah creds
are not setup.

Related-Bug: #1886555
Change-Id: I3d38d406e9f63008f7060f31cc9ff378e97120bb
"
openstack%2Fmanila~master~If91c651437e3f0701f025cf5d62064387d6d71f1,openstack/manila,master,bp/update-cephfs-drivers,If91c651437e3f0701f025cf5d62064387d6d71f1,TrivialFix: Correct cephfs support release note,MERGED,2020-07-07 17:22:51.000000000,2020-07-08 01:45:51.000000000,2020-07-07 17:58:38.000000000,1,1,0,739823,03cb8a39efb998b12dfc26ec319c4a268624c134,12,5,1,1,16643,Goutham Pacha Ravi,gouthamr,"TrivialFix: Correct cephfs support release note

Change-Id: If91c651437e3f0701f025cf5d62064387d6d71f1
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
"
openstack%2Fmanila~master~Id847b1b5e6623172f2600afd69e51182067444cb,openstack/manila,master,bp/update-cephfs-drivers,Id847b1b5e6623172f2600afd69e51182067444cb,Add Ceph support statement,MERGED,2020-06-18 18:11:24.000000000,2020-07-08 01:31:17.000000000,2020-07-07 17:17:16.000000000,143,150,18,736793,524ad986e33e6b75cba76b1790dd031565ba1225,38,10,5,2,16643,Goutham Pacha Ravi,gouthamr,"Add Ceph support statement

The manila discussed cephfs futures
during the Victoria cycle PTG [1]. To support newer
features in ceph, we'll need to start using the
ceph-mgr interface that debuted in Nautilus.

When we start adopting ceph-mgr, we can no longer
support Mimic, Luminous and older releases of Ceph
without maintaining code workarounds and a continuous
integration system to ensure they're not broken.
This takes considerable effort from community members.

We've supported the Luminous release since OpenStack
Queens, and there have been at least
three other major releases of Ceph in the meantime,
let's add a release note and adjust the ceph driver
documentation calling out our support/testing stance.

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-June/015494.html

Partially-implements: bp update-cephfs-drivers
Change-Id: Id847b1b5e6623172f2600afd69e51182067444cb
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
"
openstack%2Fneutron~stable%2Frocky~I51050c600ba7090fea71213687d94340bac0674a,openstack/neutron,stable/rocky,bug/1869808,I51050c600ba7090fea71213687d94340bac0674a,Do not block connection between br-int and br-phys on startup,MERGED,2020-06-29 21:00:24.000000000,2020-07-08 00:30:48.000000000,2020-07-08 00:30:48.000000000,10,3,0,738511,cc48edf85cf66277423b0eb52ae6353f8028d2a6,17,8,2,1,11975,Slawek Kaplonski,slaweq,"Do not block connection between br-int and br-phys on startup

Block traffic between br-int and br-physical is over kill
and will at least

1. interrupt vlan flow during startup, and is particularly
so if dvr enabled
2. if let's rabbitmq is not stable, it is possible data plane
will be affected and vlan will never work.

Using openstack on k8s particularly amplifies the problem
because pod could be killed pretty easily by liveness
probes.

Conflicts:
    neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py

Change-Id: I51050c600ba7090fea71213687d94340bac0674a
Closes-Bug: #1869808
(cherry picked from commit 90212b12cdf62e92d811997ebba699cab431d696)
"
openstack%2Fneutron~stable%2Frocky~I231e624f460510decc6d2237040c8bef207e2e8e,openstack/neutron,stable/rocky,improve-ovs-agent-logging-stable/ussuri-stable/train-stable/stein-stable/rocky,I231e624f460510decc6d2237040c8bef207e2e8e,Improve log message when port losts its vlan tag,MERGED,2020-07-01 07:15:03.000000000,2020-07-08 00:29:47.000000000,2020-07-08 00:29:47.000000000,4,2,0,738743,9e13f518ea784a882b157b9b6fd8b2496ad43c65,21,6,3,1,11975,Slawek Kaplonski,slaweq,"Improve log message when port losts its vlan tag

In some cases it may be useful to log new vlan tag which is found
on the port when it losts old vlan tag which should is expected to
be there.
So this patch adds such value to the log message.

TrivialFix

Depends-On: https://review.opendev.org/735615
Change-Id: I231e624f460510decc6d2237040c8bef207e2e8e
(cherry picked from commit 3ac63422eaebf6edfd581571406266a07a85b883)
"
openstack%2Fneutron~stable%2Fqueens~I12f4030a35d10d1715d3b4bfb3ed5efb9aa28f2b,openstack/neutron,stable/queens,bug/1840136-stable/queens,I12f4030a35d10d1715d3b4bfb3ed5efb9aa28f2b,"Add ""igmp_snooping_enable"" config option for OVS agent",MERGED,2020-06-12 15:03:47.000000000,2020-07-08 00:26:07.000000000,2020-07-08 00:23:10.000000000,66,5,0,735356,794a29a2d2afe2a77de3a32e5739d1545d394142,19,8,1,7,13995,Nate Johnston,natejohnston,"Add ""igmp_snooping_enable"" config option for OVS agent

Neutron-ovs-agent can now enable IGMP snooping in integration bridge
if config option ""igmp_snooping_enable"" in OVS section in config will
be set to True.
It will also set mcast-snooping-disable-flood-unregistered=true
so flooding of multicast packets to all unregistered ports will be
disabled also.
Both changes are applied on integration bridge.

Change-Id: I12f4030a35d10d1715d3b4bfb3ed5efb9aa28f2b
Closes-Bug: #1840136
(cherry picked from commit 5b341150e29137e3dab671453a9a6c0908e74585)
"
openstack%2Fneutron~stable%2Fqueens~I231e624f460510decc6d2237040c8bef207e2e8e,openstack/neutron,stable/queens,improve-ovs-agent-logging-stable/ussuri-stable/train-stable/stein-stable/rocky-stable/queens,I231e624f460510decc6d2237040c8bef207e2e8e,Improve log message when port losts its vlan tag,MERGED,2020-07-01 07:15:13.000000000,2020-07-08 00:23:17.000000000,2020-07-08 00:23:17.000000000,4,2,0,738744,0ee2fc0e15621461cd0f342e8eb43bf633c8ab42,14,5,2,1,11975,Slawek Kaplonski,slaweq,"Improve log message when port losts its vlan tag

In some cases it may be useful to log new vlan tag which is found
on the port when it losts old vlan tag which should is expected to
be there.
So this patch adds such value to the log message.

TrivialFix

Change-Id: I231e624f460510decc6d2237040c8bef207e2e8e
(cherry picked from commit 3ac63422eaebf6edfd581571406266a07a85b883)
"
openstack%2Fneutron~stable%2Fqueens~I51050c600ba7090fea71213687d94340bac0674a,openstack/neutron,stable/queens,bug/1869808-stable/queens,I51050c600ba7090fea71213687d94340bac0674a,Do not block connection between br-int and br-phys on startup,MERGED,2020-06-29 21:00:53.000000000,2020-07-08 00:23:14.000000000,2020-07-08 00:23:14.000000000,10,3,0,738512,131bbc9a53411033cf27664d8f1fd7afc72c57bf,15,6,2,1,11975,Slawek Kaplonski,slaweq,"Do not block connection between br-int and br-phys on startup

Block traffic between br-int and br-physical is over kill
and will at least

1. interrupt vlan flow during startup, and is particularly
so if dvr enabled
2. if let's rabbitmq is not stable, it is possible data plane
will be affected and vlan will never work.

Using openstack on k8s particularly amplifies the problem
because pod could be killed pretty easily by liveness
probes.

Conflicts:
    neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py

Change-Id: I51050c600ba7090fea71213687d94340bac0674a
Closes-Bug: #1869808
(cherry picked from commit 90212b12cdf62e92d811997ebba699cab431d696)
"
openstack%2Fopenstack-helm-infra~master~I26882956f96c961b6202b1004b8cf0faee6e73eb,openstack/openstack-helm-infra,master,,I26882956f96c961b6202b1004b8cf0faee6e73eb,MariaDB backup and restore with grants of all users,MERGED,2020-07-03 17:54:07.000000000,2020-07-07 23:48:39.000000000,2020-07-07 23:46:48.000000000,28,18,3,739268,a23a60921ab7546a1475cedd10a4d03148ef142b,50,12,10,2,18236,Sophie Huang,SophieHuang,"MariaDB backup and restore with grants of all users

This patchset captures the grants of all the MariaDB users
in the backup tarball and restores the grants during the
all databases restore.
Percona tool pt-show-grants is installed to the image to
accomplish the task in this PS:
https://review.opendev.org/#/c/739149/

Change-Id: I26882956f96c961b6202b1004b8cf0faee6e73eb
"
openstack%2Fovsdbapp~master~I22965ef38c1e0bfdfa79389a265bac12cafcc28b,openstack/ovsdbapp,master,,I22965ef38c1e0bfdfa79389a265bac12cafcc28b,Handle index lookups in DbFindCommand,MERGED,2020-05-27 02:44:01.000000000,2020-07-07 23:37:52.000000000,2020-07-07 23:34:23.000000000,148,16,5,731019,409e8a44f250874f8e0e43ec9cfecc37eccf4cff,23,6,5,3,5756,Terry Wilson,otherwiseguy,"Handle index lookups in DbFindCommand

This adds index lookup support to DbFindCommand. If multiple
conditions are passed that match different indexes, it will use
the intersection of the results to limit the search space.

Still needed would be support for multi-column indexes which we
currently don't use anywhere. At some point it starts looking like
a query optimizer.
Change-Id: I22965ef38c1e0bfdfa79389a265bac12cafcc28b
"
openstack%2Fneutron-lib~master~I7e683f52f47bbb7ce7c598c98332c5dbb5d97643,openstack/neutron-lib,master,retire-neutron-fwaas,I7e683f52f47bbb7ce7c598c98332c5dbb5d97643,[FWaaS] Add note about deprecation of the neutron-fwaas project,MERGED,2020-07-06 09:37:29.000000000,2020-07-07 23:14:42.000000000,2020-07-07 23:12:30.000000000,9,0,10,739441,3d6e16de32a41737e620802a888027ab2a949197,12,8,2,1,11975,Slawek Kaplonski,slaweq,"[FWaaS] Add note about deprecation of the neutron-fwaas project

As we agreed in the drivers team, we will keep FWaaS API ref as official
API in the neutron-lib but we will not have any official implementation
of this API.
This patch adds such information to the FWaaS API ref document.

Change-Id: I7e683f52f47bbb7ce7c598c98332c5dbb5d97643
"
openstack%2Fopenstack-helm-infra~master~Ie53b3407dbd7345d37c92c60a04f3badf735f6a6,openstack/openstack-helm-infra,master,,Ie53b3407dbd7345d37c92c60a04f3badf735f6a6,Fix service account name for ceph-mon keyring generator,MERGED,2020-07-07 20:09:52.000000000,2020-07-07 22:42:28.000000000,2020-07-07 22:40:34.000000000,2,2,0,739845,41f02d3c986b844e1e386e1cd83941c7c3dbbf06,11,7,1,1,8863,Andrii Ostapenko,aostapenko,"Fix service account name for ceph-mon keyring generator

Fix issues introduced by https://review.opendev.org/#/c/735648
with extra 'ceph-' in service_account and security context not
rendered for keyring generator containers.

Change-Id: Ie53b3407dbd7345d37c92c60a04f3badf735f6a6
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
"
openstack%2Fironic-inspector~stable%2Fussuri~I131c8189b25ee2de66f08c742a21052ef1b266aa,openstack/ironic-inspector,stable/ussuri,node-id-stable/ussuri,I131c8189b25ee2de66f08c742a21052ef1b266aa,Use node.id instead of node.uuid in record_node,MERGED,2020-07-07 16:46:06.000000000,2020-07-07 22:19:38.000000000,2020-07-07 22:17:29.000000000,8,3,0,739813,4cb904fb13ec7d1aebaefd84d64a59da9331b9c9,11,4,1,3,10239,Dmitry Tantsur,dtantsur,"Use node.id instead of node.uuid in record_node

This function does not have a compatibility shim that adds 'uuid'.

Change-Id: I131c8189b25ee2de66f08c742a21052ef1b266aa
(cherry picked from commit 06390e372384d15448c5ed10f77d93faa494816a)
"
openstack%2Ftripleo-quickstart~master~I33452873c829d36fba1bbb49e28efbc4d325ea25,openstack/tripleo-quickstart,master,dlrn_hash_tag,I33452873c829d36fba1bbb49e28efbc4d325ea25,Fix delorean.repo url for centos-8 master,ABANDONED,2020-03-19 20:52:59.000000000,2020-07-07 22:16:44.000000000,,1,1,4,713979,ef430556b0c34f5265e5b1ea7285c390626754d4,28,7,6,1,4571,Steve Baker,steve-stevebaker,"Fix delorean.repo url for centos-8 master

dlrn_has_path has the 12/34/12345... format needed for the new
component based repos[1]

https://trunk.rdoproject.org/centos8-master/current-tripleo/

Change-Id: I33452873c829d36fba1bbb49e28efbc4d325ea25
"
openstack%2Fopenstack-ansible-os_neutron~master~I5958eaa7095013b7ed9b7aeb090a0535edc455ec,openstack/openstack-ansible-os_neutron,master,osa/el8,I5958eaa7095013b7ed9b7aeb090a0535edc455ec,Add centos-8 support,MERGED,2020-07-02 12:15:48.000000000,2020-07-07 21:43:27.000000000,2020-07-07 19:03:43.000000000,2,2,0,739026,4859a9ab179839398133fe6cd92da0bd75eb0e39,15,5,2,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add centos-8 support

Depends-On: https://review.opendev.org/739479
Change-Id: I5958eaa7095013b7ed9b7aeb090a0535edc455ec
"
openstack%2Fneutron~stable%2Fqueens~I299031a505f05cd0469e2476b867b9dbca59c5bf,openstack/neutron,stable/queens,1840579-stable/stein-stable/rocky-stable/queens,I299031a505f05cd0469e2476b867b9dbca59c5bf,Unnecessary routers should not be created,MERGED,2020-05-29 14:14:29.000000000,2020-07-07 21:39:43.000000000,2020-07-07 21:39:43.000000000,47,2,0,731763,7b36eefd1d63c24d25ae6387a88b00600730447e,17,6,2,2,11975,Slawek Kaplonski,slaweq,"Unnecessary routers should not be created

We observe an excessive amount of routers created on
compute node on which some virtual machines got a fixed
ip on floating network.

Rpc servers should filter out those unnecessary routers
during syncing.

Conflicts:
    neutron/tests/unit/db/test_agentschedulers_db.py

Change-Id: I299031a505f05cd0469e2476b867b9dbca59c5bf
Partial-Bug: #1840579
(cherry picked from commit 480b04ce04f98bae6ff4ab13cec9e01b34204134)
"
openstack%2Fpuppet-tripleo~stable%2Fussuri~I623c711921cf7fe52f15cc1ba4a1dafb3c9479b7,openstack/puppet-tripleo,stable/ussuri,bug/1884415-stable/ussuri,I623c711921cf7fe52f15cc1ba4a1dafb3c9479b7,Enable to modify params of logrotate-crond.conf,MERGED,2020-07-02 16:18:53.000000000,2020-07-07 21:36:32.000000000,2020-07-07 21:36:32.000000000,13,1,0,739090,7097c48b117c17125987b1b99a56170747004713,26,5,3,2,14985,Alex Schultz,mwhahaha,"Enable to modify params of logrotate-crond.conf

Parameters ""minsize"" and ""notifempty"" of /etc/logrotate-crond.conf
in the container logrotate_crond should be changeable even if this
doesn't	comply with GDPR. This is because there might be users who
don't want to comply with it for some reason such as their internal
rule, testing purpose, etc.

This patch adds the following Puppet hieradata.

tripleo::profile::base::logging::logrotate::minsize (default: 1)
tripleo::profile::base::logging::logrotate::notifempty (default: True)

Change-Id: I623c711921cf7fe52f15cc1ba4a1dafb3c9479b7
Closes-Bug: #1884415
(cherry picked from commit f6f878d4b36540ecc8b99552d3f5d14d92d509df)
"
openstack%2Fironic~master~I51a31204ddef83fe36a55631f1a81bff346d176b,openstack/ironic,master,items-to-count,I51a31204ddef83fe36a55631f1a81bff346d176b,"Use assertCountEqual instead of assertItemsEqual, part 2",MERGED,2020-07-07 14:33:43.000000000,2020-07-07 21:35:50.000000000,2020-07-07 17:56:16.000000000,4,4,0,739776,c85a33d650066827836257461da764c08a964226,11,5,1,1,23851,Riccardo Pittau,elfosardo,"Use assertCountEqual instead of assertItemsEqual, part 2

Follow up of https://review.opendev.org/735127

The assertItemsEqual method has been removed in Python 3.3 [1] but
it was kept alive by unittest2, imported by testtools.
To prevent mayhem and despair caused by testtools removing unittest2
from its requirements in the near future, we switch to assertCountEqual.

For an unknown reason, some asserts were forgotten, this patch fixes
them all, for real, I swear.

[1] https://bugs.python.org/issue17866

Change-Id: I51a31204ddef83fe36a55631f1a81bff346d176b
"
openstack%2Fneutron~stable%2Fqueens~I7c7c8a4c371d6f4afdaab51ed50950e2b20db30f,openstack/neutron,stable/queens,bug/1864822-stable/queens,I7c7c8a4c371d6f4afdaab51ed50950e2b20db30f,Ensure that stale flows are cleaned from phys_bridges,MERGED,2020-06-03 09:47:32.000000000,2020-07-07 21:33:17.000000000,2020-07-07 21:33:17.000000000,12,3,0,733082,2baf0aa83f551b5c88caad64da837630b9daea46,25,6,3,1,11975,Slawek Kaplonski,slaweq,"Ensure that stale flows are cleaned from phys_bridges

In case when neutron-ovs-agent will notice that any of physical
bridges was ""re-created"", we should also ensure that stale Open
Flow rules (with old cookie id) are cleaned.
This patch is doing exactly that.

Conflicts:
    neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py

Change-Id: I7c7c8a4c371d6f4afdaab51ed50950e2b20db30f
Related-Bug: #1864822
(cherry picked from commit 63c45b37666efc7fb33fc154fa828050b3dc7945)
"
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I182f8c5a8ce283b675aa18712e84fcd692200eb1,openstack/tripleo-heat-templates,stable/ussuri,bug/1886095-stable/ussuri,I182f8c5a8ce283b675aa18712e84fcd692200eb1,Fix default BlockStorageCinderVolume template,MERGED,2020-07-07 10:27:41.000000000,2020-07-07 21:23:18.000000000,2020-07-07 21:23:18.000000000,2,1,0,739700,4465977d9f36cc5e7db9eec187af399d94db4d8b,9,5,1,1,6796,Giulio Fidente,gfidente,"Fix default BlockStorageCinderVolume template

The BlockStorageCinderVolume tripleo service (used by the BlockStorage
and DistributedComputeHCI roles) is meant to deploy the cinder-volume
service without pacemaker. Unfortunately, [1] inadvertently switched
it to the pcmk version of the template, and this patch moves it back.

[1] I0f61016df6a9f07971c5eab51cc9674a1458c66f

Closes-Bug: #1886095
Change-Id: I182f8c5a8ce283b675aa18712e84fcd692200eb1
(cherry picked from commit bff0c6cfa1226836569ea016a71284e127c04b2c)
"
openstack%2Fironic~master~I183133da0b12352a72206f048e5f4167a25e1f5c,openstack/ironic,master,missing_print,I183133da0b12352a72206f048e5f4167a25e1f5c,Fix missing print format in log message,MERGED,2020-07-07 07:19:11.000000000,2020-07-07 21:14:29.000000000,2020-07-07 21:05:43.000000000,1,2,0,739667,af897bc8287afe9a5c2350e37d191a13530b1f99,18,7,1,1,20190,zhufl,zhufl,"Fix missing print format in log message

This is to fix the missing print format issue in log message.

Change-Id: I183133da0b12352a72206f048e5f4167a25e1f5c
"
openstack%2Fos-brick~master~I7767abc2ed4317288303fc9a2235e869f46a63b0,openstack/os-brick,master,,I7767abc2ed4317288303fc9a2235e869f46a63b0,Switch from unittest2 compat methods to Python 3.x methods,MERGED,2020-06-23 12:14:58.000000000,2020-07-07 21:00:55.000000000,2020-07-07 20:58:16.000000000,4,4,0,737509,188cbed3134a7fa0b4955fc5614bb5273f295a62,24,13,1,4,6593,Dirk Mueller,dmllr,"Switch from unittest2 compat methods to Python 3.x methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277

Change-Id: I7767abc2ed4317288303fc9a2235e869f46a63b0
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0,openstack/tripleo-ansible,stable/ussuri,bug/1884816,I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0,Make tripleo_ceph_run_ansible handle change in remote_tmp,MERGED,2020-06-24 12:31:45.000000000,2020-07-07 21:00:16.000000000,2020-07-07 21:00:16.000000000,69,1,1,737759,91f22bd56f8d829092850562701a2cf019b53512,44,7,3,2,18002,John Fulton,fultonj,"Make tripleo_ceph_run_ansible handle change in remote_tmp

Ansible's remote_tmp module changed in 2.9.10 [1] causing
the reported bug this patch addresses. The error from the
module suggests creating the remote_tmp dir with the correct
permissions. This patch does that within external_deploy_steps
by having tripleo-ansible create the remote_tmp dir accordingly
before running ceph-ansible (which uses that remote_tmp dir).

[1] https://github.com/ansible/ansible/issues/68218

Change-Id: I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0
Closes-Bug: #1884816
(cherry picked from commit 1b440db7f69b1f0e69016ed5a409e84b6fab1f9d)
"
openstack%2Fironic~master~I9b2d0eb417211b01ae36c461b19652ff9db7d658,openstack/ironic,master,story/2002063/command-error,I9b2d0eb417211b01ae36c461b19652ff9db7d658,Do not put the whole JSON error from the agent in last_error,MERGED,2020-07-06 09:31:05.000000000,2020-07-07 20:58:58.000000000,2020-07-07 20:50:16.000000000,26,8,0,739439,b41bace326496770b1b22af864045782102f6f25,23,7,1,3,10239,Dmitry Tantsur,dtantsur,"Do not put the whole JSON error from the agent in last_error

It's usually enough to provide only command[command_error][details],
but this patch also places some safeguards for abnormal responses.

Also fixes error detection for TypeError (we don't have faultstatus
when we have command_error).

Change-Id: I9b2d0eb417211b01ae36c461b19652ff9db7d658
Story: #2002063
Task: #19716
"
openstack%2Freleases~master~Iffe7fe3216256ddb52001e4fcfa49cc3ea82d6e8,openstack/releases,master,new_release_help,Iffe7fe3216256ddb52001e4fcfa49cc3ea82d6e8,Fix tox command in tool help,MERGED,2020-07-07 15:40:41.000000000,2020-07-07 20:31:54.000000000,2020-07-07 20:31:54.000000000,4,4,0,739801,339af5321ac03580bc1288fab7d010693b65ed00,6,2,1,1,28522,Hervé Beraud,hberaud,"Fix tox command in tool help

Also prefer to use retrive command name dynamically.

Change-Id: Iffe7fe3216256ddb52001e4fcfa49cc3ea82d6e8
"
openstack%2Fproject-config~master~I9c2b4fdbc48d5cbcb026a362ed49bd65b0afe09f,openstack/project-config,master,review-difficulty,I9c2b4fdbc48d5cbcb026a362ed49bd65b0afe09f,Propose Review-Difficulty label for Kayobe,ABANDONED,2020-06-03 17:15:24.000000000,2020-07-07 19:55:37.000000000,,13,0,2,733283,acab213f741e5968f4ee638581531b2871020196,10,7,2,2,15197,Pierre Riteau,priteau,"Propose Review-Difficulty label for Kayobe

When very limited time is available for reviews, it can be difficult to
choose from a long list of open changes. I would like to propose the
Review-Difficulty label (initially for Kayobe), to flag easy or trivial
changes that can be reviewed in a few minutes or seconds.

The goal is to make our review queue shorter by focusing core reviewers
when they have very limited time available. Of course Review-Priority
should take precedence when more time is available for reviews.

Change-Id: I9c2b4fdbc48d5cbcb026a362ed49bd65b0afe09f
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I24b118220ce2371f651cad6b8dfbbf5d031ee118,openstack/tripleo-ansible,stable/train,hieradata/perm,I24b118220ce2371f651cad6b8dfbbf5d031ee118,Fix tripleo_hierdata permissions,MERGED,2020-07-06 16:20:35.000000000,2020-07-07 19:53:04.000000000,2020-07-07 19:53:04.000000000,5,0,0,739541,d1e80761c48c86897d4d023488af3c81e2666f87,11,5,2,3,3153,Emilien Macchi,emilienm,"Fix tripleo_hierdata permissions

Add become: true to the tasks that need to be able to write to /etc/

Change-Id: I24b118220ce2371f651cad6b8dfbbf5d031ee118
Related-Bug: #1883609
(cherry picked from commit c8d8e9adaf62f1b3e6a274fbb5ec17dae4dc8449)
"
openstack%2Fpuppet-tripleo~stable%2Fussuri~I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8,openstack/puppet-tripleo,stable/ussuri,,I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8,Switch RGW HAProxy healthcheck to use special RGW healthcheck url,MERGED,2020-07-07 08:31:40.000000000,2020-07-07 19:28:49.000000000,2020-07-07 19:28:49.000000000,1,1,0,739676,fe64cf37a17cc2d61bdd4f8a77fdbcca37085803,7,3,1,1,6796,Giulio Fidente,gfidente,"Switch RGW HAProxy healthcheck to use special RGW healthcheck url

The change is made because /swift/healthcheck weights less on RGW
and avoids overloading the nodes CPU for basic HAProxy checks

For more information also see [1]

1. https://bugzilla.redhat.com/show_bug.cgi?id=1850036#c16

Change-Id: I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8
(cherry picked from commit f1994dba33e09033f3a142ef202c6b0afe322b94)
"
openstack%2Fos-brick~master~If1a8caa006efb19e58a3dc3262a305d15d35a6a5,openstack/os-brick,master,unittest2,If1a8caa006efb19e58a3dc3262a305d15d35a6a5,Switch from unittest2 compat methods to py3 methods,ABANDONED,2020-07-07 19:21:18.000000000,2020-07-07 19:23:46.000000000,,4,4,0,739834,eb8a8c4b75cbdcea3c800119c4d46c494b72be4a,2,0,1,4,11904,Sean McGinnis,SeanM,"Switch from unittest2 compat methods to py3 methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277

Change-Id: If1a8caa006efb19e58a3dc3262a305d15d35a6a5
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
"
openstack%2Fpuppet-tripleo~stable%2Ftrain~I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8,openstack/puppet-tripleo,stable/train,,I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8,Switch RGW HAProxy healthcheck to use special RGW healthcheck url,MERGED,2020-07-07 08:33:55.000000000,2020-07-07 19:22:05.000000000,2020-07-07 19:22:05.000000000,1,1,0,739677,77da001cd4b8ce0fd9d9bf57d4ddfb701414c29a,7,3,1,1,6796,Giulio Fidente,gfidente,"Switch RGW HAProxy healthcheck to use special RGW healthcheck url

The change is made because /swift/healthcheck weights less on RGW
and avoids overloading the nodes CPU for basic HAProxy checks

For more information also see [1]

1. https://bugzilla.redhat.com/show_bug.cgi?id=1850036#c16

Change-Id: I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8
(cherry picked from commit f1994dba33e09033f3a142ef202c6b0afe322b94)
(cherry picked from commit fe64cf37a17cc2d61bdd4f8a77fdbcca37085803)
"
openstack%2Fkeystone~master~I33d37366ea9caf320f3738db637dea7386ff6448,openstack/keystone,master,,I33d37366ea9caf320f3738db637dea7386ff6448,Add an enhanced debug configuration technique to caching guide,MERGED,2020-06-29 14:51:54.000000000,2020-07-07 19:21:01.000000000,2020-07-07 19:16:37.000000000,20,0,0,738459,63e1181294dc9b68761ffd57c25245743a83f1a9,10,6,1,1,5046,Lance Bragstad,ldbragst,"Add an enhanced debug configuration technique to caching guide

We often have operators ask why cache logging isn't included in their
logs despite setting `keystone.conf [DEFAULT] debug=True`. This is
because cache logging requires additional configuration that isn't
obvious unless your familiar with oslo.cache and dogpile already.

This commit adds a section to the caching guide that shows people how to
update their configuration files when they need to debug caching issues.

Change-Id: I33d37366ea9caf320f3738db637dea7386ff6448
"
openstack%2Fkeystone~master~If288c3406e2fa840f698fec83d9643cfc0584f53,openstack/keystone,master,bug/1884062,If288c3406e2fa840f698fec83d9643cfc0584f53,"Add ""explicit_domain_id"" to api-ref",MERGED,2020-06-22 09:52:06.000000000,2020-07-07 19:19:20.000000000,2020-07-07 19:16:34.000000000,10,0,4,737248,ee9be2e92b3de25f82298f21b9b1d559613e1960,15,6,2,2,27621,Vishakha Agarwal,Vishakha,"Add ""explicit_domain_id"" to api-ref

In [1] a new parameter to domain API was added. This patch
updates the api-ref about the same.

[1] https://review.opendev.org/#/c/605235/

Change-Id: If288c3406e2fa840f698fec83d9643cfc0584f53
Closes-Bug: #1884062
"
openstack%2Fdevstack~master~I4b18a0a388ed7e7a392fabeac613778e0d23dee7,openstack/devstack,master,no-v1-api,I4b18a0a388ed7e7a392fabeac613778e0d23dee7,Remove GLANCE_V1_ENABLED option,MERGED,2019-12-12 21:20:10.000000000,2020-07-07 19:19:17.000000000,2020-07-07 19:16:32.000000000,0,16,2,698808,ee5cf747d8826b9f9dbf565a7a9ba2c1e25f068a,27,6,2,3,5314,Brian Rosmaita,brian-rosmaita,"Remove GLANCE_V1_ENABLED option

This option sets enable_v1_api in glance-api.conf, a setting that
was removed by change Ia086230cc8c92f7b7dfd5b001923110d5bc55d4d
in July 2018, so remove the devstack option from lib/glance.

It occurs in two other places:

This option is used in lib/cinder to set an option that was removed
from Cinder by change Ice379db9ae83420bacf9e96e242c7515930eae86 in
Queens, so remove the related code.

When this option is False, it is used in lib/tempest to set
[image-feature-enabled]/api_v1 to False in the tempest config file.
However, the default value of ths setting has been False since
change Iab3a209c744375bf2618afc00a3f7731b62f557e in Sept 2018,
so remove the related code.

Change-Id: I4b18a0a388ed7e7a392fabeac613778e0d23dee7
"
openstack%2Fneutron~master~I8cbd2ca14a442037b671ba13f6e07de26d31c48a,openstack/neutron,master,port-groups-removal,I8cbd2ca14a442037b671ba13f6e07de26d31c48a,ovn: Add TODO to remove Port Groups migration,MERGED,2020-06-10 13:49:33.000000000,2020-07-07 19:19:02.000000000,2020-07-07 19:16:29.000000000,2,0,0,734845,b9c428a2dbfd9a44f62fa8b88014399e11fdbb8c,20,9,1,1,8655,Jakub Libosvar,jlibosva,"ovn: Add TODO to remove Port Groups migration

Change-Id: I8cbd2ca14a442037b671ba13f6e07de26d31c48a
Signed-off-by: Jakub Libosvar <libosvar@redhat.com>
"
openstack%2Ftripleo-common~stable%2Fussuri~I397f8d641504ac2ceed36fa975cf97fac5bbb81a,openstack/tripleo-common,stable/ussuri,,I397f8d641504ac2ceed36fa975cf97fac5bbb81a,Catch exception if servers are in error state with no bm_node attached,MERGED,2020-07-07 10:38:08.000000000,2020-07-07 19:15:58.000000000,2020-07-07 19:13:58.000000000,71,4,0,739701,b11292adcc410725f3cfdd546775e5ecbdf59199,8,3,1,2,30126,Luca Miccini,lmiccini2,"Catch exception if servers are in error state with no bm_node attached

There have been reports (rhbz#1851507) where generating the fencing
parameters fails because of one or more servers in error state, like
when a scale out operation doesn't go as planned.

This commit wraps get_by_instance_uuid in a try/except block to prevent
this from happening, skipping the node in error state and allowing
users to still get a valid fencing config for the remaining servers.

Change-Id: I397f8d641504ac2ceed36fa975cf97fac5bbb81a
(cherry picked from commit 7d2c25319b10daad3d3ef6ba2ff656b10b716beb)
"
openstack%2Fpython-tripleoclient~master~I19fbdebe406575d2567f98a322ff68e6e992fac7,openstack/python-tripleoclient,master,,I19fbdebe406575d2567f98a322ff68e6e992fac7,Stop to use the __future__ module.,MERGED,2020-06-20 16:01:47.000000000,2020-07-07 18:54:24.000000000,2020-07-07 18:52:12.000000000,0,22,0,737140,9d16152e3932b2c5191e71c16d1dd603200e7414,10,5,1,16,30356,gugug,gujin,"Stop to use the __future__ module.

The __future__ module [1] was used in this context to ensure compatibility
between python 2 and python 3.

We previously dropped the support of python 2.7 and now we only support
python 3 so we don't need to continue to use this module and the imports
listed below.

Change-Id: I19fbdebe406575d2567f98a322ff68e6e992fac7
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~I9c245dbc258c9714bb5a581d6d4d23b42cf53198,openstack/python-tripleoclient,stable/ussuri,,I9c245dbc258c9714bb5a581d6d4d23b42cf53198,Add CLI options for introspection command,MERGED,2020-07-06 08:24:07.000000000,2020-07-07 18:53:52.000000000,2020-07-07 18:52:13.000000000,65,10,0,739427,f45b95fa57888195479e5ca7e3b4afb4bd61d8e8,10,6,1,5,10969,Shnaidman Sagi (Sergey),sergsh,"Add CLI options for introspection command

--node-timeout - Maximum timeout for node introspection
--max-retries - Maximum introspection retries
--retry-timeout - Maximum timeout between introspection retries

Change-Id: I9c245dbc258c9714bb5a581d6d4d23b42cf53198
(cherry picked from commit c9d057651e32ee81fd8e315e35dfe17d4d1e95ac)
"
openstack%2Ftaskflow~master~Iaa8251a1e9965a00fe99b7a740a104c011260340,openstack/taskflow,master,,Iaa8251a1e9965a00fe99b7a740a104c011260340,Switch from unittest2 compat methods to Python 3.x methods,MERGED,2020-07-05 12:04:58.000000000,2020-07-07 18:47:14.000000000,2020-07-07 18:45:15.000000000,50,50,0,739360,cf327a2e2d4e2c504b5080fbf7bd48421fe7b4c7,8,3,1,4,17130,melissaml,malei,"Switch from unittest2 compat methods to Python 3.x methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277

Change-Id: Iaa8251a1e9965a00fe99b7a740a104c011260340
"
openstack%2Foctavia~master~I3e8725eb77ea947e71d85ea406a60ed94c7bf971,openstack/octavia,master,,I3e8725eb77ea947e71d85ea406a60ed94c7bf971,Switch from unittest2 compat methods to Python 3.x methods,MERGED,2020-07-07 01:53:14.000000000,2020-07-07 18:41:59.000000000,2020-07-07 18:38:36.000000000,10,10,0,739638,103653503cc641a59e6efd145567d98d7fbdb5b3,8,3,1,9,17130,melissaml,malei,"Switch from unittest2 compat methods to Python 3.x methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277

Change-Id: I3e8725eb77ea947e71d85ea406a60ed94c7bf971
"
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I04cb72210fbd25a720158988698a300140f4e7db,openstack/tripleo-heat-templates,stable/ussuri,bug/1886203-stable/ussuri,I04cb72210fbd25a720158988698a300140f4e7db,undercloud/heat: set YAQL memory quota to 200000,MERGED,2020-07-07 01:16:32.000000000,2020-07-07 18:37:20.000000000,2020-07-07 18:37:20.000000000,1,0,0,739631,d423af38a1bec45c3316c89d0d7a55e201792a50,8,4,1,1,3153,Emilien Macchi,emilienm,"undercloud/heat: set YAQL memory quota to 200000

Since the ""optimization"" [1] of host entries in Heat and it's YAQLization,
we need to increase the memory quota for YAQL queries or the resource
will fail to process at large scale (250 nodes).

[1] 3b8e6f78e19e776c087dc5c3ff225703b5c487bc

Change-Id: I04cb72210fbd25a720158988698a300140f4e7db
Closes-Bug: #1886203
(cherry picked from commit c67c53a8d8094382bc75e7d56480ecb3f8897610)
"
openstack%2Fneutron~stable%2Frocky~I710f00f0f542bcf7fa2fc60800797b90f9f77e14,openstack/neutron,stable/rocky,bug/1864822,I710f00f0f542bcf7fa2fc60800797b90f9f77e14,[DVR] Reconfigure re-created physical bridges for dvr routers,MERGED,2020-05-27 20:24:49.000000000,2020-07-07 18:28:43.000000000,2020-07-07 18:28:42.000000000,84,14,0,731321,d3d93b4077428c399349208df9819b8413184ef7,31,6,5,3,11975,Slawek Kaplonski,slaweq,"[DVR] Reconfigure re-created physical bridges for dvr routers

In case when physical bridge is removed and created again it
is initialized by neutron-ovs-agent.
But if agent has enabled distributed routing, dvr related
flows wasn't configured again and that lead to connectivity issues
in case of DVR routers.

This patch fixes it by adding configuration of dvr related flows
if distributed routing is enabled in agent's configuration.

It also adds reset list of phys_brs in dvr_agent. Without that there
were different objects used in ovs agent and dvr_agent classes thus
e.g. 2 various cookie ids were set on flows in physical bridge.
This was also the same issue in case when openvswitch was restarted and
all bridges were reconfigured.
Now in such case there is correctly new cookie_id configured for all
flows.

Conflicts:
    neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py

Change-Id: I710f00f0f542bcf7fa2fc60800797b90f9f77e14
Closes-Bug: #1864822
(cherry picked from commit 91f0bf3c8511bf3b0cc63746f767d8d4dce601bd)
"
openstack%2Fneutron~stable%2Frocky~I7c7c8a4c371d6f4afdaab51ed50950e2b20db30f,openstack/neutron,stable/rocky,bug/1864822,I7c7c8a4c371d6f4afdaab51ed50950e2b20db30f,Ensure that stale flows are cleaned from phys_bridges,MERGED,2020-06-03 09:46:56.000000000,2020-07-07 18:28:40.000000000,2020-07-07 18:28:40.000000000,12,3,0,733080,9087c3a4ea309d3c4f0a11b297cc8573f2d6df06,25,7,3,1,11975,Slawek Kaplonski,slaweq,"Ensure that stale flows are cleaned from phys_bridges

In case when neutron-ovs-agent will notice that any of physical
bridges was ""re-created"", we should also ensure that stale Open
Flow rules (with old cookie id) are cleaned.
This patch is doing exactly that.

Conflicts:
    neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py

Change-Id: I7c7c8a4c371d6f4afdaab51ed50950e2b20db30f
Related-Bug: #1864822
(cherry picked from commit 63c45b37666efc7fb33fc154fa828050b3dc7945)
"
openstack%2Fopenstack-helm-infra~master~Ic5e327cf40c4b09c90738baff56419a6cef132da,openstack/openstack-helm-infra,master,yamllint,Ic5e327cf40c4b09c90738baff56419a6cef132da,Undo octal-values restriction together with corresponding code,MERGED,2020-07-06 20:11:05.000000000,2020-07-07 18:10:49.000000000,2020-07-07 18:04:58.000000000,208,205,0,739600,824f168efc4bef03981b19d5212c1e69eacd26dc,14,4,3,120,8863,Andrii Ostapenko,aostapenko,"Undo octal-values restriction together with corresponding code

Unrestrict octal values rule since benefits of file modes readability
exceed possible issues with yaml 1.2 adoption in future k8s versions.
These issues will be addressed when/if they occur.

Also ensure osh-infra is a required project for lint job, that matters
when running job against another project.

Change-Id: Ic5e327cf40c4b09c90738baff56419a6cef132da
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
"
openstack%2Ftripleo-ci~master~Ie45d29de935b51db555598fdc6eba18582f79e68,openstack/tripleo-ci,master,buildtestpackages,Ie45d29de935b51db555598fdc6eba18582f79e68,Add artg_repos_dir to featureset override,MERGED,2020-06-29 08:24:05.000000000,2020-07-07 18:08:54.000000000,2020-07-07 18:08:53.000000000,1,0,0,738394,658296a1358a9b5ba9e33e3b070010201f1ef46e,22,7,5,1,12393,chandan kumar,chkumar246,"Add artg_repos_dir to featureset override

artg_repos_dir var is used in buildtestpackages for using the
cloned repo on the nodepool. In downstream or for local testing
the path is different, so moving it to featureset overrride.

https://tree.taiga.io/project/tripleo-ci-board/task/1789

Depends-On: https://review.opendev.org/#/c/727200

Change-Id: Ie45d29de935b51db555598fdc6eba18582f79e68
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
"
openstack%2Ftripleo-quickstart-extras~master~Ie61065107ec1aed207e9207a0d59db706e96941a,openstack/tripleo-quickstart-extras,master,move-tls-dep,Ie61065107ec1aed207e9207a0d59db706e96941a,Move tls deps install before DNS changes,MERGED,2020-07-02 19:21:09.000000000,2020-07-07 18:08:49.000000000,2020-07-07 18:08:49.000000000,9,8,0,739135,7fea87335557b3b07e61a9f5800b25ac9497541d,28,6,5,2,9976,Ronelle Landy,rlandy,"Move tls deps install before DNS changes

Ensure that required TLS dependencies are installed
before standard DNS entries are removed and the new TLS setup
has not yet completed.

Change-Id: Ie61065107ec1aed207e9207a0d59db706e96941a
Related-Bug: #1884570
"
openstack%2Fcharm-rabbitmq-server~master~Ie3cd2f6535f8f4ddb3268961b2cd7a9e3db9dcee,openstack/charm-rabbitmq-server,master,statue-msg-for-cluster-wait,Ie3cd2f6535f8f4ddb3268961b2cd7a9e3db9dcee,"Revert ""Add workload message when waiting for clustering""",MERGED,2020-07-07 15:34:15.000000000,2020-07-07 17:45:00.000000000,2020-07-07 17:45:00.000000000,2,6,0,739799,d04627d1995b42c7557542623eb36e1bb27e32cd,7,4,1,1,12549,gnuoy,gnuoy,"Revert ""Add workload message when waiting for clustering""

This reverts commit 0d4216b764cf71fd35daf5d5d0f68ff3a301fecc.

Change-Id: Ie3cd2f6535f8f4ddb3268961b2cd7a9e3db9dcee
"
openstack%2Fnova~master~Ic67b45b524417e8351be86a4d320e068ca4fc1e1,openstack/nova,master,,Ic67b45b524417e8351be86a4d320e068ca4fc1e1,DNM: test mypy,ABANDONED,2020-07-07 06:56:05.000000000,2020-07-07 17:33:22.000000000,,1,1,0,739663,ca6647f055c7441fee95f3a6503e39af351aecfa,15,9,3,1,9708,Balazs Gibizer,gibi,"DNM: test mypy

Change-Id: Ic67b45b524417e8351be86a4d320e068ca4fc1e1
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I01f6e3a69dec25ec69782c087d6b81ce3f33e6c0,openstack/tripleo-ansible,stable/train,throttle/train,I01f6e3a69dec25ec69782c087d6b81ce3f33e6c0,Make throttle optional,MERGED,2020-07-06 19:08:02.000000000,2020-07-07 17:20:57.000000000,2020-07-07 17:20:57.000000000,11,8,0,739588,9d6e68759aaf976cc51bd79fc964bf952d8eb617,13,5,2,1,3153,Emilien Macchi,emilienm,"Make throttle optional

Tasks did not have the concept of throttling prior to ansible 2.9 so if
we want to allow this to be re-used with older versions then we need to
skip the throttling code if task doesn't contain the throttle attribute.
This will help if we want to backport this for upgrades.

Change-Id: I01f6e3a69dec25ec69782c087d6b81ce3f33e6c0
(cherry picked from commit ee3c9c841e466c7fed7639bf3b5e19dbbe42abba)
"
openstack%2Fcinder~stable%2Fpike~I0dc3e1a850b4f9041ba2a9a6268168706adc3665,openstack/cinder,stable/pike,deadstablejobs,I0dc3e1a850b4f9041ba2a9a6268168706adc3665,Remove grenade jobs,ABANDONED,2020-06-05 16:43:59.000000000,2020-07-07 16:48:13.000000000,,16,48,2,733889,b7008faff12cc2d7d3080db2e479266779479dc1,65,21,3,1,11904,Sean McGinnis,SeanM,"Remove grenade jobs

This branch is in extended maintenance. As part of EM, it was agreed we
would run jobs as long as we could keep them passing. The grenade jobs
have some issues that would take a lot of work to fix up, so given the
stable status and the lack of resources on these older stable branches,
just remove them.

Change-Id: I0dc3e1a850b4f9041ba2a9a6268168706adc3665
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
"
openstack%2Fironic-inspector~master~I131c8189b25ee2de66f08c742a21052ef1b266aa,openstack/ironic-inspector,master,node-id,I131c8189b25ee2de66f08c742a21052ef1b266aa,Use node.id instead of node.uuid in record_node,MERGED,2020-07-07 12:41:40.000000000,2020-07-07 16:46:06.000000000,2020-07-07 15:51:45.000000000,8,3,0,739730,06390e372384d15448c5ed10f77d93faa494816a,10,4,1,3,10239,Dmitry Tantsur,dtantsur,"Use node.id instead of node.uuid in record_node

This function does not have a compatibility shim that adds 'uuid'.

Change-Id: I131c8189b25ee2de66f08c742a21052ef1b266aa
"
openstack%2Foctavia~master~I152d854c091d1e1410d21ea6a04975b5a479bb65,openstack/octavia,master,,I152d854c091d1e1410d21ea6a04975b5a479bb65,DNM: Testing for IPv6 job debug,ABANDONED,2020-07-02 17:16:24.000000000,2020-07-07 16:17:37.000000000,,11,0,0,739119,634b09bfd32a7c926f06274624786fc9c2cc2fda,3,1,1,1,11628,Michael Johnson,johnsom,"DNM: Testing for IPv6 job debug

Change-Id: I152d854c091d1e1410d21ea6a04975b5a479bb65
"
openstack%2Foctavia-tempest-plugin~master~I390faffccf9d834e9622c8461bdde615f9675cf3,openstack/octavia-tempest-plugin,master,,I390faffccf9d834e9622c8461bdde615f9675cf3,DNM: Debugging the IPv6 job,ABANDONED,2020-06-30 23:16:31.000000000,2020-07-07 16:17:26.000000000,,44,35,1,738715,cdef1b40e09ab44580abd94178d7a8a60977b24a,19,3,8,3,11628,Michael Johnson,johnsom,"DNM: Debugging the IPv6 job

Depends-On: https://review.opendev.org/739557
Change-Id: I390faffccf9d834e9622c8461bdde615f9675cf3
"
openstack%2Fnova~master~I81a47caa5a4d3d6f61dd9d5d74b176b6b290dbc9,openstack/nova,master,bug/1885987,I81a47caa5a4d3d6f61dd9d5d74b176b6b290dbc9,Lock down evacuate request spec to the same cell,NEW,2020-07-03 01:18:18.000000000,2020-07-07 16:11:31.000000000,,17,0,3,739157,65dd754cb7f92ed0499145a3303c6650fa648cba,20,12,2,1,3031,Sam Morrison,sorrison,"Lock down evacuate request spec to the same cell

Currently in a multi cell environment evacuate could rebuild an
instance on a host in a different cell. To fix this we seed the
request spec with the source hosts cell to restrict hosts to the
same cell.

Closes-Bug: #1885987

Change-Id: I81a47caa5a4d3d6f61dd9d5d74b176b6b290dbc9
"
openstack%2Fdevstack-plugin-ceph~master~Id925fe667472f7a71ac236aec136dd7b59e43794,openstack/devstack-plugin-ceph,master,enable-volume-revert,Id925fe667472f7a71ac236aec136dd7b59e43794,Enable volume revert to snapshot RBD tests from Ussuri,MERGED,2020-05-11 22:22:55.000000000,2020-07-07 15:58:03.000000000,2020-07-07 15:56:00.000000000,7,0,0,726964,437ebc54b1a513897ee24c5f7d8340f8459d9a44,15,7,1,1,10459,Luigi Toscano,ltoscano,"Enable volume revert to snapshot RBD tests from Ussuri

QA people pointed out that It should be set here, not in the job.

Change-Id: Id925fe667472f7a71ac236aec136dd7b59e43794
"
openstack%2Fcharm-rabbitmq-server~master~I351c1790b02298c67f957cad53b50e89370fa983,openstack/charm-rabbitmq-server,master,statue-msg-for-cluster-wait,I351c1790b02298c67f957cad53b50e89370fa983,Add workload message when waiting for clustering,MERGED,2020-07-01 16:57:23.000000000,2020-07-07 15:34:15.000000000,2020-07-07 13:34:06.000000000,6,2,0,738893,0d4216b764cf71fd35daf5d5d0f68ff3a301fecc,10,4,1,1,12549,gnuoy,gnuoy,"Add workload message when waiting for clustering

Add workload status message to show charm is waiting for internal
rabbit clustering to complete.

Change-Id: I351c1790b02298c67f957cad53b50e89370fa983
"
openstack%2Fdesignate~stable%2Frocky~I0a85c5df5c323d6f636c8cb92ee5201c14cdb306,openstack/designate,stable/rocky,bug/1785769-stable/rocky,I0a85c5df5c323d6f636c8cb92ee5201c14cdb306,Worker should send NOTIFY also to all servers in 'also_notifies' pool settings.,MERGED,2020-04-17 16:05:08.000000000,2020-07-07 15:05:03.000000000,2020-07-07 15:05:03.000000000,23,4,0,720765,e4ee680f24d00b9633284c061edebaf0f62d7b3c,39,7,3,2,11628,Michael Johnson,johnsom,"Worker should send NOTIFY also to all servers in 'also_notifies' pool settings.

Change-Id: I0a85c5df5c323d6f636c8cb92ee5201c14cdb306
Closes-Bug: #1785769
(cherry picked from commit 6e79c2e0816ca59cff9a8b0eb238e1e5add7b943)
"
openstack%2Fironic~master~I805a65478f469b1b4e25c1bf2397f034f61d6ec7,openstack/ironic,master,fix-uefi-ovmf,I805a65478f469b1b4e25c1bf2397f034f61d6ec7,Follow up of fix uefi jobs with ovmf native ubuntu package,MERGED,2020-07-03 14:14:42.000000000,2020-07-07 15:03:02.000000000,2020-07-07 14:32:48.000000000,2,6,0,739244,daca490226d0a0048d3d215b2a184f10108082e5,24,8,2,3,23851,Riccardo Pittau,elfosardo,"Follow up of fix uefi jobs with ovmf native ubuntu package

Following up on comments from https://review.opendev.org/716889

Change-Id: I805a65478f469b1b4e25c1bf2397f034f61d6ec7
"
openstack%2Fneutron~stable%2Fqueens~Ie846a8cb481da65999b12f5547b407cc7bdc3138,openstack/neutron,stable/queens,fix_queens_gate,Ie846a8cb481da65999b12f5547b407cc7bdc3138,"Fix queens gates, multiple fixes",MERGED,2020-07-06 10:13:56.000000000,2020-07-07 14:43:32.000000000,2020-07-07 14:43:32.000000000,33,25,0,739455,774b3ff89e5ec01494d7ca66773aba8984f0cd80,20,8,3,6,21798,Bernard Cafarelli,bcafarel,"Fix queens gates, multiple fixes

1. Make grenade jobs experimental for EM branches

As discussed in ML thread[1], we are going to
make grenade jobs as non voting for all EM stable and
oldest stable. grenade jobs are failing not and it might take
time to fix those if we are able to fix. Once it jobs are
working depends on project team, they can bring them back to
voting or keep non-voting.

If those jobs are failing consistently and no one is fixing them
then removing those n-v jobs in future also fine.

Additionally, it was proposed in neutron CI meeting [2] that non-voting
jobs would be moved to experimental, so move grenade jobs there instead
of keeping them non-voting

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-June/015499.html
[2] http://eavesdrop.openstack.org/meetings/neutron_ci/2020/neutron_ci.2020-07-01-15.00.log.html#l-101

StableOnly

Conflicts:
	.zuul.yaml

(cherry picked from commit 9313dce4590116b13b24570c5455df415575817e)

2. Install pip2 for functional, fullstack,
   neutron-tempest-iptables_hybrid, rally

Else both jobs fail with ""sudo: pip: command not found""

3. Add ensure-tox for functional, fullstack,
   neutron-tempest-iptables_hybrid, rally

Similar error message for tox

4. Disable OVS compilation for fullstack and move job to experimental

Compilation fails similarly to recent master failures:
/opt/stack/new/ovs/datapath/linux/geneve.c:943:15: error: ‘const struct ipv6_stub’ has no member named ‘ipv6_dst_lookup’

But branch 2.9 is not updated anymore. Use official package

This triggers a few tests failures, so move it to experimental (instead
of marking non-voting), same as grenade jobs

Conflicts:
	.zuul.yaml
	neutron/tests/contrib/gate_hook.sh

Depends-On: https://review.opendev.org/737940/
Change-Id: Ie846a8cb481da65999b12f5547b407cc7bdc3138
(cherry picked from commit 57f527a748f292597ee548e8d386720b72346d17)
"
openstack%2Fpuppet-tripleo~master~I89c848bdae1b997b38a5164302acdcca94619471,openstack/puppet-tripleo,master,ffu-ceph-nfs,I89c848bdae1b997b38a5164302acdcca94619471,Add FFU support for ceph_nfs,MERGED,2020-07-03 07:13:25.000000000,2020-07-07 14:41:41.000000000,2020-07-07 11:33:33.000000000,6,1,0,739170,4243119d09ff9ee88aea71496753658f9d06d934,19,10,2,1,20172,Michele Baldessari,michele,"Add FFU support for ceph_nfs

This patch fixes the ceph_nfs upgrade process checking
for the short_name variable definition.
This is required to properly handle the FFU process for
this service.

Change-Id: I89c848bdae1b997b38a5164302acdcca94619471
"
openstack%2Fdevstack~master~Ia6d1617f0d3538d8728d4da689368cf7c96f02fc,openstack/devstack,master,mater_fix,Ia6d1617f0d3538d8728d4da689368cf7c96f02fc,"fix the name of uwsgi from uwsgi to uWSGI. it produces a error message that ls can not access uwsgi, No such file or directory when using comman ls uwsgi. Because package name starts with uWSGI not uwsgi.",NEW,2020-07-07 01:33:52.000000000,2020-07-07 14:38:58.000000000,,2,2,0,739635,e3f31349580177f30a29d90ff97140ef2238d49b,5,6,1,1,32168,wuanquan,leiqi96,"fix the name of uwsgi from uwsgi to uWSGI.
it produces a error message that ls can not access uwsgi, No such file or directory when using comman ls uwsgi. Because package name starts with uWSGI not uwsgi.

Change-Id: Ia6d1617f0d3538d8728d4da689368cf7c96f02fc
"
openstack%2Fosc-lib~master~I2e36a6ea5061c776d0b3cedc3afb8b8380bdd1fb,openstack/osc-lib,master,osc-performance,I2e36a6ea5061c776d0b3cedc3afb8b8380bdd1fb,switch to stevedore for entry points,ABANDONED,2020-07-07 14:34:07.000000000,2020-07-07 14:36:01.000000000,,11,9,0,739777,5e0db50d932e2d799f3d64f45b33dbdac0db51e2,3,0,1,4,2,Monty Taylor,mordred,"switch to stevedore for entry points

Importing pkg_resources scans every installed distribution to find
all of the entry points. Stevedore is adding a new caching layer using
importlib.metadata, which will not.  Switching to the stevedore should
eventually speed up load times, especially for command line apps. This
change makes the switch now to ensure API compatibility.

We were already using stevedore for tests, so this moves the dependency
from test-requirements.txt to requirements.txt and raises the minimum
version to something more recent.

Change-Id: I2e36a6ea5061c776d0b3cedc3afb8b8380bdd1fb
"
openstack%2Fcastellan~stable%2Ftrain~I1c0d00675a479cf05d92cec7b69fd720a88023d3,openstack/castellan,stable/train,hvac-stable/train,I1c0d00675a479cf05d92cec7b69fd720a88023d3,"Removes context ""validation"".",MERGED,2020-06-11 14:55:50.000000000,2020-07-07 14:26:38.000000000,2020-07-07 14:24:25.000000000,4,80,0,735163,1f8529e8ea533604e55eb25abb6abd129c0da827,15,6,1,3,1736,Ivan Kolodyazhny,e0ne,"Removes context ""validation"".

The Vault backend doesn't really care about context. Even an empty
string would suffice these checks.

Change-Id: I1c0d00675a479cf05d92cec7b69fd720a88023d3
Signed-off-by: Moisés Guimarães de Medeiros <moguimar@redhat.com>
(cherry picked from commit 8e88919f02781d699a73e815cf8f7be72d4db352)
"
openstack%2Ftripleo-ansible~master~I5e238676b78a52759227e0bce6e1b9ce3fef2d26,openstack/tripleo-ansible,master,,I5e238676b78a52759227e0bce6e1b9ce3fef2d26,Add mock to test-requirements,MERGED,2020-07-07 12:42:33.000000000,2020-07-07 14:19:57.000000000,2020-07-07 14:17:04.000000000,1,0,0,739731,ebb3f2ba40dd2213ee90e17266013dfe9a2902d7,10,5,1,1,10969,Shnaidman Sagi (Sergey),sergsh,"Add mock to test-requirements

Change-Id: I5e238676b78a52759227e0bce6e1b9ce3fef2d26
"
openstack%2Fcharm-deployment-guide~master~Ic5d1bd95cdfb2ac125ebe9990291ae787c3557c5,openstack/charm-deployment-guide,master,refresh-masakari-appendix-for-supported-status,Ic5d1bd95cdfb2ac125ebe9990291ae787c3557c5,Rewrite Masakari appendix,MERGED,2020-06-19 17:37:04.000000000,2020-07-07 14:13:27.000000000,2020-07-07 14:10:27.000000000,440,236,0,737053,3e5e038fd2459a24e50c1d64bf4e4ecb999d9b08,7,2,1,1,30561,Peter Matulis,pmatulis,"Rewrite Masakari appendix

Change-Id: Ic5d1bd95cdfb2ac125ebe9990291ae787c3557c5
"
openstack%2Fpython-barbicanclient~master~I5e02a7ed7803e21ad2baa93fccd00a23cda3da79,openstack/python-barbicanclient,master,,I5e02a7ed7803e21ad2baa93fccd00a23cda3da79,Switch from unittest2 compat methods to Python 3.x methods,MERGED,2020-06-11 09:41:24.000000000,2020-07-07 14:04:40.000000000,2020-07-07 14:01:23.000000000,4,4,0,735089,441ac7c0bf74fef94678e91ae577894ca66693c8,9,7,2,1,6593,Dirk Mueller,dmllr,"Switch from unittest2 compat methods to Python 3.x methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277^

Change-Id: I5e02a7ed7803e21ad2baa93fccd00a23cda3da79
"
openstack%2Frpm-packaging~master~Ib3841289cc6fba98dde2f1b5250a2c1fbe260583,openstack/rpm-packaging,master,,Ib3841289cc6fba98dde2f1b5250a2c1fbe260583,manila: add glanceclient dependency,MERGED,2020-07-01 16:02:26.000000000,2020-07-07 14:03:39.000000000,2020-07-07 14:03:39.000000000,2,0,0,738876,e1b60b64a1a295ba0ae97c83cfe5745c3bc118e8,10,6,1,1,6593,Dirk Mueller,dmllr,"manila: add glanceclient dependency

Change-Id: Ib3841289cc6fba98dde2f1b5250a2c1fbe260583
"
openstack%2Ftripleo-ansible~master~Iea96b3515aee5243726a2366d939b282fcdf76ac,openstack/tripleo-ansible,master,,Iea96b3515aee5243726a2366d939b282fcdf76ac,Remove mock from molecule requirements,ABANDONED,2020-07-07 12:46:37.000000000,2020-07-07 14:01:24.000000000,,0,1,0,739733,ada733926bfa1d2ee5c5dc55a648b46e0bf902f0,3,1,1,1,10969,Shnaidman Sagi (Sergey),sergsh,"Remove mock from molecule requirements

Change-Id: Iea96b3515aee5243726a2366d939b282fcdf76ac
"
openstack%2Fbifrost~stable%2Fussuri~I3d3b24ba5313013051e8b18d1ce4ec42a61d20f0,openstack/bifrost,stable/ussuri,sudo-pip-stable/ussuri,I3d3b24ba5313013051e8b18d1ce4ec42a61d20f0,Do not use 'sudo pip install' when venv is used,MERGED,2020-07-07 11:50:20.000000000,2020-07-07 13:43:28.000000000,2020-07-07 13:41:11.000000000,10,2,0,739718,dc87231588b9dd11dc63fe569ce9c8e2ee1e7c9c,7,2,1,1,10239,Dmitry Tantsur,dtantsur,"Do not use 'sudo pip install' when venv is used

We end up installing bindep and bifrost deps in the system otherwise.

Change-Id: I3d3b24ba5313013051e8b18d1ce4ec42a61d20f0
(cherry picked from commit 0b58a05ac6bcabb8d5dc65a32e1526df4e0251e5)
"
openstack%2Fcharm-neutron-api~master~Ib2d0859a9a7d033c49c135a3db7c87a08a49b713,openstack/charm-neutron-api,master,victoria,Ib2d0859a9a7d033c49c135a3db7c87a08a49b713,Add Victoria test bundles,MERGED,2020-07-07 12:06:15.000000000,2020-07-07 13:36:49.000000000,2020-07-07 13:36:49.000000000,90,1,0,739720,62db5726a798176cafd9bb2583f7966ba99fd8e0,7,3,1,3,31289,Aurelien Lourot,lourot,"Add Victoria test bundles

Change-Id: Ib2d0859a9a7d033c49c135a3db7c87a08a49b713
"
openstack%2Ftripleo-heat-templates~master~I567839785a72813a382a00253562894e19eb6715,openstack/tripleo-heat-templates,master,,I567839785a72813a382a00253562894e19eb6715,Don't set RABBITMQ_SERVER_ERL_ARGS,MERGED,2020-06-23 19:02:48.000000000,2020-07-07 13:36:04.000000000,2020-07-07 13:35:27.000000000,1,2,0,737604,938166b93b8fc525d575c53509f8364a8f3d04e5,51,5,6,1,9257,John Eckersberg,jeckersb,"Don't set RABBITMQ_SERVER_ERL_ARGS

From the RabbitMQ docs[1]:

""RABBITMQ_SERVER_ERL_ARGS - Standard parameters for the erl command
used when invoking the RabbitMQ Server. This should be overridden for
debugging purposes only. Overriding this variable replaces the default
value.""

We do not need any of the current values because of this commit from
2015 in rabbitmq 3.5.4:

https://github.com/rabbitmq/rabbitmq-server/commit/5c3c0e6f38792ca37289888ce39996e6baf4d846

In which the ""+K true"" and ""-kernel inet_default_connect_options
""[{nodelay,true}]"" options were hard-coded to the rabbitmq-server
script.  Meanwhile the ""+P 1048576"" configuration was moved to the
rabbitmq-env script under the SERVER_ERL_ARGS variable, which is the
defaults used when RABBITMQ_SERVER_ERL_ARGS is unset.

[1] https://www.rabbitmq.com/configure.html#supported-environment-variables

Let's also move the current RabbitAdditionalErlArgs to a new dedicated
override hiera key.

NB: To get this properly working we need a puppet-rabbitmq that contains
    https://github.com/voxpupuli/puppet-rabbitmq/pull/841
Depends-On: I3bf244a70538209773804eb85fae6be035c587f4

Closes-Bug: #1884922

Change-Id: I567839785a72813a382a00253562894e19eb6715
"
openstack%2Fneutron-dynamic-routing~master~I42e9ae98e925ad0236b1bf134cbd80d111098aad,openstack/neutron-dynamic-routing,master,devstack_readme,I42e9ae98e925ad0236b1bf134cbd80d111098aad,Fix devstack README.rst formatting,MERGED,2020-07-07 13:04:04.000000000,2020-07-07 13:31:27.000000000,2020-07-07 13:28:06.000000000,2,0,0,739738,9025dc72d0a6ee44515762715bcfc2b1de757fc5,7,2,1,1,21798,Bernard Cafarelli,bcafarel,"Fix devstack README.rst formatting

Missing newlines caused incorrect rendering for code blocks

TrivialFix

Change-Id: I42e9ae98e925ad0236b1bf134cbd80d111098aad
"
openstack%2Ftripleo-ansible~stable%2Fussuri~Iff582edfe8ebbf9f30e5cdc13402986fea1c39aa,openstack/tripleo-ansible,stable/ussuri,retry_timeout-stable/ussuri,Iff582edfe8ebbf9f30e5cdc13402986fea1c39aa,Set retry timeout for nodes introspection,MERGED,2020-07-06 08:22:02.000000000,2020-07-07 13:24:29.000000000,2020-07-07 13:24:28.000000000,22,4,0,739426,a8d1382b44a1da57c6095c8f68a0ec147a569a33,9,6,1,2,10969,Shnaidman Sagi (Sergey),sergsh,"Set retry timeout for nodes introspection

When restarting node introspection wait a configured amount of time
so that node can be unlocked.
Change-Id: Iff582edfe8ebbf9f30e5cdc13402986fea1c39aa
(cherry picked from commit a368a641efc582c5f544e2e16238a6e12e2f9c78)
"
openstack%2Ftripleo-ci~master~Ib57a96b50376c03cfb14bab1411586268bfaeaf9,openstack/tripleo-ci,master,allowed-skiplist-override,Ib57a96b50376c03cfb14bab1411586268bfaeaf9,Add tempest_use_skiplist in allowed overrides,MERGED,2020-07-01 10:57:39.000000000,2020-07-07 13:24:26.000000000,2020-07-07 13:24:26.000000000,1,0,0,738788,eb5e3863f9832b81f69cc22898b4656f0a35ea1f,14,5,2,1,8367,Arx Cruz,arxcruz,"Add tempest_use_skiplist in allowed overrides

This will be the variable name to be used to switch between old skiplist
to the new openstack-tempest-skiplist management

Change-Id: Ib57a96b50376c03cfb14bab1411586268bfaeaf9
"
openstack%2Fmonasca-specs~master~Idb7514a23335392e88ea44fd0aa81159c4e2ae49,openstack/monasca-specs,master,,Idb7514a23335392e88ea44fd0aa81159c4e2ae49,Add Victoria release cycle priorities,MERGED,2020-06-30 12:47:15.000000000,2020-07-07 13:18:35.000000000,2020-07-07 13:15:10.000000000,116,0,0,738596,a9a886f326373d1842be009091b0ee3ba8d32d42,12,5,2,1,28062,Martin Chacon Piza,martinchacon,"Add Victoria release cycle priorities

Change-Id: Idb7514a23335392e88ea44fd0aa81159c4e2ae49
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~Ie1efb437059d37fe04ece0e23c9baa5c4df063a6,openstack/python-tripleoclient,stable/ussuri,test,Ie1efb437059d37fe04ece0e23c9baa5c4df063a6,DNM - run tripleo-build-containers-ubi-8-ussuri  Please enter the commit message for your changes. Lines starting,ABANDONED,2020-07-07 13:03:06.000000000,2020-07-07 13:16:35.000000000,,1,1,0,739737,24e6abc5e5afc585e9cb2044cde3d252be65896a,5,1,2,1,3153,Emilien Macchi,emilienm,"DNM - run tripleo-build-containers-ubi-8-ussuri
 Please enter the commit message for your changes. Lines starting

Change-Id: Ie1efb437059d37fe04ece0e23c9baa5c4df063a6
"
openstack%2Ftripleo-ansible~master~Ib6f72e74087f62c41be709a548992a25bf4a36d1,openstack/tripleo-ansible,master,,Ib6f72e74087f62c41be709a548992a25bf4a36d1,Check that module execution returns required data,ABANDONED,2020-07-07 09:11:37.000000000,2020-07-07 13:04:57.000000000,,3,1,0,739683,e9f9dca30ee4859bdbf064afb5a1fa34dd378fc1,11,7,2,1,10969,Shnaidman Sagi (Sergey),sergsh,"Check that module execution returns required data

Sometimes modules doesn't return data correctly in async task,
there are examples in the bug. Make sure variable has 'containers'
before checking the second condition.

Closes-Bug: #1886636
Change-Id: Ib6f72e74087f62c41be709a548992a25bf4a36d1
"
openstack%2Fkolla~master~I0727be1e969296316aedcc1adc2392aead48873d,openstack/kolla,master,marcin,I0727be1e969296316aedcc1adc2392aead48873d,Move definition of OpenStack sources into YAML file,ABANDONED,2019-11-07 17:47:26.000000000,2020-07-07 12:54:53.000000000,,454,603,22,693398,1da76ddda253baaa038eec5532757d9b34c0fb4a,58,6,15,3,24072,Marcin Juszkiewicz,hrw,"Move definition of OpenStack sources into YAML file

SOURCES list is long and is in Python code file. And we update it
several times during stable cycle.

Let's move it to a YAML-formatted file and load when needed.

Lays ground for external sourcing.

Co-authored-by: Radosław Piliszek <radoslaw.piliszek@gmail.com>
Change-Id: I0727be1e969296316aedcc1adc2392aead48873d
"
openstack%2Fdevstack~stable%2Fpike~I82f539bfa533349293dd5a8ce309c9cc0ffb0393,openstack/devstack,stable/pike,uwsgi-stable/pike,I82f539bfa533349293dd5a8ce309c9cc0ffb0393,"Fix gate, squashing multiple fixes",MERGED,2020-06-15 15:21:27.000000000,2020-07-07 12:07:56.000000000,2020-07-07 12:07:56.000000000,158,34,2,735616,e963dc2fd4add7c438a15407b5e047957f690c4a,23,9,2,11,8556,Ghanshyam,ghanshyam,"Fix gate, squashing multiple fixes

This commit includes multiple fixes to
make gate happy:

1. Use packaged uwsgi on Fedora and Ubuntu
- https://review.opendev.org/#/c/735615/7

2. Move process-stackviz role from Tempest to Devstack
- https://review.opendev.org/#/c/737078/4

3. Add ensure-pip to pre.yaml
- https://review.opendev.org/#/c/738495/2

4. Use uwsgi binary from path
- https://review.opendev.org/#/c/739072/

5. Temporarily disable the grenade jobs

Conflicts:
	.zuul.yaml
	lib/neutron
	lib/neutron-legacy

Change-Id: I82f539bfa533349293dd5a8ce309c9cc0ffb0393
(cherry picked from commit 2d903568ed4158aa668bbda6986307a8780c71a4)
(cherry picked from commit ad6cc52c746f1fbdb1d89b14c09dc4aa7907bfe4)
"
openstack%2Fironic-python-agent~stable%2Fussuri~I3e0d237d37219e783d81913fa6cc490492b3f96a,openstack/ironic-python-agent,stable/ussuri,,I3e0d237d37219e783d81913fa6cc490492b3f96a,Limit Inspection->Lookup->Heartbeat lag,MERGED,2020-07-06 18:21:18.000000000,2020-07-07 11:52:49.000000000,2020-07-07 11:49:49.000000000,72,6,0,739569,8ab527e72ed2996c077f75e1118608cd30feb61f,11,4,1,8,10239,Dmitry Tantsur,dtantsur,"Limit Inspection->Lookup->Heartbeat lag

Caches hardware information collected during inspection
so that the initial lookup can occur without any delay.

Also adds logging to track how long inventory collection takes.

Conflicts:
	ironic_python_agent/tests/unit/base.py

Co-Authored-By: Dmitry Tantsur <dtantsur@protonmail.com>
Change-Id: I3e0d237d37219e783d81913fa6cc490492b3f96a
(cherry picked from commit c76b8b2c217d57680baec977b374e821304198f9)
"
openstack%2Fbifrost~master~I3d3b24ba5313013051e8b18d1ce4ec42a61d20f0,openstack/bifrost,master,sudo-pip,I3d3b24ba5313013051e8b18d1ce4ec42a61d20f0,Do not use 'sudo pip install' when venv is used,MERGED,2020-07-07 09:44:21.000000000,2020-07-07 11:50:20.000000000,2020-07-07 11:02:16.000000000,10,2,0,739693,0b58a05ac6bcabb8d5dc65a32e1526df4e0251e5,9,3,1,1,10239,Dmitry Tantsur,dtantsur,"Do not use 'sudo pip install' when venv is used

We end up installing bindep and bifrost deps in the system otherwise.

Change-Id: I3d3b24ba5313013051e8b18d1ce4ec42a61d20f0
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I0162e7dec09242a8d3981d1796f4cc6d911c7c4a,openstack/tripleo-heat-templates,stable/train,ffwd-upgrade2-stable/train,I0162e7dec09242a8d3981d1796f4cc6d911c7c4a,[Q->T] Add FFU steps for manila,MERGED,2020-06-23 18:49:17.000000000,2020-07-07 11:33:31.000000000,2020-07-07 11:33:31.000000000,91,14,9,737602,ea7c886e22e18a79fda64f159ff524bd587a277e,58,12,9,3,16643,Goutham Pacha Ravi,gouthamr,"[Q->T] Add FFU steps for manila

These steps were added for other overcloud
services in [1] and [2].

[1] https://review.opendev.org/713482/
[2] https://review.opendev.org/720490/

Depends-On: I6a98140b7df8d3460ff8ec54f8b7a0d5abbef515
Depends-On: I1229d3a0cd2f08dabdcd3b47d9823f6a939cfbdb
Resolves: rhbz#1849098
Closes-bug: #1884818
Change-Id: I0162e7dec09242a8d3981d1796f4cc6d911c7c4a
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
"
openstack%2Fpuppet-tripleo~stable%2Ftrain~I70d2ef2a64f0a46203d7a60b564eaa287e5708d6,openstack/puppet-tripleo,stable/train,,I70d2ef2a64f0a46203d7a60b564eaa287e5708d6,Fix haproxy ceph dashboard condition,MERGED,2020-07-02 13:46:19.000000000,2020-07-07 11:33:29.000000000,2020-07-07 11:33:29.000000000,2,2,0,739044,90a28fd10a259dd1e4d354fa739817caa911639c,24,5,2,1,25402,Francesco Pantano,fmount,"Fix haproxy ceph dashboard condition

If grafana is not enabled in the overcloud the
dashboard section shouldn't be created. We
currently hit an issue during upgrades because
the haproxy exists (because of ceph_mgr_enabled)
even though the dashboard bits aren't deployed.
Using the same condition for both services should
be safe enough.

Depends-On: I1229d3a0cd2f08dabdcd3b47d9823f6a939cfbdb
Closes-Bug: #1885122
Co-Authored-By: Giulio Fidente <gfidente@redhat.com>
Change-Id: I70d2ef2a64f0a46203d7a60b564eaa287e5708d6
(cherry picked from commit a21b5ee7ce44270828a12b823b33e5e4117bf4c1)
"
openstack%2Fcharm-swift-proxy~master~Ic51ee5d181558b63dfd968c5b0c7d40760a5ac59,openstack/charm-swift-proxy,master,bug/1741723,Ic51ee5d181558b63dfd968c5b0c7d40760a5ac59,Policyd override implementation,MERGED,2020-07-01 07:24:51.000000000,2020-07-07 11:23:50.000000000,2020-07-07 11:23:50.000000000,70,0,0,738745,d21648e67106c48e222a3f698eeb2255593326dd,16,4,4,5,9247,Arif Ali,arif-ali,"Policyd override implementation

This patchset implements policy overrides for swift-proxy.  It uses
the code in charmhelpers.

Closed-Bug: #1741723
Change-Id: Ic51ee5d181558b63dfd968c5b0c7d40760a5ac59
"
openstack%2Fpython-openstackclient~master~I510383f8e0cbf05ec24caa1cad330f12f82a913d,openstack/python-openstackclient,master,story/2007896,I510383f8e0cbf05ec24caa1cad330f12f82a913d,Make volume backup record commands available in v3,MERGED,2020-07-05 07:55:50.000000000,2020-07-07 10:59:55.000000000,2020-07-07 10:58:15.000000000,8,0,0,739342,b1fc587a6d4eac795a5bc27c2dffd2d876161caa,15,5,1,2,30491,Radosław Piliszek,yoctozepto,"Make volume backup record commands available in v3

They work just fine in Volume API v3 but they were limited in OSC
to v2.

Change-Id: I510383f8e0cbf05ec24caa1cad330f12f82a913d
Story: 2007896
Task: 40279
"
openstack%2Fkolla~master~I562d2f42f470de58aaae909d470e7c3f14eec272,openstack/kolla,master,,I562d2f42f470de58aaae909d470e7c3f14eec272,monasca-thresh: build always,ABANDONED,2020-07-06 10:27:38.000000000,2020-07-07 10:55:46.000000000,,0,10,0,739461,99de0896839087c51aa5106840043918778dbaad,11,8,1,2,24072,Marcin Juszkiewicz,hrw,"monasca-thresh: build always

This package is part of infrastructure so binary/source split does not
make any sense here.

Change-Id: I562d2f42f470de58aaae909d470e7c3f14eec272
"
openstack%2Fpuppet-tripleo~stable%2Fqueens~I3bf244a70538209773804eb85fae6be035c587f4,openstack/puppet-tripleo,stable/queens,fix-override-stable/ussuri-stable/train-stable/stein-stable/queens,I3bf244a70538209773804eb85fae6be035c587f4,Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent,MERGED,2020-06-30 13:39:23.000000000,2020-07-07 10:52:34.000000000,2020-07-07 10:52:34.000000000,25,2,0,738623,55c8faea5c4acd19aebb36173938aaf9c35b53fe,15,5,2,1,20172,Michele Baldessari,michele,"Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent

In THT we allow RabbitAdditionalErlArgs to set some additional
parameters which should be passed to RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS
when starting rabbit. The problem is that when we use internal tls
that parameter gets ignored and so we lose our default '+sbwt none'.

Let's do this via a proper parameter while also considering the fact
that historically the default value of RabbitAdditionalErlArgs had
apices around it.

Since the original master change had an issue when the THT parameter
was unset (aka when I567839785a72813a382a00253562894e19eb6715 was not
applied to THT), we also add the subsequent fixup ""Make the additional_erl_args
change more independent"" I9fa9ba95410ed3994f608beb2c5e1578dc3a7c7a to
this change)

Change-Id: I3bf244a70538209773804eb85fae6be035c587f4
Related-Bug: #1884922
(cherry picked from commit 4d3864249dc27e033499b8a0855ce095be848a44)
"
openstack%2Fansible-role-collect-logs~master~Ie05403406e175030e62e9d0911d12a78887e45d0,openstack/ansible-role-collect-logs,master,,Ie05403406e175030e62e9d0911d12a78887e45d0,Remove jinja2 templating from when condition,MERGED,2020-07-03 12:14:43.000000000,2020-07-07 10:49:37.000000000,2020-07-07 10:49:36.000000000,1,1,0,739221,124b7f53adbb401d962baddcdfa60d3bfce604d9,19,10,1,1,13861,yatin,yatinkarel,"Remove jinja2 templating from when condition

Logs collection dumps warning like below, remove usage of it
as it's not necessary:-

[WARNING]: conditional statements should not include jinja2 templating
delimiters such as {{ }} or {% %}. Found: {{ item.when | default(true) }}

Change-Id: Ie05403406e175030e62e9d0911d12a78887e45d0
"
openstack%2Fpuppet-tripleo~stable%2Fstein~I3bf244a70538209773804eb85fae6be035c587f4,openstack/puppet-tripleo,stable/stein,fix-override-stable/ussuri-stable/train-stable/stein,I3bf244a70538209773804eb85fae6be035c587f4,Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent,MERGED,2020-06-30 13:39:02.000000000,2020-07-07 10:41:37.000000000,2020-07-07 10:41:37.000000000,25,2,0,738622,856f946f78593f8d175be857947db07dc95cbddf,14,4,2,1,20172,Michele Baldessari,michele,"Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent

In THT we allow RabbitAdditionalErlArgs to set some additional
parameters which should be passed to RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS
when starting rabbit. The problem is that when we use internal tls
that parameter gets ignored and so we lose our default '+sbwt none'.

Let's do this via a proper parameter while also considering the fact
that historically the default value of RabbitAdditionalErlArgs had
apices around it.

Since the original master change had an issue when the THT parameter
was unset (aka when I567839785a72813a382a00253562894e19eb6715 was not
applied to THT), we also add the subsequent fixup ""Make the additional_erl_args
change more independent"" I9fa9ba95410ed3994f608beb2c5e1578dc3a7c7a to
this change)

Change-Id: I3bf244a70538209773804eb85fae6be035c587f4
Related-Bug: #1884922
(cherry picked from commit 4d3864249dc27e033499b8a0855ce095be848a44)
"
openstack%2Ftripleo-common~master~I397f8d641504ac2ceed36fa975cf97fac5bbb81a,openstack/tripleo-common,master,,I397f8d641504ac2ceed36fa975cf97fac5bbb81a,Catch exception if servers are in error state with no bm_node attached,MERGED,2020-07-01 09:22:16.000000000,2020-07-07 10:38:08.000000000,2020-07-07 10:21:19.000000000,71,4,5,738768,7d2c25319b10daad3d3ef6ba2ff656b10b716beb,27,6,7,2,30126,Luca Miccini,lmiccini2,"Catch exception if servers are in error state with no bm_node attached

There have been reports (rhbz#1851507) where generating the fencing
parameters fails because of one or more servers in error state, like
when a scale out operation doesn't go as planned.

This commit wraps get_by_instance_uuid in a try/except block to prevent
this from happening, skipping the node in error state and allowing
users to still get a valid fencing config for the remaining servers.

Change-Id: I397f8d641504ac2ceed36fa975cf97fac5bbb81a
"
openstack%2Ftripleo-heat-templates~master~I182f8c5a8ce283b675aa18712e84fcd692200eb1,openstack/tripleo-heat-templates,master,bug/1886095,I182f8c5a8ce283b675aa18712e84fcd692200eb1,Fix default BlockStorageCinderVolume template,MERGED,2020-07-02 20:41:23.000000000,2020-07-07 10:27:41.000000000,2020-07-07 10:00:59.000000000,2,1,4,739145,bff0c6cfa1226836569ea016a71284e127c04b2c,17,5,1,1,21129,Alan Bishop,ASBishop,"Fix default BlockStorageCinderVolume template

The BlockStorageCinderVolume tripleo service (used by the BlockStorage
and DistributedComputeHCI roles) is meant to deploy the cinder-volume
service without pacemaker. Unfortunately, [1] inadvertently switched
it to the pcmk version of the template, and this patch moves it back.

[1] I0f61016df6a9f07971c5eab51cc9674a1458c66f

Closes-Bug: #1886095
Change-Id: I182f8c5a8ce283b675aa18712e84fcd692200eb1
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~Ib1eb7338779c4e1d4c8dce1e6b931b4eadefcb23,openstack/tripleo-heat-templates,stable/train,add_multinode_ipa_template,Ib1eb7338779c4e1d4c8dce1e6b931b4eadefcb23,Add project template for IPA multinode,MERGED,2020-06-30 09:02:58.000000000,2020-07-07 10:21:20.000000000,2020-07-07 10:21:20.000000000,1,0,1,738568,d0a3da09c87f8c12aaa77ee961e1ef07a2407cab,12,7,2,1,31075,Pooja Jadhav,pojadhav,"Add project template for IPA multinode

Added ipa multinode project template
for stable train.

Change-Id: Ib1eb7338779c4e1d4c8dce1e6b931b4eadefcb23
"
openstack%2Ftripleo-quickstart-extras~master~I1d31343161b6a228426f3b63f477ed839a2fbef9,openstack/tripleo-quickstart-extras,master,fix-manageable,I1d31343161b6a228426f3b63f477ed839a2fbef9,Fix newly-introduced 'Wait until nodes will be manageable' task,MERGED,2020-06-30 12:57:28.000000000,2020-07-07 10:21:17.000000000,2020-07-07 10:21:17.000000000,1,1,0,738605,a585b509b1c1ceb215501761e3d36a14c98ab718,17,6,1,1,20172,Michele Baldessari,michele,"Fix newly-introduced 'Wait until nodes will be manageable' task

In change I5a35ca95c5f0e7b295f7bcf76e2ebb530e73c1a0 we added the
'Wait until nodes will be manageable' in order to cope for slow
environments. That change always assumed that step_introspect is
set to true. When step_introspect is set to false, then
tripleo_overcloud_node_import_provide is set to true and that means that
the nodes get imported with 'openstack overcloud node import
instackenv.json --provide'. Having --provide means the nodes will
show up with 'available' and not 'manageable'.

Change-Id: I1d31343161b6a228426f3b63f477ed839a2fbef9
"
openstack%2Fpuppet-tripleo~master~Ie48a78a30d9a2824155a9f7388660cab7b5935dd,openstack/puppet-tripleo,master,remove-facter-warning,Ie48a78a30d9a2824155a9f7388660cab7b5935dd,Remove stonith level warning when running on a non cluster node,MERGED,2020-07-01 13:38:14.000000000,2020-07-07 10:21:16.000000000,2020-07-07 10:21:16.000000000,1,1,0,738847,f1b341962af912bc60eeda6da959777f0b0f3cfb,12,4,1,1,20172,Michele Baldessari,michele,"Remove stonith level warning when running on a non cluster node

Currently when we run with puppet --debug on a non cluster node we get:
overcloud-novacompute-0 ~$ puppet facts --debug --color=false|grep Error
Debug: Facter: Error: unable to get cib

Let's just remove stderr from the pcs command. After the fix:
overcloud-novacompute-0 ~$ puppet facts --debug --color=false|grep Error
overcloud-novacompute-0 ~$

Change-Id: Ie48a78a30d9a2824155a9f7388660cab7b5935dd
"
openstack%2Fcharm-gnocchi~master~Ie7a02c536d5085cd2548b84d94b7a6bf8ac6a315,openstack/charm-gnocchi,master,bug/1741723,Ie7a02c536d5085cd2548b84d94b7a6bf8ac6a315,Policyd override implementation,MERGED,2020-07-03 18:27:35.000000000,2020-07-07 10:20:55.000000000,2020-07-07 10:20:55.000000000,48,3,1,739274,7bec3ddee6163a566d2a9c0aaadacc1be27be9a7,10,4,1,4,9247,Arif Ali,arif-ali,"Policyd override implementation

This patchset implements policy overrides for gnocchi

Change-Id: Ie7a02c536d5085cd2548b84d94b7a6bf8ac6a315
Closed-Bug: #1741723
"
openstack%2Fnova~stable%2Frocky~I4e03295548af5272a02ca81162fcd685c7986470,openstack/nova,stable/rocky,,I4e03295548af5272a02ca81162fcd685c7986470,Make greande jobs n-v for EM and oldest stable,ABANDONED,2020-07-02 10:56:58.000000000,2020-07-07 10:20:29.000000000,,7,2,4,739020,b9a699a7737fc13eda72dc6a78efb3abbbfe1f68,35,7,5,1,10135,Lee Yarwood,lyarwood,"Make greande jobs n-v for EM and oldest stable

As discussed in ML thread[1], we are going to
make grenade jobs as non voting for all EM stable and
oldest stable. grenade jobs are failing not and it might take
time to fix those if we are able to fix. Once it jobs are
working depends on project team, they can bring them back to
voting or keep non-voting.

If those jobs are failing consistently and no one is fixing them
then removing those n-v jobs in future also fine.

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-June/015499.html

StableOnly

Conflicts:
    .zuul.yaml

Depends-On: https://review.opendev.org/#/c/737384/
Depends-On: https://review.opendev.org/#/c/737826/

NOTE(lyarwood): This change also makes the nova-live-migration job
non-voting for now allowing us to follow up and land a seperate changet
to correct it under Iea6288fe6d341ee92f87a35e0b0a59fe564ab96c.

Change-Id: I4e03295548af5272a02ca81162fcd685c7986470
(cherry picked from commit b05bf09b2d50bd77d33a31babe204ba7969f0221)
"
openstack%2Ftripleo-quickstart-extras~master~I5bfb6cf0c6063ebd6f91705e27e759b51a18df1e,openstack/tripleo-quickstart-extras,master,,I5bfb6cf0c6063ebd6f91705e27e759b51a18df1e,Allow to run tripleo registry on different ip,MERGED,2020-06-19 13:16:28.000000000,2020-07-07 10:18:44.000000000,2020-07-07 10:18:43.000000000,1,0,8,737000,452538cd12531258fb55c265d4eb8865b38c8f15,44,8,6,1,13861,yatin,yatinkarel,"Allow to run tripleo registry on different ip

Use local_docker_registry_host to run tripleo
registry on different ip on host.

Change-Id: I5bfb6cf0c6063ebd6f91705e27e759b51a18df1e
"
openstack%2Fblazar~stable%2Fstein~If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627,openstack/blazar,stable/stein,bug/1880646-stable/stein,If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627,Fix up adding availability zone (AZ) to a host on creation,MERGED,2020-07-01 07:34:44.000000000,2020-07-07 10:10:16.000000000,2020-07-07 10:08:17.000000000,9,3,0,738749,6bbad1bc79eb2f9535e58f0c9ff19669eaac1373,7,3,1,3,15197,Pierre Riteau,priteau,"Fix up adding availability zone (AZ) to a host on creation

1. Nova AZ returns hosts as service hosts as opposed to hypervisor
   hostnames
2. Handle case where a Nova AZ has no hosts

Change-Id: If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627
Closes-Bug: #1880646
(cherry picked from commit 532544efbf5fc3a2daf60af5d3c216b0b6a62c42)
"
openstack%2Fblazar~stable%2Ftrain~If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627,openstack/blazar,stable/train,bug/1880646-stable/train,If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627,Fix up adding availability zone (AZ) to a host on creation,MERGED,2020-07-01 07:34:22.000000000,2020-07-07 10:10:11.000000000,2020-07-07 10:08:16.000000000,9,3,0,738748,d15c6ce078c0bfab5e471f60808fdd35120532ce,7,3,1,3,15197,Pierre Riteau,priteau,"Fix up adding availability zone (AZ) to a host on creation

1. Nova AZ returns hosts as service hosts as opposed to hypervisor
   hostnames
2. Handle case where a Nova AZ has no hosts

Change-Id: If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627
Closes-Bug: #1880646
(cherry picked from commit 532544efbf5fc3a2daf60af5d3c216b0b6a62c42)
"
openstack%2Fblazar~stable%2Fussuri~If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627,openstack/blazar,stable/ussuri,bug/1880646-stable/ussuri,If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627,Fix up adding availability zone (AZ) to a host on creation,MERGED,2020-07-01 07:33:57.000000000,2020-07-07 10:08:13.000000000,2020-07-07 10:05:40.000000000,9,3,0,738747,fd652cba5d49c046b4765b4616b8546726de98e3,7,3,1,3,15197,Pierre Riteau,priteau,"Fix up adding availability zone (AZ) to a host on creation

1. Nova AZ returns hosts as service hosts as opposed to hypervisor
   hostnames
2. Handle case where a Nova AZ has no hosts

Change-Id: If6f6cf21170e95c58dd8a0a1b41b9b5f4797a627
Closes-Bug: #1880646
(cherry picked from commit 532544efbf5fc3a2daf60af5d3c216b0b6a62c42)
"
openstack%2Ftripleo-ci~master~I30508c68f62c7de6893b393836a604d22221303d,openstack/tripleo-ci,master,,I30508c68f62c7de6893b393836a604d22221303d,add neutron-server-odl and mlnx to skip,MERGED,2020-07-06 15:40:02.000000000,2020-07-07 10:01:02.000000000,2020-07-07 10:01:02.000000000,2,0,0,739523,8f53a8c38579f9747f417fc5252cb520e723bffb,17,4,1,1,9592,wes hayutin,weshayutin,"add neutron-server-odl and mlnx to skip

Change-Id: I30508c68f62c7de6893b393836a604d22221303d
"
openstack%2Fpuppet-tripleo~stable%2Fussuri~I70d2ef2a64f0a46203d7a60b564eaa287e5708d6,openstack/puppet-tripleo,stable/ussuri,,I70d2ef2a64f0a46203d7a60b564eaa287e5708d6,Fix haproxy ceph dashboard condition,MERGED,2020-07-02 13:46:10.000000000,2020-07-07 10:00:58.000000000,2020-07-07 10:00:58.000000000,2,2,0,739043,30c8cb3b1bdda695621e0db5674cc55c6c5dd7a8,31,5,4,1,25402,Francesco Pantano,fmount,"Fix haproxy ceph dashboard condition

If grafana is not enabled in the overcloud the
dashboard section shouldn't be created. We
currently hit an issue during upgrades because
the haproxy exists (because of ceph_mgr_enabled)
even though the dashboard bits aren't deployed.
Using the same condition for both services should
be safe enough.

Closes-Bug: #1885122
Co-Authored-By: Giulio Fidente <gfidente@redhat.com>
Change-Id: I70d2ef2a64f0a46203d7a60b564eaa287e5708d6
(cherry picked from commit a21b5ee7ce44270828a12b823b33e5e4117bf4c1)
"
openstack%2Fcastellan~stable%2Ftrain~I83bafe5b7e0c4cca67f773858007fb59d98a93a5,openstack/castellan,stable/train,bug/1876102,I83bafe5b7e0c4cca67f773858007fb59d98a93a5,"add ""verify_ssl_path"" config for barbican key manager",MERGED,2020-06-29 08:33:02.000000000,2020-07-07 09:55:01.000000000,2020-07-07 09:52:51.000000000,30,5,2,738398,884dee77b7f71ee46de8bc85b48482ffb30b1478,12,9,2,4,27594,Jie Li,ramboman,"add ""verify_ssl_path"" config for barbican key manager

Now we cann't use the verify_ssl if we set True, so we
add the ""verify_ssl_path"" config to solve it.

Closes-Bug: #1876102
(cherry picked from commit 89f311dfbd264a5d4309ea1ca4283f2746d6fa24)

Change-Id: I83bafe5b7e0c4cca67f773858007fb59d98a93a5
"
openstack%2Foctavia~stable%2Fstein~Ia3476ab7b24dc3fd6e29ff2abe6eb6bacd9908ed,openstack/octavia,stable/stein,,Ia3476ab7b24dc3fd6e29ff2abe6eb6bacd9908ed,Fix batch member create for v1 amphora driver,MERGED,2020-06-21 01:46:22.000000000,2020-07-07 09:28:45.000000000,2020-07-07 09:26:55.000000000,16,3,0,737156,d2bef9a47c6497b479d91471fbaec60d993e86ac,12,9,2,2,10366,Hemanth N,Hemanth,"Fix batch member create for v1 amphora driver

A previous patch[1] missed batch_member_update when adding database
repository ""get"" method retries for new object creation actions.
This patch fixes batch member create to retry the database get call
when new members are being created via batch member update.
This issue only impacts the v1 amphora driver as the v2 driver
does not need to get these objects from the database.

Story: 2007581
Task: 39503

[1] https://github.com/openstack/octavia/commit/48e85569f7e43e3dd5f09fd1ef4cb165526a92cd

Change-Id: Ia3476ab7b24dc3fd6e29ff2abe6eb6bacd9908ed
"
openstack%2Fironic-python-agent~stable%2Ftrain~If1408e4b81d263c56b4bbab618dd0737db5f762e,openstack/ironic-python-agent,stable/train,lib-exc-stable/train,If1408e4b81d263c56b4bbab618dd0737db5f762e,Fix serializing ironic-lib exceptions,MERGED,2020-07-06 16:50:46.000000000,2020-07-07 09:01:17.000000000,2020-07-07 08:58:41.000000000,39,0,0,739553,7c036fa18dca97c93e36eb91e30fd6fe4e3a48f0,8,3,1,3,10239,Dmitry Tantsur,dtantsur,"Fix serializing ironic-lib exceptions

Change-Id: If1408e4b81d263c56b4bbab618dd0737db5f762e
Story: #2007889
Task: #40268
(cherry picked from commit a4855c544cac35e92ce7c20143536ca7a3bb847a)
"
openstack%2Fironic-python-agent~stable%2Fussuri~If1408e4b81d263c56b4bbab618dd0737db5f762e,openstack/ironic-python-agent,stable/ussuri,lib-exc-stable/ussuri,If1408e4b81d263c56b4bbab618dd0737db5f762e,Fix serializing ironic-lib exceptions,MERGED,2020-07-06 16:50:34.000000000,2020-07-07 09:00:16.000000000,2020-07-07 08:58:37.000000000,39,0,0,739552,74e9ed159abf40bb016bd3cdffe8dc02d72c1342,8,3,1,3,10239,Dmitry Tantsur,dtantsur,"Fix serializing ironic-lib exceptions

Change-Id: If1408e4b81d263c56b4bbab618dd0737db5f762e
Story: #2007889
Task: #40268
(cherry picked from commit a4855c544cac35e92ce7c20143536ca7a3bb847a)
"
openstack%2Frequirements~master~Id1662fdaaef99f17835df086eaa4e789bd1af503,openstack/requirements,master,,Id1662fdaaef99f17835df086eaa4e789bd1af503,Update oslotest constraint to 4.4.0,MERGED,2020-07-06 16:10:47.000000000,2020-07-07 09:00:11.000000000,2020-07-07 08:58:21.000000000,1,1,0,739531,e0d7ac6629006cfd33a20629e48b6c8b41cb7f77,17,4,1,1,8556,Ghanshyam,ghanshyam,"Update oslotest constraint to 4.4.0

oslotest constraint to 4.4.0 in generate-constraints patch
failed due to nova bug(fix is depends-on).
- https://review.opendev.org/#/c/739330/

Let's update is with nova fix.
Depends-On: https://review.opendev.org/#/c/739333/

Change-Id: Id1662fdaaef99f17835df086eaa4e789bd1af503
"
openstack%2Fneutron~stable%2Frocky~I299031a505f05cd0469e2476b867b9dbca59c5bf,openstack/neutron,stable/rocky,bug/1840579-stable/stein-stable/rocky,I299031a505f05cd0469e2476b867b9dbca59c5bf,Unnecessary routers should not be created,MERGED,2020-03-11 00:09:40.000000000,2020-07-07 08:58:19.000000000,2020-07-07 08:58:19.000000000,47,2,2,712209,f6401020f7ba406623d49fb43671cb359aca2372,37,9,5,2,29071,norman shen,ushen,"Unnecessary routers should not be created

We observe an excessive amount of routers created on
compute node on which some virtual machines got a fixed
ip on floating network.

Rpc servers should filter out those unnecessary routers
during syncing.

Change-Id: I299031a505f05cd0469e2476b867b9dbca59c5bf
Partial-Bug: #1840579
(cherry picked from commit 480b04ce04f98bae6ff4ab13cec9e01b34204134)
"
openstack%2Fkolla~master~I0cfde46c29eedce77c70c1c677220814a801ff3a,openstack/kolla,master,remove_sensu,I0cfde46c29eedce77c70c1c677220814a801ff3a,Remove sensu images,MERGED,2020-07-06 09:32:23.000000000,2020-07-07 08:52:49.000000000,2020-07-07 08:50:48.000000000,6,189,0,739440,0cfd36292cccb8d3af9c65a1dff9696f50870df6,15,5,3,13,22629,Michal Nasiadka,mnasiadka,"Remove sensu images

They have been deprecated in Ussuri [1].

[1]: https://review.opendev.org/#/c/711636/

Change-Id: I0cfde46c29eedce77c70c1c677220814a801ff3a
"
openstack%2Fdevstack~master~I5459b8976539924cd6cc6c1e681b6753a76b804c,openstack/devstack,master,,I5459b8976539924cd6cc6c1e681b6753a76b804c,Allow IP-based subject alt names,MERGED,2018-11-30 22:43:54.000000000,2020-07-07 08:45:48.000000000,2020-07-07 08:43:50.000000000,5,1,0,621307,0137703825ea5f493e7486e19c2d83b328ca2998,13,6,1,1,15343,Tim Burke,tburke,"Allow IP-based subject alt names

... even when no other subject alt names provided

Previously, a non-voting job in barbican's gate would fail with something like

  X509 V3 routines:X509V3_parse_list:invalid null name:v3_utl.c:319:
  X509 V3 routines:DO_EXT_NCONF:invalid extension string:v3_conf.c:140:name=subjectAltName,section=DNS:pykmip-server,,IP:198.72.124.103
  X509 V3 routines:X509V3_EXT_nconf:error in extension:v3_conf.c:95:name=subjectAltName, value=DNS:pykmip-server,,IP:198.72.124.103

because we'd have an invalid empty string.

Change-Id: I5459b8976539924cd6cc6c1e681b6753a76b804c
"
openstack%2Fdiskimage-builder~master~I374f7f22f9e93ef35eb5813712ca59e75f0733e8,openstack/diskimage-builder,master,blockdev,I374f7f22f9e93ef35eb5813712ca59e75f0733e8,Use kpartx option to update partition mappings,MERGED,2020-05-18 12:32:25.000000000,2020-07-07 08:29:53.000000000,2020-07-07 08:27:29.000000000,9,3,0,728824,4a424ecabbb14e230be45864ee7eeca3722d49e8,34,8,6,4,27582,Simon Westphahl,simon.westphahl,"Use kpartx option to update partition mappings

Fix cases of 'mkfs' failing because the partitions never showed up. Partition
mappings will now be updated instead of just adding them with 'kpartx'. That
means that 'kpartx' will also remove devmappings for deleted partitions.

Traceback of failing mkfs call:

2020-05-11 22:03:25.523 | INFO diskimage_builder.block_device.utils [-] Calling [sudo sync]
2020-05-11 22:03:25.539 | INFO diskimage_builder.block_device.utils [-] Calling [sudo kpartx -avs /dev/loop0]
2020-05-11 22:03:25.581 | INFO diskimage_builder.block_device.utils [-] Calling [sudo mkfs -t ext4 -i 4096 -J size=64 -L cloudimg-rootfs -U 21c6f9eb-4d52-4e5c-b9b7-796735de8909 -q /dev/mapper/loop0p1]
2020-05-11 22:03:25.700 | ERROR diskimage_builder.block_device.blockdevice [-] Create failed; rollback initiated
2020-05-11 22:03:25.700 | Traceback (most recent call last):
2020-05-11 22:03:25.700 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/blockdevice.py"", line 406, in cmd_create
2020-05-11 22:03:25.700 |     node.create()
2020-05-11 22:03:25.700 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/level2/mkfs.py"", line 133, in create
2020-05-11 22:03:25.700 |     exec_sudo(cmd)
2020-05-11 22:03:25.700 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/utils.py"", line 143, in exec_sudo
2020-05-11 22:03:25.700 |     raise e
2020-05-11 22:03:25.700 | diskimage_builder.block_device.exception.BlockDeviceSetupException: exec_sudo failed
2020-05-11 22:03:25.700 | INFO diskimage_builder.block_device.level0.localloop [-] loopdev detach
2020-05-11 22:03:25.701 | INFO diskimage_builder.block_device.utils [-] Calling [sudo losetup -d /dev/loop0]
2020-05-11 22:03:25.732 | INFO diskimage_builder.block_device.level0.localloop [-] Remove image file [/tmp/dib_image.muyw7t1h/image0.raw]
2020-05-11 22:03:25.734 | ERROR diskimage_builder.block_device.blockdevice [-] Rollback complete, exiting
2020-05-11 22:03:25.740 | Traceback (most recent call last):
2020-05-11 22:03:25.740 |   File ""/home/zuul/dib/bin/dib-block-device"", line 8, in <module>
2020-05-11 22:03:25.740 |     sys.exit(main())
2020-05-11 22:03:25.740 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/cmd.py"", line 120, in main
2020-05-11 22:03:25.740 |     return bdc.main()
2020-05-11 22:03:25.740 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/cmd.py"", line 115, in main
2020-05-11 22:03:25.740 |     self.args.func()
2020-05-11 22:03:25.740 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/cmd.py"", line 36, in cmd_create
2020-05-11 22:03:25.740 |     self.bd.cmd_create()
2020-05-11 22:03:25.740 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/blockdevice.py"", line 406, in cmd_create
2020-05-11 22:03:25.740 |     node.create()
2020-05-11 22:03:25.740 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/level2/mkfs.py"", line 133, in create
2020-05-11 22:03:25.740 |     exec_sudo(cmd)
2020-05-11 22:03:25.740 |   File ""/home/zuul/dib/lib/python3.6/site-packages/diskimage_builder/block_device/utils.py"", line 143, in exec_sudo
2020-05-11 22:03:25.740 |     raise e
2020-05-11 22:03:25.740 | diskimage_builder.block_device.exception.BlockDeviceSetupException: exec_sudo failed

Change-Id: I374f7f22f9e93ef35eb5813712ca59e75f0733e8
Related-Bug: #1698337
"
openstack%2Fopenstack-ansible~master~Ie84eddef70d4fa7a9a42cdc2c82ec101f888545f,openstack/openstack-ansible,master,,Ie84eddef70d4fa7a9a42cdc2c82ec101f888545f,Fix tmpfiles-setup wait handler,MERGED,2020-07-02 12:09:50.000000000,2020-07-07 08:27:42.000000000,2020-07-06 22:53:33.000000000,1,1,0,739025,61941eaa8fbf024387fda886b89df7dc601945b4,12,3,2,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Fix tmpfiles-setup wait handler

Precess column was present only for CentOS 8 and is not applicable for
other distros. In the meanwhile Active column is present in all distros.

Change-Id: Ie84eddef70d4fa7a9a42cdc2c82ec101f888545f
"
openstack%2Ftripleo-heat-templates~master~I6863b5fb112c828304a23c368c3dbaf12902e0eb,openstack/tripleo-heat-templates,master,,I6863b5fb112c828304a23c368c3dbaf12902e0eb,Let redundant HostEntryValue (with YAQL in it) go,ABANDONED,2020-07-06 16:18:13.000000000,2020-07-07 08:27:11.000000000,,2,10,0,739539,4e6a5a304e9852a56f7bc4f3d5e5b3f4b0edb230,7,7,2,1,6926,Bogdan Dobrelya,bogdando,"Let redundant HostEntryValue (with YAQL in it) go

Storing HostEntryValue in Heat provide no value but
""niceness"" of storing /etc/hosts entries. That is by the price of the
increased YAQL memory footprint.

Drop that value and use HostsValue instead, just ""ugly"" as is. Empty
values will not be filtered. Deduplication will be partially handled by
list_concat_unique instead.

Change-Id: I6863b5fb112c828304a23c368c3dbaf12902e0eb
Closes-Bug: #1886203
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
"
openstack%2Fhorizon~master~I569097d6088a99542f3694e18c8d00a2b0dcf9a1,openstack/horizon,master,cross-jobs,I569097d6088a99542f3694e18c8d00a2b0dcf9a1,Add plugin cross jobs,MERGED,2020-06-25 01:31:53.000000000,2020-07-07 08:15:07.000000000,2020-07-07 08:11:08.000000000,26,0,2,737891,5ef68211722b6bef0174606038cc5ab8a3f8cc82,22,4,4,2,841,Akihiro Motoki,amotoki,"Add plugin cross jobs

This commit adds two types of cross repository jobs: python unit test and
npm test. The initial commit covers the following plugins as non-voting jobs.
They can be used as templates if more projects are tested as cross jobs.

* manila-ui for python unit test
* ironic-ui for npm test

Note that ironic-ui python unit test has only one test which checks
the panel is registered expectedly, so I don't think we need to cover
ironic-ui as a cross python unit test job.

Change-Id: I569097d6088a99542f3694e18c8d00a2b0dcf9a1
"
openstack%2Fgovernance-sigs~master~I3c39a9f241cf9e0a0e9c3ba33bb81441228538c7,openstack/governance-sigs,master,,I3c39a9f241cf9e0a0e9c3ba33bb81441228538c7,Added the Cloud Research SIG in the forming state,MERGED,2020-07-06 22:04:39.000000000,2020-07-07 08:06:31.000000000,2020-07-07 08:04:44.000000000,16,0,0,739616,f6e43d04ec55981121677b6cad57ff03ab1d2b3f,10,5,1,1,30855,Mohamed Elsakhawy,mfouadga,"Added the Cloud Research SIG in the forming state

Change-Id: I3c39a9f241cf9e0a0e9c3ba33bb81441228538c7
"
openstack%2Fceilometer~master~I2c07bf43d1a230c0a6bf48755d91d41c64abc9ea,openstack/ceilometer,master,fix-dynamic-pollster-doc-configs,I2c07bf43d1a230c0a6bf48755d91d41c64abc9ea,Fix dynamic pollster samples indentation in the documentation,MERGED,2020-07-03 22:09:10.000000000,2020-07-07 07:43:20.000000000,2020-07-07 07:39:54.000000000,49,52,0,739288,49e9744f8d476a474c0b2fbe1ca112b62f15ba0e,8,3,1,1,28356,Rafael Weingartner,rafaelweingartner,"Fix dynamic pollster samples indentation in the documentation

Change-Id: I2c07bf43d1a230c0a6bf48755d91d41c64abc9ea
"
openstack%2Fnova~master~If1cb51404c9c99b1f638a8fafdba5ae01d671aef,openstack/nova,master,bp/use-pcpu-and-vcpu-in-one-instance,If1cb51404c9c99b1f638a8fafdba5ae01d671aef,online data migration for cpuset of dedicated instance,ABANDONED,2020-04-08 15:37:31.000000000,2020-07-07 07:29:28.000000000,,94,0,22,718493,01ebd86204375cdca8f6a4f8f78fad5b7d727073,44,14,5,3,30209,Huaqiang,Huaqiang.Wang,"online data migration for cpuset of dedicated instance

This patch offers an online data migration method for dedicated
instance since we have offerred `InstanceNUMACell.pcpuset` for
dedicated cpuset, which is kept in `InstanceNUMACell.cpuset`
field before Ussuri.

Part of blueprint use-pcpu-and-vcpu-in-one-instance

Change-Id: If1cb51404c9c99b1f638a8fafdba5ae01d671aef
Signed-off-by: Wang Huaqiang <huaqiang.wang@intel.com>
"
openstack%2Fnova~master~I6a14688aa9d9091b19c744b23d0ec0e1ce6b96b8,openstack/nova,master,bp/use-pcpu-and-vcpu-in-one-instance,I6a14688aa9d9091b19c744b23d0ec0e1ce6b96b8,Setup 'mixed' instance through 'PCPU' and 'VCPU' resource,NEW,2020-03-17 00:55:27.000000000,2020-07-07 07:26:38.000000000,,124,6,39,713355,0e9f41bb2aab9bcf6641e891cf4ebae201dbdf42,96,15,14,2,30209,Huaqiang,Huaqiang.Wang,"Setup 'mixed' instance through 'PCPU' and 'VCPU' resource

Introduced another interface for creating the 'MIXED' instance
through 'PCPU' and 'VCPU' resources interface.

Also introduced a helper, the _dedicated_cpus_from_resource,
with the purpose to put the instance dedicated CPUs behind
the shared CPUs.

Part of blueprint use-pcpu-and-vcpu-in-one-instance

Change-Id: I6a14688aa9d9091b19c744b23d0ec0e1ce6b96b8
Signed-off-by: Wang Huaqiang <huaqiang.wang@intel.com>
"
openstack%2Fkolla~master~I21be28113c6448e0a70747a907a3825c44158dfe,openstack/kolla,master,remove-opendaylight,I21be28113c6448e0a70747a907a3825c44158dfe,Remove opendaylight image,ABANDONED,2020-06-09 15:39:05.000000000,2020-07-07 07:07:15.000000000,,4,113,0,734630,5539596019e837bd33ffb6a39ba5d275b5b5b6e5,8,5,2,13,167,Christian Berendt,berendt,"Remove opendaylight image

Change-Id: I21be28113c6448e0a70747a907a3825c44158dfe
"
openstack%2Fpython-openstackclient~master~I3e3632783bc745979b6db73e610df8a77ffaceb0,openstack/python-openstackclient,master,osc-performance,I3e3632783bc745979b6db73e610df8a77ffaceb0,switch to stevedore for entry points,MERGED,2020-07-04 18:12:19.000000000,2020-07-07 06:27:10.000000000,2020-07-07 06:23:55.000000000,18,9,3,739327,870cf0114848f145f15a78415e3f4203c6338cd1,25,6,7,4,2472,Doug Hellmann,doug-hellmann,"switch to stevedore for entry points

Importing pkg_resources scans every installed distribution to find
all of the entry points. Stevedore is adding a new caching layer using
importlib.metadata, which will not.  Switching to the stevedore should
eventually speed up load times, especially for command line apps. This
change makes the switch now to ensure API compatibility.

We were already using stevedore for tests, so this moves the dependency
from test-requirements.txt to requirements.txt and raises the minimum
version to something more recent.

Change-Id: I3e3632783bc745979b6db73e610df8a77ffaceb0
Signed-off-by: Doug Hellmann <doug@doughellmann.com>
"
openstack%2Fzaqar~master~Ia8f9a90c0b22680bf33c6f58ef7a3a49b2cc30fe,openstack/zaqar,master,retire-neutron-fwaas,Ia8f9a90c0b22680bf33c6f58ef7a3a49b2cc30fe,Remove neutron-fwaas from the jobs' required project,MERGED,2020-06-16 10:35:04.000000000,2020-07-07 06:26:46.000000000,2020-07-07 06:19:30.000000000,0,1,0,735861,98ae5dac8003cc543edd7a99295142876d872987,10,13,1,1,11975,Slawek Kaplonski,slaweq,"Remove neutron-fwaas from the jobs' required project

Neutron-fwaas is going to be deprecated in master branch with [1].

[1] https://review.opendev.org/#/c/735828/

Change-Id: Ia8f9a90c0b22680bf33c6f58ef7a3a49b2cc30fe
"
openstack%2Ftripleo-ansible~stable%2Ftrain~Icd0512cb2a92faef1109144e48d93901cf2e8371,openstack/tripleo-ansible,stable/train,,Icd0512cb2a92faef1109144e48d93901cf2e8371,Run scenario004 for changes to tripleo-ceph-* roles,MERGED,2020-07-06 21:54:04.000000000,2020-07-07 05:19:37.000000000,2020-07-07 05:19:37.000000000,6,0,0,739614,2a6d7c19c234d2bacb3ad3375cd242fc67db2c07,9,3,1,1,6796,Giulio Fidente,gfidente,"Run scenario004 for changes to tripleo-ceph-* roles

Also enables scenario001 for changes to tripleo-ceph-* roles

Change-Id: Icd0512cb2a92faef1109144e48d93901cf2e8371
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I1229d3a0cd2f08dabdcd3b47d9823f6a939cfbdb,openstack/tripleo-ansible,stable/train,,I1229d3a0cd2f08dabdcd3b47d9823f6a939cfbdb,Use ansible_user instead of ANSIBLE_REMOTE_USER env var,MERGED,2020-07-06 21:54:04.000000000,2020-07-07 05:19:36.000000000,2020-07-07 05:19:36.000000000,2,2,0,739613,a4a15acbe32376b9623369519685c36f67ae48d4,11,5,1,1,6796,Giulio Fidente,gfidente,"Use ansible_user instead of ANSIBLE_REMOTE_USER env var

In 'genereate create_ceph_ansible_remote_tmp playbook' we should
be using ansible_user because the env var ANSIBLE_REMOTE_USER
might not always being set.

Change-Id: I1229d3a0cd2f08dabdcd3b47d9823f6a939cfbdb
Closes-Bug: 1886497
(cherry picked from commit 5f07c12adc17bc8ed0e569542b3035b0e5f1dd50)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I30a930e4f7b8200ffa67c17b967db8a1fb60b4c0,openstack/tripleo-ansible,stable/train,maxfail/train,I30a930e4f7b8200ffa67c17b967db8a1fb60b4c0,Max percentage failure support,MERGED,2020-07-06 19:06:29.000000000,2020-07-07 05:17:26.000000000,2020-07-07 05:17:26.000000000,57,5,0,739586,baa1829cfc59e103d1d6e86d5fa5da6844924c85,7,3,1,3,3153,Emilien Macchi,emilienm,"Max percentage failure support

In this patch we update the new strategies so they support a max failure
percentage on a play. Which will be useful for the tripleo roles so we
can tolerate some % of failure (e.g. on computes) during a deployment.

Co-Authored-By: Alex Schultz <aschultz@redhat.com>
Co-Authored-By: Kevin Carter <kecarter@redhat.com>
Co-Authored-By: Emilien Macchi <emilien@redhat.com>

Change-Id: I30a930e4f7b8200ffa67c17b967db8a1fb60b4c0
(cherry picked from commit 87f9c9354884eace00bf7d42fbaa775055217e3f)
"
openstack%2Fopenstack-ansible-os_trove~master~I51c46f1432cd71357f1f2d18bf6cc4446296f96a,openstack/openstack-ansible-os_trove,master,osa/el8,I51c46f1432cd71357f1f2d18bf6cc4446296f96a,Add centos-8 support,ABANDONED,2020-07-06 05:44:53.000000000,2020-07-07 05:17:05.000000000,,0,0,1,739404,6496eb416777b1809aa6b2a423eba93895ef409e,7,3,2,0,28752,Satish Patel,spatel,"Add centos-8 support

Renaming redhat-7.yml to redhat.yml for centos-8 support.

Change-Id: I51c46f1432cd71357f1f2d18bf6cc4446296f96a
"
openstack%2Fmasakari~master~I179816a68fe10202951061d30bd543ea1427b887,openstack/masakari,master,,I179816a68fe10202951061d30bd543ea1427b887,Use uwsgi binary from path,MERGED,2020-06-30 08:31:53.000000000,2020-07-07 05:15:32.000000000,2020-07-07 05:14:18.000000000,1,1,0,738565,9492987c31b063ec92da661453fdd6eb74b1a4bc,11,8,2,1,24501,sue,suzhengwei,"Use uwsgi binary from path

Change-Id: I179816a68fe10202951061d30bd543ea1427b887
"
openstack%2Ftrove-dashboard~master~Id4cfbb53947760420ba8f5a0ef394e112a58c8fb,openstack/trove-dashboard,master,zanata/translations,Id4cfbb53947760420ba8f5a0ef394e112a58c8fb,Imported Translations from Zanata,MERGED,2020-06-17 11:02:52.000000000,2020-07-07 05:08:09.000000000,2020-07-07 05:06:43.000000000,7,4,0,736159,60a19b2c95f423c81381cd491d878d338a3a54ba,7,2,1,1,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: Id4cfbb53947760420ba8f5a0ef394e112a58c8fb
"
openstack%2Fopenstack-ansible-os_gnocchi~master~Ief6fd82fbd2f208798237ac228f9904e2e6c0132,openstack/openstack-ansible-os_gnocchi,master,osa/el8,Ief6fd82fbd2f208798237ac228f9904e2e6c0132,Add centos-8 support,ABANDONED,2020-07-06 03:58:46.000000000,2020-07-07 05:05:16.000000000,,1,1,0,739389,e8cba1c5e4e599e58e37dd7c57fb331fd9bfba7d,4,1,2,1,28752,Satish Patel,spatel,"Add centos-8 support

Renaming redhat-7.yml to redhat.yml for centos-8 support.

Change-Id: Ief6fd82fbd2f208798237ac228f9904e2e6c0132
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I593f193f98112dbf1d493ffd22040837597db11c,openstack/tripleo-ansible,stable/train,strategy-improvements-stable/train,I593f193f98112dbf1d493ffd22040837597db11c,Create tripleo base strategy class,MERGED,2020-07-06 18:54:49.000000000,2020-07-07 05:00:06.000000000,2020-07-07 05:00:06.000000000,179,207,0,739582,29dd87c0dcd0a65cbd63d3efec6945dc0ddc484b,7,4,1,3,3153,Emilien Macchi,emilienm,"Create tripleo base strategy class

In order to allow us to share some logic between the linear and free
strategies, we need to create a base strategy to use for our shared
logic.

Change-Id: I593f193f98112dbf1d493ffd22040837597db11c
(cherry picked from commit e52089e8dfceba7bff81a8acc96b73d6e6ec3983)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I8539a6ad747a3923256f8c14c0a140e7670cc135,openstack/tripleo-ansible,stable/train,strategy-improvements-stable/train,I8539a6ad747a3923256f8c14c0a140e7670cc135,Add tripleo linear strategy,MERGED,2020-07-06 18:54:33.000000000,2020-07-07 05:00:05.000000000,2020-07-07 05:00:05.000000000,466,0,0,739581,ab894ee213436cb9464b549c31277814b19a067c,7,4,1,1,3153,Emilien Macchi,emilienm,"Add tripleo linear strategy

Change-Id: I8539a6ad747a3923256f8c14c0a140e7670cc135
(cherry picked from commit 09da864f8c11184e5dc537d838109a2794cc4048)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~Iaa1278763d56429b2886371a18477e1f54680e19,openstack/tripleo-ansible,stable/train,strategy-improvements-stable/train,Iaa1278763d56429b2886371a18477e1f54680e19,Implement run_once,MERGED,2020-07-06 18:54:17.000000000,2020-07-07 04:21:43.000000000,2020-07-07 04:21:43.000000000,21,3,0,739580,313108543a3052e1e832db46bccc917e2f3f2c02,7,4,1,1,3153,Emilien Macchi,emilienm,"Implement run_once

Prior to this patch, run_once was basically ignored. This patch adds
tracking on tasks that are tagged with run_once and will only allow it
to be invoked once. This means if the run_once task fails, all the other
hosts will continue to process their tasks like nothing happened. The
play itself will exit if the run_once task fails at the end. For tripleo
this means that run_once should not be used for any required tasks
within a play but can be used to make sure a task will only run once
time for a given play.

Change-Id: Iaa1278763d56429b2886371a18477e1f54680e19
(cherry picked from commit 894a853a5ef0af869624376a04a8f12dfe5c801c)
"
openstack%2Fopenstack-ansible-os_cinder~stable%2Frocky~I66a76fdb30ae6afd8a8faf4119bef495600aec50,openstack/openstack-ansible-os_cinder,stable/rocky,policy-in-code-stable/stein-stable/rocky,I66a76fdb30ae6afd8a8faf4119bef495600aec50,Fix policy configuration,ABANDONED,2020-07-07 02:58:16.000000000,2020-07-07 04:12:26.000000000,,4,0,0,739642,7cec97e76e96391de7e5ab56c1fcf32c55e3223b,3,2,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Fix policy configuration

Since cinder moved to policy-in-code, oslopolicy-policy-generator
must be used to compile a policy file that can be distributed to
Horizon for policy settings. For cinder, it will only output its
default policy unless cinder.conf contains an oslo_policy
configuration section pointing to the policy config file.

Change-Id: I66a76fdb30ae6afd8a8faf4119bef495600aec50
(cherry picked from commit dbaf649e0c3992f9ab6495ad2f8f55a0a97cd3ca)
"
openstack%2Fopenstack-ansible-os_cinder~stable%2Fqueens~I66a76fdb30ae6afd8a8faf4119bef495600aec50,openstack/openstack-ansible-os_cinder,stable/queens,policy-in-code-stable/queens,I66a76fdb30ae6afd8a8faf4119bef495600aec50,Fix policy configuration,ABANDONED,2020-07-07 02:59:49.000000000,2020-07-07 04:12:13.000000000,,4,0,0,739643,915d93fa72e0a251f12fa5e3a5a38116db6c333d,3,2,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Fix policy configuration

Since cinder moved to policy-in-code, oslopolicy-policy-generator
must be used to compile a policy file that can be distributed to
Horizon for policy settings. For cinder, it will only output its
default policy unless cinder.conf contains an oslo_policy
configuration section pointing to the policy config file.

Change-Id: I66a76fdb30ae6afd8a8faf4119bef495600aec50
(cherry picked from commit dbaf649e0c3992f9ab6495ad2f8f55a0a97cd3ca)
"
openstack%2Fceilometer~stable%2Ftrain~I55f0667c71ba4f3a33959a44bef43c3b05bc097c,openstack/ceilometer,stable/train,cinder_busy-stable/ussuri-stable/train,I55f0667c71ba4f3a33959a44bef43c3b05bc097c,Trigger volume deletes only on volume deleted,MERGED,2020-06-30 08:24:26.000000000,2020-07-07 03:08:22.000000000,2020-07-07 03:07:09.000000000,5,5,0,738563,4aab9fac33785d8c07e6c7c0e1763f7024c48eae,11,3,2,2,4264,Matthias Runge,mrunge,"Trigger volume deletes only on volume deleted

It was possible to create a volume and to do the following operations
with the volume; at the end, the volume itself is marked as ended, but
the volume is still available.

openstack volume create --size x foo
openstack volume snapshot create --volume <id> foo_snap
openstack volume create --snapshot <id_of_snap> clone
openstack volume delete --purge <id_of_foo>

openstack metric resource show <id_of_foo>

This commit fixes that issue.

Change-Id: I55f0667c71ba4f3a33959a44bef43c3b05bc097c
(cherry picked from commit f8992d40a135188a9d89c86f78868d340f3a1b96)
(cherry picked from commit 4185147ddd6824c26cbe41c1ce25ce36559288be)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~Id921ed48a948211b9a90def4a4667d015ec11d2f,openstack/tripleo-ansible,stable/train,strategy-improvements-stable/train,Id921ed48a948211b9a90def4a4667d015ec11d2f,Implement a tripleo free strategy,MERGED,2020-07-06 18:53:30.000000000,2020-07-07 03:04:19.000000000,2020-07-07 03:04:18.000000000,411,0,0,739579,0147457083302e93d44584ff01d204e700fa3308,9,5,1,1,3153,Emilien Macchi,emilienm,"Implement a tripleo free strategy

This strategy is to be used for the execution of deployment steps so
that tasks run on all hosts (up to # of workers) freely without locking
at each task.  This is closer to what we had when Heat drove the
deployments as each of the software deployments would execute
simultaneously on all nodes at the same time.

This strategy does two important things for us:

  1) Hosts execute their tasks freely with no dependencies on the other
     hosts that are running the same tasks
  2) Failures on any given host will not stop future tasks from
     executing on other hosts, but will cause the overall playbook
     execution to stop at the end of the ""PLAY"".

These specific things are how the previous deployment executed when Heat
was the driver of deployment actions. The nodes would fetch their list
of actions, execute and report back to status. Heat would fail the
deployment if any of the hosts failed to execute their work however a
failure on one host did not impact the other hosts.  The TripleO
deployment framework already has the step concept in itself to allow
for the individual steps (1 through 5) to execute in a parallael on all
hosts at the same time. At the end of the ""PLAY"", ansible waits for all
nodes to complete before proceeding on to the next ""PLAY"". So Step 1 is
a ""PLAY"" followed by Step 2. If a failure occurs during Step 1 on any
host, we would not proceed to the Step 2 play.

Change-Id: Id921ed48a948211b9a90def4a4667d015ec11d2f
(cherry picked from commit f873e31f5874ea0dad6997ee2f9c8186f3d1058d)
"
openstack%2Fopenstack-ansible-os_cinder~master~I66a76fdb30ae6afd8a8faf4119bef495600aec50,openstack/openstack-ansible-os_cinder,master,policy-in-code,I66a76fdb30ae6afd8a8faf4119bef495600aec50,Fix policy configuration,MERGED,2019-06-15 00:40:07.000000000,2020-07-07 02:59:49.000000000,2019-08-24 19:33:42.000000000,4,0,0,665499,dbaf649e0c3992f9ab6495ad2f8f55a0a97cd3ca,19,7,1,1,17799,Logan V,Logan2211,"Fix policy configuration

Since cinder moved to policy-in-code, oslopolicy-policy-generator
must be used to compile a policy file that can be distributed to
Horizon for policy settings. For cinder, it will only output its
default policy unless cinder.conf contains an oslo_policy
configuration section pointing to the policy config file.

Change-Id: I66a76fdb30ae6afd8a8faf4119bef495600aec50
"
openstack%2Fopenstack-helm-infra~master~Ib95c30380d89c336774d5c74e02ce5cbd9efb5d7,openstack/openstack-helm-infra,master,nru,Ib95c30380d89c336774d5c74e02ce5cbd9efb5d7,[rabbitmq] Upgrade to 3.7.26,MERGED,2020-06-25 20:34:58.000000000,2020-07-07 02:58:40.000000000,2020-07-07 02:57:14.000000000,4,4,0,738104,6d032c3971d556893d50b1f71b9a692bfab44e6f,21,5,2,3,8898,Chris Wedgwood,anticw,"[rabbitmq] Upgrade to 3.7.26

Staying current.  Many bugfixes.

Change-Id: Ib95c30380d89c336774d5c74e02ce5cbd9efb5d7
"
openstack%2Fnova~master~I212a84e5cae15bc133aafd538d55f85149ab360f,openstack/nova,master,,I212a84e5cae15bc133aafd538d55f85149ab360f,Add traits for new AVX512 CPU feature,MERGED,2020-05-27 18:15:56.000000000,2020-07-07 02:13:40.000000000,2020-07-07 02:11:33.000000000,10,2,1,731288,8fa83ff62a6eaad0bfe6be036033067ee42de146,30,15,2,3,12597,Lin Yang,lin.yang,"Add traits for new AVX512 CPU feature

To support new AVX512 cpu feature, this patch adds the mapping
between cpu features reported by libvirt [1] and corresponding
os-traits [2]. The traits include 'AVX512VBMI', 'AVX512IFMA',
'AVX512VBMI2', 'AVX512BITALG', 'AVX512VAES', 'AVX512GFNI',
'AVX512VPCLMULQDQ' and 'AVX512VPOPCNTDQ'.

[1] https://github.com/libvirt/libvirt/blob/master/src/cpu_map/x86_features.xml
[2] https://review.opendev.org/#/c/728576/

Depends-On: I58cba02f204d2e19a1a838852c628694edd47d73
Change-Id: I212a84e5cae15bc133aafd538d55f85149ab360f
"
openstack%2Fproject-config~master~I2e731b7825574e7f8a704444095c53036ca93169,openstack/project-config,master,,I2e731b7825574e7f8a704444095c53036ca93169,"Add ""Review-Priority"" label to qa projects",MERGED,2020-07-06 16:45:49.000000000,2020-07-07 01:23:07.000000000,2020-07-07 01:11:10.000000000,39,0,0,739550,88982d5549d7f4c9c4b9ba99e266e758fd6f7285,9,3,2,3,8556,Ghanshyam,ghanshyam,"Add ""Review-Priority"" label to qa projects

Change-Id: I2e731b7825574e7f8a704444095c53036ca93169
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~I364fb42a41b4cb4ae076f07704c72c6ea442a198,openstack/python-tripleoclient,stable/ussuri,hotfix/ussuri,I364fb42a41b4cb4ae076f07704c72c6ea442a198,Add tripleo container image hotfix command,MERGED,2020-07-06 16:09:57.000000000,2020-07-07 01:17:49.000000000,2020-07-07 01:15:19.000000000,135,2,0,739530,39c270006d98ec5a20992a575cd5a145762bc40d,7,2,1,3,3153,Emilien Macchi,emilienm,"Add tripleo container image hotfix command

This change adds a CLI command to invoke hotfixes via the TripleO modify
image role. This CLI command will ensure a uniform experience for operators
when needing to apply a hotfixes to containers.

Change-Id: I364fb42a41b4cb4ae076f07704c72c6ea442a198
Signed-off-by: Kevin Carter <kecarter@redhat.com>
(cherry picked from commit 4967f4f6eec7de8745a43fb1cd73e56ccc50a6a1)
"
openstack%2Fproject-config~master~I3f724d1c0678c0addd025e07c951ed8ea7879af1,openstack/project-config,master,,I3f724d1c0678c0addd025e07c951ed8ea7879af1,Add openstack/devstack-plugin-ceph in vexxhost tenant,MERGED,2020-07-06 20:56:42.000000000,2020-07-07 01:17:27.000000000,2020-07-07 00:48:50.000000000,1,0,0,739602,21c1f5b53d32ed093dd47e58220365ca51de49ec,9,3,2,1,31746,Oleksandr Kozachenko,okozachenko,"Add openstack/devstack-plugin-ceph in vexxhost tenant

Needed-By: https://review.opendev.org/739603/
Change-Id: I3f724d1c0678c0addd025e07c951ed8ea7879af1
"
openstack%2Ftripleo-heat-templates~master~Iaced2ba676a4e4f651c67da082797cc1c1ffccd1,openstack/tripleo-heat-templates,master,converge-var-run-to-run,Iaced2ba676a4e4f651c67da082797cc1c1ffccd1,Ensure we use only /run instead of /var/run,MERGED,2020-06-18 10:04:17.000000000,2020-07-07 01:16:43.000000000,2020-07-07 01:15:20.000000000,38,35,4,736521,e047d8314218ca25da88786809d63f1cbe90428e,64,13,4,13,28223,Cedric Jeanneret,cjeanner,"Ensure we use only /run instead of /var/run

There is no real value using /var/run instead of /run, especially since
/var/run is a symlink to /run.

This patch also removes duplicated mounts due to this very symlink.

Change-Id: Iaced2ba676a4e4f651c67da082797cc1c1ffccd1
"
openstack%2Ftripleo-heat-templates~master~I04cb72210fbd25a720158988698a300140f4e7db,openstack/tripleo-heat-templates,master,bug/1886203,I04cb72210fbd25a720158988698a300140f4e7db,undercloud/heat: set YAQL memory quota to 200000,MERGED,2020-07-03 14:59:49.000000000,2020-07-07 01:16:40.000000000,2020-07-07 01:15:23.000000000,1,0,1,739249,c67c53a8d8094382bc75e7d56480ecb3f8897610,19,7,1,1,3153,Emilien Macchi,emilienm,"undercloud/heat: set YAQL memory quota to 200000

Since the ""optimization"" [1] of host entries in Heat and it's YAQLization,
we need to increase the memory quota for YAQL queries or the resource
will fail to process at large scale (250 nodes).

[1] 3b8e6f78e19e776c087dc5c3ff225703b5c487bc

Change-Id: I04cb72210fbd25a720158988698a300140f4e7db
Closes-Bug: #1886203
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~I7651144cdb7142647b1c6303c4af4ba2ca2e2c58,openstack/python-tripleoclient,stable/ussuri,tripleo-common-stable/ussuri,I7651144cdb7142647b1c6303c4af4ba2ca2e2c58,Bump tripleo-common,MERGED,2020-07-06 12:53:10.000000000,2020-07-07 01:16:37.000000000,2020-07-07 01:15:15.000000000,2,2,0,739483,2375426cdcd4dda7f4eb213a7a0bebad0787b985,10,3,1,2,3153,Emilien Macchi,emilienm,"Bump tripleo-common

For the Container Image Build command, we need new functionalities from
the BuildahBuilder that were released after 12.4.0 tag.

This patch makes sure tripleo-common >= 12.4.0 is pulled in the Python
jobs.

Change-Id: I7651144cdb7142647b1c6303c4af4ba2ca2e2c58
(cherry picked from commit 185d9f89542366bafb891cf725384e310b0137e0)
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~I279e95722fe7a10148d36c99c7179c33a3a767a0,openstack/python-tripleoclient,stable/ussuri,images/new-stable/ussuri,I279e95722fe7a10148d36c99c7179c33a3a767a0,Add openstack tripleo container image build,MERGED,2020-07-03 13:55:35.000000000,2020-07-07 01:15:16.000000000,2020-07-07 01:15:16.000000000,775,0,0,739236,28d1d62c7fea529f78fd5e363ff808900a713b97,9,3,2,5,3153,Emilien Macchi,emilienm,"Add openstack tripleo container image build

This change adds a v2 entry point to allow us to build images within the
native tripleoclient. Images will leverage the new
`tripleo_container_image_build` role which will produce simplified
container files and and an image structure inline with the simple
container generation spec.

Depends-On: https://review.opendev.org/722486

Change-Id: I279e95722fe7a10148d36c99c7179c33a3a767a0
Signed-off-by: Kevin Carter <kecarter@redhat.com>
(cherry picked from commit 1c09e83744d5c98437db7b756c6cda52d7225d5e)
"
openstack%2Fpuppet-tripleo~stable%2Fussuri~Idf106c9ffa23ed00c497e1e5014e1b5718254320,openstack/puppet-tripleo,stable/ussuri,bug/1871663-stable/ussuri,Idf106c9ffa23ed00c497e1e5014e1b5718254320,Ensure that the HAProxy certificate is updated,MERGED,2020-07-06 16:17:02.000000000,2020-07-07 01:15:14.000000000,2020-07-07 01:15:14.000000000,3,0,0,739537,146674dcea0bca513a6d9ea0087f06c4c300a0bc,7,3,1,1,3153,Emilien Macchi,emilienm,"Ensure that the HAProxy certificate is updated

While doing research for this bugzilla[1] I found that since the
actual certificate PEM file is being bind mounted the mount is acting
as a hard link to the inode of the PEM rather than just a pointer to
it's location in the directory.  When the new file is copied over the
inode is updated but the container still maintains a link to the stale
inode.  This patch copies the contents of the certificate into the
container so that the HUP of HAProxy will reload the certificate.

[1]: https://bugzilla.redhat.com/show_bug.cgi?id=1765839

Change-Id: Idf106c9ffa23ed00c497e1e5014e1b5718254320
Closes-Bug: 1871663
(cherry picked from commit c1e09672a52fea82d853d17145901109291ac1f1)
"
openstack%2Fpuppet-tripleo~master~I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8,openstack/puppet-tripleo,master,,I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8,Switch RGW HAProxy healthcheck to use special RGW healthcheck url,MERGED,2020-06-30 12:53:37.000000000,2020-07-07 01:15:13.000000000,2020-07-07 01:15:13.000000000,1,1,0,738600,f1994dba33e09033f3a142ef202c6b0afe322b94,24,6,3,1,6796,Giulio Fidente,gfidente,"Switch RGW HAProxy healthcheck to use special RGW healthcheck url

The change is made because /swift/healthcheck weights less on RGW
and avoids overloading the nodes CPU for basic HAProxy checks

For more information also see [1]

1. https://bugzilla.redhat.com/show_bug.cgi?id=1850036#c16

Change-Id: I3e2805a922c0e90dc493a3e065bbdc229e5fc7a8
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I3f55f0a7f966f025a9938576ccf735f50f4c8589,openstack/tripleo-ansible,stable/ussuri,callback-improvements-stable/ussuri,I3f55f0a7f966f025a9938576ccf735f50f4c8589,Prepend timestamp callback output,MERGED,2020-07-06 18:40:11.000000000,2020-07-07 01:03:08.000000000,2020-07-07 01:03:08.000000000,21,10,0,739574,7d85cf55de7b5c74a635325c6618ffcb93037903,7,4,1,2,3153,Emilien Macchi,emilienm,"Prepend timestamp callback output

It's useful to know when a command last ran as well as being able to
cross coordinate when something was running between the ansible output
and other logs. We can use the output timestamp do this.

Change-Id: I3f55f0a7f966f025a9938576ccf735f50f4c8589
(cherry picked from commit 97b68ec0597123840ee3d1c5b58422e6c437cb05)
"
openstack%2Fproject-config~master~Ife2442c2f1cef3f672d41cc2c07da6e40dd66098,openstack/project-config,master,arm64-testing,Ife2442c2f1cef3f672d41cc2c07da6e40dd66098,Publish Ubuntu Xenial ARM64 wheels,ABANDONED,2018-03-07 19:44:32.000000000,2020-07-07 01:02:59.000000000,,4,0,0,550582,06832b34da3f2614238cb5ecd7714170c428123d,5,3,1,2,6088,Emmet Hikory,persia,"Publish Ubuntu Xenial ARM64 wheels

Depends-On: https://review.openstack.org/550578
Change-Id: Ife2442c2f1cef3f672d41cc2c07da6e40dd66098
"
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I84287d9c1ef110511c66743f9a3a22709077b0cb,openstack/tripleo-heat-templates,stable/ussuri,bug/1885619-stable/ussuri,I84287d9c1ef110511c66743f9a3a22709077b0cb,Exclude /etc/hostname,MERGED,2020-07-06 14:14:35.000000000,2020-07-07 00:55:30.000000000,2020-07-07 00:55:30.000000000,11,2,0,739496,7ab3de5899440c4ce98a7ea8c7344bc5f13cafdb,9,6,1,1,3153,Emilien Macchi,emilienm,"Exclude /etc/hostname

Similar to the previous patch where we excluded /etc/hosts, it turns out
that /etc/hostname is also a special file that cannot be synced in via
kolla because they are bindmounted internally.

https://github.com/containers/libpod/blob/6ac009d5304127f6758be157c7302646e5a481e5/libpod/container_internal_linux.go#L1236

Additionally this change includes cleanup for end users who may have hit
LP#1860607 and allows folks who have hit this to just simply rerun the
deployment and not have to manually cleanup the synced files.

Change-Id: I84287d9c1ef110511c66743f9a3a22709077b0cb
Closes-Bug: #1885619
(cherry picked from commit 777920dfba58fa7b26c063fa5d6df0203009d12c)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I97a0171f9e7ba08f020ac7cf224a9ff9f6a34d01,openstack/tripleo-ansible,stable/ussuri,molecule/strats-stable/ussuri,I97a0171f9e7ba08f020ac7cf224a9ff9f6a34d01,Molecule testing for TripleO Strategy Plugins,MERGED,2020-07-03 13:56:25.000000000,2020-07-07 00:27:17.000000000,2020-07-07 00:27:17.000000000,211,0,0,739237,fcefdf809c525f34e6d92858b3d5424f76ad88a0,14,3,3,8,3153,Emilien Macchi,emilienm,"Molecule testing for TripleO Strategy Plugins

For both tripleo_free and tripleo_linear, add molecule tests that will
execute a simple task (for now) and test the max_fail_percentage value
that is defined in the Ansible inventory.

We simulate a failure on one compute node, which shouldn't make the
playbook failing since we tolerate 50% of failure (we have 6 nodes and
one failure).

Change-Id: I97a0171f9e7ba08f020ac7cf224a9ff9f6a34d01
(cherry picked from commit 54ea54c26b777709fd636b376cce1d5078ae287c)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I30a930e4f7b8200ffa67c17b967db8a1fb60b4c0,openstack/tripleo-ansible,stable/ussuri,maxfail/ussuri,I30a930e4f7b8200ffa67c17b967db8a1fb60b4c0,Max percentage failure support,MERGED,2020-07-06 18:58:04.000000000,2020-07-07 00:24:44.000000000,2020-07-07 00:24:44.000000000,57,5,0,739584,7965ae030b34f8196628910c2f53a8ff7cc94e37,7,3,1,3,3153,Emilien Macchi,emilienm,"Max percentage failure support

In this patch we update the new strategies so they support a max failure
percentage on a play. Which will be useful for the tripleo roles so we
can tolerate some % of failure (e.g. on computes) during a deployment.

Co-Authored-By: Alex Schultz <aschultz@redhat.com>
Co-Authored-By: Kevin Carter <kecarter@redhat.com>
Co-Authored-By: Emilien Macchi <emilien@redhat.com>

Change-Id: I30a930e4f7b8200ffa67c17b967db8a1fb60b4c0
(cherry picked from commit 87f9c9354884eace00bf7d42fbaa775055217e3f)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I3f55f0a7f966f025a9938576ccf735f50f4c8589,openstack/tripleo-ansible,stable/train,callback-improvements-stable/train,I3f55f0a7f966f025a9938576ccf735f50f4c8589,Prepend timestamp callback output,MERGED,2020-07-06 18:40:21.000000000,2020-07-07 00:18:36.000000000,2020-07-07 00:18:36.000000000,21,10,0,739575,935f3ddd8d2b559f1faa343b079810be5a90a724,7,4,1,2,3153,Emilien Macchi,emilienm,"Prepend timestamp callback output

It's useful to know when a command last ran as well as being able to
cross coordinate when something was running between the ansible output
and other logs. We can use the output timestamp do this.

Change-Id: I3f55f0a7f966f025a9938576ccf735f50f4c8589
(cherry picked from commit 97b68ec0597123840ee3d1c5b58422e6c437cb05)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I01f6e3a69dec25ec69782c087d6b81ce3f33e6c0,openstack/tripleo-ansible,stable/ussuri,throttle/ussuri,I01f6e3a69dec25ec69782c087d6b81ce3f33e6c0,Make throttle optional,MERGED,2020-07-06 19:04:38.000000000,2020-07-07 00:16:35.000000000,2020-07-07 00:16:35.000000000,11,8,0,739585,8d4059e51272837d031d15f804787208b5e814c4,7,4,1,1,3153,Emilien Macchi,emilienm,"Make throttle optional

Tasks did not have the concept of throttling prior to ansible 2.9 so if
we want to allow this to be re-used with older versions then we need to
skip the throttling code if task doesn't contain the throttle attribute.
This will help if we want to backport this for upgrades.

Change-Id: I01f6e3a69dec25ec69782c087d6b81ce3f33e6c0
(cherry picked from commit ee3c9c841e466c7fed7639bf3b5e19dbbe42abba)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I501f31b52db6e10826bd9a346d38e34f95ae8b75,openstack/tripleo-ansible,stable/train,container_startup_config/train,I501f31b52db6e10826bd9a346d38e34f95ae8b75,Implement container_startup_config module,MERGED,2020-07-03 19:36:09.000000000,2020-07-07 00:16:34.000000000,2020-07-07 00:16:33.000000000,271,15,0,739279,254922887b2a5aea665d1e325e7ab2eb60915e43,10,3,2,8,3153,Emilien Macchi,emilienm,"Implement container_startup_config module

container_startup_config will replace a bunch of tasks that we did in
THT to generate the .json file for each container in
/var/lib/tripleo-config/container-startup-config.

It'll accelerate a bit the deployment by replacing tasks into a
single module, so we can generate the startup configs much faster.

Also tolerate empty configs in container_config_data, switching a
failure into a debug. If the config is empty, there is no need to run
the rest of the role tasks in tripleo_container_manage.

Note: we manage the SElinux context at the openstack-selinux:
https://github.com/redhat-openstack/openstack-selinux/commit/0b62

Cherry-pick note: rename converge.yml to playbook.yml for comptatibility
with how Molecule is running under stable/train branch.

Change-Id: I501f31b52db6e10826bd9a346d38e34f95ae8b75
(cherry picked from commit 76bb50476247f367c85d0e8a64dabebb6da1ee4c)
(cherry picked from commit 80f9ccd7f433fdffbef38cfd40c00b7b574b4bae)
"
openstack%2Fopenstack-ansible-os_keystone~stable%2Ftrain~Iaf9f1b9198f14c903f9801e0ce7da86b74d9c5bd,openstack/openstack-ansible-os_keystone,stable/train,idp-improvements-stable/train,Iaf9f1b9198f14c903f9801e0ce7da86b74d9c5bd,Identity Providers support improvments,MERGED,2020-07-06 18:22:31.000000000,2020-07-06 23:55:11.000000000,2020-07-06 23:53:32.000000000,3,0,0,739571,44b7ca7d3f8f53a6e2434cfaff103c5c647abfb0,8,4,1,2,25023,Jonathan Rosser,jrosser,"Identity Providers support improvments

Identity providers can be created with specified domain
IDPs are linked to a keystone domain. Currently when we provision a new IDP
it gets created within a new autogenerated domain. Provisioners can now
give a domain_id in an IDP entry within the trusted_idp_list and the IDP
will be created within that domain.

Add IDP display_name to defaults
Allows operator a name different to the one used in the backend
to display to the user in the horizon Identity Provider dropdown.

Change-Id: Iaf9f1b9198f14c903f9801e0ce7da86b74d9c5bd
(cherry picked from commit 4c9642765e632d409c6d9028aae26f4514af7033)
"
openstack%2Fnova~stable%2Fstein~I2d8bbffb3f58f5d0190e970ff860162c122a9b0e,openstack/nova,stable/stein,grenade-em-nv,I2d8bbffb3f58f5d0190e970ff860162c122a9b0e,"Revert ""Make greande jobs n-v for EM and oldest stable""",MERGED,2020-07-06 11:15:17.000000000,2020-07-06 23:26:36.000000000,2020-07-06 23:22:50.000000000,4,4,0,739464,42e63203978095c598e21e9a74baec20e262b416,12,6,1,1,17685,Elod Illes,elod.illes,"Revert ""Make greande jobs n-v for EM and oldest stable""

This reverts commit b05bf09b2d50bd77d33a31babe204ba7969f0221.

NOTE(elod.illes): devstack in Rocky is fixed and grenade jobs started
to pass. We can enable grenades again to restore testing as it was
before.

Change-Id: I2d8bbffb3f58f5d0190e970ff860162c122a9b0e
"
openstack%2Fopenstack-ansible~stable%2Ftrain~I27aa0d0b32fd1db47cc2fc43afbad085ea22d0bf,openstack/openstack-ansible,stable/train,,I27aa0d0b32fd1db47cc2fc43afbad085ea22d0bf,Fix inventory_manage when the component for a host is not defined,MERGED,2020-06-24 14:22:27.000000000,2020-07-06 23:15:48.000000000,2020-07-06 23:13:43.000000000,3,0,0,737814,5eee6976d170872c7036898efd7e583e410ca360,18,3,1,1,25023,Jonathan Rosser,jrosser,"Fix inventory_manage when the component for a host is not defined

Previously this would fail with a stacktrace, so now display something
useful when the component is not defined.

Change-Id: I27aa0d0b32fd1db47cc2fc43afbad085ea22d0bf
(cherry picked from commit 5c53b88e4c4401d2baf9af98dc0676255ff31899)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~Iaa39aa301be182722e0650583d1ad17c0e8dc82b,openstack/tripleo-ansible,stable/train,host/perm/train,Iaa39aa301be182722e0650583d1ad17c0e8dc82b,Fix host entries permissions,MERGED,2020-07-06 16:20:13.000000000,2020-07-06 22:45:26.000000000,2020-07-06 22:45:26.000000000,1,0,0,739540,e3fb917193cc2a568c899c9e178da5222b91bad1,7,4,1,1,3153,Emilien Macchi,emilienm,"Fix host entries permissions

The cleanup tasks needs become: true because it was created with root.

Change-Id: Iaa39aa301be182722e0650583d1ad17c0e8dc82b
Related-Bug: #1883609
(cherry picked from commit 746bd9a52b2a4288af705f161ec41736a4e3b5e3)
"
openstack%2Fironic-python-agent~stable%2Ftrain~I3e0d237d37219e783d81913fa6cc490492b3f96a,openstack/ironic-python-agent,stable/train,,I3e0d237d37219e783d81913fa6cc490492b3f96a,Limit Inspection->Lookup->Heartbeat lag,MERGED,2020-07-06 18:24:10.000000000,2020-07-06 22:25:15.000000000,2020-07-06 22:21:58.000000000,66,6,0,739572,3e053f05be424c00fb7ba5733f72db6beeaff393,8,3,1,8,10239,Dmitry Tantsur,dtantsur,"Limit Inspection->Lookup->Heartbeat lag

Caches hardware information collected during inspection
so that the initial lookup can occur without any delay.

Also adds logging to track how long inventory collection takes.

Conflicts:
	ironic_python_agent/hardware.py
	ironic_python_agent/tests/unit/base.py
	ironic_python_agent/tests/unit/test_hardware.py
	ironic_python_agent/tests/unit/test_inspector.py

Co-Authored-By: Dmitry Tantsur <dtantsur@protonmail.com>
Change-Id: I3e0d237d37219e783d81913fa6cc490492b3f96a
(cherry picked from commit c76b8b2c217d57680baec977b374e821304198f9)
"
openstack%2Fdevstack~master~I4475247dfe986114d37678b3d3d552c0c7d02ddc,openstack/devstack,master,drop-keystone-ports,I4475247dfe986114d37678b3d3d552c0c7d02ddc,"Revert ""Drop keystone dedicated ports""",MERGED,2020-07-06 18:42:30.000000000,2020-07-06 22:23:51.000000000,2020-07-06 22:21:41.000000000,132,7,0,739576,f8dbfd394a826779f3af403fd5316b9d86492802,11,6,2,6,9303,Abhishek Kekane,abhishekkekane,"Revert ""Drop keystone dedicated ports""

This reverts commit f6286cb586eb1f861866bfdf85c4f873c79fd592.

This patch is blocking glance as it needs mod_wsgi to perform new import workflow.

Change-Id: I4475247dfe986114d37678b3d3d552c0c7d02ddc
"
openstack%2Fproject-config~master~Ia6ced2330df3f6ee4d2794743ef9436aac800b96,openstack/project-config,master,674091,Ia6ced2330df3f6ee4d2794743ef9436aac800b96,Air Handler is failed - turn OE off for now,MERGED,2020-07-06 21:15:19.000000000,2020-07-06 21:48:22.000000000,2020-07-06 21:35:21.000000000,2,2,0,739605,da3f5808039fc7ee559ad542abf406323d3745e1,8,3,1,1,20754,Donny Davis,donnydavis,"Air Handler is failed - turn OE off for now

Change-Id: Ia6ced2330df3f6ee4d2794743ef9436aac800b96
"
openstack%2Fnova~master~Ic5e60c8e28263365fad5867e483b6ad55cee7281,openstack/nova,master,bug/1883671,Ic5e60c8e28263365fad5867e483b6ad55cee7281,catch libvirt exception when nodedev not found.,MERGED,2020-07-02 10:51:15.000000000,2020-07-06 21:45:28.000000000,2020-07-06 17:48:09.000000000,22,2,2,739017,af80c3ffd116837b296e79858595d42c893708a6,34,14,2,2,11604,sean mooney,sean-k-mooney,"catch libvirt exception when nodedev not found.

This is a minimal fix to workaround instance where libvirt
retruns stale data due to internal caching. In some cases
libivrt can return stale data vai the nodedev api when the
mac adress of an interface such as an sriov virtual function
canages, i.e. when a mac adress is reset after a vm with
a virtual funciton is migrated.

Change-Id: Ic5e60c8e28263365fad5867e483b6ad55cee7281
Partial-Bug: #1883671
"
openstack%2Ftripleo-heat-templates~master~I373636bbc9d296f41b63de76719320727d3f4fb9,openstack/tripleo-heat-templates,master,,I373636bbc9d296f41b63de76719320727d3f4fb9,Add filestore to bluestore migration tags,MERGED,2020-07-03 15:21:06.000000000,2020-07-06 21:44:40.000000000,2020-07-06 19:39:52.000000000,40,10,0,739253,c9cd67124fb758e9023395e5ae4f8223111e2e51,12,9,1,10,25402,Francesco Pantano,fmount,"Add filestore to bluestore migration tags

Currently ceph-ansible assumes the cluster
(which is updated to ceph4) is using bluestore
just because it's the default on ceph-ansible.
This patch adds some missing tags to make sure
the variable contained in the heat stack are
properly regenerated and the fs2bs playbook can
be executed with the right variables.

Change-Id: I373636bbc9d296f41b63de76719320727d3f4fb9
"
openstack%2Fnova~master~I9d6d97563114380f9a7549f08cede4b808352a3e,openstack/nova,master,,I9d6d97563114380f9a7549f08cede4b808352a3e,Fix mock for 'autospec' and 'new' together,MERGED,2020-07-05 00:20:59.000000000,2020-07-06 21:39:25.000000000,2020-07-06 21:36:45.000000000,3,3,0,739333,2ee9ad25167629f58fb374d8266a27996eadc174,21,10,2,1,8556,Ghanshyam,ghanshyam,"Fix mock for 'autospec' and 'new' together

mock does not accept 'autospec' and 'new' attributes
together to create mock object for tests. If autospec
is True the mock object is created using create_autospec()
and pass the keyword args to called function.

If both are passed then it start failing with oslotest 4.4.0
which is migrated to unittest.mock.
- https://d088a63e8edc60022939-485bd9eedc766dc9e54cbbb4001038bd.ssl.cf5.rackcdn.com/739330/1/check/cross-nova-py36/843ec44/testr_results.html

Creating mock with autospec only to fix this test to make
nova pass for oslo 4.4.0 so that requirement
can constraint oslotest to 4.4.0 (needed-by patch).

Change-Id: I9d6d97563114380f9a7549f08cede4b808352a3e
Needed-By: https://review.opendev.org/#/c/739531/
"
openstack%2Fopenstacksdk~master~Ia8a88587d74d3a4081c8f9e23099e3da2077820e,openstack/openstacksdk,master,image-create-same,Ia8a88587d74d3a4081c8f9e23099e3da2077820e,Tolerate images created with other means,MERGED,2020-07-06 17:24:12.000000000,2020-07-06 21:39:07.000000000,2020-07-06 21:36:37.000000000,2,1,2,739556,b23654e53a4577c2a6b3c6b29356c3d9860fe496,15,6,3,1,9542,Pavlo Shchelokovskyy,pshchelo,"Tolerate images created with other means

when image was created by other means (or older openstacksdk)
the `openstack.image.v2.image.Image[""properties""]` may be present but be
`None`.

When such image is present and one tries to create another image with
the same name but different content, current openstacksdk fails with

AttributeError: 'NoneType' object has no attribute 'get'

Change-Id: Ia8a88587d74d3a4081c8f9e23099e3da2077820e
Story: 2007898
Task: 40287
"
openstack%2Fironic~stable%2Ftrain~Ibac5d07b988438719bf414f314cbc610562e7599,openstack/ironic,stable/train,raid-max-stable/train,Ibac5d07b988438719bf414f314cbc610562e7599,Software RAID: don't try to set local_gb to MAX,MERGED,2020-07-06 13:44:01.000000000,2020-07-06 21:26:58.000000000,2020-07-06 17:13:43.000000000,20,3,0,739489,fa6c71ff17dc6f015b734fed1f47124e9baadb51,9,4,1,3,10239,Dmitry Tantsur,dtantsur,"Software RAID: don't try to set local_gb to MAX

Change-Id: Ibac5d07b988438719bf414f314cbc610562e7599
(cherry picked from commit cedc4a24167de205db25cc45fd37275f3e4956bd)
"
openstack%2Fnova~stable%2Frocky~I72c5deb7b8739e07dc8c23a6afc6bde8a2f4aa23,openstack/nova,stable/rocky,,I72c5deb7b8739e07dc8c23a6afc6bde8a2f4aa23,DNM - Testing g-api on subnode fix,ABANDONED,2020-07-02 15:30:50.000000000,2020-07-06 21:23:57.000000000,,0,0,0,739074,b08cbb37cc923d440a2cf059b364cc30e59d2eb0,6,4,1,1,10135,Lee Yarwood,lyarwood,"DNM - Testing g-api on subnode fix

Change-Id: I72c5deb7b8739e07dc8c23a6afc6bde8a2f4aa23
Depends-On: https://review.opendev.org/739072
"
openstack%2Fpython-openstackclient~master~I1d1ac1ac46f49f64794ffc8631e166935537966c,openstack/python-openstackclient,master,bug/2007440,I1d1ac1ac46f49f64794ffc8631e166935537966c,Add '--force; parameter to 'openstack quota set',MERGED,2020-03-19 13:36:52.000000000,2020-07-06 20:54:00.000000000,2020-07-06 20:50:24.000000000,108,0,15,713881,b328cf74df7f94a20de85b3c0992dcb65e818458,50,11,16,4,31733,jayaditya gupta,jgupta,"Add '--force; parameter to 'openstack quota set'

The compute service allows us to to force set a quota, setting a
quota value that is less than the amount of the resource currently
consumed. Expose this feature by way of a '--force' boolean
parameter.

Change-Id: I1d1ac1ac46f49f64794ffc8631e166935537966c
"
openstack%2Fkeystone~master~Ib7a2d47c2204b0639f029c3079f4fa86ee78e3a9,openstack/keystone,master,docs-default-domain,Ib7a2d47c2204b0639f029c3079f4fa86ee78e3a9,Adding note for create a project without domain info,MERGED,2020-04-13 18:07:59.000000000,2020-07-06 20:52:59.000000000,2020-07-06 20:50:33.000000000,7,0,4,719656,12020a0b8303d20ba7afaa6a932bedcb92884693,17,4,4,2,8866,Raildo Mascena de Sousa Filho,raildo,"Adding note for create a project without domain info

When we create a project, using a project scoped token,
without add the domain_id or domain information in the
project creation parameters, this project will be
automatically created on the default domain.

Change-Id: Ib7a2d47c2204b0639f029c3079f4fa86ee78e3a9
"
openstack%2Fcinder~stable%2Ftrain~Icb621ff5966133f59d9d43ca2dd9f8e1919b1149,openstack/cinder,stable/train,bug/1869746,Icb621ff5966133f59d9d43ca2dd9f8e1919b1149,Fix cross-project incremental backups,MERGED,2020-07-02 22:41:35.000000000,2020-07-06 20:52:42.000000000,2020-07-06 20:50:26.000000000,45,25,0,739154,f3cdc27563766b2f49a1d88500f32c8d86838c96,37,19,1,8,14567,Rodrigo Barbieri,ganso,"Fix cross-project incremental backups

This patch addresses the scenario where an
incremental backup can be created having a
parent backup that was taken in a different
project. This scenario ultimately leads to
a silent error when creating/deleting the
incremental backup and quotas going out of
sync.

The proposed fix is to narrow the backup search
down to the same project. To achieve this, a
method's signature had to be updated to achieve
the desired optimized behavior of passing the
volume's project_id parameter.

Closes-bug: #1869746
Closes-bug: #1873518

conflicts:
    cinder/tests/unit/backup/test_backup.py

Test test_create_backup_failed_with_empty_backup_objects
required a mock for
test_create_backup_failed_with_empty_backup_objects
which had been removed in ussuri, as part of commit
f0211b53b82cde96eb39e9914c3e5fae232db07c. That
commit removed code and leftover the mock, which I
had removed in the change this patch was
cherry-picked from, as it was unnecessary.

The removed code section of cinder/backup/api.py
from commit f0211b53b82cde96eb39e9914c3e5fae232db07c
does not impact the functionality of this change at all.

Change-Id: Icb621ff5966133f59d9d43ca2dd9f8e1919b1149
(cherry picked from commit 8ebeafcbbafb700052f3abfc1f7ba004269a92e8)
(cherry picked from commit 5358c996b40bbb0fd749ec182ff3ef67f5d71c16)
"
openstack%2Fcinder~stable%2Fstein~I8cb7b1eccbc63ef4077e86324afdd1a11409343d,openstack/cinder,stable/stein,bug/1783588-stable/stein,I8cb7b1eccbc63ef4077e86324afdd1a11409343d,SF: Handle qos values on extend volume,MERGED,2020-05-07 23:20:00.000000000,2020-07-06 20:52:25.000000000,2020-07-06 20:50:29.000000000,95,9,0,726262,6bcb6fea741267b72175e5936c6f6a656fb2fffc,63,19,2,3,30555,Fernando Ferraz,fernandoperches,"SF: Handle qos values on extend volume

For the Solidfire cinder driver when volume extend is called on a volume
that has a qos with scaledIOPs=True, the values scaleMin, scaleMax,
scaleBurst are ignored, thus when a volume grows the iops values stay
the same when they should either grow or shrink.

To correct the bug _retrieve_qos_setting has a new argument size with a
default value of zero. This allows all previous calls to function
properly, and saved duplicating code.

Extend volume now calls _retrive_qos_settings with the new size argument
and then includes that qos with the call to solidfire api  ModifyVolume.

Closes-Bug: #1783588
Change-Id: I8cb7b1eccbc63ef4077e86324afdd1a11409343d
(cherry picked from commit 12a7bf699df1558f081513b1686d9c389bd3b812)
"
openstack%2Fdevstack~master~Ia4b4350c287c81313d83193625a9b2bbc6235b4d,openstack/devstack,master,,Ia4b4350c287c81313d83193625a9b2bbc6235b4d,lib/apache: fix uWSGI installation from source,NEW,2020-07-06 17:47:23.000000000,2020-07-06 20:47:27.000000000,,2,2,0,739561,ee78232ed913792f8b5862f682990108674402c4,5,3,1,1,9061,David Moreau Simard,dmsimard,"lib/apache: fix uWSGI installation from source

The source archive has capital letters (i.e, uWSGI-2.0.19.1.tar.gz) so
doing a ""ls uwsgi*"" will not work unless we match the capitalization.

In addition, the archive extracts to the current working directory, not
under uWSGI* and so fix the apache2 directory accordingly.

Change-Id: Ia4b4350c287c81313d83193625a9b2bbc6235b4d
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I593f193f98112dbf1d493ffd22040837597db11c,openstack/tripleo-ansible,stable/ussuri,class,I593f193f98112dbf1d493ffd22040837597db11c,Create tripleo base strategy class,MERGED,2020-07-06 14:41:17.000000000,2020-07-06 20:32:46.000000000,2020-07-06 20:32:46.000000000,179,207,0,739506,b11fec97bc04c698dd19458382349c7bc3866e1e,7,4,1,3,3153,Emilien Macchi,emilienm,"Create tripleo base strategy class

In order to allow us to share some logic between the linear and free
strategies, we need to create a base strategy to use for our shared
logic.

Change-Id: I593f193f98112dbf1d493ffd22040837597db11c
(cherry picked from commit e52089e8dfceba7bff81a8acc96b73d6e6ec3983)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I8539a6ad747a3923256f8c14c0a140e7670cc135,openstack/tripleo-ansible,stable/ussuri,linear,I8539a6ad747a3923256f8c14c0a140e7670cc135,Add tripleo linear strategy,MERGED,2020-07-06 14:40:57.000000000,2020-07-06 20:32:45.000000000,2020-07-06 20:32:45.000000000,466,0,0,739505,88082db75ea29fe7486fa4fe2d3d2e0d47156b7f,7,4,1,1,3153,Emilien Macchi,emilienm,"Add tripleo linear strategy

Change-Id: I8539a6ad747a3923256f8c14c0a140e7670cc135
(cherry picked from commit 09da864f8c11184e5dc537d838109a2794cc4048)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~Iaa1278763d56429b2886371a18477e1f54680e19,openstack/tripleo-ansible,stable/ussuri,runonce,Iaa1278763d56429b2886371a18477e1f54680e19,Implement run_once,MERGED,2020-07-06 14:40:03.000000000,2020-07-06 20:28:48.000000000,2020-07-06 20:28:48.000000000,21,3,0,739504,d25145163714be92ad1ac20f426bd98e420443cd,7,4,1,1,3153,Emilien Macchi,emilienm,"Implement run_once

Prior to this patch, run_once was basically ignored. This patch adds
tracking on tasks that are tagged with run_once and will only allow it
to be invoked once. This means if the run_once task fails, all the other
hosts will continue to process their tasks like nothing happened. The
play itself will exit if the run_once task fails at the end. For tripleo
this means that run_once should not be used for any required tasks
within a play but can be used to make sure a task will only run once
time for a given play.

Change-Id: Iaa1278763d56429b2886371a18477e1f54680e19
(cherry picked from commit 894a853a5ef0af869624376a04a8f12dfe5c801c)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~Id921ed48a948211b9a90def4a4667d015ec11d2f,openstack/tripleo-ansible,stable/ussuri,strategy-improvements-stable/ussuri,Id921ed48a948211b9a90def4a4667d015ec11d2f,Implement a tripleo free strategy,MERGED,2020-07-06 14:39:20.000000000,2020-07-06 20:28:47.000000000,2020-07-06 20:28:47.000000000,411,0,0,739503,375f831b9d048abd2e96d4b255325faff4d3107c,7,4,1,1,3153,Emilien Macchi,emilienm,"Implement a tripleo free strategy

This strategy is to be used for the execution of deployment steps so
that tasks run on all hosts (up to # of workers) freely without locking
at each task.  This is closer to what we had when Heat drove the
deployments as each of the software deployments would execute
simultaneously on all nodes at the same time.

This strategy does two important things for us:

  1) Hosts execute their tasks freely with no dependencies on the other
     hosts that are running the same tasks
  2) Failures on any given host will not stop future tasks from
     executing on other hosts, but will cause the overall playbook
     execution to stop at the end of the ""PLAY"".

These specific things are how the previous deployment executed when Heat
was the driver of deployment actions. The nodes would fetch their list
of actions, execute and report back to status. Heat would fail the
deployment if any of the hosts failed to execute their work however a
failure on one host did not impact the other hosts.  The TripleO
deployment framework already has the step concept in itself to allow
for the individual steps (1 through 5) to execute in a parallael on all
hosts at the same time. At the end of the ""PLAY"", ansible waits for all
nodes to complete before proceeding on to the next ""PLAY"". So Step 1 is
a ""PLAY"" followed by Step 2. If a failure occurs during Step 1 on any
host, we would not proceed to the Step 2 play.

Change-Id: Id921ed48a948211b9a90def4a4667d015ec11d2f
(cherry picked from commit f873e31f5874ea0dad6997ee2f9c8186f3d1058d)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I24b118220ce2371f651cad6b8dfbbf5d031ee118,openstack/tripleo-ansible,stable/ussuri,bug/1883609-stable/ussuri,I24b118220ce2371f651cad6b8dfbbf5d031ee118,Fix tripleo_hierdata permissions,MERGED,2020-07-06 14:15:52.000000000,2020-07-06 20:28:46.000000000,2020-07-06 20:28:46.000000000,5,0,0,739500,a7f9c2c0a37fe0b490a569108016d6cbb68521e7,7,4,1,3,3153,Emilien Macchi,emilienm,"Fix tripleo_hierdata permissions

Add become: true to the tasks that need to be able to write to /etc/

Change-Id: I24b118220ce2371f651cad6b8dfbbf5d031ee118
Related-Bug: #1883609
(cherry picked from commit c8d8e9adaf62f1b3e6a274fbb5ec17dae4dc8449)
"
openstack%2Freleases~master~I2c26f2d00df09db529bd5385b7741bc57a17b54f,openstack/releases,master,train-stable,I2c26f2d00df09db529bd5385b7741bc57a17b54f,Release blazar for stable/train,ABANDONED,2020-06-10 20:55:24.000000000,2020-07-06 20:17:24.000000000,,4,0,0,734921,45c9aa4512d24cd1fa7e90677c3b94f7b23722e2,5,2,1,1,11904,Sean McGinnis,SeanM,"Release blazar for stable/train

This release picks up new commits to blazar since
the last release from stable/train.

This is being proposed as a convenience to help make sure stable
changes are being released. If the team is good with this going out,
please respond with a +1 to let the release team know it is OK to
proceed.

If it is not wanted at this time, or if there are more changes that
would be good to get merged before doing a  stable release, please
leave a -1 with a comment with what the team would prefer. We can
then either abandon this patch, or wait for an update with a new
commit hash to use instead.

Change-Id: I2c26f2d00df09db529bd5385b7741bc57a17b54f
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
"
openstack%2Fopenstack-helm-infra~master~Ic1df870165463cb3f62da779a160886f55cd96b5,openstack/openstack-helm-infra,master,,Ic1df870165463cb3f62da779a160886f55cd96b5,Switch from octal to decimal value in toolkit,ABANDONED,2020-06-27 05:43:13.000000000,2020-07-06 20:11:16.000000000,,4,1,0,738301,8fa6ad0475462486577e7a9b502ebd719e8a8b87,9,5,4,2,8863,Andrii Ostapenko,aostapenko,"Switch from octal to decimal value in toolkit

Also ensure osh-infra is a required project for lint job, that matters
when running job against another project.

Change-Id: Ic1df870165463cb3f62da779a160886f55cd96b5
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
"
openstack%2Fopenstacksdk~master~I9917b10292d191710b37838b3cf099d75139f123,openstack/openstacksdk,master,osc-performance,I9917b10292d191710b37838b3cf099d75139f123,switch to importlib.metadata for entrypoint loading,MERGED,2020-07-04 18:28:17.000000000,2020-07-06 20:10:54.000000000,2020-07-06 20:07:31.000000000,17,5,3,739328,77e2f67d3856153f875552f84f0a3565f557f2c3,20,4,5,3,2472,Doug Hellmann,doug-hellmann,"switch to importlib.metadata for entrypoint loading

Importing pkg_resources scans every installed distribution to find
all of the entry points. importlib.metadata can import entry points
without scanning all of the installed packages.

Change-Id: I9917b10292d191710b37838b3cf099d75139f123
Signed-off-by: Doug Hellmann <doug@doughellmann.com>
"
openstack%2Ftripleo-upgrade~stable%2Fussuri~I969d901be4eeb93e0abe4e8b06f6c54399b52ea2,openstack/tripleo-upgrade,stable/ussuri,sriov_workload-stable/ussuri,I969d901be4eeb93e0abe4e8b06f6c54399b52ea2,Workload during updates can be launched with SRIOV ports,MERGED,2020-06-19 11:32:10.000000000,2020-07-06 19:52:43.000000000,2020-07-06 19:52:43.000000000,295,177,0,736978,b9023c58578890638e7a2923d429cc24407eb3f2,11,4,3,9,11090,Sergii Golovatiuk,holser,"Workload during updates can be launched with SRIOV ports

When upgrade-workloadsriov is set, workload is generated with an SRIOV
PF port on the existing external network
A mechanism has been added to remove workload previously created after
update/upgrade is completed, when upgrade-workloadcleanup is set

Change-Id: I969d901be4eeb93e0abe4e8b06f6c54399b52ea2
(cherry picked from commit 85c12706d145162d85c2c519e01e35393364d4c8)
"
openstack%2Fnova~stable%2Fussuri~I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75,openstack/nova,stable/ussuri,bug/1882919,I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75,libvirt: Mark e1000e VIF as supported,MERGED,2020-06-19 08:45:01.000000000,2020-07-06 19:47:55.000000000,2020-07-06 17:50:18.000000000,11,0,0,736957,840de3b8924612fa3fc47a4c9032a4723d536613,40,9,3,3,15334,Stephen Finucane,sfinucan,"libvirt: Mark e1000e VIF as supported

This is supported by the QEMU/KVM backends in libvirt. There's no reason
not to support it in nova. This appears to have been an oversight.

Change-Id: I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Closes-Bug: #1882919
(cherry picked from commit 644cb5cb8bf44184d9b3f046cc67746b13550dd6)
"
openstack%2Fgovernance~master~I9beee84153847c36748b0bb47fe0ba519c72cf0f,openstack/governance,master,formal-vote,I9beee84153847c36748b0bb47fe0ba519c72cf0f,"Add ""tc:approved-release"" tag to manila",MERGED,2020-06-25 20:35:23.000000000,2020-07-06 19:37:31.000000000,2020-07-06 19:35:25.000000000,1,0,0,738105,031afca18e273a4ccf90867b1c64cbb67db12277,26,15,1,1,16643,Goutham Pacha Ravi,gouthamr,"Add ""tc:approved-release"" tag to manila

OpenStack Manila (Shared File Systems as a service)
has been a project under the OpenStack governance
since the Kilo release. The project follows all the
guidelines set forth by the OpenStack Technical
Committee with regard to project structure, development
and releases. It has been increasingly useful in
production OpenStack deployments for a number of
years now.

The ""tc:approved-release"" tag was introduced in
OpenStack to denote a subset of the projects in the
OpenStack governance that could be used in as
candidates for trademark use under the OpenStack
Foundation trademark policy [1]. At the time that
the tag was introduced, all graduated projects
were added to this list [2]. Manila was not yet
considered a graduated project before the incubation
system of yore gave way to the ""big tent"" model.

This commit formally requests the ""tc:approved-release""
be added to manila, considering the steady growth of the
project, its growing user base, and its consistent
adherence to the TC guidelines.

[1] https://opendev.org/openstack/governance/blame/commit/fb341fe0d9a10acb7662ea507b8b69483e08d21b/reference/tags/tc_approved-release.rst#L17-L19
[2] https://review.opendev.org/198295/

Change-Id: I9beee84153847c36748b0bb47fe0ba519c72cf0f
"
openstack%2Fironic~stable%2Ftrain~I62b2d32c545b6ad6487aead98c8fab212ed5e83f,openstack/ironic,stable/train,trait-errormsg-stable/train,I62b2d32c545b6ad6487aead98c8fab212ed5e83f,Fix the error message when reached max number of traits,MERGED,2020-07-06 12:37:48.000000000,2020-07-06 19:25:14.000000000,2020-07-06 17:03:53.000000000,6,6,0,739478,a436d666da403d75a6fc651c1e53010b4f84244a,9,5,1,1,10239,Dmitry Tantsur,dtantsur,"Fix the error message when reached max number of traits

The error message is not properly tranlated as desired, raw string
is returned when reached maximum number of traits.

Change-Id: I62b2d32c545b6ad6487aead98c8fab212ed5e83f
(cherry picked from commit d90459a87fce4a84d34bdf24604de3edfb23dda7)
"
openstack%2Fkolla-ansible~master~I80864f82a74d3c6ffb12816685ccb65e66f89fe0,openstack/kolla-ansible,master,,I80864f82a74d3c6ffb12816685ccb65e66f89fe0,Add support for encrypting etcd traffic,ABANDONED,2020-06-17 23:08:40.000000000,2020-07-06 19:24:53.000000000,,87,14,1,736400,40863c8b98070819440d626025feac8655436ae7,7,3,1,9,30810,James Kirsch,generalfuzz,"Add support for encrypting etcd traffic

This patch fixes the deployment of the etcd service when backend
encryption is enabled. It also fixes the configuration for other
services that use etcd when backend encryption is enabled.

Change-Id: I80864f82a74d3c6ffb12816685ccb65e66f89fe0
Partially-Implements: blueprint add-ssl-internal-network
"
openstack%2Ftripleo-ansible~stable%2Fussuri~Ia5859ecf0822f19b9f04dda79d5b8b5eaf5220be,openstack/tripleo-ansible,stable/ussuri,container-not-running-stable/ussuri,Ia5859ecf0822f19b9f04dda79d5b8b5eaf5220be,Fix missing requirements for tests,MERGED,2020-07-06 14:16:34.000000000,2020-07-06 19:19:47.000000000,2020-07-06 19:16:10.000000000,2,0,0,739501,b93a1c61a6d7a1e9e9c380afe2df927e89490c8c,7,3,1,1,3153,Emilien Macchi,emilienm,"Fix missing requirements for tests

We added heatclient and metalsmith requirements as part of our modules
so we need to make sure to properly capture them.

Change-Id: Ia5859ecf0822f19b9f04dda79d5b8b5eaf5220be
(cherry picked from commit cdb59feb206cf0ff3e079695c23ecfdb07271e25)
"
openstack%2Fansible-role-redhat-subscription~master~Ibc7c05260f01adf520f5d18f3ea8e23e266e4f6d,openstack/ansible-role-redhat-subscription,master,bz/1853374,Ibc7c05260f01adf520f5d18f3ea8e23e266e4f6d,Adjustments to detect Satellite version/mode,MERGED,2020-07-02 15:50:16.000000000,2020-07-06 19:18:44.000000000,2020-07-06 19:18:44.000000000,10,2,2,739080,bcda84e1c41a119775f4e85c630dad060f82e0fa,13,3,2,3,3153,Emilien Macchi,emilienm,"Adjustments to detect Satellite version/mode

1) Fail if we couldn't figure out what version of Satellite is running.
   Otherwise we end up including a playbook that doesn't exist and the
   error is misleading.

2) Change the Satellite 6 version check, to use /pulp/api/v2/status
   instead of /katello/api/ping; which seems to work better when a
   Capsule is used. This URL should work for both Satellite 6 and
   Capsule.

3) Document that rhsm_rhsm_port needs to be changed to 8443 if a capsule
   is used.

Change-Id: Ibc7c05260f01adf520f5d18f3ea8e23e266e4f6d
"
openstack%2Ftripleo-ansible~stable%2Fussuri~Iaa39aa301be182722e0650583d1ad17c0e8dc82b,openstack/tripleo-ansible,stable/ussuri,bug/1883609-stable/ussuri,Iaa39aa301be182722e0650583d1ad17c0e8dc82b,Fix host entries permissions,MERGED,2020-07-06 14:15:27.000000000,2020-07-06 19:16:09.000000000,2020-07-06 19:16:09.000000000,1,0,0,739498,b2ea17cc8ae9ab905993763a49fb9b152af71986,7,4,1,1,3153,Emilien Macchi,emilienm,"Fix host entries permissions

The cleanup tasks needs become: true because it was created with root.

Change-Id: Iaa39aa301be182722e0650583d1ad17c0e8dc82b
Related-Bug: #1883609
(cherry picked from commit 746bd9a52b2a4288af705f161ec41736a4e3b5e3)
"
openstack%2Fcliff~master~Ib7bf53091470b55ab87082d315ca283d3600a636,openstack/cliff,master,osc-performance,Ib7bf53091470b55ab87082d315ca283d3600a636,switch to stevedore for loading entry points,MERGED,2020-07-04 18:44:49.000000000,2020-07-06 19:11:59.000000000,2020-07-06 19:09:46.000000000,24,24,0,739329,6ac510d0cd25c8c3c76d56dd8e100ca2a6f8b962,17,4,5,5,2472,Doug Hellmann,doug-hellmann,"switch to stevedore for loading entry points

Switch to using stevedore now so that when the cache implementation is
released all cliff applications can take advantage of the performance
benefits.

Change-Id: Ib7bf53091470b55ab87082d315ca283d3600a636
Signed-off-by: Doug Hellmann <doug@doughellmann.com>
"
openstack%2Fdiskimage-builder~master~If3e8d8ac29a728aa41562b31976ebe9bfa5df66f,openstack/diskimage-builder,master,reno-openstackdocstheme,If3e8d8ac29a728aa41562b31976ebe9bfa5df66f,Switch to newer openstackdocstheme and reno versions,MERGED,2020-06-02 08:10:18.000000000,2020-07-06 18:58:12.000000000,2020-07-06 18:52:41.000000000,13,14,7,732490,abba0b5574bce7ac0069ba1696e8bb03ae1984c5,29,7,6,3,17130,melissaml,malei,"Switch to newer openstackdocstheme and reno versions

Switch to openstackdocstheme 2.2.1 and reno 3.1.0 versions. Using
these versions will allow especially:
* Linking from HTML to PDF document
* Allow parallel building of documents
* Fix some rendering problems

Update Sphinx version as well.

Disable openstackdocs_auto_name to use 'project' variable as name.

Change pygments_style to 'native' since old theme version always used
'native' and the theme now respects the setting and using 'sphinx' can
lead to some strange rendering.

openstackdocstheme renames some variables, so follow the renames
before the next release removes them. A couple of variables are also
not needed anymore, remove them.

See also
http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html

Change-Id: If3e8d8ac29a728aa41562b31976ebe9bfa5df66f
"
openstack%2Fdiskimage-builder~master~Id954ffe4d9b019c7e7bb648725ff7f976c929b4d,openstack/diskimage-builder,master,gentoo-add-musl-support,Id954ffe4d9b019c7e7bb648725ff7f976c929b4d,add musl profile to gentoo,MERGED,2020-06-22 23:38:47.000000000,2020-07-06 18:54:57.000000000,2020-07-06 18:52:39.000000000,12,11,0,737394,64787d8ec25d7664ff816bc8fa739eda700162c6,13,7,1,4,14288,Matthew Thode,prometheanfire,"add musl profile to gentoo

Change-Id: Id954ffe4d9b019c7e7bb648725ff7f976c929b4d
"
openstack%2Ftripleo-ansible~master~Id921ed48a948211b9a90def4a4667d015ec11d2f,openstack/tripleo-ansible,master,strategy-improvements,Id921ed48a948211b9a90def4a4667d015ec11d2f,Implement a tripleo free strategy,MERGED,2020-04-30 19:09:09.000000000,2020-07-06 18:53:30.000000000,2020-06-01 05:27:58.000000000,411,0,25,724731,f873e31f5874ea0dad6997ee2f9c8186f3d1058d,72,11,17,1,14985,Alex Schultz,mwhahaha,"Implement a tripleo free strategy

This strategy is to be used for the execution of deployment steps so
that tasks run on all hosts (up to # of workers) freely without locking
at each task.  This is closer to what we had when Heat drove the
deployments as each of the software deployments would execute
simultaneously on all nodes at the same time.

This strategy does two important things for us:

  1) Hosts execute their tasks freely with no dependencies on the other
     hosts that are running the same tasks
  2) Failures on any given host will not stop future tasks from
     executing on other hosts, but will cause the overall playbook
     execution to stop at the end of the ""PLAY"".

These specific things are how the previous deployment executed when Heat
was the driver of deployment actions. The nodes would fetch their list
of actions, execute and report back to status. Heat would fail the
deployment if any of the hosts failed to execute their work however a
failure on one host did not impact the other hosts.  The TripleO
deployment framework already has the step concept in itself to allow
for the individual steps (1 through 5) to execute in a parallael on all
hosts at the same time. At the end of the ""PLAY"", ansible waits for all
nodes to complete before proceeding on to the next ""PLAY"". So Step 1 is
a ""PLAY"" followed by Step 2. If a failure occurs during Step 1 on any
host, we would not proceed to the Step 2 play.

Change-Id: Id921ed48a948211b9a90def4a4667d015ec11d2f
"
openstack%2Fpython-manilaclient~master~I6fa9fcb3cf41a2992a4b5c7b38c54825106e9ce5,openstack/python-manilaclient,master,bp/openstack-client-support,I6fa9fcb3cf41a2992a4b5c7b38c54825106e9ce5,Add initial documentation for OSC,MERGED,2020-02-04 21:02:42.000000000,2020-07-06 18:51:21.000000000,2020-07-06 18:49:20.000000000,144,1,9,705834,8b74211d768befdcd3a5be1e6b22036a71f080ca,45,5,14,5,31213,Maari Tamm,maaritamm,"Add initial documentation for OSC

This patch creates initial documentation for OSC, with
general plugin information and a few examples.
New commands, that are implemented, should be then
referenced in doc/source/cli/osc/v2/index.rst

Change-Id: I6fa9fcb3cf41a2992a4b5c7b38c54825106e9ce5
Partially-implements: bp openstack-client-support
"
openstack%2Ftripleo-common~master~Iff8eec43bd73bc6486f56e741e740869d1b8acbb,openstack/tripleo-common,master,callback-improvements,Iff8eec43bd73bc6486f56e741e740869d1b8acbb,Switch to tripleo_dense,MERGED,2020-05-08 22:00:02.000000000,2020-07-06 18:43:29.000000000,2020-05-30 09:17:23.000000000,7,5,0,726480,0186702a41c8a917013931a4dd2a1164777380fb,28,7,1,2,14985,Alex Schultz,mwhahaha,"Switch to tripleo_dense

Change-Id: Iff8eec43bd73bc6486f56e741e740869d1b8acbb
Depends-On: https://review.opendev.org/#/c/726479/
"
openstack%2Fdevstack~master~Iafff097eee082f24ea2ae27ad038ad115aa36c61,openstack/devstack,master,drop-keystone-ports,Iafff097eee082f24ea2ae27ad038ad115aa36c61,Drop keystone dedicated ports,MERGED,2020-06-13 09:42:42.000000000,2020-07-06 18:42:30.000000000,2020-06-29 18:24:40.000000000,12,137,2,735420,f6286cb586eb1f861866bfdf85c4f873c79fd592,17,6,3,6,13252,Dr. Jens Harbott,jrosenboom,"Drop keystone dedicated ports

Those historic references to port 5000 and 35357 aren't being used
anymore for some time, so let us drop them.

Clean up some python2/3 wording along the way.

No longer mention Identity API v2, which is also a thing of the past.

Change-Id: Iafff097eee082f24ea2ae27ad038ad115aa36c61
"
openstack%2Ftripleo-ansible~master~I3f55f0a7f966f025a9938576ccf735f50f4c8589,openstack/tripleo-ansible,master,callback-improvements,I3f55f0a7f966f025a9938576ccf735f50f4c8589,Prepend timestamp callback output,MERGED,2020-06-03 20:17:08.000000000,2020-07-06 18:40:21.000000000,2020-06-04 11:26:49.000000000,21,10,1,733394,97b68ec0597123840ee3d1c5b58422e6c437cb05,12,5,1,2,14985,Alex Schultz,mwhahaha,"Prepend timestamp callback output

It's useful to know when a command last ran as well as being able to
cross coordinate when something was running between the ansible output
and other logs. We can use the output timestamp do this.

Change-Id: I3f55f0a7f966f025a9938576ccf735f50f4c8589
"
openstack%2Fcinder~master~I3a0640e5f68bcfe4031562f1a6a2485ba4763e91,openstack/cinder,master,validation_race_retype_sg_resume,I3a0640e5f68bcfe4031562f1a6a2485ba4763e91,PowerMax Driver - Create vol suspend fix & DeviceID check,MERGED,2020-05-11 10:45:46.000000000,2020-07-06 18:37:35.000000000,2020-07-06 18:35:06.000000000,332,104,2,726772,ee2d3189bda913161c9ac3dc11cf09c60bf7f022,102,33,2,3,30165,Simon O'Donovan,odonos12,"PowerMax Driver - Create vol suspend fix & DeviceID check

Moved exception handling from _create_volume into create
rdf/non-rdf vol helper methods. Added RDFG resume attempts
to exception handling of RDF enabled vol creates and deletes.
Added device ID check before return from volume create to
verify returned device ID against device label on PowerMAX.

Change-Id: I3a0640e5f68bcfe4031562f1a6a2485ba4763e91
Closes-Bug: 1877976
"
openstack%2Fopenstack-ansible-os_keystone~master~Iaf9f1b9198f14c903f9801e0ce7da86b74d9c5bd,openstack/openstack-ansible-os_keystone,master,idp-improvements,Iaf9f1b9198f14c903f9801e0ce7da86b74d9c5bd,Identity Providers support improvments,MERGED,2020-07-02 14:33:33.000000000,2020-07-06 18:22:31.000000000,2020-07-06 18:08:59.000000000,3,0,0,739054,4c9642765e632d409c6d9028aae26f4514af7033,14,3,3,2,29865,Georgina Shippey,gshippey,"Identity Providers support improvments

Identity providers can be created with specified domain
IDPs are linked to a keystone domain. Currently when we provision a new IDP
it gets created within a new autogenerated domain. Provisioners can now
give a domain_id in an IDP entry within the trusted_idp_list and the IDP
will be created within that domain.

Add IDP display_name to defaults
Allows operator a name different to the one used in the backend
to display to the user in the horizon Identity Provider dropdown.

Change-Id: Iaf9f1b9198f14c903f9801e0ce7da86b74d9c5bd
"
openstack%2Freleases~master~If0dd6f5575c143f4b92421b29fb57940728908dc,openstack/releases,master,,If0dd6f5575c143f4b92421b29fb57940728908dc,Release keystoneauth 3.17.3,MERGED,2020-07-02 01:45:33.000000000,2020-07-06 18:14:47.000000000,2020-07-06 18:14:47.000000000,4,0,0,738948,e82a251281970752b72571af1956f7f81b34b201,12,8,1,1,5046,Lance Bragstad,ldbragst,"Release keystoneauth 3.17.3

Change-Id: If0dd6f5575c143f4b92421b29fb57940728908dc
"
openstack%2Fopenstack-ansible-os_keystone~stable%2Ftrain~I020986bbc2d5baa73a19ee7e1070019cb4e9ce63,openstack/openstack-ansible-os_keystone,stable/train,add-oidc-auth-params-stable/train,I020986bbc2d5baa73a19ee7e1070019cb4e9ce63,Add OIDCAuthRequestParams parameter to template,MERGED,2020-06-16 10:56:25.000000000,2020-07-06 18:12:10.000000000,2020-07-06 18:08:58.000000000,3,0,0,735869,c773cc692d00c485f8be1a4dfc62adc905004abf,17,5,1,1,29865,Georgina Shippey,gshippey,"Add OIDCAuthRequestParams parameter to template

Added the OIDCAuthRequestParams line to the keystone-httpd.conf template
This allows for the addition of optional extra parameters that will be sent
along with the Authorization Request when using federated logins:
https://github.com/zmartzone/mod_auth_openidc/blob/master/auth_openidc.conf

Change-Id: I020986bbc2d5baa73a19ee7e1070019cb4e9ce63
(cherry picked from commit f0ce41ea61ed13933157e6d4794cf83040f3fd7a)
"
openstack%2Fironic-python-agent~master~I3e0d237d37219e783d81913fa6cc490492b3f96a,openstack/ironic-python-agent,master,,I3e0d237d37219e783d81913fa6cc490492b3f96a,Limit Inspection->Lookup->Heartbeat lag,MERGED,2020-07-02 17:16:56.000000000,2020-07-06 18:12:09.000000000,2020-07-06 18:08:14.000000000,71,6,3,739120,c76b8b2c217d57680baec977b374e821304198f9,20,6,3,8,11655,Julia Kreger,jkreger,"Limit Inspection->Lookup->Heartbeat lag

Caches hardware information collected during inspection
so that the initial lookup can occur without any delay.

Also adds logging to track how long inventory collection takes.

Co-Authored-By: Dmitry Tantsur <dtantsur@protonmail.com>
Change-Id: I3e0d237d37219e783d81913fa6cc490492b3f96a
"
openstack%2Fneutron~stable%2Frocky~Ie846a8cb481da65999b12f5547b407cc7bdc3138,openstack/neutron,stable/rocky,grenade-em-nv,Ie846a8cb481da65999b12f5547b407cc7bdc3138,"Fix rocky gates, multiple fixes",MERGED,2020-07-01 14:05:44.000000000,2020-07-06 18:09:54.000000000,2020-07-06 18:09:54.000000000,25,26,0,738851,57f527a748f292597ee548e8d386720b72346d17,34,8,9,5,21798,Bernard Cafarelli,bcafarel,"Fix rocky gates, multiple fixes

1. Make grenade jobs experimental for EM branches

As discussed in ML thread[1], we are going to
make grenade jobs as non voting for all EM stable and
oldest stable. grenade jobs are failing not and it might take
time to fix those if we are able to fix. Once it jobs are
working depends on project team, they can bring them back to
voting or keep non-voting.

If those jobs are failing consistently and no one is fixing them
then removing those n-v jobs in future also fine.

Additionally, it was proposed in neutron CI meeting [2] that non-voting
jobs would be moved to experimental, so move grenade jobs there instead
of keeping them non-voting

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-June/015499.html
[2] http://eavesdrop.openstack.org/meetings/neutron_ci/2020/neutron_ci.2020-07-01-15.00.log.html#l-101

StableOnly

Conflicts:
	.zuul.yaml

(cherry picked from commit 9313dce4590116b13b24570c5455df415575817e)

2. Install pip2 for functional/fullstack/neutron-tempest-iptables_hybrid

Else both jobs fail with ""sudo: pip: command not found""

3. Add ensure-tox for functional/fullstack/neutron-tempest-iptables_hybrid

Similar error message for tox

4. Disable OVS compilation for fullstack and move job to experimental

Compilation fails similarly to recent master failures:
/opt/stack/new/ovs/datapath/linux/geneve.c:943:15: error: ‘const struct ipv6_stub’ has no member named ‘ipv6_dst_lookup’

But branch 2.9 is not updated anymore. Use official package

This triggers a few tests failures, so move it to experimental (instead
of marking non-voting), same as grenade jobs

Change-Id: Ie846a8cb481da65999b12f5547b407cc7bdc3138
"
openstack%2Fansible-role-systemd_service~master~I73f38d6b9cc897537053d810d5cdd61ed74671fb,openstack/ansible-role-systemd_service,master,,I73f38d6b9cc897537053d810d5cdd61ed74671fb,Remove fail: tasks,MERGED,2020-06-09 12:50:53.000000000,2020-07-06 18:01:33.000000000,2020-07-06 17:02:06.000000000,0,122,0,734597,492031108ece622eb21621e8e26f1bfb458812a6,13,4,2,2,25023,Jonathan Rosser,jrosser,"Remove fail: tasks

Assume that the operator knows what they are doing. These tasks
are skipped for every service which bumps up the number of tasks
and runtime.

Change-Id: I73f38d6b9cc897537053d810d5cdd61ed74671fb
"
openstack%2Fsenlin-dashboard~master~I2649e86a9cb5640efa89a5be88fb2f6db3cc81ac,openstack/senlin-dashboard,master,zanata/translations,I2649e86a9cb5640efa89a5be88fb2f6db3cc81ac,Imported Translations from Zanata,MERGED,2020-06-16 13:52:44.000000000,2020-07-06 18:00:33.000000000,2020-07-06 17:57:01.000000000,5,5,0,735920,c8f5139ed88ebe7823d70fa988c2bbea74747c1b,11,3,2,1,11131,OpenStack Proposal Bot,proposal-bot,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I2649e86a9cb5640efa89a5be88fb2f6db3cc81ac
"
openstack%2Fansible-role-python_venv_build~master~I1a8f4961358c9551c5493b332187b411177b2769,openstack/ansible-role-python_venv_build,master,,I1a8f4961358c9551c5493b332187b411177b2769,Remove the virtualenv version check,MERGED,2020-07-06 12:40:49.000000000,2020-07-06 17:58:34.000000000,2020-07-06 17:56:38.000000000,9,28,0,739479,aabd3c07c29fd89a56cadc01ec3a2e3b682e5e14,10,3,2,3,25023,Jonathan Rosser,jrosser,"Remove the virtualenv version check

Simplify this code by making the assumption that we always have a
new enough version of virtualenv present. Centos-7 ships 15.1.0 so
it is now possible to remove some conditional logic as well.

This patch removes the version check and replaces it with a check
that the virtualenv command is present on the system patch and
is usable.

Change-Id: I1a8f4961358c9551c5493b332187b411177b2769
"
openstack%2Fansible-role-systemd_service~master~I3d28967a64ea9d91219294bdc30d337c9c6d2e50,openstack/ansible-role-systemd_service,master,,I3d28967a64ea9d91219294bdc30d337c9c6d2e50,"Revert ""Build out the PrivateNetwork function for services""",MERGED,2020-06-09 12:50:53.000000000,2020-07-06 17:56:05.000000000,2020-07-06 17:49:23.000000000,1,307,0,734598,9924a05f97e77f58c62921655077930fb1fa3b96,13,5,2,8,25023,Jonathan Rosser,jrosser,"Revert ""Build out the PrivateNetwork function for services""

This reverts commit 6285b6c6389134c53a5a98a0392b016a594bab16.

There is no use made of this functionality anywhere outside the tests
for this role, so revert the code. The intention is to reduce general
overhead in systemd_service and reduce the number of skipped tasks
in an OSA deployment.

Conflicts: tests/test.yml
Change-Id: I3d28967a64ea9d91219294bdc30d337c9c6d2e50
"
openstack%2Fironic-inspector~master~I6f60aea41865f09f9e53e5d91b1e887f0b39efbd,openstack/ironic-inspector,master,story_2007801,I6f60aea41865f09f9e53e5d91b1e887f0b39efbd,Add leader election for periodic sync with ironic,MERGED,2020-06-15 08:35:37.000000000,2020-07-06 17:53:46.000000000,2020-07-06 17:51:44.000000000,106,26,16,735527,0d20064f44835d8abe91ef3e89daa8cbb25b0c48,66,6,12,5,10239,Dmitry Tantsur,dtantsur,"Add leader election for periodic sync with ironic

Periodically elect a leader to do the cleanup sync with
Ironic (to avoid unnecessary calls to  Ironic in a
multi-inspector setup).
Add config option 'leader_election_interval' to control
the period in which the leaders is elected.

Co-authored-by: Arne Wiebalck <arne.wiebalck@cern.ch>

Story: #2007801
Change-Id: I6f60aea41865f09f9e53e5d91b1e887f0b39efbd
"
openstack%2Fopenstack-ansible~stable%2Ftrain~I4066d74d3547343929d5208fb453732786b36948,openstack/openstack-ansible,stable/train,translations-trove-network,I4066d74d3547343929d5208fb453732786b36948,Fix the name of the renamed network for trove,MERGED,2020-06-24 18:30:35.000000000,2020-07-06 17:52:16.000000000,2020-07-06 17:48:15.000000000,2,2,0,737858,5a504268e66f86d5fa6bc8c4aca3e2083e59d4c5,53,8,4,1,14200,Maksim Malchuk,mmalchuk,"Fix the name of the renamed network for trove

The change I60e6126a9fc0ca5c51009fb207642ce2c1afa323 brings the issue with
fail in the translations scenario during the trove configuration. This change
renames the flat network for trove in order to match the required flat name
that is dbaas-mgmt.

Change-Id: I4066d74d3547343929d5208fb453732786b36948
Signed-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>
(cherry picked from commit fb2925b7a76bf204a93311256224c141f31f3c9e)
"
openstack%2Fdevstack~master~I82f539bfa533349293dd5a8ce309c9cc0ffb0393,openstack/devstack,master,uwsgi,I82f539bfa533349293dd5a8ce309c9cc0ffb0393,Use packaged uwsgi on Fedora and Ubuntu,MERGED,2018-06-26 01:54:05.000000000,2020-07-06 17:48:04.000000000,2020-06-15 08:12:41.000000000,46,20,9,577955,2d903568ed4158aa668bbda6986307a8780c71a4,119,13,27,1,7118,Ian Wienand,iwienand,"Use packaged uwsgi on Fedora and Ubuntu

Building uwsgi from source was a workaround that was introduced a long
time ago, it doesn't seem like it is needed anymore and will actually
fail for Ubuntu 20.04.

Also it doesn't match what will happen for most real-world
installations, so let's try to get back to using distro packages. We'll
still use the source install for RHEL/Centos, it remains to be tested
whether we can get back to using distro versions there, too.

Change-Id: I82f539bfa533349293dd5a8ce309c9cc0ffb0393
"
openstack%2Fmonasca-common~stable%2Fussuri~I59e2722f4c9a07ffdb2dc7e7c187ada638ec8a09,openstack/monasca-common,stable/ussuri,ussuri,I59e2722f4c9a07ffdb2dc7e7c187ada638ec8a09,Switch to Ussuri jobs,MERGED,2020-07-03 12:13:45.000000000,2020-07-06 17:45:45.000000000,2020-07-06 17:45:45.000000000,1,1,0,739220,44b390866bd7b2fb0149e7fb0e6cc76b5cc5809e,22,5,3,1,28062,Martin Chacon Piza,martinchacon,"Switch to Ussuri jobs

Change-Id: I59e2722f4c9a07ffdb2dc7e7c187ada638ec8a09
"
openstack%2Fpython-tripleoclient~master~I4b30c0c2478d401babe3e690bd54b2853201baab,openstack/python-tripleoclient,master,ci/standalone/containers,I4b30c0c2478d401babe3e690bd54b2853201baab,zuul: run standalone job with locally built images,MERGED,2020-06-03 19:43:55.000000000,2020-07-06 17:39:49.000000000,2020-07-06 17:34:35.000000000,4,0,0,733389,d57fb767f27b0cdd562a17d01d982d0b66dce76c,42,5,9,1,3153,Emilien Macchi,emilienm,"zuul: run standalone job with locally built images

We now want to test the CLI that builds the container images, so we
picked standalone job and will run the same job except that instead of
pulling images from a remote registry, we'll build them locally and use
them for the deployment.

Depends-On: https://review.opendev.org/729824
Depends-On: https://review.opendev.org/729465
Depends-On: https://review.opendev.org/734870
Depends-On: https://review.opendev.org/733388

Change-Id: I4b30c0c2478d401babe3e690bd54b2853201baab
"
openstack%2Fcinder~stable%2Fpike~I831321d12a6df2b950f05e2452710b9ae105ada4,openstack/cinder,stable/pike,fix_for_ossn_0886,I831321d12a6df2b950f05e2452710b9ae105ada4,Remove VxFlex OS credentials from connection_properties,ABANDONED,2020-07-06 16:28:12.000000000,2020-07-06 17:22:33.000000000,,35,3,0,739545,31d470f0a303f78f0fd39a6330a746065cd74e9a,4,3,1,2,14892,Keith Berger,kberger,"Remove VxFlex OS credentials from connection_properties

VxFlex OS password is not stored in block_device_mapping table.
Instead of this passwords are stored in separate file and are
retrieved during each attach/detach operation.

The stable/queens branch is in Extended Maintenance mode and is no
longer released from.  If you decide to apply this patch to your
deployment, you must make a corresponding change to the os-brick
library.  You can find the os-brick patch for stable/queens here:
    https://review.opendev.org/#/c/733104

Additionally, you must deploy a new configuration file on compute
nodes, cinder nodes, and anywhere you would perform a volume
attachment in your deployment.  See the documentation change on
this patch for details about the new config file.

See OSSN-0086 for more information about this change:
    https://wiki.openstack.org/wiki/OSSN/OSSN-0086

Closes-Bug: #1823200
Change-Id: I831321d12a6df2b950f05e2452710b9ae105ada4
(cherry picked from commit 89bdebd2a92f83a199c86855a63fd3deab9a489c)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I501f31b52db6e10826bd9a346d38e34f95ae8b75,openstack/tripleo-ansible,stable/ussuri,container/configs-stable/ussuri,I501f31b52db6e10826bd9a346d38e34f95ae8b75,Implement container_startup_config module,MERGED,2020-07-03 19:34:20.000000000,2020-07-06 17:21:56.000000000,2020-07-06 17:21:56.000000000,271,15,0,739278,80f9ccd7f433fdffbef38cfd40c00b7b574b4bae,7,3,1,8,3153,Emilien Macchi,emilienm,"Implement container_startup_config module

container_startup_config will replace a bunch of tasks that we did in
THT to generate the .json file for each container in
/var/lib/tripleo-config/container-startup-config.

It'll accelerate a bit the deployment by replacing tasks into a
single module, so we can generate the startup configs much faster.

Also tolerate empty configs in container_config_data, switching a
failure into a debug. If the config is empty, there is no need to run
the rest of the role tasks in tripleo_container_manage.

Note: we manage the SElinux context at the openstack-selinux:
https://github.com/redhat-openstack/openstack-selinux/commit/0b62


Change-Id: I501f31b52db6e10826bd9a346d38e34f95ae8b75
(cherry picked from commit 76bb50476247f367c85d0e8a64dabebb6da1ee4c)
"
openstack%2Fkolla-ansible~stable%2Ftrain~I820dea961e270de9eabb9cc3c75303f5170ce737,openstack/kolla-ansible,stable/train,bug/1884090,I820dea961e270de9eabb9cc3c75303f5170ce737,Support using Logstash 6 image with Centos8,MERGED,2020-06-25 10:55:35.000000000,2020-07-06 17:21:35.000000000,2020-07-06 17:15:23.000000000,89,4,7,737967,4e1225b04b148a6af109da333696e93da869fafa,20,6,4,8,17669,Doug Szumski,DougSzumski,"Support using Logstash 6 image with Centos8

When using Centos8 with the Train release only Elasticsearch 6 is provided.
Whilst the Logstash 2 image builds for Centos8, we upgrade it inline with
Elasticsearch to avoid compatibility problems [1].

[1] https://www.elastic.co/support/matrix#matrix_compatibility

Depends-On: https://review.opendev.org/#/c/736745/
Change-Id: I820dea961e270de9eabb9cc3c75303f5170ce737
Partial-Bug: #1884090
"
openstack%2Fpython-tripleoclient~master~I7d733499e74abe2cdf91526df608dc7c273bf19e,openstack/python-tripleoclient,master,strategy-improvements,I7d733499e74abe2cdf91526df608dc7c273bf19e,overcloud_deploy: raise at the end if Ansible Runner had exception,MERGED,2020-06-16 14:41:43.000000000,2020-07-06 17:13:34.000000000,2020-07-06 17:05:26.000000000,93,78,5,735930,5b63958105d73eadac9c598982e68ef35defa4a1,50,8,6,2,3153,Emilien Macchi,emilienm,"overcloud_deploy: raise at the end if Ansible Runner had exception

In the context of MaxFailPercentage, if a node (e.g. one of 100
computes) has any fatal error during an Ansible play and we tolerate
some percentage of failure; we want to raise the error but at the very
end of the deployment.

So this patch puts the following actions in a ""finally"" block so they
always execute:

* Create overcloudrc
* Sets the right permissions to the clouds.yaml
* Execute _deploy_postconfig
* Print infos like Keystone entpoint, Horizon URL, RC file location
  and deploy message (saying if there is an error or not)

And at the very end we raise the actual AnsibleRunner trace if the
deployment failed.

So even if a node failed and we tolerate it, we'll still finish the
deployment until the end, but for UX purpose we want to raise it at the
very end.
Note that when it fails and it's tolerated, Ansible prints the node as
""ignored"":

PLAY RECAP ******************************************************************
compute-0    : ok=555  (...)  failed=0    skipped=484  rescued=0    ignored=0
compute-1    : ok=60   (...)  failed=1    skipped=40   rescued=0    ignored=1
controller-0 : ok=960  (...)  failed=0    skipped=709  rescued=0    ignored=0
controller-1 : ok=920  (...)  failed=0    skipped=693  rescued=0    ignored=0
controller-2 : ok=919  (...)  failed=0    skipped=693  rescued=0    ignored=0
undercloud   : ok=86   (...)  failed=0    skipped=57   rescued=0    ignored=0

To improve UX, we'll investigate an Ansible callback to properly tell
what nodes needs to be re-deployed.

Note: also mock copy_clouds_yaml since it wasn't tested before but it's
failing to reach the files on the filesystem.
Change-Id: I7d733499e74abe2cdf91526df608dc7c273bf19e
"
openstack%2Fkayobe~stable%2Fussuri~I238aeefefa88dd584ce61ac9eb52d50552336ed0,openstack/kayobe,stable/ussuri,placement-build-stable/ussuri,I238aeefefa88dd584ce61ac9eb52d50552336ed0,Fix condition of placement image build,MERGED,2020-06-26 15:04:10.000000000,2020-07-06 17:11:50.000000000,2020-07-06 17:08:47.000000000,1,1,0,738221,eef94567596cb30dcc866fd5a8cf162cdf9aa631,23,4,1,1,14826,Mark Goddard,mgoddard,"Fix condition of placement image build

This should fix placement image build if nova is disabled but zun is
enabled.

Change-Id: I238aeefefa88dd584ce61ac9eb52d50552336ed0
(cherry picked from commit 931fa4830d681281ff189bed15fbc9e0554428c0)
"
openstack%2Ftripleo-heat-templates~master~I79631ce0ed450febae96db2f32198e02eb427d91,openstack/tripleo-heat-templates,master,bug/1883609,I79631ce0ed450febae96db2f32198e02eb427d91,Fix privilege escalation,MERGED,2020-06-16 21:15:48.000000000,2020-07-06 17:08:32.000000000,2020-07-06 17:08:32.000000000,41,2,0,736047,4e39acd14771ef9e8085b29be3b9374678d8089e,45,6,14,9,14985,Alex Schultz,mwhahaha,"Fix privilege escalation

This change enabled become: true to the deploy step and host prep task
execution. external tasks are still become: false as they are delegated
to localhost and run as the same user running the deployment.

Change-Id: I79631ce0ed450febae96db2f32198e02eb427d91
Related-Bug: #1883609
"
openstack%2Fpython-tripleoclient~master~Ia32acda4f22d99ada07291aaf52c97c676d13dd4,openstack/python-tripleoclient,master,bug/1883692,Ia32acda4f22d99ada07291aaf52c97c676d13dd4,Set portmap cidr fields to extracted CIDR,MERGED,2020-06-24 18:35:17.000000000,2020-07-06 17:08:24.000000000,2020-07-06 17:05:25.000000000,6,6,1,737859,921bcef209626e9668a3de32ad526151e49a5d4d,18,4,5,1,6681,Brent Eagles,beagles,"Set portmap cidr fields to extracted CIDR

Previously were just getting the address+mask which doesn't work well
for some uses.

Related-Bug: #1883692
Change-Id: Ia32acda4f22d99ada07291aaf52c97c676d13dd4
"
openstack%2Fpuppet-tripleo~stable%2Ftrain~I3bf244a70538209773804eb85fae6be035c587f4,openstack/puppet-tripleo,stable/train,fix-override-stable/ussuri-stable/train,I3bf244a70538209773804eb85fae6be035c587f4,Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent,MERGED,2020-06-30 13:21:04.000000000,2020-07-06 17:05:24.000000000,2020-07-06 17:05:24.000000000,25,2,0,738618,f930e3a50a1053510fe904af4d32aec3344f6d75,17,4,2,1,20172,Michele Baldessari,michele,"Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent

In THT we allow RabbitAdditionalErlArgs to set some additional
parameters which should be passed to RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS
when starting rabbit. The problem is that when we use internal tls
that parameter gets ignored and so we lose our default '+sbwt none'.

Let's do this via a proper parameter while also considering the fact
that historically the default value of RabbitAdditionalErlArgs had
apices around it.

Since the original master change had an issue when the THT parameter
was unset (aka when I567839785a72813a382a00253562894e19eb6715 was not
applied to THT), we also add the subsequent fixup ""Make the additional_erl_args
change more independent"" I9fa9ba95410ed3994f608beb2c5e1578dc3a7c7a to
this change)

Change-Id: I3bf244a70538209773804eb85fae6be035c587f4
Related-Bug: #1884922
(cherry picked from commit 4d3864249dc27e033499b8a0855ce095be848a44)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I96453d9236cb92922b058d697be8d8696f279c66,openstack/tripleo-ansible,stable/ussuri,bug/1884696,I96453d9236cb92922b058d697be8d8696f279c66,Prepare tripleo deps repo in tripleo_client_install molecule job,MERGED,2020-07-06 11:01:12.000000000,2020-07-06 17:03:34.000000000,2020-07-06 17:03:33.000000000,2,0,0,739462,3b0868e46cbc935e4fa1d55e216d8df823908963,8,3,1,1,9816,Takashi Kajinami,kajinamit,"Prepare tripleo deps repo in tripleo_client_install molecule job

Change-Id: I96453d9236cb92922b058d697be8d8696f279c66
Closes-Bug: #1884696
(cherry picked from commit c70a5c8f08f697a29c42eb8ee3ddf376fec1c860)
"
openstack%2Ftripleo-ansible~stable%2Fussuri~I55f078be5fbdd762ffb63fb25ca6a192abb2e049,openstack/tripleo-ansible,stable/ussuri,callback-improvements-stable/ussuri,I55f078be5fbdd762ffb63fb25ca6a192abb2e049,Handle unreachable,MERGED,2020-07-03 13:58:41.000000000,2020-07-06 17:03:32.000000000,2020-07-06 17:03:32.000000000,13,0,0,739239,2ed776dc0ae323c22f99cab2849207e2fe70746f,7,5,1,1,3153,Emilien Macchi,emilienm,"Handle unreachable

We forgot to handle unreachable errors.

fatal: [compute-1]: UNREACHABLE! => {""changed"": false, ""msg"": ""Failed to
connect to the host via ssh: ssh: connect to host 192.168.24.18 port 22:
No route to host"", ""unreachable"": true}

Change-Id: I55f078be5fbdd762ffb63fb25ca6a192abb2e049
(cherry picked from commit ffe694808e47957340b4dbc3a17581239243880a)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I55f078be5fbdd762ffb63fb25ca6a192abb2e049,openstack/tripleo-ansible,stable/train,callback-improvements-stable/train,I55f078be5fbdd762ffb63fb25ca6a192abb2e049,Handle unreachable,MERGED,2020-07-03 13:58:50.000000000,2020-07-06 17:03:31.000000000,2020-07-06 17:03:30.000000000,13,0,0,739240,c53bf61d985f55c0efa2a0d451354d399a892d0f,7,5,1,1,3153,Emilien Macchi,emilienm,"Handle unreachable

We forgot to handle unreachable errors.

fatal: [compute-1]: UNREACHABLE! => {""changed"": false, ""msg"": ""Failed to
connect to the host via ssh: ssh: connect to host 192.168.24.18 port 22:
No route to host"", ""unreachable"": true}

Change-Id: I55f078be5fbdd762ffb63fb25ca6a192abb2e049
(cherry picked from commit ffe694808e47957340b4dbc3a17581239243880a)
"
openstack%2Fironic~stable%2Ftrain~Iad6cb02ee4f17b7c5987719b3a0603df210c840d,openstack/ironic,stable/train,deleting-stable/train,Iad6cb02ee4f17b7c5987719b3a0603df210c840d,Clean up nodes in DELETING on conductor restart,MERGED,2020-07-06 12:35:57.000000000,2020-07-06 16:52:17.000000000,2020-07-06 16:48:07.000000000,9,4,0,739473,94d74f2de5e4873af3ced4c897f583dd4d3a70dd,9,4,1,5,10239,Dmitry Tantsur,dtantsur,"Clean up nodes in DELETING on conductor restart

Change-Id: Iad6cb02ee4f17b7c5987719b3a0603df210c840d
(cherry picked from commit 4f6374a209dcf96ecf7d55da4999b045ae4061ef)
"
openstack%2Fironic-inspector~master~I35b5df4b7e3d519c8b567d5cf0d424aafee68fa9,openstack/ironic-inspector,master,prep-renotes,I35b5df4b7e3d519c8b567d5cf0d424aafee68fa9,Prepare release notes for release 10.2,MERGED,2020-07-02 15:58:32.000000000,2020-07-06 16:52:11.000000000,2020-07-06 16:48:06.000000000,8,7,0,739081,79878d7f4db1307f9e3322d96ccc0af984577236,9,3,2,2,23851,Riccardo Pittau,elfosardo,"Prepare release notes for release 10.2

Change-Id: I35b5df4b7e3d519c8b567d5cf0d424aafee68fa9
"
openstack%2Fpython-ironicclient~master~If462d6a5e2304ebc6647087cad89007fe2576acb,openstack/python-ironicclient,master,,If462d6a5e2304ebc6647087cad89007fe2576acb,Remove pypy,MERGED,2020-07-03 13:55:34.000000000,2020-07-06 16:51:44.000000000,2020-07-06 16:48:09.000000000,2,2,3,739235,f1f10385fad74c653c47781489ce4fc5f5a590ef,14,5,2,2,26285,wu.chunyang,wu.chunyang,"Remove pypy

Pypy is not tested in OpenStack anymore, remove the job.

Change-Id: If462d6a5e2304ebc6647087cad89007fe2576acb
"
openstack%2Fironic-python-agent~master~If1408e4b81d263c56b4bbab618dd0737db5f762e,openstack/ironic-python-agent,master,lib-exc,If1408e4b81d263c56b4bbab618dd0737db5f762e,Fix serializing ironic-lib exceptions,MERGED,2020-07-02 10:19:39.000000000,2020-07-06 16:51:37.000000000,2020-07-06 16:47:57.000000000,39,0,0,739005,a4855c544cac35e92ce7c20143536ca7a3bb847a,11,4,1,3,10239,Dmitry Tantsur,dtantsur,"Fix serializing ironic-lib exceptions

Change-Id: If1408e4b81d263c56b4bbab618dd0737db5f762e
Story: #2007889
Task: #40268
"
openstack%2Fglance~master~Ie3698c7334b31c2291b41fd3f7e21add0dd6a19b,openstack/glance,master,lower-constraints,Ie3698c7334b31c2291b41fd3f7e21add0dd6a19b,Update lower-constraints versions,MERGED,2020-06-09 18:29:59.000000000,2020-07-06 16:41:59.000000000,2020-07-06 16:37:59.000000000,16,28,2,734665,9eb562ebfa68bc419a82c05d1f96c8477322e25a,13,5,2,2,11904,Sean McGinnis,SeanM,"Update lower-constraints versions

This updates lower constraints to versions that will work with py38 so
that when we move to running on focal nodes, which has py38 as its
default py3 runtime, the lower-constraints job will continue to pass.

It also cleans out some secondary requirements that are no longer needed
due to our direct dependencies being updated.

Linters are removed that are kept in the global requirements blacklist
as those are not version tracked and are not relevant for our
lower-constraints unit test runs.

Change-Id: Ie3698c7334b31c2291b41fd3f7e21add0dd6a19b
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
"
openstack%2Frequirements~master~I7181a0b198b9f3f3140dd16d2a1ee15ab76e46ed,openstack/requirements,master,new-release,I7181a0b198b9f3f3140dd16d2a1ee15ab76e46ed,update constraint for os-traits to new release 2.4.0,MERGED,2020-07-03 13:05:42.000000000,2020-07-06 16:41:41.000000000,2020-07-06 16:37:56.000000000,1,1,0,739225,55771bbaa143dd12e351d90a1b1294b045077fa9,14,4,1,1,11131,OpenStack Proposal Bot,proposal-bot,"update constraint for os-traits to new release 2.4.0

Change-Id: I7181a0b198b9f3f3140dd16d2a1ee15ab76e46ed
meta:version: 2.4.0
meta:diff-start: -
meta:series: independent
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Lin Yang <lin.a.yang@intel.com>
meta:release:Commit: Lin Yang <lin.a.yang@intel.com>
meta:release:Change-Id: I0786e73160f0ecac604279c79334d4f697d0edde
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+1: Tetsuro Nakamura <tetsuro.nakamura.bc@hco.ntt.co.jp>
meta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>
meta:release:Workflow+1: Hervé Beraud <hberaud@redhat.com>
"
openstack%2Fglance~stable%2Fussuri~I44bfefb6eee421e18e5e95a0dafaef0ea4e170da,openstack/glance,stable/ussuri,bug/1885003-stable/ussuri,I44bfefb6eee421e18e5e95a0dafaef0ea4e170da,Fix: Interrupted copy-image leaking data on subsequent operation,MERGED,2020-07-06 05:43:06.000000000,2020-07-06 16:41:35.000000000,2020-07-06 16:37:57.000000000,82,1,0,739403,72510f9ce90970e75a95492c7647fd63ac2636dc,9,4,1,2,9303,Abhishek Kekane,abhishekkekane,"Fix: Interrupted copy-image leaking data on subsequent operation

If copying existing image in other stores fails while staging the data to
staging directory due to power, network or any other reason. Then
subsequent try may lead to data leaks in stores.

To fix this, added check of the actual image size with the size
of image file present in the staging area. If it does not match
then delete the image file from staging area so that the entire
image will be staged again.

Change-Id: I44bfefb6eee421e18e5e95a0dafaef0ea4e170da
Closes-Bug: #1885003
(cherry picked from commit 22d8f1fcbf4325d79ac18adfe87198c785f1df52)
"
openstack%2Ftripleo-heat-templates~stable%2Fstein~I08c4562308a5a5ce93e64a7485ab207af2241565,openstack/tripleo-heat-templates,stable/stein,bug/1877130,I08c4562308a5a5ce93e64a7485ab207af2241565,Fix typo in setting octavia wsgi server name,MERGED,2020-07-03 13:52:07.000000000,2020-07-06 16:30:03.000000000,2020-07-06 16:30:03.000000000,1,1,0,739233,ec1bcec1eaa184ef3b935f082cc465227e72d2ca,7,3,1,1,6681,Brent Eagles,beagles,"Fix typo in setting octavia wsgi server name

hiera was being set as server_name when it should've been servername.

Change-Id: I08c4562308a5a5ce93e64a7485ab207af2241565
Closes-Bug: #1877130
(cherry picked from commit dac08c4f0ebc79d0003a6a4610bbc240a808da22)
(cherry picked from commit 51565c0c3d2340c18b8e81cc540720fb711c6dad)
"
openstack%2Fopenstack-ansible~master~Icb4b196745c5b20d354298674e8918c6e3449d16,openstack/openstack-ansible,master,,Icb4b196745c5b20d354298674e8918c6e3449d16,Update repo location for networking-calico,ABANDONED,2020-05-27 08:29:42.000000000,2020-07-06 16:29:53.000000000,,37,6,0,731109,ff11f9b2c5f701f43552e817a2c6458ed9025c7e,8,4,3,3,25023,Jonathan Rosser,jrosser,"Update repo location for networking-calico

networking-calico is moved out of openstack_services.yml to so that
we clone the upstream role rather than try to find the repo pre-installed
in the zuul CI image.

Change-Id: Icb4b196745c5b20d354298674e8918c6e3449d16
"
openstack%2Ftripleo-heat-templates~master~I535d8360493267d50196aebb6365124b67e9ba78,openstack/tripleo-heat-templates,master,bug/1883609,I535d8360493267d50196aebb6365124b67e9ba78,Move sidecar kill scripts to host prep,MERGED,2020-06-17 15:52:39.000000000,2020-07-06 16:29:19.000000000,2020-07-04 00:45:55.000000000,93,102,1,736279,230481674ffd577ed83573daa28b6d3e0ef57637,36,7,10,3,14985,Alex Schultz,mwhahaha,"Move sidecar kill scripts to host prep

These tasks are really should be managed a single time against the host
rather than at deployment time.

Change-Id: I535d8360493267d50196aebb6365124b67e9ba78
Related-Bug: #1883609
"
openstack%2Fansible-role-tripleo-modify-image~master~I8391e02456a304d4e29256cbbf5433879c6c42b1,openstack/ansible-role-tripleo-modify-image,master,force,I8391e02456a304d4e29256cbbf5433879c6c42b1,rpm_install: return 0 if package was already installed,MERGED,2020-07-03 12:57:09.000000000,2020-07-06 16:28:54.000000000,2020-07-06 16:28:53.000000000,1,1,1,739224,affe2c3e71f87951302e48b0dd0789293cef4c53,8,4,1,1,3153,Emilien Macchi,emilienm,"rpm_install: return 0 if package was already installed

Currently, if the package was already installed, the script would return
2, or 6 or the package would be upgraded.
It causes the script to fail (we use set -e); so to avoid that we added
--replacepkgs --replacefiles and --oldpackage arguments to rpm.

- Install the packages even if some of them are already installed on
  this system.
- Install the packages even if they replace files from other, already
  installed, packages.
- Allow an upgrade to replace a newer package with an older one.

Change-Id: I8391e02456a304d4e29256cbbf5433879c6c42b1
"
openstack%2Fopenstack-ansible~master~I620c035ab5a4d1a8ee4de5885c8be3b81a10aa4d,openstack/openstack-ansible,master,,I620c035ab5a4d1a8ee4de5885c8be3b81a10aa4d,Remove python2 or python3 problem pip packages,ABANDONED,2020-03-19 11:17:21.000000000,2020-07-06 16:22:13.000000000,,20,1,1,713849,974a24b22fe26a05801aa2fa515f0b66257bdb2a,11,2,3,2,25023,Jonathan Rosser,jrosser,"Remove python2 or python3 problem pip packages

Unify the approach with the openstack-ansible-tests repo - see
https://review.opendev.org/712069

Change-Id: I620c035ab5a4d1a8ee4de5885c8be3b81a10aa4d
"
openstack%2Fopenstack-ansible-openstack_hosts~master~I5d24aadb39070ce06808b9674048efe49d33894c,openstack/openstack-ansible-openstack_hosts,master,,I5d24aadb39070ce06808b9674048efe49d33894c,Use ansible-runtime python to drop hosts file,ABANDONED,2020-02-20 22:45:36.000000000,2020-07-06 16:21:50.000000000,,1,4,0,708989,089426a94326b425df95149399baf3377457f47f,6,2,2,1,25023,Jonathan Rosser,jrosser,"Use ansible-runtime python to drop hosts file

Change-Id: I5d24aadb39070ce06808b9674048efe49d33894c
"
openstack%2Fopenstack-ansible-plugins~master~I0be22f9ab4b0588203a462ce0d7c6c2bf21ffcff,openstack/openstack-ansible-plugins,master,,I0be22f9ab4b0588203a462ce0d7c6c2bf21ffcff,Remove physical_host_addrs parameter from ssh plugin,ABANDONED,2020-06-22 06:51:58.000000000,2020-07-06 16:21:10.000000000,,1,75,0,737220,2e4b4010590a5ec6413f790217cfec89440aadbd,18,2,9,3,25023,Jonathan Rosser,jrosser,"Remove physical_host_addrs parameter from ssh plugin

This is not used anywhere in OSA and accounts for nearly 50% of
the runtime on a re-run of playbooks/lxc-container-create.yml on
an already deployed AIO

Change-Id: I0be22f9ab4b0588203a462ce0d7c6c2bf21ffcff
"
openstack%2Ftripleo-heat-templates~master~I1d21db4af894c096d929863daabd08673592370c,openstack/tripleo-heat-templates,master,,I1d21db4af894c096d929863daabd08673592370c,WIP: unset noout flag after node upgrade,ABANDONED,2020-07-06 16:17:59.000000000,2020-07-06 16:18:35.000000000,,25,1,0,739538,91411dfc5fb8de6f936cb23ff3367a15376e390e,2,0,1,1,6796,Giulio Fidente,gfidente,"WIP: unset noout flag after node upgrade

Change-Id: I1d21db4af894c096d929863daabd08673592370c
"
openstack%2Fpuppet-tripleo~master~Idf106c9ffa23ed00c497e1e5014e1b5718254320,openstack/puppet-tripleo,master,bug/1871663,Idf106c9ffa23ed00c497e1e5014e1b5718254320,Ensure that the HAProxy certificate is updated,MERGED,2020-04-24 15:33:32.000000000,2020-07-06 16:17:02.000000000,2020-07-04 02:04:35.000000000,3,0,0,722877,c1e09672a52fea82d853d17145901109291ac1f1,16,6,2,1,7414,David Wilde,d34dh0r53,"Ensure that the HAProxy certificate is updated

While doing research for this bugzilla[1] I found that since the
actual certificate PEM file is being bind mounted the mount is acting
as a hard link to the inode of the PEM rather than just a pointer to
it's location in the directory.  When the new file is copied over the
inode is updated but the container still maintains a link to the stale
inode.  This patch copies the contents of the certificate into the
container so that the HUP of HAProxy will reload the certificate.

[1]: https://bugzilla.redhat.com/show_bug.cgi?id=1765839

Change-Id: Idf106c9ffa23ed00c497e1e5014e1b5718254320
Closes-Bug: 1871663
"
openstack%2Fopenstack-ansible-plugins~master~I8b315efed26a22ae669432856eb1e7d994f4ab3,openstack/openstack-ansible-plugins,master,,I8b315efed26a22ae669432856eb1e7d994f4ab3,Do not use paramkio transport for delegated tasks,MERGED,2020-06-22 06:51:58.000000000,2020-07-06 15:57:11.000000000,2020-07-06 15:50:58.000000000,1,38,0,737219,15ee0011836a30dfeb30c8847b3487a7bb214d5c,11,3,2,1,25023,Jonathan Rosser,jrosser,"Do not use paramkio transport for delegated tasks

This saves 25s from the previous runtime of 4m21s for
playbooks/lxc-containers-create on an already deployed AIO.

Change-Id: I8b315efed26a22ae669432856eb1e7d994f4ab3
"
openstack%2Fpuppet-keystone~master~I8a7abed59468f93d48aa38a47ad4f72d994da79a,openstack/puppet-keystone,master,token-flush,I8a7abed59468f93d48aa38a47ad4f72d994da79a,Deprecate keystone::cron::token_fush,MERGED,2020-07-05 23:42:05.000000000,2020-07-06 15:50:06.000000000,2020-07-06 15:44:43.000000000,25,117,0,739380,fd8badd39c04ca49ca4c49a6ce7cef26349d3960,12,4,2,7,9816,Takashi Kajinami,kajinamit,"Deprecate keystone::cron::token_fush

... because ``keystone-manage token_flush`` was already removed from
keystone[1].

[1] https://github.com/openstack/keystone/commit/48dcdb5ad3ea47e923da3ab4a1572159d7cac6df

Change-Id: I8a7abed59468f93d48aa38a47ad4f72d994da79a
"
openstack%2Fpuppet-keystone~master~Ic339b88708eb98a067530b9741301c3f2dafddd5,openstack/puppet-keystone,master,736734,Ic339b88708eb98a067530b9741301c3f2dafddd5,Remove deprecated bootstrap code,MERGED,2020-06-18 14:32:40.000000000,2020-07-06 15:48:31.000000000,2020-07-06 15:44:42.000000000,41,366,0,736734,e421e3ad9cc1762727e2f836326653fb30998f75,20,4,2,10,16137,Tobias Urdin,tobasco,"Remove deprecated bootstrap code

Removes all the deprecated code related to
the old admin token and bootstrap usage in
favor of the new keystone::bootstrap class.

Change-Id: Ic339b88708eb98a067530b9741301c3f2dafddd5
"
openstack%2Fopenstack-ansible-os_horizon~stable%2Fussuri~If0f8b4a7442d8cd904337f802758e17aa3cb8da8,openstack/openstack-ansible-os_horizon,stable/ussuri,osa/el8-stable/ussuri,If0f8b4a7442d8cd904337f802758e17aa3cb8da8,Add Centos-8 support,MERGED,2020-07-03 16:17:18.000000000,2020-07-06 15:45:02.000000000,2020-07-06 15:43:25.000000000,60,0,0,739260,57c10221fef3f9eb5ab8e448fbf0f4e58a760455,8,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: If0f8b4a7442d8cd904337f802758e17aa3cb8da8
(cherry picked from commit 4c2cc73d571dd86303bc16063951c13bec8af8c5)
"
openstack%2Ftripleo-ansible~stable%2Ftrain~I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0,openstack/tripleo-ansible,stable/train,bug/1884816,I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0,Make tripleo_ceph_run_ansible handle change in remote_tmp,MERGED,2020-06-24 12:44:07.000000000,2020-07-06 15:44:29.000000000,2020-07-03 03:00:27.000000000,69,1,0,737761,c7571039ff738e71ad19e60aa344c2e1ed0781b9,20,8,2,2,18002,John Fulton,fultonj,"Make tripleo_ceph_run_ansible handle change in remote_tmp

Ansible's remote_tmp module changed in 2.9.10 [1] causing
the reported bug this patch addresses. The error from the
module suggests creating the remote_tmp dir with the correct
permissions. This patch does that within external_deploy_steps
by having tripleo-ansible create the remote_tmp dir accordingly
before running ceph-ansible (which uses that remote_tmp dir).

[1] https://github.com/ansible/ansible/issues/68218

Change-Id: I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0
Closes-Bug: #1884816
(cherry picked from commit 1b440db7f69b1f0e69016ed5a409e84b6fab1f9d)
"
openstack%2Ftripleo-ansible~master~I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0,openstack/tripleo-ansible,master,bug/1884816,I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0,Make tripleo_ceph_run_ansible handle change in remote_tmp,MERGED,2020-06-24 00:11:06.000000000,2020-07-06 15:36:20.000000000,2020-06-24 16:08:32.000000000,69,1,12,737660,1b440db7f69b1f0e69016ed5a409e84b6fab1f9d,29,8,3,2,18002,John Fulton,fultonj,"Make tripleo_ceph_run_ansible handle change in remote_tmp

Ansible's remote_tmp module changed in 2.9.10 [1] causing
the reported bug this patch addresses. The error from the
module suggests creating the remote_tmp dir with the correct
permissions. This patch does that within external_deploy_steps
by having tripleo-ansible create the remote_tmp dir accordingly
before running ceph-ansible (which uses that remote_tmp dir).

[1] https://github.com/ansible/ansible/issues/68218

Change-Id: I0350d5253571a2b0d12a0a2f25e5469c9d1fefe0
Closes-Bug: #1884816
"
openstack%2Ftripleo-upgrade~stable%2Fussuri~I3eadfad34aa563084fd4cc68990cb247e734d508,openstack/tripleo-upgrade,stable/ussuri,bug/1885637-stable/ussuri,I3eadfad34aa563084fd4cc68990cb247e734d508,Refactor ceph-ansible upgrade,MERGED,2020-07-02 08:40:14.000000000,2020-07-06 15:36:16.000000000,2020-07-06 15:36:16.000000000,12,9,0,738988,c0993bed8557c621cf57be94a404ea7578cff356,7,5,1,3,6816,Jesse Pretorius,jesse-pretorius,"Refactor ceph-ansible upgrade

ceph-ansible and python-tripleoclient have different ""minimum"" required
version of ansible in specification. This patch upgrades ceph-ansible as
prerequisite so all dependencies will be met. In fast-forward script
checks if ceph-ansible is installed.If yes, it will upgrade it to latest
versions in repositories.

Change-Id: I3eadfad34aa563084fd4cc68990cb247e734d508
Related-Bug: 1885637
(cherry picked from commit 3fb8fe1912a7fe2f484390d2adc4e618e147a554)
"
openstack%2Ftripleo-quickstart-extras~master~I2518e622fb5e739057d0d9060b6163e73056a019,openstack/tripleo-quickstart-extras,master,,I2518e622fb5e739057d0d9060b6163e73056a019,Bumps up default Ceph container images for Queens and Rocky,MERGED,2020-06-22 16:03:06.000000000,2020-07-06 15:36:15.000000000,2020-07-06 15:36:15.000000000,1,1,0,737306,38943b7174e657d5a1a414bc37320e9a396a23f1,20,5,2,1,6796,Giulio Fidente,gfidente,"Bumps up default Ceph container images for Queens and Rocky

Updates ceph/daemon image to 3.2.14 which backports important
compatibility changes to support upgrades to 4.x

Change-Id: I2518e622fb5e739057d0d9060b6163e73056a019
Depends-On: If370d85eead771305705ad798501e3947a1c6f4f
"
openstack%2Fopenstack-ansible-os_heat~stable%2Fussuri~Id844f584b22e35ac154b1727a42522d73bf97670,openstack/openstack-ansible-os_heat,stable/ussuri,osa/el8-stable/ussuri,Id844f584b22e35ac154b1727a42522d73bf97670,Add Centos-8 support,MERGED,2020-07-03 16:17:24.000000000,2020-07-06 15:18:38.000000000,2020-07-06 15:16:26.000000000,1,1,0,739261,d7e43d2cf6d22c6943c425d926107ed22095df95,8,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: Id844f584b22e35ac154b1727a42522d73bf97670
(cherry picked from commit 08d2b28bd2206d06b1607cb5be3c13fb52fca7bc)
"
openstack%2Fdevstack~master~I9a4fab7848e5dba8a5b3b09a75e7aac213368706,openstack/devstack,master,string-comparison-fix,I9a4fab7848e5dba8a5b3b09a75e7aac213368706,Fix string comparison,MERGED,2020-07-02 08:36:25.000000000,2020-07-06 15:17:06.000000000,2020-07-06 15:09:59.000000000,1,1,0,738984,8956006e519022bc9640476674e638c7dd080478,8,3,1,1,22997,xinliang,xinliang.liu,"Fix string comparison

String comparison should be included with square brackets.

Change-Id: I9a4fab7848e5dba8a5b3b09a75e7aac213368706
"
openstack%2Fdevstack~master~I8484baa7398b28ed5ef62f86b55022c7d8703f56,openstack/devstack,master,ovn-as-default-backend,I8484baa7398b28ed5ef62f86b55022c7d8703f56,Add neutron-ovn-tempest-ovs-release job to the check queue,MERGED,2020-06-16 20:30:54.000000000,2020-07-06 15:14:48.000000000,2020-07-06 15:09:55.000000000,5,0,0,736021,744f50b970bf10f06e9d52de0b57d74ddcb18467,13,5,1,1,11975,Slawek Kaplonski,slaweq,"Add neutron-ovn-tempest-ovs-release job to the check queue

During the Victoria cycle we plan to switch default Neutron backend in
Devstack from OVS to OVN.
As first step before we will start discussion about this change with
whole community, we want to add tempest ovn based neutron job to
the devstack check queue so that we can keep verifying that with
devstack changes.

Change-Id: I8484baa7398b28ed5ef62f86b55022c7d8703f56
"
openstack%2Fdevstack~master~I0ba1fd05c6391cd8bb978119ecfbb891def2d497,openstack/devstack,master,move-stackviz-role,I0ba1fd05c6391cd8bb978119ecfbb891def2d497,Move process-stackviz role from Tempest to Devstack,MERGED,2020-06-19 15:40:26.000000000,2020-07-06 15:09:57.000000000,2020-07-06 15:09:57.000000000,95,0,0,737037,264d2a2e5fecd7ae94a4a71087ca93ea9cc25109,23,5,2,3,8556,Ghanshyam,ghanshyam,"Move process-stackviz role from Tempest to Devstack

process-stackviz role currently defined in Tempest repo[1] and used
in tempest jobs. Issue with having it in branchless Tempest is that any
fix in that role cannot be backported to older Tempest. Also stackviz is
not Tempest things it is only used by Tempest jobs.

Stackviz can be considered as a service similar to Tempest so inatlling it in
Devstack side make sense. Also that will give us advantage to handle the
branch specific fixes or backpoting the fixes.

This can solve the current issues we are facing on rocky branch
- https://zuul.opendev.org/t/openstack/build/c1e2da80537448bfb24331fb4198a931/console#4/0/29/controller

[1] https://opendev.org/openstack/tempest/src/branch/master/roles/process-stackviz

Change-Id: I0ba1fd05c6391cd8bb978119ecfbb891def2d497
"
openstack%2Fpuppet-ceilometer~master~I59b78c73f563964030eb2c0602f2a9ddfce3e518,openstack/puppet-ceilometer,master,remove-expirer,I59b78c73f563964030eb2c0602f2a9ddfce3e518,Remove ceilometer::expirer,MERGED,2020-07-04 15:18:41.000000000,2020-07-06 15:04:45.000000000,2020-07-06 15:02:49.000000000,4,56,0,739305,60f3d678d1d328a0db4aab127bd7c7839c7c62bf,8,3,1,3,9816,Takashi Kajinami,kajinamit,"Remove ceilometer::expirer

... because it was deprecated in the previous cycle[1], and is useless
since ceilometer-expirer was removed from ceilometer.

[1] 8a5ec2926068f1d67775fef3eab6a6e39de34a29

Change-Id: I59b78c73f563964030eb2c0602f2a9ddfce3e518
"
openstack%2Fopenstack-ansible-os_horizon~stable%2Ftrain~Iba8c6e6b66480cdd575f75162c9be80e84ec868b,openstack/openstack-ansible-os_horizon,stable/train,idp-improvements-stable/ussuri-stable/train,Iba8c6e6b66480cdd575f75162c9be80e84ec868b,Display name in IDP dropdown,MERGED,2020-06-24 16:57:59.000000000,2020-07-06 14:57:35.000000000,2020-07-06 14:55:17.000000000,1,1,0,737850,6fce55be2c526be9cf447b2abbf09e7231f884f8,14,4,1,1,25023,Jonathan Rosser,jrosser,"Display name in IDP dropdown

If an operator would like a different display name
on the horizon Identity Provider dropdown to the one used
for their IDP in the backend they may specify a display_name
in their entry within the keystone_sp.trusted_idp_list.
Otherwise this continues to default to the IDPs name as usual.

Change-Id: Iba8c6e6b66480cdd575f75162c9be80e84ec868b
(cherry picked from commit ee0a0711e87a6ae952576f989b4a56224de7e8a8)
"
openstack%2Fcharm-neutron-api~master~I3a0e757e5afe6a77cc507ee01298961c16d41cb2,openstack/charm-neutron-api,master,,I3a0e757e5afe6a77cc507ee01298961c16d41cb2,Add igmp_snooping_enable config,MERGED,2020-07-02 16:00:35.000000000,2020-07-06 14:57:19.000000000,2020-07-04 01:38:59.000000000,164,0,3,739084,f401914ee341cc7a34c336287879c073a30a9226,22,4,3,4,28510,Pedro Guimarães,pguimaraes,"Add igmp_snooping_enable config

This option is available on both OVS and OVN to
allow virtual switch to snoop into multicast IGMP
messages and learn which ports should be flooded.

This change adds igmp snooping option on neutron.conf.

Change-Id: I3a0e757e5afe6a77cc507ee01298961c16d41cb2
"
openstack%2Fdevstack~master~Id350aa8a92c6c559bc0a0a84e0e8285c8ec6a232,openstack/devstack,master,,Id350aa8a92c6c559bc0a0a84e0e8285c8ec6a232,swift: Remove s3api from proxy pipeline,NEW,2020-05-26 23:01:44.000000000,2020-07-06 14:49:35.000000000,,1,0,3,731001,0f1807276b060bdc420213e0ec9905bb2d878851,6,4,1,1,15343,Tim Burke,tburke,"swift: Remove s3api from proxy pipeline

...in case Swift ever starts recommending s3api by default.
Otherwise, we'll have it placed twice.

Change-Id: Id350aa8a92c6c559bc0a0a84e0e8285c8ec6a232
"
openstack%2Fkolla~master~I81e5b7abf4571fece13a029e25911e9e4dece673,openstack/kolla,master,disable-systemd-getent,I81e5b7abf4571fece13a029e25911e9e4dece673,Drop systemd support from nsswitch.conf on RHEL-based distros,MERGED,2020-06-17 08:22:12.000000000,2020-07-06 14:44:54.000000000,2020-07-06 14:33:01.000000000,9,1,5,736130,dc2ddfa9750f94430a5b04b62fc1fa6adcb234f8,74,10,6,2,20172,Michele Baldessari,michele,"Drop systemd support from nsswitch.conf on RHEL-based distros

A bit like we did for I3e0e86026f5a4a78473bed824cd1682d3a020cd5 we
should remove the nss-systemd lookup from containers. The reasons for
this are as follows:
1) Just like for I3e0e86026f5a4a78473bed824cd1682d3a020cd5
when this nss module is triggered it tries to talk to dbus.
It triggers a bunch of selinux denials and it makes little sense
to open all containers to talk to dbus.
In particular, if a container is run as non-privileged and bind-mounts
/run from the host, we will hit selinux denials like the following:

  type=USER_AVC msg=audit(1592337775.860:74119): pid=1284 uid=81 auid=4294967295 ses=4294967295 subj=system_u:system_r:system_dbusd_t:s0-s0:c0.c1023 msg='avc:  denied  { send_msg } for msgtype=method_call interface=org.freedesktop.DBus member=Hello dest=org.freedesktop.DBus spid=406228 scontext=system_u:system_r:container_t:s0:c162,c886 tcontext=system_u:system_r:system_dbusd_t:s0-s0:c0.c1023 tclass=dbus permissive=0  exe=""/usr/bin/dbus-daemon"" sauid=81 hostname=? addr=? terminal=?'UID=""dbus"" AUID=""unset"" SAUID=""dbus""

2) It just makes little sense in a kolla-world to have containers
talk to dbus/systemd and it saves us some time when a lookup triggers
the systemd module for whatever reason. Especially because the
nss-systemd module does a few things which are not useful in a container
(ensures that the root and nobody users and groups remain resolvable,
SystemD's DynamicUser= feature, provide Lookup API via Varlink)

The sed regex gives us the wanted results:
$ diff -u /etc/nsswitch.conf.orig /etc/nsswitch.conf
--- /etc/nsswitch.conf.orig     2020-06-19 07:18:10.974580755 +0000
+++ /etc/nsswitch.conf  2020-06-19 07:20:12.260230103 +0000
@@ -53,9 +53,9 @@
 # group:     db files

 # In order of likelihood of use to accelerate lookup.
-passwd:      sss files systemd
+passwd:      sss files
 shadow:     files sss
-group:       sss files systemd
+group:       sss files
 hosts:      files dns myhostname
 services:   files sss
 netgroup:   sss

Related-Bug: #1883849

Change-Id: I81e5b7abf4571fece13a029e25911e9e4dece673
"
openstack%2Fpatrole~master~I4ad6f84c71733b0bcc76d97493aa403d8c38de74,openstack/patrole,master,725023,I4ad6f84c71733b0bcc76d97493aa403d8c38de74,Add Patrole gate job for stable/ussuri,MERGED,2020-05-02 15:54:37.000000000,2020-07-06 14:43:09.000000000,2020-05-08 18:10:59.000000000,7,0,6,725023,a19f3dbe5cfde0e2a4a79b13b80db50f1b71b600,19,4,4,1,27621,Vishakha Agarwal,Vishakha,"Add Patrole gate job for stable/ussuri

Now we have stable/ussuri branch ready for devstack
and so does for all service projects.

This commit adds the Patrole testing for stable/ussuri
by adding new jobs running on stable/ussuri version of
openstack.

Change-Id: I4ad6f84c71733b0bcc76d97493aa403d8c38de74
"
openstack%2Fopenstack-ansible-os_nova~stable%2Fussuri~Ibc8c9b92c8c3c705964fbc85019b357913583ca7,openstack/openstack-ansible-os_nova,stable/ussuri,osa/el8-stable/ussuri,Ibc8c9b92c8c3c705964fbc85019b357913583ca7,Add Centos-8 support,MERGED,2020-07-03 16:17:09.000000000,2020-07-06 14:38:52.000000000,2020-07-06 14:36:55.000000000,4,6,0,739259,aeae89242e370737f39031be7c785dc2597e2875,8,4,1,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

We shouldn't need this anymore since interpreter patch has been merged
https://review.opendev.org/#/q/topic:interpreter+(status:open+OR+status:merged)

Change-Id: Ibc8c9b92c8c3c705964fbc85019b357913583ca7
(cherry picked from commit 842c899d8e28c4f05236a9f18acedcdba7067eec)
"
openstack%2Fdiskimage-builder~master~Iea2f454f384d728e7d61bcdb47e292f3f0a634a9,openstack/diskimage-builder,master,pygments_style,Iea2f454f384d728e7d61bcdb47e292f3f0a634a9,[doc] Fix pygments_style,ABANDONED,2020-07-05 08:16:10.000000000,2020-07-06 14:33:14.000000000,,1,1,0,739344,280e067113bb4937e84ad105614af00f336e4ded,5,3,1,1,30491,Radosław Piliszek,yoctozepto,"[doc] Fix pygments_style

This sets pygments_style to 'native' to fix colours in code
listings in docs.

Change-Id: Iea2f454f384d728e7d61bcdb47e292f3f0a634a9
"
openstack%2Ftripleo-upgrade~stable%2Fussuri~I25cbeab46f7eeb1d24b104d8bcc2883af68492b0,openstack/tripleo-upgrade,stable/ussuri,bug/1885637-stable/ussuri,I25cbeab46f7eeb1d24b104d8bcc2883af68492b0,Remove tht/tc/ta/tv update before UC upgrade.,MERGED,2020-07-02 08:40:14.000000000,2020-07-06 14:21:36.000000000,2020-07-06 14:21:36.000000000,0,4,0,738987,79267627ce7f810dbed4d04efe46ed07bfa9f3b5,7,5,1,1,6816,Jesse Pretorius,jesse-pretorius,"Remove tht/tc/ta/tv update before UC upgrade.

After [0] merged, we are not required to run a tripleo-common,
tripleo-heat-templates, tripleo-ansible and tripleo-validations
package update as it will be performed by the undercloud upgrade
command itself.

This patch removes it from tripleo-upgrade. However, this can't be
backported to stable/train or older releases.

[0] - https://github.com/openstack/python-tripleoclient/commit/55c99266c9b589de93e3191cdd4d147e722fdf4a

Change-Id: I25cbeab46f7eeb1d24b104d8bcc2883af68492b0
(cherry picked from commit f820078ecf7b7aa4de988994f77bb23b3491474a)
"
openstack%2Fdevstack~stable%2Fqueens~I82f539bfa533349293dd5a8ce309c9cc0ffb0393,openstack/devstack,stable/queens,uwsgi-stable/queens,I82f539bfa533349293dd5a8ce309c9cc0ffb0393,"Fix gate, squashing multiple fixes",MERGED,2020-06-25 09:58:13.000000000,2020-07-06 14:18:04.000000000,2020-07-06 14:18:04.000000000,158,34,0,737940,f4b063b207f296384e101e4545150ee80459eceb,24,9,3,11,21798,Bernard Cafarelli,bcafarel,"Fix gate, squashing multiple fixes

This commit includes multiple fixes to
make gate happy:

1. Use packaged uwsgi on Fedora and Ubuntu
- https://review.opendev.org/#/c/735615/7

2. Move process-stackviz role from Tempest to Devstack
- https://review.opendev.org/#/c/737078/4

3. Add ensure-pip to pre.yaml
- https://review.opendev.org/#/c/738495/2

4. Use uwsgi binary from path
- https://review.opendev.org/#/c/739072/

5. Temporarily disable the grenade jobs

Conflicts:
	.zuul.yaml
	lib/neutron
	lib/neutron-legacy

Change-Id: I82f539bfa533349293dd5a8ce309c9cc0ffb0393
(cherry picked from commit 2d903568ed4158aa668bbda6986307a8780c71a4)
(cherry picked from commit ad6cc52c746f1fbdb1d89b14c09dc4aa7907bfe4)
"
openstack%2Ftripleo-ansible~master~Ia5859ecf0822f19b9f04dda79d5b8b5eaf5220be,openstack/tripleo-ansible,master,container-not-running,Ia5859ecf0822f19b9f04dda79d5b8b5eaf5220be,Fix missing requirements for tests,MERGED,2020-06-26 21:06:49.000000000,2020-07-06 14:16:34.000000000,2020-06-29 08:45:56.000000000,2,0,0,738281,cdb59feb206cf0ff3e079695c23ecfdb07271e25,10,4,1,1,14985,Alex Schultz,mwhahaha,"Fix missing requirements for tests

We added heatclient and metalsmith requirements as part of our modules
so we need to make sure to properly capture them.

Change-Id: Ia5859ecf0822f19b9f04dda79d5b8b5eaf5220be
"
openstack%2Ftripleo-ansible~master~I24b118220ce2371f651cad6b8dfbbf5d031ee118,openstack/tripleo-ansible,master,bug/1883609,I24b118220ce2371f651cad6b8dfbbf5d031ee118,Fix tripleo_hierdata permissions,MERGED,2020-06-16 20:58:09.000000000,2020-07-06 14:15:52.000000000,2020-07-02 20:27:49.000000000,5,0,8,736040,c8d8e9adaf62f1b3e6a274fbb5ec17dae4dc8449,39,6,3,3,14985,Alex Schultz,mwhahaha,"Fix tripleo_hierdata permissions

Add become: true to the tasks that need to be able to write to /etc/

Change-Id: I24b118220ce2371f651cad6b8dfbbf5d031ee118
Related-Bug: #1883609
"
openstack%2Ftripleo-ansible~master~Iaa39aa301be182722e0650583d1ad17c0e8dc82b,openstack/tripleo-ansible,master,bug/1883609,Iaa39aa301be182722e0650583d1ad17c0e8dc82b,Fix host entries permissions,MERGED,2020-06-16 20:39:44.000000000,2020-07-06 14:15:27.000000000,2020-06-18 15:31:50.000000000,1,0,0,736024,746bd9a52b2a4288af705f161ec41736a4e3b5e3,18,5,2,1,14985,Alex Schultz,mwhahaha,"Fix host entries permissions

The cleanup tasks needs become: true because it was created with root.

Change-Id: Iaa39aa301be182722e0650583d1ad17c0e8dc82b
Related-Bug: #1883609
"
openstack%2Ftripleo-heat-templates~master~I84287d9c1ef110511c66743f9a3a22709077b0cb,openstack/tripleo-heat-templates,master,bug/1885619,I84287d9c1ef110511c66743f9a3a22709077b0cb,Exclude /etc/hostname,MERGED,2020-06-29 18:57:37.000000000,2020-07-06 14:14:56.000000000,2020-07-02 22:33:01.000000000,11,2,3,738490,777920dfba58fa7b26c063fa5d6df0203009d12c,20,5,4,1,14985,Alex Schultz,mwhahaha,"Exclude /etc/hostname

Similar to the previous patch where we excluded /etc/hosts, it turns out
that /etc/hostname is also a special file that cannot be synced in via
kolla because they are bindmounted internally.

https://github.com/containers/libpod/blob/6ac009d5304127f6758be157c7302646e5a481e5/libpod/container_internal_linux.go#L1236

Additionally this change includes cleanup for end users who may have hit
LP#1860607 and allows folks who have hit this to just simply rerun the
deployment and not have to manually cleanup the synced files.

Change-Id: I84287d9c1ef110511c66743f9a3a22709077b0cb
Closes-Bug: #1885619
"
openstack%2Fironic-specs~master~Ibefde7ed15932964c366c605b7ca03bce4d66e5b,openstack/ironic-specs,master,releasing-bears,Ibefde7ed15932964c366c605b7ca03bce4d66e5b,New release model: correct the named branches lifetime,MERGED,2020-07-01 08:49:37.000000000,2020-07-06 14:13:36.000000000,2020-07-06 14:09:58.000000000,12,6,0,738761,2f2df334657df7348a3f3de259aa022b970114d1,8,3,1,1,10239,Dmitry Tantsur,dtantsur,"New release model: correct the named branches lifetime

The initial proposal of supporting a branch with all fixes only
6 months was too harsh and does not seem to reflect how we actually
handle stable branches. Based on personal observation that we mostly
maintain the last two stable branches (e.g. right now Train is still
actively maintained), the windows is increased to 12 months.

Also added a formal policy and completely abandoning EM branches.

Change-Id: Ibefde7ed15932964c366c605b7ca03bce4d66e5b
"
openstack%2Ftripleo-heat-templates~master~I5992edf43bf1995eebdf401c6bd886e77e528695,openstack/tripleo-heat-templates,master,bug/1884654,I5992edf43bf1995eebdf401c6bd886e77e528695,Always clear cached facts first,MERGED,2020-06-22 21:10:23.000000000,2020-07-06 14:13:24.000000000,2020-07-06 01:48:33.000000000,5,0,1,737379,1f9942fd755a168f8a9b75afa09e8af7027d61d4,61,9,6,1,14985,Alex Schultz,mwhahaha,"Always clear cached facts first

Because you could be running against different clouds or hosts, we need
to always clear the facts at the start of the deployment playbook to
ensure we aren't using incorrectly cached facts. That being said, the
caching mechanism should persist between the plays in the overall
deployment.

Change-Id: I5992edf43bf1995eebdf401c6bd886e77e528695
Closes-Bug: #1884654
"
openstack%2Fironic-specs~master~I7ef4e402530286b7c8eacee00e4b3d186b2a4dd5,openstack/ironic-specs,master,releasing-bears,I7ef4e402530286b7c8eacee00e4b3d186b2a4dd5,Update to the new release model,MERGED,2020-06-29 09:35:25.000000000,2020-07-06 14:05:29.000000000,2020-07-06 14:03:01.000000000,32,24,1,738408,a70e973e3dcf7f125bf6a9d95130e7566c9056d6,11,6,1,1,10239,Dmitry Tantsur,dtantsur,"Update to the new release model

Clarifies some aspects of the approved spec.

Change-Id: I7ef4e402530286b7c8eacee00e4b3d186b2a4dd5
"
openstack%2Fansible-role-collect-logs~master~Ie61626667eebd3628525da38e911c5ef42da2f69,openstack/ansible-role-collect-logs,master,,Ie61626667eebd3628525da38e911c5ef42da2f69,Run container collection in parallel,MERGED,2020-06-03 15:04:42.000000000,2020-07-06 13:55:15.000000000,2020-07-06 13:55:15.000000000,16,3,6,733165,f1a45198a067216672b0ecad6582ddff9a683523,40,11,5,2,22873,Martin Kopec,mkopec,"Run container collection in parallel

The task running the container collection is the longest taking
task. The patch makes this task running in parallel. The task
handles only containers therefore it's not in conflict with
any other collection task so running it in parallel is safe.

Change-Id: Ie61626667eebd3628525da38e911c5ef42da2f69
"
openstack%2Fironic-python-agent~stable%2Ftrain~I96eb2ff15b1e3d479394c86dd9c228d54c4fae11,openstack/ironic-python-agent,stable/train,test-train,I96eb2ff15b1e3d479394c86dd9c228d54c4fae11,DNM trying really slow prepare_image,ABANDONED,2020-06-26 12:23:30.000000000,2020-07-06 13:45:29.000000000,,3,0,0,738193,d1fdf9196fcd0a64d140278c4cfd7f59423230dd,4,2,1,2,10239,Dmitry Tantsur,dtantsur,"DNM trying really slow prepare_image

Change-Id: I96eb2ff15b1e3d479394c86dd9c228d54c4fae11
"
openstack%2Fironic-python-agent~master~I96eb2ff15b1e3d479394c86dd9c228d54c4fae11,openstack/ironic-python-agent,master,test,I96eb2ff15b1e3d479394c86dd9c228d54c4fae11,DNM trying really slow prepare_image,ABANDONED,2020-06-26 07:54:22.000000000,2020-07-06 13:45:26.000000000,,3,0,0,738156,e91b3b81d8b2bca75ff3ef2190d7ba3f3cfd0994,6,2,2,2,10239,Dmitry Tantsur,dtantsur,"DNM trying really slow prepare_image

Change-Id: I96eb2ff15b1e3d479394c86dd9c228d54c4fae11
"
openstack%2Fironic~master~Ibac5d07b988438719bf414f314cbc610562e7599,openstack/ironic,master,raid-max,Ibac5d07b988438719bf414f314cbc610562e7599,Software RAID: don't try to set local_gb to MAX,MERGED,2020-07-03 12:09:52.000000000,2020-07-06 13:44:01.000000000,2020-07-06 13:25:56.000000000,20,3,0,739216,cedc4a24167de205db25cc45fd37275f3e4956bd,22,7,2,3,10239,Dmitry Tantsur,dtantsur,"Software RAID: don't try to set local_gb to MAX

Change-Id: Ibac5d07b988438719bf414f314cbc610562e7599
"
openstack%2Fbifrost~master~I65579f45cf6a6083732b6f759cd1b5c9376dcbb4,openstack/bifrost,master,prep-renotes,I65579f45cf6a6083732b6f759cd1b5c9376dcbb4,Prepare release notes for release 8.2,MERGED,2020-07-02 16:14:13.000000000,2020-07-06 13:42:58.000000000,2020-07-06 13:39:39.000000000,2,2,0,739089,3d2ee6018f2830593ac734212c110a4f2c80df5d,7,2,1,2,23851,Riccardo Pittau,elfosardo,"Prepare release notes for release 8.2

Change-Id: I65579f45cf6a6083732b6f759cd1b5c9376dcbb4
"
openstack%2Foslo.messaging~stable%2Fstein~Ic3a9e2c873619670edfbf71022d593f3cb5f70f2,openstack/oslo.messaging,stable/stein,,Ic3a9e2c873619670edfbf71022d593f3cb5f70f2,Simplify tools/test-setup.sh,MERGED,2020-07-03 16:49:44.000000000,2020-07-06 13:36:41.000000000,2020-07-06 13:31:10.000000000,20,35,0,739265,c5d17905de32a29352a7ad31fd1c7dcde8887017,12,6,2,3,17685,Elod Illes,elod.illes,"Simplify tools/test-setup.sh

test-setup.sh is called after bindep is run in CI, and tox is not setup.

Simplify the script so that it only does what's needed - install
qdrouterd for Ubuntu from qpid/testing.

Install the other packages using bindep, add test to amqp1 profile.

Add amqp1 to bindep_profiles where needed for scenario tests, previously
test-setup.sh added it everywhere.

Conflicts:
    .zuul.yaml
    bindep.txt
Modified:
    tools/test-setup.sh

NOTE(elod.illes): conflicts are due to the following patches are
missing from Stein:
* .zuul.yaml: I1874f96f78cb403e6f3a56a49cb83df40d531f8d
  (dropping py35 testing)
* bindep.txt: I9fb56450346fca84bc1573fa5e9b6fe81c14e33a
  (messaging intermediaries update; the lack of this patch also
  requires the modification of test-setup.sh)

Change-Id: Ic3a9e2c873619670edfbf71022d593f3cb5f70f2
Related-Bug: #1885923
(cherry picked from commit 7e406c312a6514e7ae377edb52b9e02b5bf37a7d)
(cherry picked from commit dfcc4b0010d39d1f16be413bb1c3a4808718cd19)
(cherry picked from commit 88cf5aebef790ff40ab8ca7219d537ccfc54d12e)
"
openstack%2Fdiskimage-builder~master~I1780f186cf107242cacd6d3da7a5bc81a330b536,openstack/diskimage-builder,master,bug/1883224,I1780f186cf107242cacd6d3da7a5bc81a330b536,Stop bringing the test environment into the mocks,MERGED,2020-06-12 08:37:38.000000000,2020-07-06 13:31:07.000000000,2020-07-06 13:28:26.000000000,3,5,0,735309,8f57ed9b9ed3e4dcb348487b29c18d2772147e07,11,5,1,1,20634,Chris MacNaughton,Chris.MacNaughton,"Stop bringing the test environment into the mocks

Change-Id: I1780f186cf107242cacd6d3da7a5bc81a330b536
Closes-Bug: #1883224
"
openstack%2Fnova~master~I34b783542504524d2e4d98d3037c9086766e04b0,openstack/nova,master,bug/1872082,I34b783542504524d2e4d98d3037c9086766e04b0,libvirt: ensure disk_over_commit is not negative,MERGED,2020-04-10 13:54:43.000000000,2020-07-06 13:19:14.000000000,2020-07-06 13:14:36.000000000,29,1,9,719008,61084702f447d8d48f0aef161a9517d9504cd578,36,13,2,2,28332,Alexandre arents,aarents,"libvirt: ensure disk_over_commit is not negative

During update_available_resource periodic task, nova-compute reports
total amount of disk_over_committed in order to determine current hypervisor's
available_disk_least.

In case instance disk file have allocated size greater than virtual
disk size, resulting disk_over_committed is negative.
Because a negative value will inaccurately increase available_disk_least,
the change proposes to set it to 0 instead.

Closes-Bug: #1872082

Change-Id: I34b783542504524d2e4d98d3037c9086766e04b0
"
openstack%2Fopenstack-ansible-os_keystone~stable%2Fussuri~I79a32f696f592b6fb3fd2c01dc9f077597b1a7a9,openstack/openstack-ansible-os_keystone,stable/ussuri,idp-improvements-stable/ussuri,I79a32f696f592b6fb3fd2c01dc9f077597b1a7a9,Identity providers can be created with specified domain,ABANDONED,2020-06-26 13:14:40.000000000,2020-07-06 13:12:10.000000000,,3,0,0,738201,a2d162e165d45f7a0f0fd4d9747c1494d1f37e47,7,3,3,2,25023,Jonathan Rosser,jrosser,"Identity providers can be created with specified domain

IDPs are linked to a keystone domain. Currently when we provision a new IDP
it gets created within a new autogenerated domain. Provisioners can now
give a domain_id in an IDP entry within the trusted_idp_list and the IDP
will be created within that domain.

Add IDP display_name to defaults

Allows operator a name different to the one used in the backend
to display to the user in the horizon Identity Provider dropdown.

Change-Id: I79a32f696f592b6fb3fd2c01dc9f077597b1a7a9
"
openstack%2Fopenstack-ansible-os_keystone~stable%2Ftrain~I79a32f696f592b6fb3fd2c01dc9f077597b1a7a9,openstack/openstack-ansible-os_keystone,stable/train,idp-improvements-stable/train,I79a32f696f592b6fb3fd2c01dc9f077597b1a7a9,Identity providers can be created with specified domain,ABANDONED,2020-06-26 13:14:52.000000000,2020-07-06 13:12:05.000000000,,3,0,0,738202,97d17b821e9b60d8b72e4d32af1b2ec58aff149d,8,3,3,2,25023,Jonathan Rosser,jrosser,"Identity providers can be created with specified domain

IDPs are linked to a keystone domain. Currently when we provision a new IDP
it gets created within a new autogenerated domain. Provisioners can now
give a domain_id in an IDP entry within the trusted_idp_list and the IDP
will be created within that domain.

Depends-On: If761dd4faf63cf09d436d9e0a22f7e90cec9a105

Add IDP display_name to defaults

Allows operator a name different to the one used in the backend
to display to the user in the horizon Identity Provider dropdown.

Change-Id: I79a32f696f592b6fb3fd2c01dc9f077597b1a7a9
"
openstack%2Fkolla-ansible~stable%2Ftrain~I01d686368b11a105a8965cf987d23772ecbf97de,openstack/kolla-ansible,stable/train,,I01d686368b11a105a8965cf987d23772ecbf97de,Use the children group for site.yml,MERGED,2020-07-06 09:05:06.000000000,2020-07-06 13:08:39.000000000,2020-07-06 13:05:09.000000000,10,2,0,739434,767f0ad06e000a3b9bc3b1e6d82e322c0df239c3,8,4,1,1,14826,Mark Goddard,mgoddard,"Use the children group for site.yml

1. Use the children group for site.yml
2. Add some missing groups

Change-Id: I01d686368b11a105a8965cf987d23772ecbf97de
(cherry picked from commit dc56401b427446703f77ac744fc27a0b5954b03c)
"
openstack%2Fnova~stable%2Fussuri~I8e4e5afc773d53dee9c1c24951bb07a45ddc2f1a,openstack/nova,stable/ussuri,backport-hash-check,I8e4e5afc773d53dee9c1c24951bb07a45ddc2f1a,Fix cherry-pick check for merge patch,MERGED,2020-07-03 08:03:15.000000000,2020-07-06 13:08:20.000000000,2020-07-06 13:04:40.000000000,11,1,0,739176,02f213b831d8e1d4a1d8ebb18d1260571fe20b84,9,3,1,1,17685,Elod Illes,elod.illes,"Fix cherry-pick check for merge patch

Cherry-pick check script validates the proposed patch's commit message.
If a patch is not on top of the given branch then Zuul rebases it to
the top and the patch becomes a merge patch. In this case the script
validates the merge patch's commit message instead of the original
patch's commit message and fails.

This fix selects the parent of the patch if it is a merge patch.

Change-Id: I8e4e5afc773d53dee9c1c24951bb07a45ddc2f1a
(cherry picked from commit c7c48c6f52c9159767b60a4576ba37726156a5f7)
"
openstack%2Fkolla~stable%2Fussuri~Ia2306507d6ef97f01ff520dc4222bc48c1eb9843,openstack/kolla,stable/ussuri,openstack_exporter_bump-stable/ussuri,Ia2306507d6ef97f01ff520dc4222bc48c1eb9843,Bump prometheus-openstack-exporter version to 1.1.0,MERGED,2020-07-03 08:56:33.000000000,2020-07-06 13:07:46.000000000,2020-07-06 13:05:06.000000000,1,1,0,739183,be5da6d2c9b595cfc49e2c744d1464120f24e99e,12,4,1,1,26689,Justinas Balciunas,stacklablt,"Bump prometheus-openstack-exporter version to 1.1.0

Change-Id: Ia2306507d6ef97f01ff520dc4222bc48c1eb9843
Signed-off-by: Jorge Niedbalski <jnr@metaklass.org>
(cherry picked from commit 2841004652d74f27f270b4fba5a68e6c845e173c)
"
openstack%2Fkolla~master~I445134333b50439af20a3ca12757d519fa2624d4,openstack/kolla,master,,I445134333b50439af20a3ca12757d519fa2624d4,openvswitch-netcontrold: build always,MERGED,2020-07-06 10:08:58.000000000,2020-07-06 13:07:25.000000000,2020-07-06 13:05:12.000000000,0,10,0,739452,70ffba824177e967e5829852b534e05f50486745,10,7,1,2,24072,Marcin Juszkiewicz,hrw,"openvswitch-netcontrold: build always

This is infrastructure package where binary/source split does not make
sense.

Change-Id: I445134333b50439af20a3ca12757d519fa2624d4
"
openstack%2Fkolla-ansible~stable%2Fstein~I01d686368b11a105a8965cf987d23772ecbf97de,openstack/kolla-ansible,stable/stein,,I01d686368b11a105a8965cf987d23772ecbf97de,Use the children group for site.yml,MERGED,2020-07-06 09:05:16.000000000,2020-07-06 13:07:24.000000000,2020-07-06 13:05:07.000000000,10,2,0,739435,14660467463e4fce88cd8cbc4b10162b75d3cc40,8,4,1,1,14826,Mark Goddard,mgoddard,"Use the children group for site.yml

1. Use the children group for site.yml
2. Add some missing groups

Change-Id: I01d686368b11a105a8965cf987d23772ecbf97de
(cherry picked from commit dc56401b427446703f77ac744fc27a0b5954b03c)
"
openstack%2Fcharm-neutron-api-plugin-arista~master~Ie48bd59a451a53d5dcd0832c17013aa621a0dc8e,openstack/charm-neutron-api-plugin-arista,master,launchpad,Ie48bd59a451a53d5dcd0832c17013aa621a0dc8e,Add links to launchpad,MERGED,2020-07-06 11:48:07.000000000,2020-07-06 13:07:17.000000000,2020-07-06 13:07:17.000000000,12,0,0,739467,a8368987f9eeb4bea5a342771cbd624d9318c5a0,7,3,1,2,31289,Aurelien Lourot,lourot,"Add links to launchpad

Change-Id: Ie48bd59a451a53d5dcd0832c17013aa621a0dc8e
"
openstack%2Fkolla-ansible~stable%2Fussuri~I01d686368b11a105a8965cf987d23772ecbf97de,openstack/kolla-ansible,stable/ussuri,,I01d686368b11a105a8965cf987d23772ecbf97de,Use the children group for site.yml,MERGED,2020-07-06 09:04:59.000000000,2020-07-06 13:07:05.000000000,2020-07-06 13:05:10.000000000,10,2,0,739433,e0a1072b8235dc73ebd82241f2ca3cbf28733d8f,9,4,1,1,14826,Mark Goddard,mgoddard,"Use the children group for site.yml

1. Use the children group for site.yml
2. Add some missing groups

Change-Id: I01d686368b11a105a8965cf987d23772ecbf97de
(cherry picked from commit dc56401b427446703f77ac744fc27a0b5954b03c)
"
openstack%2Ftempest~master~I96d26ad3889f55d867fdea016953cce522a6fbdf,openstack/tempest,master,remove_deprecated,I96d26ad3889f55d867fdea016953cce522a6fbdf,Remove deprecated scenario image options,MERGED,2020-03-03 12:41:37.000000000,2020-07-06 13:06:34.000000000,2020-07-06 13:04:36.000000000,45,48,15,710996,02af6a44cccc01990fbaa697cea5881e097a1a98,48,8,9,4,22873,Martin Kopec,mkopec,"Remove deprecated scenario image options

Let's remove deprecated scenario image options which have been
deprecated for more than 4 years.

From now on CONF.scenario.img_file will need a full path for the image.
CONF.scenario.img_dir was deprecated and will be removed in the next
release. Till Tempest 25.0.0, old behavior is maintained and keep working
but starting Tempest 26.0.0, you need to specify the full path
in CONF.scenario.img_file config option.

Change-Id: I96d26ad3889f55d867fdea016953cce522a6fbdf
Related-Bug: #1393881
"
openstack%2Fironic-python-agent-builder~master~I3d8a1ab84cae3c7185eb4f9bfefe239fab49a012,openstack/ironic-python-agent-builder,master,build-focal-tinyipa,I3d8a1ab84cae3c7185eb4f9bfefe239fab49a012,Build tinyipa on focal,MERGED,2020-05-06 08:49:22.000000000,2020-07-06 13:05:57.000000000,2020-07-06 13:01:16.000000000,38,4,6,725799,82a1ba0c78d984e40d4ff659edb4f98501add108,53,5,11,6,23851,Riccardo Pittau,elfosardo,"Build tinyipa on focal

Use new ubuntu-focal nodeset to build tinyipa images.
This is needed to prepare to build tinyipa images based on
tinycore 11.x because we need the new kernel 5.x version to
be able to chroot.

Main changes:
- patching tce-load to conform to new squashfs options in the new
kernel
- installing python3-pip instead of python-pip

Story: 2007753
Task: 39943

Change-Id: I3d8a1ab84cae3c7185eb4f9bfefe239fab49a012
"
openstack%2Fpython-tripleoclient~master~I7651144cdb7142647b1c6303c4af4ba2ca2e2c58,openstack/python-tripleoclient,master,tripleo-common,I7651144cdb7142647b1c6303c4af4ba2ca2e2c58,Bump tripleo-common,MERGED,2020-05-27 13:01:18.000000000,2020-07-06 12:53:10.000000000,2020-05-28 20:35:09.000000000,2,2,0,731192,185d9f89542366bafb891cf725384e310b0137e0,18,6,2,2,3153,Emilien Macchi,emilienm,"Bump tripleo-common

For the Container Image Build command, we need new functionalities from
the BuildahBuilder that were released after 12.4.0 tag.

This patch makes sure tripleo-common >= 12.4.0 is pulled in the Python
jobs.

Change-Id: I7651144cdb7142647b1c6303c4af4ba2ca2e2c58
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~I4a5250b0e76747c9e02fe3b64c920b0886e71155,openstack/python-tripleoclient,stable/ussuri,images/new-ussuri,I4a5250b0e76747c9e02fe3b64c920b0886e71155,Combined cherry-pick for container image v2,ABANDONED,2020-06-18 15:47:59.000000000,2020-07-06 12:50:59.000000000,,909,1,0,736759,9da82a4dec83364164fee7b22df1dcf4bec8d010,10,3,3,6,7353,Kevin Carter,cloudnull,"Combined cherry-pick for container image v2

Add openstack tripleo container image build

This change adds a v2 entry point to allow us to build images within the
native tripleoclient. Images will leverage the new
`tripleo_container_image_build` role which will produce simplified
container files and and an image structure inline with the simple
container generation spec.

Add tripleo container image hotfix command

This change adds a CLI command to invoke hotfixes via the TripleO modify
image role. This CLI command will ensure a uniform experience for operators
when needing to apply a hotfixes to containers.

Depends-On: https://review.opendev.org/736751

Signed-off-by: Kevin Carter <kecarter@redhat.com>
(cherry picked from commit 4967f4f6eec7de8745a43fb1cd73e56ccc50a6a1)
(cherry picked from commit 1c09e83744d5c98437db7b756c6cda52d7225d5e)

Change-Id: I4a5250b0e76747c9e02fe3b64c920b0886e71155
"
openstack%2Fironic-python-agent~master~Ibe4d212d83bc27163af1fa9aa82881ade2d647db,openstack/ironic-python-agent,master,gate,Ibe4d212d83bc27163af1fa9aa82881ade2d647db,Switch the inspector job to tinyIPA until DIB is fixed,MERGED,2020-07-03 08:32:07.000000000,2020-07-06 12:48:33.000000000,2020-07-06 12:43:26.000000000,2,0,0,739178,a08029a44ea4872d1c7afd51311a15be4f6a257f,9,4,1,1,10239,Dmitry Tantsur,dtantsur,"Switch the inspector job to tinyIPA until DIB is fixed

Change-Id: Ibe4d212d83bc27163af1fa9aa82881ade2d647db
"
openstack%2Fopenstack-ansible-lxc_hosts~stable%2Fussuri~I758360886f77ffc20856bc00424a3c7027c564f3,openstack/openstack-ansible-lxc_hosts,stable/ussuri,,I758360886f77ffc20856bc00424a3c7027c564f3,Remove support for Ubuntu 16.04,MERGED,2020-06-30 13:05:01.000000000,2020-07-06 12:39:28.000000000,2020-07-06 12:37:40.000000000,0,115,0,738608,16ea6704f788772851d74cad6f65631d88cac2e6,10,3,1,2,25023,Jonathan Rosser,jrosser,"Remove support for Ubuntu 16.04

We no longer support Xenial for openstack-ansible since Rocky.

Change-Id: I758360886f77ffc20856bc00424a3c7027c564f3
(cherry picked from commit ac2789cebd75d741f099b3328c42278f81b4a7df)
"
openstack%2Fironic~master~I62b2d32c545b6ad6487aead98c8fab212ed5e83f,openstack/ironic,master,trait-errormsg,I62b2d32c545b6ad6487aead98c8fab212ed5e83f,Fix the error message when reached max number of traits,MERGED,2020-07-04 07:41:56.000000000,2020-07-06 12:37:48.000000000,2020-07-06 09:25:34.000000000,6,6,0,739299,d90459a87fce4a84d34bdf24604de3edfb23dda7,14,6,1,1,24828,Kaifeng Wang,wangkf,"Fix the error message when reached max number of traits

The error message is not properly tranlated as desired, raw string
is returned when reached maximum number of traits.

Change-Id: I62b2d32c545b6ad6487aead98c8fab212ed5e83f
"
openstack%2Fironic~master~Iad6cb02ee4f17b7c5987719b3a0603df210c840d,openstack/ironic,master,deleting,Iad6cb02ee4f17b7c5987719b3a0603df210c840d,Clean up nodes in DELETING on conductor restart,MERGED,2020-07-03 09:42:05.000000000,2020-07-06 12:36:19.000000000,2020-07-06 11:30:27.000000000,9,4,0,739192,4f6374a209dcf96ecf7d55da4999b045ae4061ef,16,6,1,5,10239,Dmitry Tantsur,dtantsur,"Clean up nodes in DELETING on conductor restart

Change-Id: Iad6cb02ee4f17b7c5987719b3a0603df210c840d
"
openstack%2Fkolla-ansible~master~Ia22f286e85be90983ca79291b3a54596bba30d6c,openstack/kolla-ansible,master,feat/neutron-trunk-service-plugin,Ia22f286e85be90983ca79291b3a54596bba30d6c,"Add support for the Neutron service plugin ""trunk""",MERGED,2020-06-27 15:01:03.000000000,2020-07-06 12:36:06.000000000,2020-07-06 12:32:51.000000000,22,0,0,738315,3ff15a8ee7113b06c0393815a2327f99ec3e540b,13,3,2,5,167,Christian Berendt,berendt,"Add support for the Neutron service plugin ""trunk""

Change-Id: Ia22f286e85be90983ca79291b3a54596bba30d6c
"
openstack%2Fmagnum-tempest-plugin~master~Idb6534adcf4410169b37f83a4b0b15478370bd9c,openstack/magnum-tempest-plugin,master,,Idb6534adcf4410169b37f83a4b0b15478370bd9c,Set the default ussuri heat_container_agent_tag to ussuri-stable-1,ABANDONED,2020-06-30 21:05:08.000000000,2020-07-06 12:35:07.000000000,,2,1,0,738698,e8219a7bdbe55b076384ca68fcae4ed5ca185d00,5,3,1,1,31746,Oleksandr Kozachenko,okozachenko,"Set the default ussuri heat_container_agent_tag to ussuri-stable-1

Because the current one is ussuri-dev and it is not working

Change-Id: Idb6534adcf4410169b37f83a4b0b15478370bd9c
"
openstack%2Fnova~stable%2Fstein~I764481966c96a67d993da6e902dc9fc3ad29ee36,openstack/nova,stable/stein,bug/1550919,I764481966c96a67d993da6e902dc9fc3ad29ee36,libvirt: Don't delete disks on shared storage during evacuate,MERGED,2020-06-02 14:43:46.000000000,2020-07-06 12:21:58.000000000,2020-07-06 12:19:42.000000000,195,95,3,732696,a7d8aa699793e1d60ece4e03920e6041337f9a43,83,12,3,5,10135,Lee Yarwood,lyarwood,"libvirt: Don't delete disks on shared storage during evacuate

When evacuating an instance between compute hosts on shared storage,
during the rebuild operation we call spawn() on the destination
compute. spawn() currently assumes that it should cleanup all
resources on failure, which results in user data being deleted in the
evacuate case.

This change modifies spawn in the libvirt driver such that it only
cleans up resources it created.

Conflicts:
    nova/tests/functional/libvirt/base.py
    nova/tests/functional/regressions/test_bug_1595962.py
    nova/virt/libvirt/driver.py

Changes:
    nova/tests/functional/libvirt/test_pci_sriov_servers.py

NOTE(lyarwood): Conflicts on stable/stein due to the following:

- nova/tests/functional/libvirt/base.py
  Due to I5895865751e8e1fb08b3515bc9f8119cfcb9f35e not being present
  on stable/stein.

- nova/tests/functional/regressions/test_bug_1595962.py
  Due to I8e5a122cc547222249973cf595d90c2d8d5658d4 not being present
  on stable/stein.

- nova/virt/libvirt/driver.py
  Due to I725deb0312c930087c9e60115abe68b4e06e6804 and
  I6929c588dd2e0e805f2e30b2e30d29967469d756 not being present on
  stable/stein.

NOTE(lyarwood): Changes on stable/stein due to
I5895865751e8e1fb08b3515bc9f8119cfcb9f35e (""libvirt: Mock libvirt'y
things in setUp"") not being present on stable/stein.

Co-Authored-By: Lee Yarwood <lyarwood@redhat.com>
Closes-Bug: #1550919
Change-Id: I764481966c96a67d993da6e902dc9fc3ad29ee36
(cherry picked from commit 497360b0ea970f1e68912be8229ef8c3f5454e9e)
(cherry picked from commit 8b48ca672d9c0eb108c71b7f9f3f089d9ecf688a)
(cherry picked from commit 1a320f2a0e0918de6afcce5cf23b7de178ec3a49)
"
openstack%2Ftripleo-ci~master~I491dba2fe6b296a5396668fe673f14f6492f0a5a,openstack/tripleo-ci,master,py3-c7,I491dba2fe6b296a5396668fe673f14f6492f0a5a,DNM: Test py3 on c7 (scl),ABANDONED,2020-06-02 21:38:30.000000000,2020-07-06 12:09:47.000000000,,47,107,0,733006,5956e81abcfcae4e312cb88d43fdaef4a4c41684,27,2,12,4,8175,Rafael Folco,rfolco,"DNM: Test py3 on c7 (scl)

Change-Id: I491dba2fe6b296a5396668fe673f14f6492f0a5a
"
openstack%2Ftripleo-ci~master~I33fa9265ec7aa25e0d25744d781bd62d81c4e255,openstack/tripleo-ci,master,cirros-0.5.1,I33fa9265ec7aa25e0d25744d781bd62d81c4e255,Remove cirros overrides from ovb jobs,ABANDONED,2020-06-05 14:46:28.000000000,2020-07-06 12:09:15.000000000,,19,9,0,733862,28ef99fc973fb7d42bb2d6889f2e9dd30367c947,11,6,2,3,8175,Rafael Folco,rfolco,"Remove cirros overrides from ovb jobs

New releases master/victoria and beyond should run cirros 0.5.1
https://review.opendev.org/#/c/733676/

Older releases will keep using cirros 0.4.0.

Change-Id: I33fa9265ec7aa25e0d25744d781bd62d81c4e255
"
openstack%2Fironic-specs~master~Ia0d2a168664bb9fadb79261492576ee2fcc56d1d,openstack/ironic-specs,master,api-evolution,Ia0d2a168664bb9fadb79261492576ee2fcc56d1d,API Evolution - Implement Tasks Resource,ABANDONED,2016-10-04 17:45:27.000000000,2020-07-06 11:56:49.000000000,,448,0,116,382017,e9487561e4785f7b4f701de5d3f4d4f2065ffa4c,35,16,5,2,2889,Aeva Black,tenbrae,"API Evolution - Implement Tasks Resource

Many operations in Ironic involve long-running asynchronous operations;
such operations typically return an HTTP 202 status when Ironic accepts
the request to begin the task. However, it is difficult (or rather,
impossible in a multi-user environment) for any client to accurately
track the progress of an accepted task, because no ""task identifier"" is
returned in the response.

This specification describes the implementation of ""task"" identifiers on
some API responses, allowing clients to track the status of the unique
asynchronous action they requested.

This patch is part of a series of patches which propose several discrete
units of work, broken out into separate specifications for tracking.
These have grown out of the discussions around whether we should have a
'v2' API, and what current pain-points we all experience with the
current API. It is my belief, after investigating all of the collected
concerns, that we can implement many of the desired changes
incrementally and without a full 'v2' rewrite.

Related-bug: #1630333
Related-bug: #1623556
Co-Authored-By: Grzegorz Grasza <grzegorz.grasza@intel.com>
Change-Id: Ia0d2a168664bb9fadb79261492576ee2fcc56d1d
"
openstack%2Fironic-specs~master~If476bab478ff58b30013aeca505e90e6f722f155,openstack/ironic-specs,master,bug/1652957,If476bab478ff58b30013aeca505e90e6f722f155,Owner-aware baremetal nodes,ABANDONED,2016-12-28 17:05:09.000000000,2020-07-06 11:54:50.000000000,,542,0,128,415512,8f1960f3f50631338a369081f503c42df2000a4c,78,17,14,2,12356,Vladyslav Drok,vdrok,"Owner-aware baremetal nodes

Related-Bug: #1652957
Change-Id: If476bab478ff58b30013aeca505e90e6f722f155
"
openstack%2Fironic~master~I01797700b953de8f936416b16819ca9a7a2e48fd,openstack/ironic,master,oob_cleaning,I01797700b953de8f936416b16819ca9a7a2e48fd,Support to perform only out-of-band automated cleaning,ABANDONED,2016-10-18 10:42:50.000000000,2020-07-06 11:50:27.000000000,,354,35,7,387921,80dc57ad34e4645ec8b6f1f139d5f4c68df5dcbe,31,8,4,7,11076,Shivanand Tendulker,stendulker,"Support to perform only out-of-band automated cleaning

Ironic performs automated cleaning operation in in-band way.
There are couple of clean steps in vendor drivers that can
be performed out-of-band. There is no mechanism available to
disable in-band automated cleaning in Ironic if one wishes to
execute only out-of-band clean steps.

This commit adds new boolean parameter 'oob_automated_cleaning'
that can be set in the Ironic config file to restrict cleaning
operation to out-of-band clean steps.

Closes-Bug: #1634345

Change-Id: I01797700b953de8f936416b16819ca9a7a2e48fd
"
openstack%2Fansible-role-collect-logs~master~I705df1caae5ecec8eddc04a4af783cf4d0403e0d,openstack/ansible-role-collect-logs,master,,I705df1caae5ecec8eddc04a4af783cf4d0403e0d,[Readme] Update infrared plugin installation,MERGED,2020-06-11 14:37:35.000000000,2020-07-06 11:50:14.000000000,2020-07-06 11:50:14.000000000,1,7,0,735156,d087a23fae11fc24c13fd4e3f94aa3bb65bce5e1,7,3,1,1,22873,Martin Kopec,mkopec,"[Readme] Update infrared plugin installation

Symlinking the role is no longer required in infrared due to
the following review:
https://review.gerrithub.io/c/redhat-openstack/infrared/+/486423

Change-Id: I705df1caae5ecec8eddc04a4af783cf4d0403e0d
"
openstack%2Fironic~master~I5a60aa820b60fd29d8ebbd851f3fd215458bab96,openstack/ironic,master,no-mock-yes-mock,I5a60aa820b60fd29d8ebbd851f3fd215458bab96,Use unittest mock instead of 3rd party mock in test_raid,MERGED,2020-07-06 07:31:14.000000000,2020-07-06 11:47:13.000000000,2020-07-06 11:30:30.000000000,2,1,0,739418,0841943c92b5ddebdbb055934e51c244abfdbc10,11,4,1,1,23851,Riccardo Pittau,elfosardo,"Use unittest mock instead of 3rd party mock in test_raid

We should use mock from unittest instead of 3rd party mock.
Since we don't have mock in requirements anymore this could cause
issues like in [1].

[1] https://zuul.opendev.org/t/openstack/build/ff068dc014be42aabde51f95c8c9828e

Change-Id: I5a60aa820b60fd29d8ebbd851f3fd215458bab96
"
openstack%2Fcharm-ceilometer~master~I68bb146399fff4a93cb82701111d73b07a4c1a0b,openstack/charm-ceilometer,master,bug/1880255,I68bb146399fff4a93cb82701111d73b07a4c1a0b,Ensure agent restart on event_publisher.yaml change,MERGED,2020-07-01 16:48:15.000000000,2020-07-06 11:46:13.000000000,2020-07-06 11:46:13.000000000,18,4,0,738891,2fad29a5ae8f3a326aba302e94152a36fc66b410,22,5,3,2,6737,Edward Hope-Morley,hopem,"Ensure agent restart on event_publisher.yaml change

Change-Id: I68bb146399fff4a93cb82701111d73b07a4c1a0b
Closes-Bug: #1880255
"
openstack%2Fvalidations-libs~master~I1cb6e7af5a072d40095babe553b218e7d2e2bd8d,openstack/validations-libs,master,,I1cb6e7af5a072d40095babe553b218e7d2e2bd8d,Delete unused TripleO Jobs,ABANDONED,2020-07-06 07:44:14.000000000,2020-07-06 11:45:33.000000000,,0,17,0,739422,f3932d2141a6afd85f388ca37c0b46cd163be076,3,1,1,1,11491,Gael Chamoulaud,gchamoul,"Delete unused TripleO Jobs

This patch deletes all the useless TripleO CI jobs which are not really
testing the validations framework. Those will be replaced by the
functional CI tests (WIP) ASAP.

Change-Id: I1cb6e7af5a072d40095babe553b218e7d2e2bd8d
Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
"
openstack%2Fironic~master~I6b73138f0ac2e4aaf6c329520fb8555d79d1a143,openstack/ironic,master,generic_cleaning,I6b73138f0ac2e4aaf6c329520fb8555d79d1a143,[WIP]Generic way to configure clean step priorites in Automated cleaning,ABANDONED,2017-03-07 10:57:52.000000000,2020-07-06 11:40:33.000000000,,251,54,0,442383,a0a6b89f950397f9011fdb090ae0b5d8750455eb,10,5,1,7,15074,Aparna,Aparna,"[WIP]Generic way to configure clean step priorites in Automated cleaning

This commit adds generic way of configuring the clean step
priorities instead of adding changes in Ironic for each clean step
being introduced.

Change-Id: I6b73138f0ac2e4aaf6c329520fb8555d79d1a143
Closes-bug: #1618014
spec: https://review.openstack.org/362615
"
openstack%2Fopenstack-ansible-tests~stable%2Fstein~Iab1593cf46bcf80022bb353ed0399baadf49b165,openstack/openstack-ansible-tests,stable/stein,,Iab1593cf46bcf80022bb353ed0399baadf49b165,Increase timout for linters job to 30mins,MERGED,2020-07-05 06:23:42.000000000,2020-07-06 11:39:45.000000000,2020-07-06 11:34:35.000000000,1,1,0,739339,e1d62fd29131c63c024691eb5d1d3bf8860e829e,8,3,1,1,25023,Jonathan Rosser,jrosser,"Increase timout for linters job to 30mins

This job is given a longer time to run for two reasons, longer is
spent in the job setup becasue of the increased number of repos
in required_projects and more time is required to push the job
logs into swift storage than the previous method.

Jobs are currently failing because these startup/log collect phases
are taking additional time rather than there being a lint issue, so
this patch extends the job time to account for that.

Change-Id: Iab1593cf46bcf80022bb353ed0399baadf49b165
(cherry picked from commit 961685ce27f762081ee47f6d96f229185e12d1d7)
"
openstack%2Fdiskimage-builder~master~I65807751b3764e86ba5adeb47552305ef2ea299b,openstack/diskimage-builder,master,centos-8,I65807751b3764e86ba5adeb47552305ef2ea299b,Install yum and yum-utils on Red Hat family hosts,MERGED,2020-06-11 13:41:10.000000000,2020-07-06 11:31:07.000000000,2020-07-06 11:27:12.000000000,2,0,0,735136,31dc53da67e239e1157602e763a579631b3611b1,19,6,3,1,6469,Carlos Gonçalves,cgoncalves,"Install yum and yum-utils on Red Hat family hosts

Elements like yum and yum-minimal depend on the yum and yumdownloader
CLIs on the DIB host. We have been assuming these tools are always
installed on Red Hat family distributions but that is no longer the case
starting from RHEL 8 and CentOS 8 and Fedora for a while -- these
systems moved on to DNF and DNF does not have a hard requirement on yum.

We noticed these two tools were missing while building an Octavia
amphora image on a CentOS 8 controller node in CI:

[...] 08-yum-chroot:_install_pkg_manager:223  : sudo -E yum -y [...]
[...] sudo: yum: command not found

Change-Id: I65807751b3764e86ba5adeb47552305ef2ea299b
"
openstack%2Fironic~master~I5d0ddbb7f9829e5a29c96a6f700741c86836db26,openstack/ironic,master,clean_dhcp_opts_master,I5d0ddbb7f9829e5a29c96a6f700741c86836db26,Clean up DHCP opts when the tftp links are cleaned up,ABANDONED,2019-04-22 15:20:37.000000000,2020-07-06 11:08:54.000000000,,11,0,6,654480,2c4ee707119d4209e229c5b4503e4d11d48b282c,25,10,3,1,2874,yong sheng gong,gongysh,"Clean up DHCP opts when the tftp links are cleaned up

Change-Id: I5d0ddbb7f9829e5a29c96a6f700741c86836db26
Story: #2005497
Task: #30598
"
openstack%2Fironic-inspector~master~I14e1851b958dac1ff48389b7d029dd942e8ee70e,openstack/ironic-inspector,master,2003601,I14e1851b958dac1ff48389b7d029dd942e8ee70e,Use ListOpt for processing hooks,ABANDONED,2018-09-18 06:55:44.000000000,2020-07-06 11:06:54.000000000,,8,11,2,603298,be21b84ce4e8308a13ef1297daa343f7ac5111ab,11,3,3,2,9610,Tao Li,Litao,"Use ListOpt for processing hooks

The configuration option processing_hooks is
using StrOpt, oslo.config provides ListOpt so we can use that to get a
list type instead of str, this simplifies our code implementation.

Change-Id: I14e1851b958dac1ff48389b7d029dd942e8ee70e
Story: #2003601
Task: #24919
"
openstack%2Fkeystonemiddleware~master~I0ce8b6d8cd408c7fac8107972e7be70839e337fb,openstack/keystonemiddleware,master,drop-identity-admin-patch9,I0ce8b6d8cd408c7fac8107972e7be70839e337fb,Change the default Identity endpoint to internal,MERGED,2019-06-03 11:11:16.000000000,2020-07-06 10:47:18.000000000,2020-07-06 10:43:56.000000000,16,5,0,662734,8f9a596fffbb262481b32191a98b9169bc1618b1,23,5,3,3,13252,Dr. Jens Harbott,jrosenboom,"Change the default Identity endpoint to internal

In [0] the ``interface``option was added in order to allow the Identity
endpoint that is being used when validating tokens to be
configured by the deployer. Change the default to using the internal
endpoint, as that should be what most deployments will end up using.

[0] https://review.opendev.org/651790

Depends-On: https://review.opendev.org/651492
Closes-Bug: 1830002
Change-Id: I0ce8b6d8cd408c7fac8107972e7be70839e337fb
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~I994353a6d4aa6b72e9fecc5f61bf5314a5a94963,openstack/python-tripleoclient,stable/ussuri,,I994353a6d4aa6b72e9fecc5f61bf5314a5a94963,Don't use stack name in default config_download_dir,MERGED,2020-07-03 11:49:31.000000000,2020-07-06 10:30:32.000000000,2020-07-06 10:24:54.000000000,4,5,0,739215,8211384480195087af1a75189de88a755a77a09c,12,4,1,2,8833,Rabi Mishra,rabi,"Don't use stack name in default config_download_dir

We create a subfolder with the plan/stack name under the
config_download_dir to store the config-downloaded artifacts.
Fix 'overcloud export' as users are not expected to specify
the path with the plan/stack name.

Change-Id: I994353a6d4aa6b72e9fecc5f61bf5314a5a94963
Related-Bug: #1884246
(cherry picked from commit e4d9bb17be805ae7bbb844f65c9f28d4d22b44e1)
"
openstack%2Fvalidations-libs~master~If5e678a7fbaba2790d31887c411fea0ed6d2b622,openstack/validations-libs,master,726108,If5e678a7fbaba2790d31887c411fea0ed6d2b622,Change zuul config for functional CI execution,MERGED,2020-05-07 12:36:51.000000000,2020-07-06 10:24:55.000000000,2020-07-06 10:24:55.000000000,243,37,4,726108,c317b78514522ae6e4371e75966ef18159decf30,96,5,43,6,16515,mbu,matbu,"Change zuul config for functional CI execution

Depends-On: https://review.opendev.org/#/c/737997/

Change-Id: If5e678a7fbaba2790d31887c411fea0ed6d2b622
"
openstack%2Fnova~master~I8dbc579e0037969aab4f2bb500fccfbde4190726,openstack/nova,master,bug/1874032,I8dbc579e0037969aab4f2bb500fccfbde4190726,Snapshot: offload glance upload in a native thread,MERGED,2020-06-10 09:53:50.000000000,2020-07-06 10:24:11.000000000,2020-07-06 10:19:16.000000000,32,2,20,734776,be9b7358473ca5276cff3c6491f88cd512d118b8,134,19,8,5,28332,Alexandre arents,aarents,"Snapshot: offload glance upload in a native thread

Execute glance upload in a native thread as it may block the current
coroutine until it completes.

Despite the fact we use eventlet monkey_patching [1] to achieve cooperative
yielding for network IO, file IO on busy file system may still get
nova-compute hanging.

Stick those IO in a native thread using eventlet tpool.execute() [2]
avoid this issue.

[1] https://eventlet.net/doc/patching.html
[2] https://eventlet.net/doc/threading.html

Closes-Bug: #1874032
Change-Id: I8dbc579e0037969aab4f2bb500fccfbde4190726
"
openstack%2Fvalidations-common~master~I8c6727fda11d09329a2c356f593d087ec3f71259,openstack/validations-common,master,revert_ooo_jobs_back_commit,I8c6727fda11d09329a2c356f593d087ec3f71259,"Revert ""Add TripleO Jobs back""",MERGED,2020-07-06 07:33:32.000000000,2020-07-06 10:16:19.000000000,2020-07-06 10:16:19.000000000,2,20,0,739419,b49cc0c9d1dc94e459f77f68381a598a0b9fbdf9,7,3,1,1,11491,Gael Chamoulaud,gchamoul,"Revert ""Add TripleO Jobs back""

This reverts commit c9f1eb8001ec487ff0e8a9b09c8074764f2fb870.

Change-Id: I8c6727fda11d09329a2c356f593d087ec3f71259
"
openstack%2Fvalidations-libs~stable%2Fussuri~Ifff9bdb327b38db07df6cac328cbd387f2bc46f1,openstack/validations-libs,stable/ussuri,playbook/logic-stable/ussuri,Ifff9bdb327b38db07df6cac328cbd387f2bc46f1,Remove playbook param from run_validation,MERGED,2020-07-01 12:41:41.000000000,2020-07-06 10:16:18.000000000,2020-07-06 10:16:18.000000000,6,14,0,738840,e0bf69783f4b8bc68404843852aa98e059309948,7,3,1,2,16515,mbu,matbu,"Remove playbook param from run_validation

Removing playbook parameters from run_validation function
since its overlap validation_name functionality and make it
confusing.

Change-Id: Ifff9bdb327b38db07df6cac328cbd387f2bc46f1
(cherry picked from commit de03576eebc64863434c78993f1b96f27b855c02)
"
openstack%2Fdevstack~master~I2cceb1115ab2d971e611c385b8a14f5fe398feb0,openstack/devstack,master,ovn-devstack,I2cceb1115ab2d971e611c385b8a14f5fe398feb0,DO NOT REVIEW: Test OpenSuse fix,ABANDONED,2020-07-02 10:36:08.000000000,2020-07-06 10:03:04.000000000,,3,0,0,739013,4c142410dafd65640edbcbe01af60ebfc83e356f,3,2,1,1,6773,Lucas Alvares Gomes,lucasagomes,"DO NOT REVIEW: Test OpenSuse fix

Change-Id: I2cceb1115ab2d971e611c385b8a14f5fe398feb0
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
"
openstack%2Fneutron~master~I9b6ff8aaee6516d1802b99e99daaf945477c31d3,openstack/neutron,master,gate-ignore-ovn,I9b6ff8aaee6516d1802b99e99daaf945477c31d3,DO NOT REVIEW: OVS jobs to ignore OVN only related changes,ABANDONED,2020-04-03 09:42:27.000000000,2020-07-06 10:02:50.000000000,,29,8,0,717270,3cb4e25bad302e36a24e85a269586ae5ad97cc46,11,3,4,1,6773,Lucas Alvares Gomes,lucasagomes,"DO NOT REVIEW: OVS jobs to ignore OVN only related changes

Test

Change-Id: I9b6ff8aaee6516d1802b99e99daaf945477c31d3
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
"
openstack%2Ftripleo-quickstart-extras~master~I16ffef72673d5fdea46b2cb004757546e665c455,openstack/tripleo-quickstart-extras,master,lp/1881624,I16ffef72673d5fdea46b2cb004757546e665c455,add ipv6 hotplug tests to skip list,MERGED,2020-06-01 17:06:51.000000000,2020-07-06 09:46:25.000000000,2020-06-06 05:13:12.000000000,3,0,0,732420,393cac0970f80573b59cad98c77bf392761873e8,31,4,1,1,8175,Rafael Folco,rfolco,"add ipv6 hotplug tests to skip list

full-tempest-scenario-master is conistently failing on
test_ipv6_hotplug:

neutron_tempest_plugin.scenario.test_ipv6.IPv6Test

Change-Id: I16ffef72673d5fdea46b2cb004757546e665c455
Related-Bug: #1881624
"
openstack%2Fdevstack-gate~master~I4459191aa3ea210c3c9809757a3844648a619365,openstack/devstack-gate,master,,I4459191aa3ea210c3c9809757a3844648a619365,DNM: remove g-api from subnode,ABANDONED,2020-07-01 10:01:18.000000000,2020-07-06 09:24:08.000000000,,2,2,0,738780,f28db3f6fed5575af2856e9d018462cefefaeb94,5,1,2,2,17685,Elod Illes,elod.illes,"DNM: remove g-api from subnode

devstack-multinode jobs fail in Queens and Pike at subnode, when g-api
service starts, with the following error:

devstack@g-api.service: Failed at step EXEC spawning /usr/local/bin/uwsgi: No such file or directory

From Rocky the test-matrix is replaced in devstack jobs (see details in
patch Ib1debefd541b933dbfc54d484c263cc0ed60423d), and g-api is not used
anymore on subnode.

Change-Id: I4459191aa3ea210c3c9809757a3844648a619365
"
openstack%2Fdevstack~stable%2Fqueens~I76726aee4b6be98123e55fea58cd6e816f3ceb24,openstack/devstack,stable/queens,,I76726aee4b6be98123e55fea58cd6e816f3ceb24,Add ensure-pip to pre.yaml,ABANDONED,2020-06-30 12:49:06.000000000,2020-07-06 09:21:40.000000000,,1,0,0,738598,9371ccccb64fd32d31549be32f17945955635a1b,3,1,1,1,17685,Elod Illes,elod.illes,"Add ensure-pip to pre.yaml

After running Tempest, it tries to install stackviz but that fails
due to old version of pip (version 8), which cannot handle correctly
the opendev mirror and fails to fetch some packages. This bug
disappears by pip version 9.

Tempest has ensure-pip before the failing role, but that's too late
as pip is already installed and won't be upgraded.

If ensure-pip is added in devstack's pre.yaml, then it will install
the correct version of pip from the beginning.

Change-Id: I76726aee4b6be98123e55fea58cd6e816f3ceb24
(cherry picked from commit 6d3f95c62bfce4b66c4624b6fd62ff165745dfe4)
"
openstack%2Fopenstack-manuals~master~I952767f2f3f09085e6d5ad4e40f94de2fce800b7,openstack/openstack-manuals,master,kolla-ussuri,I952767f2f3f09085e6d5ad4e40f94de2fce800b7,Add Kolla Ussuri guides,MERGED,2020-07-03 11:09:24.000000000,2020-07-06 09:13:33.000000000,2020-07-03 12:59:33.000000000,10,10,0,739206,b77fde01cb9178c0533e5b90eec4ec7bf66351ab,11,5,1,1,30491,Radosław Piliszek,yoctozepto,"Add Kolla Ussuri guides

Change-Id: I952767f2f3f09085e6d5ad4e40f94de2fce800b7
"
openstack%2Fkolla-ansible~master~I01d686368b11a105a8965cf987d23772ecbf97de,openstack/kolla-ansible,master,,I01d686368b11a105a8965cf987d23772ecbf97de,Use the children group for site.yml,MERGED,2020-07-05 13:59:17.000000000,2020-07-06 09:05:16.000000000,2020-07-05 17:54:16.000000000,10,2,0,739364,dc56401b427446703f77ac744fc27a0b5954b03c,15,3,2,1,30356,gugug,gujin,"Use the children group for site.yml

1. Use the children group for site.yml
2. Add some missing groups

Change-Id: I01d686368b11a105a8965cf987d23772ecbf97de
"
openstack%2Freleases~master~I9bdf51ff3ff6f8c2f9f30e73db80d0a6bef9e86a,openstack/releases,master,sushy-tools,I9bdf51ff3ff6f8c2f9f30e73db80d0a6bef9e86a,Release sushy-tools 0.11.0,MERGED,2020-07-03 08:39:03.000000000,2020-07-06 08:56:35.000000000,2020-07-06 08:56:35.000000000,4,0,0,739181,70174c946b2acec0e8b1659b215b5cbfd675b198,8,3,1,1,10239,Dmitry Tantsur,dtantsur,"Release sushy-tools 0.11.0

Change-Id: I9bdf51ff3ff6f8c2f9f30e73db80d0a6bef9e86a
"
openstack%2Fkuryr-kubernetes~stable%2Frocky~I2dbe7a422926020dc91a411597cea221d7a7805b,openstack/kuryr-kubernetes,stable/rocky,,I2dbe7a422926020dc91a411597cea221d7a7805b,Fix CNI image build,MERGED,2020-07-02 08:38:24.000000000,2020-07-06 08:27:03.000000000,2020-07-06 08:27:03.000000000,2,1,0,738986,ce4d2176e4a8457098ec2434a1a38be6ed439f0a,13,3,1,1,27032,Maysa de Macedo Souza,maysa,"Fix CNI image build

Dependencies needed by openvswitch are not present on
the rdo-release-train-1 rpm. We need to update it
to make sure they're present.

Change-Id: I2dbe7a422926020dc91a411597cea221d7a7805b
"
openstack%2Fpython-tripleoclient~master~I9c245dbc258c9714bb5a581d6d4d23b42cf53198,openstack/python-tripleoclient,master,,I9c245dbc258c9714bb5a581d6d4d23b42cf53198,Add CLI options for introspection command,MERGED,2020-06-23 15:59:04.000000000,2020-07-06 08:24:07.000000000,2020-07-02 15:33:10.000000000,65,10,2,737568,c9d057651e32ee81fd8e315e35dfe17d4d1e95ac,37,6,4,5,10969,Shnaidman Sagi (Sergey),sergsh,"Add CLI options for introspection command

--node-timeout - Maximum timeout for node introspection
--max-retries - Maximum introspection retries
--retry-timeout - Maximum timeout between introspection retries

Change-Id: I9c245dbc258c9714bb5a581d6d4d23b42cf53198
"
openstack%2Fironic-lib~master~Ib108eea49b17986412f725f64d2320e5487e255e,openstack/ironic-lib,master,ban-modules,Ib108eea49b17986412f725f64d2320e5487e255e,[WIP] Use flake8-tidy-imports to ban specific modules,NEW,2020-07-06 08:08:46.000000000,2020-07-06 08:22:41.000000000,,6,1,1,739425,f624ea0c80d7a2748eb7fc0ef57063a66eadcec3,2,1,1,3,23851,Riccardo Pittau,elfosardo,"[WIP] Use flake8-tidy-imports to ban specific modules

*** This is a demo ***

The flake8-tidy-imports[1] extension helps preventing usage of
unwanted modules, such as 3rd party mock, and provide a good level
of customization.

[1] https://pypi.org/project/flake8-tidy-imports/

Change-Id: Ib108eea49b17986412f725f64d2320e5487e255e
"
openstack%2Ftripleo-ansible~master~Iff582edfe8ebbf9f30e5cdc13402986fea1c39aa,openstack/tripleo-ansible,master,retry_timeout,Iff582edfe8ebbf9f30e5cdc13402986fea1c39aa,Set retry timeout for nodes introspection,MERGED,2020-06-23 16:13:53.000000000,2020-07-06 08:22:02.000000000,2020-06-24 05:42:42.000000000,22,4,0,737574,a368a641efc582c5f544e2e16238a6e12e2f9c78,15,5,3,2,10969,Shnaidman Sagi (Sergey),sergsh,"Set retry timeout for nodes introspection

When restarting node introspection wait a configured amount of time
so that node can be unlocked.
Change-Id: Iff582edfe8ebbf9f30e5cdc13402986fea1c39aa
"
openstack%2Ftripleo-heat-templates~master~Ic3853302e8c1e0768d00e99c3069de7b2196ad84,openstack/tripleo-heat-templates,master,,Ic3853302e8c1e0768d00e99c3069de7b2196ad84,Gather facts at most once for each deployment run,ABANDONED,2020-06-25 15:49:18.000000000,2020-07-06 07:58:54.000000000,,40,23,0,738053,6e65d4c0d6d523961132d2d4d9eb86e481022ba8,21,6,7,3,6926,Bogdan Dobrelya,bogdando,"Gather facts at most once for each deployment run

Make gather_facts auto determined based on the availability of a fact
in hostvars used as an indicator. Save the gather_facts flag state as
a cached fact for the smart use for the rest of that ongoing deployment.

That ensures the facts gathered only once per a deployment execution,
or a minor update/upgrade (but not scaling out).

Depends-On: https://review.opendev.org/737379
Change-Id: Ic3853302e8c1e0768d00e99c3069de7b2196ad84
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
"
openstack%2Fnetworking-l2gw~master~I1bf048df49c385a92fea55f99bd0a7c4283960cf,openstack/networking-l2gw,master,complete-retirement-networking-l2gw,I1bf048df49c385a92fea55f99bd0a7c4283960cf,Retire networking-l2gw: remove zuul jobs,MERGED,2020-06-29 14:45:47.000000000,2020-07-06 07:41:08.000000000,2020-07-03 12:08:45.000000000,0,13,4,738456,454cf61f8a191fc25a1d85d7be5df81eab405c54,14,4,2,1,8313,Lajos Katona,elajkat,"Retire networking-l2gw: remove zuul jobs

networking-l2gw is not a neutron stadium project, and not governed by
openstack, so it is time to move it to x/ namespace. As a first step
disable zuul jobs to avoid collisions when the new repository will be
created as x/networking-l2gw.

Change-Id: I1bf048df49c385a92fea55f99bd0a7c4283960cf
"
openstack%2Fproject-config~master~I99cf6a43a9034ced0579ca00ce7fbe8ac51ff7ed,openstack/project-config,master,,I99cf6a43a9034ced0579ca00ce7fbe8ac51ff7ed,Create a new project for ansible-tripleo-ipa-server,MERGED,2020-07-01 13:07:58.000000000,2020-07-06 07:27:40.000000000,2020-07-02 05:53:47.000000000,4,0,4,738842,046d66931132883e5345881fb9b878acdabba7e5,12,6,2,2,5046,Lance Bragstad,ldbragst,"Create a new project for ansible-tripleo-ipa-server

We recently opensourced some ansible playbooks and scripts for
integrating FreeIPA into TripleO deployments:

  https://review.opendev.org/#/c/711114/

The tripleo-ipa project contains some playbooks that are specific to
setting up and configuring FreeIPA. We'd like to pull these out into
their own project instead of having them in a corner of tripleo-ipa
somewhere.

Change-Id: I99cf6a43a9034ced0579ca00ce7fbe8ac51ff7ed
"
openstack%2Fpuppet-openstack-integration~master~If05ec2b2bd9df7cb312ace07c58f1584cda87aba,openstack/puppet-openstack-integration,master,openstack/puppet/constraints,If05ec2b2bd9df7cb312ace07c58f1584cda87aba,Updated from Puppet OpenStack modules constraints,MERGED,2020-07-04 06:10:08.000000000,2020-07-06 07:14:34.000000000,2020-07-06 07:14:34.000000000,1,1,0,739296,c01bfa1ecdfe3602b03a2cd4bfbd0a8a6231d9ef,7,3,1,1,11131,OpenStack Proposal Bot,proposal-bot,"Updated from Puppet OpenStack modules constraints

Change-Id: If05ec2b2bd9df7cb312ace07c58f1584cda87aba
"
openstack%2Ffreezer~master~Ic6b6dbe567a1dec92c5c4c9490b0672cc96d1d1f,openstack/freezer,master,doc,Ic6b6dbe567a1dec92c5c4c9490b0672cc96d1d1f,Overriding configured project name with name extraceted from package(freezer),MERGED,2020-07-06 03:59:09.000000000,2020-07-06 07:08:38.000000000,2020-07-06 07:05:03.000000000,1,0,0,739390,e455e6b5f5441e3fe4f336a0799c5bc125db886a,7,2,1,1,21069,Carl caihui,caihui,"Overriding configured project name with name extraceted from package(freezer)

[openstackdocstheme] overriding configured project name (Python) with
name extracted from the package (freezer); you can disable this behavior
with the 'openstackdocs_auto_name' option

Change-Id: Ic6b6dbe567a1dec92c5c4c9490b0672cc96d1d1f
"
openstack%2Ffreezer-api~master~Icbe9ceff6ad25dc353a3c574f32b26bc007c7294,openstack/freezer-api,master,,Icbe9ceff6ad25dc353a3c574f32b26bc007c7294,Overriding configured project name (freezer-api),MERGED,2020-07-06 03:38:34.000000000,2020-07-06 07:03:22.000000000,2020-07-06 07:01:24.000000000,1,0,0,739388,b66bfa036541c8ea8a4b560e219f28ecd52f09c1,7,2,1,1,21069,Carl caihui,caihui,"Overriding configured project name (freezer-api)

[openstackdocstheme] overriding configured project name (freezer-api) with
name extracted from the package (freezer-api); you can disable this
behavior with the 'openstackdocs_auto_name' option

Change-Id: Icbe9ceff6ad25dc353a3c574f32b26bc007c7294
"
openstack%2Fpuppet-vitrage~master~Icf5c7620291fe10e2a15e2189ea144751974fdb5,openstack/puppet-vitrage,master,wsgi-workers,Icf5c7620291fe10e2a15e2189ea144751974fdb5,Use workers instead of threads in wsgi by default,MERGED,2020-07-04 15:06:07.000000000,2020-07-06 06:56:53.000000000,2020-07-06 06:54:10.000000000,12,7,0,739302,044e40dba30b045a0933963f53d39a6bf6d83002,8,3,1,3,9816,Takashi Kajinami,kajinamit,"Use workers instead of threads in wsgi by default

In most of puppet-openstack modules, we use workers instead of threads
in wsgi to realize concurrency of api process by default.

This patch makes puppet-vitrage follow that standard configuration,
so that the default setup can be more consistent among all modules.

Change-Id: Icf5c7620291fe10e2a15e2189ea144751974fdb5
"
openstack%2Fpuppet-watcher~master~Iac7cba33f69b39e5bf29c61ed0c22b9b533b1293,openstack/puppet-watcher,master,wsgi-workers,Iac7cba33f69b39e5bf29c61ed0c22b9b533b1293,Use workers instead of threads in wsgi by default,MERGED,2020-07-04 15:07:59.000000000,2020-07-06 06:44:52.000000000,2020-07-06 06:42:06.000000000,12,7,0,739303,855a5c8e44a7ee7b15c3fe39198b98bd54fc70f7,9,3,1,3,9816,Takashi Kajinami,kajinamit,"Use workers instead of threads in wsgi by default

In most of puppet-openstack modules, we use workers instead of threads
in wsgi to realize concurrency of api process by default.

This patch makes puppet-watcher follow that standard configuration,
so that the default setup can be more consistent among all modules.

Change-Id: Iac7cba33f69b39e5bf29c61ed0c22b9b533b1293
"
openstack%2Fpuppet-cloudkitty~master~I287b36155958cd535b18d60f0c80395c3082ee46,openstack/puppet-cloudkitty,master,wsgi-workers,I287b36155958cd535b18d60f0c80395c3082ee46,Use workers instead of threads in wsgi by default,MERGED,2020-07-04 15:03:23.000000000,2020-07-06 06:19:27.000000000,2020-07-06 06:16:12.000000000,12,7,0,739301,306badcca143d80c2c20e38a920eca534b89615c,8,3,1,3,9816,Takashi Kajinami,kajinamit,"Use workers instead of threads in wsgi by default

In most of puppet-openstack modules, we use workers instead of threads
in wsgi to realize concurrency of api process by default.

This patch makes puppet-cloudkitty follow that standard configuration,
so that the default setup can be more consistent among all modules.

Change-Id: I287b36155958cd535b18d60f0c80395c3082ee46
"
openstack%2Fheat~master~If9beaff74cf4facbc4aa4b30f31a3a087bdcad8a,openstack/heat,master,,If9beaff74cf4facbc4aa4b30f31a3a087bdcad8a,Deprecate wrappertask decorator,MERGED,2019-12-18 04:46:53.000000000,2020-07-06 06:02:29.000000000,2020-07-06 06:00:17.000000000,64,91,0,699545,2c58017a144d3d87b4ccefe704db95d50769f89e,12,4,2,6,4257,Zane Bitter,zaneb,"Deprecate wrappertask decorator

Now that we only support Python 3, use the 'yield from' keyword instead
of the @wrappertask decorator for calling co-routines from a co-routine.
This should greatly simplify backtraces when calling nested co-routines.

Change-Id: If9beaff74cf4facbc4aa4b30f31a3a087bdcad8a
"
openstack%2Fdevstack~stable%2Frocky~I82f539bfa533349293dd5a8ce309c9cc0ffb0393,openstack/devstack,stable/rocky,uwsgi-stable/rocky,I82f539bfa533349293dd5a8ce309c9cc0ffb0393,"Fix gate, squashing multiple fixes",MERGED,2020-06-15 15:21:12.000000000,2020-07-06 05:57:28.000000000,2020-07-01 15:47:19.000000000,152,28,2,735615,ad6cc52c746f1fbdb1d89b14c09dc4aa7907bfe4,48,15,9,6,8556,Ghanshyam,ghanshyam,"Fix gate, squashing multiple fixes

This commit includes multiple fixes to
make gate happy:

1. Use packaged uwsgi on Fedora and Ubuntu
- https://review.opendev.org/#/c/735615/7

2. Move process-stackviz role from Tempest to Devstack
- https://review.opendev.org/#/c/737078/4

3. Add ensure-pip to pre.yaml
- https://review.opendev.org/#/c/738495/2

4. Temporarily disable the grenade jobs

Change-Id: I82f539bfa533349293dd5a8ce309c9cc0ffb0393
(cherry picked from commit 2d903568ed4158aa668bbda6986307a8780c71a4)
"
openstack%2Fglance~master~I44bfefb6eee421e18e5e95a0dafaef0ea4e170da,openstack/glance,master,bug/1885003,I44bfefb6eee421e18e5e95a0dafaef0ea4e170da,Fix: Interrupted copy-image leaking data on subsequent operation,MERGED,2020-06-24 20:06:58.000000000,2020-07-06 05:43:06.000000000,2020-07-06 05:39:00.000000000,82,1,29,737867,22d8f1fcbf4325d79ac18adfe87198c785f1df52,33,7,3,2,9303,Abhishek Kekane,abhishekkekane,"Fix: Interrupted copy-image leaking data on subsequent operation

If copying existing image in other stores fails while staging the data to
staging directory due to power, network or any other reason. Then
subsequent try may lead to data leaks in stores.

To fix this, added check of the actual image size with the size
of image file present in the staging area. If it does not match
then delete the image file from staging area so that the entire
image will be staged again.

Change-Id: I44bfefb6eee421e18e5e95a0dafaef0ea4e170da
Closes-Bug: #1885003
"
openstack%2Fdiskimage-builder~master~I1cc72314716690874eca57526eac224c4e0b24cf,openstack/diskimage-builder,master,,I1cc72314716690874eca57526eac224c4e0b24cf,"Revert ""Make ipa centos8 job non-voting""",MERGED,2020-07-01 03:57:17.000000000,2020-07-06 05:40:56.000000000,2020-07-06 05:37:57.000000000,2,2,0,738728,68bc561c09d4917f9747e9a09e1bb7f15ec913b1,16,26,2,1,13861,yatin,yatinkarel,"Revert ""Make ipa centos8 job non-voting""

This reverts commit 868a6f0c8aed6a90d41777306a1a55de1942cf56.

Change-Id: I1cc72314716690874eca57526eac224c4e0b24cf
Depends-On: https://review.opendev.org/#/c/738438/
"
openstack%2Fopenstack-ansible-ceph_client~master~I120a983c999202a9b6e6e54285644358212c13df,openstack/openstack-ansible-ceph_client,master,,I120a983c999202a9b6e6e54285644358212c13df,Add centos-8 support,ABANDONED,2020-07-06 04:35:00.000000000,2020-07-06 04:35:15.000000000,,6,3,0,739397,3369df15ec09220b81af53c1ef7f31a7d9d23f18,2,0,1,1,28752,Satish Patel,spatel,"Add centos-8 support

Renaming redhat-7.yml and fixing ceph download URL.

Change-Id: I120a983c999202a9b6e6e54285644358212c13df
"
openstack%2Fopenstack-ansible-ceph_client~master~I1b41dd155c7b5bbb90c99e00e9c0866df3dbe0d6,openstack/openstack-ansible-ceph_client,master,osa/el8,I1b41dd155c7b5bbb90c99e00e9c0866df3dbe0d6,Add centos-8 support,ABANDONED,2020-07-06 04:23:38.000000000,2020-07-06 04:32:42.000000000,,0,0,0,739395,5cd70be705cc521c951ef318b954502d86cc49c3,2,0,1,1,28752,Satish Patel,spatel,"Add centos-8 support

Renaming redhat-7.yml to redhat.yml for centos-8 support.

Change-Id: I1b41dd155c7b5bbb90c99e00e9c0866df3dbe0d6
"
openstack%2Fopenstack-ansible-ceph_client~master~I25c254e93280428c850c3d5a31bd202ead261c2b,openstack/openstack-ansible-ceph_client,master,osa/el8,I25c254e93280428c850c3d5a31bd202ead261c2b,Add centos-8 support,ABANDONED,2020-07-06 04:23:38.000000000,2020-07-06 04:25:38.000000000,,6,3,0,739396,511da1e3d3472a6c39a66d82625ae1ad517c6b7c,2,0,1,1,28752,Satish Patel,spatel,"Add centos-8 support

Adding centos version condition to fix ceph download URL.

Change-Id: I25c254e93280428c850c3d5a31bd202ead261c2b
"
openstack%2Fmistral~stable%2Fussuri~I0682595b472545d9202521c1548f13b142c2d5a4,openstack/mistral,stable/ussuri,,I0682595b472545d9202521c1548f13b142c2d5a4,Pin version of mistral-lib to 2.1.0 for Ussuri,ABANDONED,2020-07-03 06:55:43.000000000,2020-07-06 03:58:28.000000000,,1,1,0,739169,02642fc31199ba85a89a04077102330c01d79849,4,2,1,1,8731,Renat Akhmerov,rakhmerov,"Pin version of mistral-lib to 2.1.0 for Ussuri

* mistral-lib 2.2.0 contains a change that's not compatible with
  mistral ussuri (removed the constants ACTION_TASK_TYPE and
  WORKFLOW_TASK_TYPE).

Change-Id: I0682595b472545d9202521c1548f13b142c2d5a4
"
openstack%2Ffreezer-api~master~I55903e4f914673aba5ac986b845c2a6504830c19,openstack/freezer-api,master,,I55903e4f914673aba5ac986b845c2a6504830c19,Fix docs output error,MERGED,2020-07-06 03:20:04.000000000,2020-07-06 03:33:47.000000000,2020-07-06 03:32:36.000000000,3,3,0,739387,b744d68b644645ebd49adc21e72c1843a2618456,7,2,1,1,21069,Carl caihui,caihui,"Fix docs output error

writing output... [ 33%] cli/freezer-manager-status
[openstackdocstheme] the 'repository_name' config option has been deprecated
 and replaced by the 'openstackdocs_repo_name' option; support for the former
 will be dropped in a future release
[openstackdocstheme] the 'bug_project' config option has been deprecated and
replaced by the 'openstackdocs_bug_project' option; support for the former
 will be dropped in a future release
[openstackdocstheme] the 'bug_tag' config option has been deprecated and
replaced by the 'openstackdocs_bug_tag' option; support for the former will
be dropped in a future release
writing output... [ 66%] cli/index
writing output... [100%] index

Change-Id: I55903e4f914673aba5ac986b845c2a6504830c19
"
openstack%2Fdiskimage-builder~master~If4420e9ae7870739aac8a673ff290f9ed1391acf,openstack/diskimage-builder,master,add-more-pythons-to-gentoo,If4420e9ae7870739aac8a673ff290f9ed1391acf,add more python selections to gentoo,MERGED,2020-06-14 06:16:34.000000000,2020-07-06 03:01:17.000000000,2020-07-06 02:59:59.000000000,6,0,0,735448,c7b6f0d6a1b68e28f6c436e57e62b7617acaee42,54,8,1,1,14288,Matthew Thode,prometheanfire,"add more python selections to gentoo

Change-Id: If4420e9ae7870739aac8a673ff290f9ed1391acf
"
openstack%2Fceilometer~master~I197ad37c55df8d78375cb31c66eb93b91114d4dd,openstack/ceilometer,master,,I197ad37c55df8d78375cb31c66eb93b91114d4dd,Fix pygments style,MERGED,2020-05-20 00:48:46.000000000,2020-07-06 02:56:36.000000000,2020-07-06 02:55:11.000000000,2,2,0,729456,976df71b638edcb310c91719b423439e60da2a0c,17,4,3,2,30356,gugug,gujin,"Fix pygments style

New theme of docs respects pygments_style.

more info: http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html

Change-Id: I197ad37c55df8d78375cb31c66eb93b91114d4dd
"
openstack%2Ftripleo-heat-templates~stable%2Fussuri~Ib315d10dbdbbad1628f536a74cd1fca371f018f5,openstack/tripleo-heat-templates,stable/ussuri,bug/1884115-stable/ussuri,Ib315d10dbdbbad1628f536a74cd1fca371f018f5,Sync httpd conf.modules.d configs,MERGED,2020-06-24 12:51:52.000000000,2020-07-06 02:13:20.000000000,2020-07-06 02:13:20.000000000,137,0,0,737764,b366fd9e1a6b6977f5094204ef731b609000c7d1,23,4,2,19,14985,Alex Schultz,mwhahaha,"Sync httpd conf.modules.d configs

For containers which run httpd, make sure conf.modules.d is also synced
into the container; so apache doesn't fail with:
AH00534: httpd: Configuration error: More than one MPM loaded.

This is now required since:
https://github.com/puppetlabs/puppetlabs-apache/commit/6425cc46a841fa6ea5bb3f34b8f31d86c14e6914

Change-Id: Ib315d10dbdbbad1628f536a74cd1fca371f018f5
Closes-Bug: #1884115
(cherry picked from commit 1a48fa61f4a7d79041336e11ae54e46075d4f2a7)
"
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I8394cec6bbaca9c89c848eaddf724c072bc36cb3,openstack/tripleo-heat-templates,stable/ussuri,bug/1878720-stable/ussuri,I8394cec6bbaca9c89c848eaddf724c072bc36cb3,Add non-string value support for CephAnsibleEnvironmentVariables,MERGED,2020-05-27 13:07:09.000000000,2020-07-06 01:56:00.000000000,2020-07-06 01:56:00.000000000,9,9,0,731198,48d735e723d963edb63a85701a94be47f405d407,25,5,4,5,14985,Alex Schultz,mwhahaha,"Add non-string value support for CephAnsibleEnvironmentVariables

CephAnsibleEnvironmentVariables data is supposed to be transformed
into ""KEY=VALUE"" format by yaql expression.

```
ceph_ansible_environment_variables:
  yaql:
    data: {get_param: CephAnsibleEnvironmentVariables}
    expression: $.data.items().select($[0] + '=' + $[1])
```

However, the expression here uses `+` to join the key($[0]) and
value($[1]), which will cause syntax error when value is not string
type.

For example:

If we use boolean or integer for environment values such as
```
parameter_defaults:
  CephAnsibleEnvironmentVariables:
    ANSIBLE_DEBUG: true
```

the following error will occour

```
overcloud.CephStorageServiceChain:
  resource_type: OS::TripleO::CephStorageServices
  physical_resource_id: 51fd6f95-027b-4047-9132-763e1cb8150c
  status: UPDATE_FAILED
  status_reason: |
    resources.CephStorageServiceChain:
    Error in 4 output role_data:
    Error in CephBase output role_data:
    No function ""#operator_+"" matches supplied arguments
```

Change-Id: I8394cec6bbaca9c89c848eaddf724c072bc36cb3
Closes-Bug: #1878720
(cherry picked from commit 7c46fd01425a40818916aeca227ec1dbfa1ec348)
"
openstack%2Fwatcher~master~Ia2df0e0a4f242392915aa2a89d4fbae39b6c70e9,openstack/watcher,master,action_resize,Ia2df0e0a4f242392915aa2a89d4fbae39b6c70e9,resize action don't support revert,MERGED,2020-07-02 06:50:11.000000000,2020-07-06 01:50:37.000000000,2020-07-06 01:48:00.000000000,1,1,0,738972,1667046f5802e52f9d60fed8752879c8ad0b6849,8,2,1,1,21692,licanwei,licanwei,"resize action don't support revert

Change-Id: Ia2df0e0a4f242392915aa2a89d4fbae39b6c70e9
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~If1c621b45718475578dca390c45c0e23d1f3d7bc,openstack/tripleo-heat-templates,stable/train,sahara,If1c621b45718475578dca390c45c0e23d1f3d7bc,Disable Sahara in scenario003-standalone,MERGED,2020-07-03 13:57:58.000000000,2020-07-06 01:30:31.000000000,2020-07-06 01:30:31.000000000,0,2,0,739238,728babbc522e11a3bc37d00fa620f3b173e3f8e4,15,6,1,1,3153,Emilien Macchi,emilienm,"Disable Sahara in scenario003-standalone

Sahara service is deprecated in TripleO and won't be tested anymore to
align with what is delivered downstream.
In the new container image tooling, we don't ship sahara images simply because
we don't have users and won't continue to support it's deployment in the
future.

Change-Id: If1c621b45718475578dca390c45c0e23d1f3d7bc
(cherry picked from commit 03285912fcc784a971c206f44584b096e28ba14c)
"
openstack%2Fwatcher-specs~master~I50d8b82b70eb441987f41ddedfcae3b07772d0e8,openstack/watcher-specs,master,bp/time-series-framework,I50d8b82b70eb441987f41ddedfcae3b07772d0e8,Add bp time-series-framework,MERGED,2020-07-02 07:02:07.000000000,2020-07-06 01:21:09.000000000,2020-07-06 01:19:44.000000000,12,0,0,738975,7549c5ed9a41da05cffa5302da0544f04d97888b,8,5,1,1,21692,licanwei,licanwei,"Add bp time-series-framework

Change-Id: I50d8b82b70eb441987f41ddedfcae3b07772d0e8
"
openstack%2Fopenstack-ansible~stable%2Ftrain~I3c9bbe5b43025b7a3f77435828c9501b3fdadd67,openstack/openstack-ansible,stable/train,,I3c9bbe5b43025b7a3f77435828c9501b3fdadd67,Disable test_swift_acl_anonymous_download test,MERGED,2020-07-01 20:54:46.000000000,2020-07-06 00:52:03.000000000,2020-07-06 00:49:43.000000000,3,0,0,738939,efc017570fd4018ecf0c9b722e85fdf3a3a5b6ab,37,5,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Disable test_swift_acl_anonymous_download test

Ceph rgw in 14.2.10 and 15.2.4 has changed return code for unathorized
from 401 to 404, which makes this test fail.

Change-Id: I3c9bbe5b43025b7a3f77435828c9501b3fdadd67
(cherry picked from commit 75cfbe4db64f0989d1489ed162a45a73cf14b33c)
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~If0937ebde4b2bbeb98a824b8f0b887c372191417,openstack/tripleo-heat-templates,stable/train,test-centos-8,If0937ebde4b2bbeb98a824b8f0b887c372191417,DNM - Testing centos-8 triggers,ABANDONED,2020-03-02 17:19:15.000000000,2020-07-05 23:46:40.000000000,,1,0,0,710838,f5c3e6a4e4aa61106c0b03ba1121ad133155cd9c,4,2,1,1,9976,Ronelle Landy,rlandy,"DNM - Testing centos-8 triggers

Depends-On: https://review.opendev.org/#/c/710179/
Change-Id: If0937ebde4b2bbeb98a824b8f0b887c372191417
"
openstack%2Fkolla-ansible~stable%2Fussuri~I17256b182d207aeba3f92c65a6d7cf3611180558,openstack/kolla-ansible,stable/ussuri,bug/1886170-stable/ussuri,I17256b182d207aeba3f92c65a6d7cf3611180558,Remove policy file from nova-conductor config.json template,MERGED,2020-07-05 16:39:42.000000000,2020-07-05 22:23:34.000000000,2020-07-05 22:22:04.000000000,8,7,0,739365,33f186c94610062ee51f118a6701c381bf5a5914,10,4,1,2,30491,Radosław Piliszek,yoctozepto,"Remove policy file from nova-conductor config.json template

Change I810aad7d49db3f5a7fd9a2f0f746fd912fe03917 for supporting multiple
Nova cells updated the list of containers that require a policy file to
only include nova-api, nova-compute, and nova-compute-ironic.

The nova-conductor config.json template was left unchanged and fails to
copy the nova policy file into its container. This can be seen on a
fresh deployment, but might be missed on an upgrade if an older policy
file is still available in /etc/kolla/nova-conductor.

This commit removes the nova_policy_file block from the nova-conductor
config.json template, as it shouldn't be required.

Backport: ussuri, train
Change-Id: I17256b182d207aeba3f92c65a6d7cf3611180558
Closes-Bug: #1886170
(cherry picked from commit c40e8065878dd77c1303642e677c4ca8a989494a)
"
openstack%2Frequirements~master~Ic6db7af34c87a636bfe55bacae03c42154f4b9c7,openstack/requirements,master,osc-performance,Ic6db7af34c87a636bfe55bacae03c42154f4b9c7,importlib-metadata: add python version rule,MERGED,2020-07-05 19:34:31.000000000,2020-07-05 22:16:34.000000000,2020-07-05 22:15:23.000000000,1,1,0,739371,4551f8d566f9d6b3f057e57ba781ae6154fb1497,8,3,1,1,2472,Doug Hellmann,doug-hellmann,"importlib-metadata: add python version rule

We only want to install the separate importlib-metadata for python
versions < 3.8. Otherwise, we want to use the standard library version
of the package. Adding this rule allows consumers of
importlib-metadata to specify the same rule to accurately reflect
their dependencies.

Change-Id: Ic6db7af34c87a636bfe55bacae03c42154f4b9c7
Signed-off-by: Doug Hellmann <doug@doughellmann.com>
"
openstack%2Fkolla-ansible~stable%2Ftrain~I17256b182d207aeba3f92c65a6d7cf3611180558,openstack/kolla-ansible,stable/train,bug/1886170-stable/ussuri-stable/train,I17256b182d207aeba3f92c65a6d7cf3611180558,Remove policy file from nova-conductor config.json template,MERGED,2020-07-05 16:39:48.000000000,2020-07-05 22:03:43.000000000,2020-07-05 22:02:09.000000000,8,7,0,739366,bd055912df06ecd4149a40ccce873e56f707026d,8,4,1,2,30491,Radosław Piliszek,yoctozepto,"Remove policy file from nova-conductor config.json template

Change I810aad7d49db3f5a7fd9a2f0f746fd912fe03917 for supporting multiple
Nova cells updated the list of containers that require a policy file to
only include nova-api, nova-compute, and nova-compute-ironic.

The nova-conductor config.json template was left unchanged and fails to
copy the nova policy file into its container. This can be seen on a
fresh deployment, but might be missed on an upgrade if an older policy
file is still available in /etc/kolla/nova-conductor.

This commit removes the nova_policy_file block from the nova-conductor
config.json template, as it shouldn't be required.

Backport: ussuri, train
Change-Id: I17256b182d207aeba3f92c65a6d7cf3611180558
Closes-Bug: #1886170
(cherry picked from commit c40e8065878dd77c1303642e677c4ca8a989494a)
"
openstack%2Fsenlin-dashboard~master~I78b4c6bd2f0ac7bdf39f69d1be4ecd32ce953d52,openstack/senlin-dashboard,master,fix-npm-jobs,I78b4c6bd2f0ac7bdf39f69d1be4ecd32ce953d52,Fix npm job,MERGED,2020-06-23 09:23:36.000000000,2020-07-05 21:50:41.000000000,2020-07-05 21:49:14.000000000,1,1,4,737466,001accd77c1e6ca7b8288b087ad7a1ecf017915e,16,4,4,1,29313,Vishal Manchanda,vishalmanchanda,"Fix npm job

horizon is doing frequent releases, the install from source is not
working as is anymore. Remove it.

Change-Id: I78b4c6bd2f0ac7bdf39f69d1be4ecd32ce953d52
"
openstack%2Fdiskimage-builder~master~I648fe19f1f76c03c97492b6ac7be6381f6f9261b,openstack/diskimage-builder,master,centos-8,I648fe19f1f76c03c97492b6ac7be6381f6f9261b,Download latest CentOS cloud image,MERGED,2020-06-22 09:07:16.000000000,2020-07-05 21:09:57.000000000,2020-07-05 21:06:43.000000000,1,1,0,737237,1f9619cdb5fe7c2eab91b16fe3b78dc97ed279cf,25,6,1,1,6469,Carlos Gonçalves,cgoncalves,"Download latest CentOS cloud image

DIB was retrieving the oldest cloud image file which, presently, means
retrieving CentOS 8.1 instead of CentOS 8.2. Even though DIB runs a
system update and so catches up to latest, this takes bandwidth, time
and final image space (8.1 + system update = 765M qcow2, vs 8.2 + system
update = 518M qcow2).

This patch fixes that by taking the first image name in a descending
order list.

Change-Id: I648fe19f1f76c03c97492b6ac7be6381f6f9261b
"
openstack%2Fdiskimage-builder~master~Id0825de735ab957c10daf35fb3c641f850cc6847,openstack/diskimage-builder,master,centos-stream,Id0825de735ab957c10daf35fb3c641f850cc6847,Add support for CentOS 8 Stream,MERGED,2020-06-08 13:34:50.000000000,2020-07-05 21:08:53.000000000,2020-07-05 21:06:41.000000000,79,25,5,734083,367dfc9294f76da411bdedea4445959fc5f80aac,88,11,14,18,6469,Carlos Gonçalves,cgoncalves,"Add support for CentOS 8 Stream

This patch adds support for CentOS 8 Stream [1] to the centos-minimal
element. Users should set DIB_RELEASE=8-stream.

[1] https://www.centos.org/stream/

Change-Id: Id0825de735ab957c10daf35fb3c641f850cc6847
"
openstack%2Fglance~stable%2Fussuri~I845bce79e487656a284e52e4c605d648a5411822,openstack/glance,stable/ussuri,native-zuulv3-migration,I845bce79e487656a284e52e4c605d648a5411822,Use grenade-multinode instead of the custom legacy job,MERGED,2020-06-30 20:40:21.000000000,2020-07-05 21:03:11.000000000,2020-07-05 21:00:59.000000000,1,73,0,738693,0855cc1eaa6b25b823db3253afee10ca13fc39c2,14,4,1,3,10459,Luigi Toscano,ltoscano,"Use grenade-multinode instead of the custom legacy job

glance-dsvm-grenade-multinode is a simple multinode grenade job and
it can thus be replaced by the existing grenade-multinode.

Change-Id: I845bce79e487656a284e52e4c605d648a5411822
(cherry picked from commit a506e941152d1dacba57c800c34623d9ad02bebe)
"
openstack%2Fstevedore~master~Ie2b3370267050597d616209ee2757e21002519b6,openstack/stevedore,master,osc-performance,Ie2b3370267050597d616209ee2757e21002519b6,add a caching layer in front of entry point scanning,ABANDONED,2020-07-04 18:09:53.000000000,2020-07-05 19:08:24.000000000,,179,2,0,739326,74b6e6bbb2a024cecf67c88ee38686cd68ef43f0,5,2,1,2,2472,Doug Hellmann,doug-hellmann,"add a caching layer in front of entry point scanning

The cache stores the parsed text data from all of the ini input files
in a single JSON file with a name based on the hash of the path
entries and the mtimes. This should produce a unique filename for each
import path, regardless of the use of a virtualenv.

The data is stored in a format that means no other files need to be
examined or parsed in order to return EntryPoint objects.

Change-Id: Ie2b3370267050597d616209ee2757e21002519b6
Signed-off-by: Doug Hellmann <doug@doughellmann.com>
"
openstack%2Fkolla-ansible~master~I17256b182d207aeba3f92c65a6d7cf3611180558,openstack/kolla-ansible,master,bug/1886170,I17256b182d207aeba3f92c65a6d7cf3611180558,Remove policy file from nova-conductor config.json template,MERGED,2020-07-03 09:49:14.000000000,2020-07-05 16:39:42.000000000,2020-07-05 16:02:28.000000000,8,7,2,739194,c40e8065878dd77c1303642e677c4ca8a989494a,15,5,2,2,15197,Pierre Riteau,priteau,"Remove policy file from nova-conductor config.json template

Change I810aad7d49db3f5a7fd9a2f0f746fd912fe03917 for supporting multiple
Nova cells updated the list of containers that require a policy file to
only include nova-api, nova-compute, and nova-compute-ironic.

The nova-conductor config.json template was left unchanged and fails to
copy the nova policy file into its container. This can be seen on a
fresh deployment, but might be missed on an upgrade if an older policy
file is still available in /etc/kolla/nova-conductor.

This commit removes the nova_policy_file block from the nova-conductor
config.json template, as it shouldn't be required.

Backport: ussuri, train
Change-Id: I17256b182d207aeba3f92c65a6d7cf3611180558
Closes-Bug: #1886170
"
openstack%2Fkolla-ansible~master~I15e5c0e0a956ee181873cf002229532a15ff959d,openstack/kolla-ansible,master,,I15e5c0e0a956ee181873cf002229532a15ff959d,Remove the neutron-fwaas roles since it retired,MERGED,2020-06-17 05:25:16.000000000,2020-07-05 16:03:47.000000000,2020-07-05 16:02:26.000000000,7,59,2,736098,1c7ca296643074a41a526a9979253af1d4c5d057,21,6,5,10,30356,gugug,gujin,"Remove the neutron-fwaas roles since it retired

Depends-On: I561504160e5548c54d1af31821c3366ab34cf0ec
Change-Id: I15e5c0e0a956ee181873cf002229532a15ff959d
Co-Authored-By: jacky06 <zhang.min@99cloud.net>
"
openstack%2Fheat-translator~master~Iab5fd15778dccdacc4811b35627c9b99b6bac0cc,openstack/heat-translator,master,bug/1880647,Iab5fd15778dccdacc4811b35627c9b99b6bac0cc,Avoid writing substack template into files,NEW,2020-05-26 09:09:04.000000000,2020-07-05 14:08:14.000000000,,0,5,4,730735,31ec53f278a36fbb2e7c1894d647aa77fec84932,11,7,2,1,31648,Prashant Bhole,pbhole,"Avoid writing substack template into files

TOSCATranslator.translate() method writes substack templates into
files. These files are not necessary as their content is already
included in the template. This patch removes the code which writes
those files.

Printing the content of the substack templates into debug log
would unnecessarily flood the logs. Hence not logging the content.

Closes-Bug: #1880647
Change-Id: Iab5fd15778dccdacc4811b35627c9b99b6bac0cc
"
openstack%2Fkolla-ansible~master~Ia17a64fe9bf31042369dec19f1f76b1ab8592288,openstack/kolla-ansible,master,,Ia17a64fe9bf31042369dec19f1f76b1ab8592288,make barbican notification driver configurable,MERGED,2020-07-02 14:58:29.000000000,2020-07-05 11:57:18.000000000,2020-07-05 11:56:04.000000000,15,0,2,739066,051038621f162b40c069e3be1daef8d9125c9fbb,11,3,1,2,26285,wu.chunyang,wu.chunyang,"make barbican notification driver configurable

barbican alway use default notification driver (defalt '')
so we should change this value according to whether enable
notification

Change-Id: Ia17a64fe9bf31042369dec19f1f76b1ab8592288
"
openstack%2Ftripleo-common~stable%2Fussuri~I131aca7a03802766a791e6912fad6ebf143d31db,openstack/tripleo-common,stable/ussuri,buildtestpackages-stable/ussuri,I131aca7a03802766a791e6912fad6ebf143d31db,[DNM] build test packages downstream testing,ABANDONED,2020-06-11 11:08:31.000000000,2020-07-05 11:46:27.000000000,,1,1,0,735111,c222a51c5b8cf0622ab3406a56dba2f00d0b1083,53,3,4,1,12393,chandan kumar,chkumar246,"[DNM] build test packages downstream testing

Depends-On: https://review.opendev.org/738394
Depends-On: https://review.opendev.org/737048

Change-Id: I131aca7a03802766a791e6912fad6ebf143d31db
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
"
openstack%2Fopenstack-ansible-tests~stable%2Ftrain~Iab1593cf46bcf80022bb353ed0399baadf49b165,openstack/openstack-ansible-tests,stable/train,,Iab1593cf46bcf80022bb353ed0399baadf49b165,Increase timout for linters job to 30mins,MERGED,2020-07-05 06:23:16.000000000,2020-07-05 10:15:29.000000000,2020-07-05 10:13:38.000000000,1,1,0,739338,ae3dd4da80328269021a8d8fc5abb28594dd361f,8,3,1,1,25023,Jonathan Rosser,jrosser,"Increase timout for linters job to 30mins

This job is given a longer time to run for two reasons, longer is
spent in the job setup becasue of the increased number of repos
in required_projects and more time is required to push the job
logs into swift storage than the previous method.

Jobs are currently failing because these startup/log collect phases
are taking additional time rather than there being a lint issue, so
this patch extends the job time to account for that.

Change-Id: Iab1593cf46bcf80022bb353ed0399baadf49b165
(cherry picked from commit 961685ce27f762081ee47f6d96f229185e12d1d7)
"
openstack%2Fneutron~master~Icf5e2a73b15407419d5c922e236181af85aad0dc,openstack/neutron,master,bug/1885169,Icf5e2a73b15407419d5c922e236181af85aad0dc,"Provide integer number to arping ""-w"" parameter",MERGED,2020-06-29 08:46:18.000000000,2020-07-05 09:59:48.000000000,2020-07-03 01:28:19.000000000,1,1,0,738400,72d95d40d467fa43a53a48bbc93f6efb3a43fca6,42,8,1,1,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"Provide integer number to arping ""-w"" parameter

Some arping versions only accept an integer number for the
""deadline"" (-w) parameter.

Change-Id: Icf5e2a73b15407419d5c922e236181af85aad0dc
Closes-Bug: #1885169
"
openstack%2Fopenstack-ansible-tests~master~Iab1593cf46bcf80022bb353ed0399baadf49b165,openstack/openstack-ansible-tests,master,,Iab1593cf46bcf80022bb353ed0399baadf49b165,Increase timout for linters job to 30mins,MERGED,2020-05-13 10:00:16.000000000,2020-07-05 06:23:42.000000000,2020-05-13 13:53:37.000000000,1,1,0,727697,961685ce27f762081ee47f6d96f229185e12d1d7,14,4,2,1,25023,Jonathan Rosser,jrosser,"Increase timout for linters job to 30mins

This job is given a longer time to run for two reasons, longer is
spent in the job setup becasue of the increased number of repos
in required_projects and more time is required to push the job
logs into swift storage than the previous method.

Jobs are currently failing because these startup/log collect phases
are taking additional time rather than there being a lint issue, so
this patch extends the job time to account for that.

Change-Id: Iab1593cf46bcf80022bb353ed0399baadf49b165
"
openstack%2Fzun-tempest-plugin~master~I89a25883b6341357d6d98b60445eba9d0fe69623,openstack/zun-tempest-plugin,master,bug/1881910,I89a25883b6341357d6d98b60445eba9d0fe69623,Test container in subnet without gateway_ip,MERGED,2020-06-07 23:38:51.000000000,2020-07-05 04:44:57.000000000,2020-07-05 04:43:51.000000000,13,0,0,733996,1e6bcd4759a8c0ab20b8d51c3dec3a96b0a892f1,12,2,2,1,11536,hongbin,hongbin,"Test container in subnet without gateway_ip

Related-Bug: #1881910
Change-Id: I89a25883b6341357d6d98b60445eba9d0fe69623
"
openstack%2Frequirements~master~Idf9ae2ea576f4ed882489f03e4dbc94193243c98,openstack/requirements,master,,Idf9ae2ea576f4ed882489f03e4dbc94193243c98,manual generate-constraints run,MERGED,2020-07-04 19:05:56.000000000,2020-07-05 04:22:29.000000000,2020-07-05 04:21:12.000000000,32,32,0,739330,bdb9d64daf8c667f5dfb043fcfca5670ba485a73,12,3,2,1,14288,Matthew Thode,prometheanfire,"manual generate-constraints run

generated via:

generate-constraints -b blacklist.txt -p /usr/bin/python3.6 -p \
  /usr/bin/python3.8 -r global-requirements.txt > upper-constraints.txt

held back the normal mock, msgpack (because of salt) and docutils
(because of boto iirc).
held back oslotest for mock issues in nova.
held back jsonatch for issues in ironic.

Change-Id: Idf9ae2ea576f4ed882489f03e4dbc94193243c98
Signed-off-by: Matthew Thode <mthode@mthode.org>
"
openstack%2Fkuryr-libnetwork~stable%2Frocky~I3033d28eb268a01de8cf038b1ed20110ca9a31ea,openstack/kuryr-libnetwork,stable/rocky,bug/1881910-stable/rocky,I3033d28eb268a01de8cf038b1ed20110ca9a31ea,Handle subnet without gateway,MERGED,2020-06-27 01:10:19.000000000,2020-07-05 00:35:38.000000000,2020-07-05 00:35:38.000000000,14,5,0,738296,2d5158767121922a38577a0c8abdf8c383bf7bcd,14,4,1,2,11536,hongbin,hongbin,"Handle subnet without gateway

* When libnetwork requests the IP address of the gateway
  (via /IpamDriver.RequestAddress) and the neutron subnet has gateway
  as None, return '0.0.0.0/0' as a placeholder.
* Disable default docker gateway via the 'DisableGatewayService' flag
  (see https://github.com/moby/libnetwork/pull/778).

Change-Id: I3033d28eb268a01de8cf038b1ed20110ca9a31ea
Closes-Bug: #1881910
(cherry picked from commit 960993652e1ab526c1ce8cd3cd04d28f13facc86)
"
openstack%2Fzun-tempest-plugin~master~I862ce25f0072724870462a6f5bc9633ac66cea4f,openstack/zun-tempest-plugin,master,,I862ce25f0072724870462a6f5bc9633ac66cea4f,Verify capsule's containers status,MERGED,2020-05-24 03:16:34.000000000,2020-07-04 23:49:25.000000000,2020-07-04 23:48:13.000000000,10,0,0,730490,ab1fc1ab9f85deeb118541e6588311cee42e4b92,35,2,6,2,11536,hongbin,hongbin,"Verify capsule's containers status

After a capsule is successfully created, iterate each containers
of this capsule and verify its status.

Depends-On: https://review.opendev.org/#/c/730513/
Change-Id: I862ce25f0072724870462a6f5bc9633ac66cea4f
"
openstack%2Fkuryr-libnetwork~stable%2Frocky~I95d3354b4f691850af8cc6f4c6af4c9e98e5cb1f,openstack/kuryr-libnetwork,stable/rocky,,I95d3354b4f691850af8cc6f4c6af4c9e98e5cb1f,Install tox before running tests,MERGED,2020-06-27 14:50:18.000000000,2020-07-04 23:10:51.000000000,2020-07-04 23:10:50.000000000,1,0,0,738314,8b5a4812f10fd114c1369483403e0ccd3a944121,13,3,1,1,11536,hongbin,hongbin,"Install tox before running tests

We run tests by using 'tox' so we need to install it.

Change-Id: I95d3354b4f691850af8cc6f4c6af4c9e98e5cb1f
(cherry picked from commit 243e500e8cd83edb61972a15db6c6c18a61531b8)
"
openstack%2Ftripleo-ci~master~I6554aaa610db9f260785917587b4c2870db34702,openstack/tripleo-ci,master,,I6554aaa610db9f260785917587b4c2870db34702,"Revert ""turn off NetworkManager in CentOS-8 TripleO""",MERGED,2020-07-02 06:58:44.000000000,2020-07-04 21:13:51.000000000,2020-07-04 21:13:51.000000000,0,26,0,738974,2ac0c23b5e4ef79589b9f3c18bb34947e5100842,18,6,1,2,10969,Shnaidman Sagi (Sergey),sergsh,"Revert ""turn off NetworkManager in CentOS-8 TripleO""

This reverts commit 7dd82ca385ac3b1d380cf9358cb4cc120981986c.
Depends-On: https://review.opendev.org/#/c/738964/

Change-Id: I6554aaa610db9f260785917587b4c2870db34702
"
openstack%2Fpuppet-tripleo~master~I9e29f774afe26c56f0091aa28ef5517f26fe1e4b,openstack/puppet-tripleo,master,key-enable_bootstrap,I9e29f774afe26c56f0091aa28ef5517f26fe1e4b,Remove deprecated keystone::enable_bootstrap,MERGED,2020-06-29 06:37:04.000000000,2020-07-04 19:24:10.000000000,2020-07-04 19:24:10.000000000,0,1,0,738380,344c4b5c4f29704e4261aed94bee09d46fc271c9,16,5,1,1,9816,Takashi Kajinami,kajinamit,"Remove deprecated keystone::enable_bootstrap

This patch removes usage of the keystone::enable_bootstrap parameter,
because it has been deprecated[1] and has no effect now.

Note that we currently implement bootstrap process in t-h-t, thus
we don't need to include keystone::bootstrap in puppet-tripleo.

[1] bc1ff1d7cb01ac02790c3302a3da6e994598d9f6

Change-Id: I9e29f774afe26c56f0091aa28ef5517f26fe1e4b
"
openstack%2Fpython-openstackclient~master~I6d3a38eee0c75bbc795bad732fe547181d15c677,openstack/python-openstackclient,master,,I6d3a38eee0c75bbc795bad732fe547181d15c677,Remove enabling of glance v1 API,MERGED,2020-07-03 15:08:16.000000000,2020-07-04 18:27:24.000000000,2020-07-04 18:18:36.000000000,0,2,0,739252,4638dbc7f373177277dbf8aabe6d84f15334492e,13,4,1,1,8556,Ghanshyam,ghanshyam,"Remove enabling of glance v1 API

devstack removing the glance v1 api enable
option[1] because there is no v1 entry point in glance
now[2].

Let's remove ths GLANCE_V1_ENABLED variable setting from
zuul job too to avoid any confusion of glance v1 is still
available.
[1] https://review.opendev.org/#/c/698808/
[2] https://review.opendev.org/#/c/532503/

Change-Id: I6d3a38eee0c75bbc795bad732fe547181d15c677
"
openstack%2Fpython-openstackclient~master~I73f903ffb2f08ddfdf731f4ab789543a238a0d8d,openstack/python-openstackclient,master,bp/cinder-command-support,I73f903ffb2f08ddfdf731f4ab789543a238a0d8d,Add backup import/export to OpenStack Client,NEW,2016-11-26 18:40:53.000000000,2020-07-04 17:52:36.000000000,,166,0,56,403393,cf83371ac81756e59f2bd472b72eb40d043cb8fd,55,11,10,6,22227,Justin A Wilson,waj334,"Add backup import/export to OpenStack Client

This patch implements import and export of backup metadata in the OSC.
Implements: bp cinder-command-support

Co-Authored-By: jiahui.qiang <jiahui.qiang@easystack.cn>
Change-Id: I73f903ffb2f08ddfdf731f4ab789543a238a0d8d
"
openstack%2Fpython-openstackclient~master~Iaf0f8036720f5343b4e1e66bf1adfe2377c56bad,openstack/python-openstackclient,master,bug/1712952,Iaf0f8036720f5343b4e1e66bf1adfe2377c56bad,"Add ""volume backup export/import"" commands",NEW,2017-08-24 09:25:46.000000000,2020-07-04 17:52:29.000000000,,284,0,3,497167,d8e0143ba5f0ce9c21ecb115196794f57739f729,13,6,3,4,22299,lihaijing,lihaijing,"Add ""volume backup export/import"" commands

This patch add commands that supports exporting/importing
backup metadata record.

Closes-Bug: #1712952
Change-Id: Iaf0f8036720f5343b4e1e66bf1adfe2377c56bad
"
openstack%2Fpython-openstackclient~master~Ic5d57186766257e9d37b3588e71f973cddad9be4,openstack/python-openstackclient,master,,Ic5d57186766257e9d37b3588e71f973cddad9be4,Remove translation sections from setup.cfg,MERGED,2020-06-23 04:23:45.000000000,2020-07-04 16:48:20.000000000,2020-07-04 16:46:55.000000000,0,16,0,737436,ff2a70c418c9686b13f64fed760432f30391441a,9,3,1,3,17130,melissaml,malei,"Remove translation sections from setup.cfg

These translation sections are not needed anymore, Babel can
generate translation files without them.

Change-Id: Ic5d57186766257e9d37b3588e71f973cddad9be4
"
openstack%2Fpython-openstackclient~stable%2Fussuri~I1ad0da8deda3a8cbec384b5a9c88860a526eb48c,openstack/python-openstackclient,stable/ussuri,,I1ad0da8deda3a8cbec384b5a9c88860a526eb48c,Replace assertItemsEqual with assertCountEqual,MERGED,2020-06-11 09:48:05.000000000,2020-07-04 16:48:15.000000000,2020-07-04 16:46:55.000000000,2,2,0,735091,684cdc5be0c7d57fe6e2c2188a39085204f4756a,11,5,1,1,6593,Dirk Mueller,dmllr,"Replace assertItemsEqual with assertCountEqual

assertItemsEqual was removed from Python's unittest.TestCase in
Python 3.3 [1][2]. We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277

Change-Id: I1ad0da8deda3a8cbec384b5a9c88860a526eb48c
(cherry picked from commit a15b1addb41147415716417f385f8ee32aace64b)
"
openstack%2Ftripleo-ci~master~Ieb7b99379d37db3b8a86dce46d9c67ce647df541,openstack/tripleo-ci,master,testall,Ieb7b99379d37db3b8a86dce46d9c67ce647df541,DNM run jobs with attempts 1,ABANDONED,2020-06-30 07:58:37.000000000,2020-07-04 15:31:51.000000000,,27,17,1,738557,a1b44b8f194664989a384754b9e335a6fde3a190,40,4,7,13,10969,Shnaidman Sagi (Sergey),sergsh,"DNM run jobs with attempts 1

Running this time to confirm the suspect
https://review.opendev.org/#/c/734654/,
ens3 should be not be cleaned up when it's
an active device.

Change-Id: Ieb7b99379d37db3b8a86dce46d9c67ce647df541
"
openstack%2Ftripleo-common~master~I131aca7a03802766a791e6912fad6ebf143d31db,openstack/tripleo-common,master,buildtestpackages,I131aca7a03802766a791e6912fad6ebf143d31db,[DNM] build test packages downstream testing,ABANDONED,2020-05-29 12:04:06.000000000,2020-07-04 15:07:59.000000000,,1,1,0,731739,c0bc01d6c6375070d9343f33082317d18e88c009,84,3,12,1,12393,chandan kumar,chkumar246,"[DNM] build test packages downstream testing

Depends-On: https://review.opendev.org/738394

THT changes:
Depends-On: https://review.opendev.org/724734
Depends-On: https://review.opendev.org/#/c/731108

Change-Id: I131aca7a03802766a791e6912fad6ebf143d31db
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
"
openstack%2Fopenstack-ansible-rabbitmq_server~stable%2Fussuri~I35690f9a54337d6a268406ddcf6726f7040ac966,openstack/openstack-ansible-rabbitmq_server,stable/ussuri,osa/el8-stable/ussuri,I35690f9a54337d6a268406ddcf6726f7040ac966,Add Centos-8 support,MERGED,2020-07-02 17:13:27.000000000,2020-07-04 11:19:22.000000000,2020-07-04 11:18:14.000000000,27,6,0,739102,7d2bf72d58a70db6b53a52220efe24b04e2147ad,17,4,1,5,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: I35690f9a54337d6a268406ddcf6726f7040ac966
(cherry picked from commit fc27e735a68b64cb3c67dd8abeaf324803a9845b)
"
openstack%2Fopenstack-helm-infra~master~I5a9e6678c45fad8288aa6971f57988b46001c665,openstack/openstack-helm-infra,master,,I5a9e6678c45fad8288aa6971f57988b46001c665,Completely switch to python3 for developers installation,MERGED,2020-07-02 23:51:15.000000000,2020-07-04 09:00:23.000000000,2020-07-04 08:59:02.000000000,17,15,2,739155,2b4cf6a2d95a668416b7d4fdfe49918bf64d2197,17,7,5,7,8863,Andrii Ostapenko,aostapenko,"Completely switch to python3 for developers installation

This addresses an issue with using py2 as interpreter while
installing required dependencies with py3.

Also switch kubeadm-aio image to bionic.

Change-Id: I5a9e6678c45fad8288aa6971f57988b46001c665
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
"
openstack%2Ftripleo-common~stable%2Fussuri~I1fcf0aa3212d037db7c4d9baed18959ed6a0cc81,openstack/tripleo-common,stable/ussuri,callback-improvement-stable/ussuri,I1fcf0aa3212d037db7c4d9baed18959ed6a0cc81,Fix stdout_callback,MERGED,2020-07-03 20:51:16.000000000,2020-07-04 08:38:17.000000000,2020-07-04 08:36:31.000000000,1,1,0,739282,fadce76206fd135037dfb3cf0c020f0e94d63598,11,3,1,1,3153,Emilien Macchi,emilienm,"Fix stdout_callback

We switched to tripleo_dense but the default ansible.cfg that is created
still has tripleo.

Change-Id: I1fcf0aa3212d037db7c4d9baed18959ed6a0cc81
(cherry picked from commit ed3fdb77645ec3d563cd49161423661d21a3f642)
"
openstack%2Fneutron~master~I7d792ce288d96548298f169748565266a130bd86,openstack/neutron,master,bug/1876092,I7d792ce288d96548298f169748565266a130bd86,Make DVR router support FLAT network for ovs-agent,MERGED,2020-05-07 06:00:48.000000000,2020-07-04 05:58:13.000000000,2020-07-04 05:29:29.000000000,299,138,23,726044,cd721a7dcb9073eca2671ffdc9dc7ed9819163ed,120,13,13,13,28329,yangjianfeng,yangjianfeng,"Make DVR router support FLAT network for ovs-agent

Currently codes only support assocate tunnel network and vlan network
to DVR router. This patch add codes that make the flat network assocate
to DVR router and make it work fine.

The patch also remove two unused constant entries: 'FLAT_VLAN_ID' and
'LOCAL_VLAN_ID'

Change-Id: I7d792ce288d96548298f169748565266a130bd86
Closes-Bug: #1876092
"
openstack%2Ftripleo-ci~master~I5ee348c7196b94e1f7c5acd8e802621837c5bef2,openstack/tripleo-ci,master,,I5ee348c7196b94e1f7c5acd8e802621837c5bef2,Add tripleo-ansible to required projects in all jobs,MERGED,2020-06-30 08:27:24.000000000,2020-07-04 04:55:08.000000000,2020-07-04 04:55:08.000000000,1,0,2,738564,ae15d47af3ffdd7b1786942813e23e0eefccb925,35,8,3,1,10969,Shnaidman Sagi (Sergey),sergsh,"Add tripleo-ansible to required projects in all jobs

In order not to clone it from netowrk.

Change-Id: I5ee348c7196b94e1f7c5acd8e802621837c5bef2
"
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I24dac79f2351a1ffd4e956584a80f623706cbd00,openstack/tripleo-heat-templates,stable/ussuri,1884577/ussuri,I24dac79f2351a1ffd4e956584a80f623706cbd00,Cleanup all container startup configs before generating the new ones,MERGED,2020-06-23 02:21:28.000000000,2020-07-04 04:55:07.000000000,2020-07-04 04:55:06.000000000,11,6,0,737423,de45a1fc61ea89c93a2e1a8d3d2e729c75017362,58,7,5,1,3153,Emilien Macchi,emilienm,"Cleanup all container startup configs before generating the new ones

Unlike the container puppet configs [1], we didn't have a mechanism that
was purging the old configs previously generated by the container
startup config tasks. It's problematic when some leftover configs are
still on the host and not needed anymore.

[1] https://opendev.org/openstack/tripleo-ansible/src/branch/master/tripleo_ansible/ansible_plugins/modules/container_puppet_config.py#L157-L159

Change-Id: I24dac79f2351a1ffd4e956584a80f623706cbd00
Closes-Bug: #1884537
(cherry picked from commit b1d3da8666880d70db9b588ed4b743b2aaaab914)
"
openstack%2Ftripleo-ci~master~Ifcb5b0bdfbc9ffbc76abbd4004b57bd7b0a19fae,openstack/tripleo-ci,master,,Ifcb5b0bdfbc9ffbc76abbd4004b57bd7b0a19fae,make scenario012 voting,MERGED,2020-07-03 18:27:08.000000000,2020-07-04 04:55:05.000000000,2020-07-04 04:55:05.000000000,4,4,0,739273,3ae3f5e7759685199196b741859cb0ce0b5bbee5,9,5,2,1,9592,wes hayutin,weshayutin,"make scenario012 voting

https://zuul.openstack.org/builds?job_name=tripleo-ci-centos-8-scenario012-standalone
Change-Id: Ifcb5b0bdfbc9ffbc76abbd4004b57bd7b0a19fae
"
openstack%2Fdevstack-plugin-ceph~master~I51c90e592070b99422e692d5e9e97083d93146e8,openstack/devstack-plugin-ceph,master,,I51c90e592070b99422e692d5e9e97083d93146e8,Updates script to use latest version of Ceph,MERGED,2019-08-15 15:42:04.000000000,2020-07-04 03:36:16.000000000,2020-07-04 03:35:08.000000000,118,177,50,676722,5bfcd102355d5e1289712452ce6fb240f050d2c6,160,16,42,2,6413,Victoria Martinez de la Cruz,vkmc,"Updates script to use latest version of Ceph

We were using Jewel/Luminous. Being a developer tool, we should
be sticking with newer versions.

This patch set also adds the following changes
- Refactor setup_packages_for_manila_on_<distro> functions
- Removes ceph_init call. Seems it lost relevance
- Removes APT repositories setup. We directly use shaman/chacra
packages directly
- Removes RUN_AS env var. It has been a while since Ceph
defaults to ceph user to run all the services. No longer needed.
- Removes sleep calls for services start checks. We use systemctl
checks.
- Adds more debugging logs
- Uses the search API from ceph shaman instead of hardwiring urls
- Adds the jq (JSON processor) dependency

Change-Id: I51c90e592070b99422e692d5e9e97083d93146e8
"
openstack%2Fopenstack-ansible-os_magnum~stable%2Fussuri~If5b234d43cf9519c523b2b4a1ed1e27978e03fa9,openstack/openstack-ansible-os_magnum,stable/ussuri,osa/el8-stable/ussuri,If5b234d43cf9519c523b2b4a1ed1e27978e03fa9,Add Centos-8 support,MERGED,2020-07-02 17:14:43.000000000,2020-07-04 03:12:34.000000000,2020-07-04 03:11:24.000000000,1,1,0,739105,5b956f8f21bb9ec82e1c73cdf81c6ddf44aebf3a,12,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: If5b234d43cf9519c523b2b4a1ed1e27978e03fa9
(cherry picked from commit 372069994d0abfbca0e88a2cab469c7ad1a74c22)
"
openstack%2Ftripleo-ci~master~I1e5b9f83046bf8dd4471b94010d255c38c81c47a,openstack/tripleo-ci,master,bug/1875746-stable/train,I1e5b9f83046bf8dd4471b94010d255c38c81c47a,add tls-inject to ipa job trigger,MERGED,2020-06-08 14:33:14.000000000,2020-07-04 02:04:37.000000000,2020-07-04 02:04:37.000000000,1,0,0,734100,a4f1e8a1ac55871fa91d67c2d9b9bed368efc6f7,14,6,1,1,9592,wes hayutin,weshayutin,"add tls-inject to ipa job trigger

Related-To: https://review.opendev.org/#/c/724863/
Change-Id: I1e5b9f83046bf8dd4471b94010d255c38c81c47a
"
openstack%2Ftripleo-common~stable%2Frocky~If370d85eead771305705ad798501e3947a1c6f4f,openstack/tripleo-common,stable/rocky,,If370d85eead771305705ad798501e3947a1c6f4f,Bump ceph/daemon container image to v3.2.14,MERGED,2020-06-22 15:59:20.000000000,2020-07-04 02:04:35.000000000,2020-07-04 02:04:35.000000000,3,3,0,737303,bea923b855c68cc5ffff553604c3f4d32f2960be,29,6,1,3,6796,Giulio Fidente,gfidente,"Bump ceph/daemon container image to v3.2.14

Tested via https://review.opendev.org/601598

Change-Id: If370d85eead771305705ad798501e3947a1c6f4f
"
openstack%2Frequirements~master~Ic9ee4d5164b144638c3ea3d4ddc1e6bac86378c0,openstack/requirements,master,bug/1886237,Ic9ee4d5164b144638c3ea3d4ddc1e6bac86378c0,Temporarily cap setuptools<48.0.0,MERGED,2020-07-03 22:26:00.000000000,2020-07-04 01:23:26.000000000,2020-07-04 01:06:08.000000000,2,1,0,739290,ca1eb8dd0ae9c7c7ac149e8b4ff9bbc9630eb43f,11,3,1,1,8556,Ghanshyam,ghanshyam,"Temporarily cap setuptools<48.0.0

with new setuptools 48.0.0, devstack started failing on
 - usr/local/bin/keystone-manage: No such file or directory""

https://zuul.opendev.org/t/openstack/build/55e53d1c37194d8992f79a4090da86ee/log/job-output.txt#10572

It is blocking all the gate for now. We are not sure if that is bug on
setuptools side or it is incompatible change and we need to update devstack
for that but till we figure out that let's use the old setuptools to unblock the gate.

Change-Id: Ic9ee4d5164b144638c3ea3d4ddc1e6bac86378c0
ML: http://lists.openstack.org/pipermail/openstack-discuss/2020-July/015779.html
Related-Bug: #1886237
"
openstack%2Fpuppet-tripleo~stable%2Fussuri~I3bf244a70538209773804eb85fae6be035c587f4,openstack/puppet-tripleo,stable/ussuri,fix-override-stable/ussuri,I3bf244a70538209773804eb85fae6be035c587f4,Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent,MERGED,2020-06-30 13:20:53.000000000,2020-07-04 00:52:34.000000000,2020-07-04 00:52:33.000000000,25,2,0,738617,3a564e7e55e7cfc0e39808e02fd099eeff848495,14,4,2,1,20172,Michele Baldessari,michele,"Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism + Make the additional_erl_args change more independent

In THT we allow RabbitAdditionalErlArgs to set some additional
parameters which should be passed to RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS
when starting rabbit. The problem is that when we use internal tls
that parameter gets ignored and so we lose our default '+sbwt none'.

Let's do this via a proper parameter while also considering the fact
that historically the default value of RabbitAdditionalErlArgs had
apices around it.

Since the original master change had an issue when the THT parameter
was unset (aka when I567839785a72813a382a00253562894e19eb6715 was not
applied to THT), we also add the subsequent fixup ""Make the additional_erl_args
change more independent"" I9fa9ba95410ed3994f608beb2c5e1578dc3a7c7a to
this change)

Change-Id: I3bf244a70538209773804eb85fae6be035c587f4
Related-Bug: #1884922
(cherry picked from commit 4d3864249dc27e033499b8a0855ce095be848a44)
"
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I335b75feb9b01fa0e6a80d24b8c6ea79ca6480f9,openstack/tripleo-heat-templates,stable/train,,I335b75feb9b01fa0e6a80d24b8c6ea79ca6480f9,Fix Error: invalid arguments you must use just one container,MERGED,2020-06-23 10:33:18.000000000,2020-07-04 00:52:32.000000000,2020-07-04 00:52:32.000000000,6,6,0,737486,4ffe8c3cc1b7038e471bffddbc53818ef1813f5e,25,10,2,1,26343,Jose Luis Franco,jfrancoa,"Fix Error: invalid arguments you must use just one container

The podman ps command can return multiple containers, which
might happen during an upgrade, when an old container lingers on.
We want to copy the cert into all of them.

Change-Id: I335b75feb9b01fa0e6a80d24b8c6ea79ca6480f9
Closes-Bug: #1884731
Resolves: rhbz#1849211
(cherry picked from commit d37579fd787185b292b5d547f5ac3cf17dd2fd9e)
"
openstack%2Ftripleo-heat-templates~stable%2Fstein~I9501b802c0a79996864761f2f0ef92df4a3d7c70,openstack/tripleo-heat-templates,stable/stein,,I9501b802c0a79996864761f2f0ef92df4a3d7c70,Fixed package names for CentOS-8 octavia deployment,MERGED,2020-04-23 12:54:12.000000000,2020-07-04 00:45:58.000000000,2020-07-04 00:45:57.000000000,18,7,0,722305,8e6a562b97183cea529d05f8d9487fc5b2c29253,15,6,1,1,6469,Carlos Gonçalves,cgoncalves,"Fixed package names for CentOS-8 octavia deployment

Conflicts:
    deployment/octavia/octavia-worker-container-puppet.yaml

Change-Id: I9501b802c0a79996864761f2f0ef92df4a3d7c70
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
(cherry picked from commit 0e80f600ac1b071ce1eba132a02be9fc7f79d711)
(cherry picked from commit b95d78df81f07ca16cbf685af8ffbc54b353ff89)
"
openstack%2Ftripleo-common~master~I19b1dda0d10765651ad61682d0783f9253873063,openstack/tripleo-common,master,tripleo-octavia-ovn,I19b1dda0d10765651ad61682d0783f9253873063,Fix OVN Octavia provider driver package name,MERGED,2020-05-14 17:18:57.000000000,2020-07-03 23:43:46.000000000,2020-07-03 23:42:19.000000000,1,1,0,728155,3c8f2144854284ee891759cb40511e2e043ef526,26,8,2,1,6469,Carlos Gonçalves,cgoncalves,"Fix OVN Octavia provider driver package name

In Ussuri cycle, the OVN Octavia provider driver moved out
of the networking-ovn RPM to its own RPM.

Change-Id: I19b1dda0d10765651ad61682d0783f9253873063
"
openstack%2Ftripleo-quickstart~master~Iddc2e7ba0ffbb85231f7ec4bafe9f3c27918456b,openstack/tripleo-quickstart,master,fix-wait,Iddc2e7ba0ffbb85231f7ec4bafe9f3c27918456b,Fix 'System is booting up' error on undercloud,MERGED,2020-06-30 09:13:52.000000000,2020-07-03 23:43:38.000000000,2020-07-03 23:42:23.000000000,9,0,3,738570,9fe3f82bcf9933cd7aba6b4a0fee90f69d4a96e0,19,6,5,1,20172,Michele Baldessari,michele,"Fix 'System is booting up' error on undercloud

When running oooq from master I constantly hit the following error:
PLAY [Create the virtual BMC]
TASK [Gathering Facts]

task path: /tmp/bruce-ha/hab-03.ha.lab.eng.bos.redhat.com/run/playbooks/quickstart.yml:67
Tuesday 30 June 2020  03:33:53 -0400 (0:00:00.030)       0:07:39.141 **********
...
<undercloud> ssh_retry: attempt: 3, ssh return code is 255. cmd (['ssh', '-F', '/tmp/bruce-ha/hab-03.ha.lab.eng.bos.redhat.com/run/ssh.config.ansible', '-o', 'StrictHostKeyChecking=no', '-o', 'IdentityFile=""/tmp
/bruce-ha/hab-03.ha.lab.eng.bos.redhat.com/run/id_rsa_undercloud""', '-o', 'KbdInteractiveAuthentication=no', '-o', 'PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey', '-o', 'PasswordAuth
entication=no', '-o', 'User=""stack""', '-o', 'ConnectTimeout=10', '-F', '/tmp/bruce-ha/hab-03.ha.lab.eng.bos.redhat.com/run/ssh.config.ansible', 'undercloud', ""/bin/sh -c '/usr/bin/python3 && sleep 0'""]...), paus
ing for 3 seconds
fatal: [undercloud]: UNREACHABLE! => {
    ""changed"": false,
    ""unreachable"": true
}

MSG:

Data could not be sent to remote host ""undercloud"". Make sure this host can be reached over ssh: Warning: Permanently added 'undercloud' (ECDSA) to the list of known hosts. ""System is booting up. Unprivileged users are not permitted to log in yet. Please come back later. For technical details, see pam_nologin(8)."" Authentication failed.

The reason is that we run gather_facts on the undercloud vm, but we are
not really 100% guaranteed that it is up and accessible just yet.
Let's make sure that is the case before proceeding.

Tested this and now I correctly pass the problematic step.

Change-Id: Iddc2e7ba0ffbb85231f7ec4bafe9f3c27918456b
"
openstack%2Ftripleo-heat-templates~master~I36b4f4abaa2e67448783d4fbaf8864d16656baf2,openstack/tripleo-heat-templates,master,bug/1884048,I36b4f4abaa2e67448783d4fbaf8864d16656baf2,Log neutron.cmd.destroy_patch_ports in to log file,MERGED,2020-06-22 09:31:41.000000000,2020-07-03 23:42:21.000000000,2020-07-03 23:42:21.000000000,14,2,0,737244,554844d32045e3a774a3e90bbd26812aecd92b50,21,8,1,1,6926,Bogdan Dobrelya,bogdando,"Log neutron.cmd.destroy_patch_ports in to log file

Align the logging arguments to be used consistently
with the script and the main agent command invoked in the container.

Change-Id: I36b4f4abaa2e67448783d4fbaf8864d16656baf2
Related-bug: #1884048
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
"
openstack%2Fvalidations-common~master~I3f6082971277f3ff0011baf4b03166736076ed05,openstack/validations-common,master,callback/duration,I3f6082971277f3ff0011baf4b03166736076ed05,Output duration not only on failed and skipped states,MERGED,2020-07-02 09:41:02.000000000,2020-07-03 23:42:17.000000000,2020-07-03 23:42:17.000000000,6,7,0,739004,c25c009e4e3d972d30e7c9c3b919b4b74b6cb535,8,3,1,1,16515,mbu,matbu,"Output duration not only on failed and skipped states

Wirte duration (end and elapse_time) on not only failed and
skipped status

Change-Id: I3f6082971277f3ff0011baf4b03166736076ed05
"
openstack%2Ftripleo-quickstart~master~Ib4fbf430ed3a7f0ff5831986ec67c8fff7d0a69e,openstack/tripleo-quickstart,master,bug/1881742,Ib4fbf430ed3a7f0ff5831986ec67c8fff7d0a69e,Ignore failures in dnf when no repos are configured,MERGED,2020-06-26 08:03:12.000000000,2020-07-03 23:00:55.000000000,2020-07-03 22:59:10.000000000,7,7,0,738158,59f6d3cb74fd94aa75677701757f50e9f1992c85,12,6,1,7,13861,yatin,yatinkarel,"Ignore failures in dnf when no repos are configured

dnf config-manager --disable fails when no repos are
configured. The issue is seen when centos7 repos is
cleaned in CentOS8 with [1].

[1] https://review.opendev.org/#/c/732618/

Related-Bug: #1881742
Change-Id: Ib4fbf430ed3a7f0ff5831986ec67c8fff7d0a69e
"
openstack%2Fopenstack-ansible-os_rally~stable%2Fussuri~I5ed1c5145a38becd92de2842417cd6e4774b7bf9,openstack/openstack-ansible-os_rally,stable/ussuri,osa-focal-stable/ussuri,I5ed1c5145a38becd92de2842417cd6e4774b7bf9,Do not install development packages on the target,MERGED,2020-06-30 16:52:37.000000000,2020-07-03 22:59:18.000000000,2020-07-03 22:57:46.000000000,3,16,0,738676,b1d866a56aa58a4e6b2816bfc18aed4047526cff,16,3,1,3,25023,Jonathan Rosser,jrosser,"Do not install development packages on the target

This role currently passes a list of -dev packages to the
python_venv_build role which will install them on the target
rather than use them for building wheels on the repo server.

This patch removes those package installs and if any specific
dev packages are required they should instead be passed to
python_venv_build via venv_build_distro_package_list.

Change-Id: I5ed1c5145a38becd92de2842417cd6e4774b7bf9
(cherry picked from commit dc7e520b81e99e4c102a1544aa7ea739b2cec5d1)
"
openstack%2Fopenstack-ansible-tests~stable%2Fussuri~I29869ee24fe7148c6dce7ed8e149c3960b2f82ec,openstack/openstack-ansible-tests,stable/ussuri,osa/el8-stable/ussuri,I29869ee24fe7148c6dce7ed8e149c3960b2f82ec,Do not set alternatives before package is present,MERGED,2020-06-27 11:55:40.000000000,2020-07-03 22:50:31.000000000,2020-07-03 22:49:19.000000000,3,1,0,738309,9addf6d5cd037b1baf6f01d3f11dc49eae5b25b7,10,3,1,1,25023,Jonathan Rosser,jrosser,"Do not set alternatives before package is present

Change-Id: I29869ee24fe7148c6dce7ed8e149c3960b2f82ec
(cherry picked from commit f7285bd25627644af0d7b2e2ca6691319e520b00)
"
openstack%2Fopenstack-ansible-lxc_container_create~stable%2Fussuri~I13605f21497c7eb8e2dd569ab90e2466bce8ac3e,openstack/openstack-ansible-lxc_container_create,stable/ussuri,,I13605f21497c7eb8e2dd569ab90e2466bce8ac3e,Fix tmpfiles-setup wait handler,MERGED,2020-07-02 14:59:12.000000000,2020-07-03 22:38:27.000000000,2020-07-03 22:36:47.000000000,2,2,0,739067,594d6bc9c428ea96de82b8dc689709bccc7f96ad,8,3,1,2,25023,Jonathan Rosser,jrosser,"Fix tmpfiles-setup wait handler

Precess column was present only for CentOS 8 and is not applicable for
other distros. In the meanwhile Active column is present in all distros.

Change-Id: I13605f21497c7eb8e2dd569ab90e2466bce8ac3e
(cherry picked from commit faedebd48b7cc5c91f40380df4ae8e8b40d0081c)
"
openstack%2Fopenstack-ansible-haproxy_server~stable%2Fussuri~Ica5ed5de24e3eb2fb5a743bb877d113ed0bb8a43,openstack/openstack-ansible-haproxy_server,stable/ussuri,,Ica5ed5de24e3eb2fb5a743bb877d113ed0bb8a43,Ensure there is no race between haproxy and certbot for initial cert,MERGED,2020-07-03 17:57:29.000000000,2020-07-03 22:26:27.000000000,2020-07-03 22:25:15.000000000,4,1,0,739269,8a9d35fa959f1fd30a5296c2e893866bd9d0c382,8,3,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Ensure there is no race between haproxy and certbot for initial cert

The certbot pre-hook is not used during initial setup of the cert,
only during renewal. This means that the same race condition exists
at initial configiuration as renewal. This patch uses the same
approach as used in the renewal pre-hook and applies it during
initialisation of certbot. This fixes race condition related failures
during initial provisioning of haproxy+letsencrypt.

Change-Id: Ica5ed5de24e3eb2fb5a743bb877d113ed0bb8a43
(cherry picked from commit 5fba658296634c9f32581c965c8510ff6cdf2b90)
"
openstack%2Fpython-tripleoclient~stable%2Fussuri~I3ecdebc61601badd2f209982b366f6b99ec1bb18,openstack/python-tripleoclient,stable/ussuri,create-ussuri,I3ecdebc61601badd2f209982b366f6b99ec1bb18,Update TOX_CONSTRAINTS_FILE for stable/ussuri,MERGED,2020-05-21 15:58:51.000000000,2020-07-03 21:30:28.000000000,2020-07-03 21:28:53.000000000,3,3,0,730006,4d95519874d22cbb0f7d9d7b81b009f0f25ed873,15,4,2,1,22816,OpenStack Release Bot,release,"Update TOX_CONSTRAINTS_FILE for stable/ussuri

Update the URL to the upper-constraints file to point to the redirect
rule on releases.openstack.org so that anyone working on this branch
will switch to the correct upper-constraints list automatically when
the requirements repository branches.

Until the requirements repository has as stable/ussuri branch, tests will
continue to use the upper-constraints list on master.

Change-Id: I3ecdebc61601badd2f209982b366f6b99ec1bb18
"
openstack%2Fneutron~master~I3bfa6e7c40b205e8aaa3e6976bf7cd02a25b0dcd,openstack/neutron,master,george,I3bfa6e7c40b205e8aaa3e6976bf7cd02a25b0dcd,[DNM] Add Environment class and RabbitMQ support to George,ABANDONED,2020-02-07 12:18:37.000000000,2020-07-03 21:09:14.000000000,,72,17,1,706481,c584a664089f6fb35db14228fd77c4ee948b2961,5,3,1,3,16688,Rodolfo Alonso,rodolfo-alonso-hernandez,"[DNM] Add Environment class and RabbitMQ support to George

Added Environment class to George, to handle the host config.
Configured RabbitMQ configuration in host and added support in Neutron
server.

Change-Id: I3bfa6e7c40b205e8aaa3e6976bf7cd02a25b0dcd
"
openstack%2Ftripleo-common~master~I1fcf0aa3212d037db7c4d9baed18959ed6a0cc81,openstack/tripleo-common,master,callback-improvement,I1fcf0aa3212d037db7c4d9baed18959ed6a0cc81,Fix stdout_callback,MERGED,2020-06-17 14:09:03.000000000,2020-07-03 20:52:25.000000000,2020-07-03 20:50:35.000000000,1,1,0,736227,ed3fdb77645ec3d563cd49161423661d21a3f642,70,6,2,1,14985,Alex Schultz,mwhahaha,"Fix stdout_callback

We switched to tripleo_dense but the default ansible.cfg that is created
still has tripleo.

Change-Id: I1fcf0aa3212d037db7c4d9baed18959ed6a0cc81
"
openstack%2Ftripleo-heat-templates~master~Ib5f9081629d6aa5fdbac8bd733f86db0e1b9f7b5,openstack/tripleo-heat-templates,master,debug,Ib5f9081629d6aa5fdbac8bd733f86db0e1b9f7b5,DNM - debug,ABANDONED,2020-06-29 13:08:29.000000000,2020-07-03 20:49:46.000000000,,3,3,0,738440,b28249b9afaf082ed4845d94fe8ed81dcac366d7,7,3,1,3,3153,Emilien Macchi,emilienm,"DNM - debug

Change-Id: Ib5f9081629d6aa5fdbac8bd733f86db0e1b9f7b5
"
openstack%2Ftripleo-common~stable%2Fussuri~I6a98140b7df8d3460ff8ec54f8b7a0d5abbef515,openstack/tripleo-common,stable/ussuri,ffwd-upgrade2-stable/ussuri,I6a98140b7df8d3460ff8ec54f8b7a0d5abbef515,[Q->T] Include manila in the Queens to Train Upgrade,MERGED,2020-06-24 13:14:05.000000000,2020-07-03 20:43:10.000000000,2020-07-03 20:15:15.000000000,7,0,0,737774,700888b9f4a92e78b7cbb3efcff06adb184ff924,49,11,3,1,6796,Giulio Fidente,gfidente,"[Q->T] Include manila in the Queens to Train Upgrade

In order to do Q->T upgrade when manila is deployed, we
need the Stein container image available.

We check for namespace_stein and if it's defined we provide
them as done for the other services in
I8820293bd1c7f83c00e7abba88181895ef987765

Change-Id: I6a98140b7df8d3460ff8ec54f8b7a0d5abbef515
Related-bz: #1849098
Partial-bug: #1884818
(cherry picked from 55f6aecf6f43e4a16cdbc9da520ec7accc278aa2)
"
openstack%2Ftripleo-common~master~I29d3a2ed0bdfce412ebef549c29053754763e555,openstack/tripleo-common,master,fix-nss,I29d3a2ed0bdfce412ebef549c29053754763e555,Drop systemd support from nsswitch.conf,MERGED,2020-06-17 08:40:40.000000000,2020-07-03 20:39:24.000000000,2020-07-03 20:33:02.000000000,1,0,0,736134,db71bdb684ac347cd2f915a39e7e99a95958606c,37,8,4,1,20172,Michele Baldessari,michele,"Drop systemd support from nsswitch.conf

A bit like we did for I3e0e86026f5a4a78473bed824cd1682d3a020cd5 we
should remove the nss-systemd lookup from containers. The reasons for
this are as follows:
1) Just like for I3e0e86026f5a4a78473bed824cd1682d3a020cd5
when this nss module is triggered it tries to talk to dbus.
It triggers a bunch of selinux denials and it makes little sense
to open all containers to talk to dbus.
In particular, if a container is run as non-privileged and bind-mounts
/run from the host, we will hit selinux denials like the following:

  type=USER_AVC msg=audit(1592337775.860:74119): pid=1284 uid=81 auid=4294967295 ses=4294967295 subj=system_u:system_r:system_dbusd_t:s0-s0:c0.c1023 msg='avc:  denied  { send_msg } for msgtype=method_call interface=org.freedesktop.DBus member=Hello dest=org.freedesktop.DBus spid=406228 scontext=system_u:system_r:container_t:s0:c162,c886 tcontext=system_u:system_r:system_dbusd_t:s0-s0:c0.c1023 tclass=dbus permissive=0  exe=""/usr/bin/dbus-daemon"" sauid=81 hostname=? addr=? terminal=?'UID=""dbus"" AUID=""unset"" SAUID=""dbus""

2) It just makes little sense in a kolla-world to have containers
talk to dbus/systemd and it saves us some time when a lookup triggers
the systemd module for whatever reason. Especially because the
nss-systemd module does a few things which are not useful in a container
(ensures that the root and nobody users and groups remain resolvable,
SystemD's DynamicUser= feature, provide Lookup API via Varlink)

The sed regex gives us the wanted results:
$ diff -u /etc/nsswitch.conf.orig /etc/nsswitch.conf
--- /etc/nsswitch.conf.orig     2020-06-17 08:13:20.108520894 +0000
+++ /etc/nsswitch.conf  2020-06-17 08:13:27.627069541 +0000
@@ -19,8 +19,8 @@
 #     passwd: sss files # from profile
 #     hosts: files dns  # from user file

-passwd:     sss files systemd
-group:      sss files systemd
+passwd:     sss files
+group:      sss files
 netgroup:   sss files
 automount:  sss files
 services:   sss files

NB: This is the tcib versionb of the kolla change at I81e5b7abf4571fece13a029e25911e9e4dece673
Related-Bug: #1883849

Change-Id: I29d3a2ed0bdfce412ebef549c29053754763e555
"
openstack%2Ftripleo-common~master~I28d2edd4f923fb2d263df43fff4ef82a4072040c,openstack/tripleo-common,master,ci/standalone/containers,I28d2edd4f923fb2d263df43fff4ef82a4072040c,Run standalone jobs with locally built images,MERGED,2020-06-03 19:41:42.000000000,2020-07-03 20:37:10.000000000,2020-07-03 20:32:58.000000000,24,0,0,733388,679aeb568f37d4d883d3613b4133c158521a08c1,92,9,19,1,3153,Emilien Macchi,emilienm,"Run standalone jobs with locally built images

Instead of pulling images from a local registry, build them locally
since the configs that build them are in tripleo-common.

Also trigger the appropriate scenarios if a container config is changed.

Note: this patch will make all standalone jobs running against
tripleo-common to use locally built container images, even if the patch
isn't about a container image config file. It has been found that the
time to build images is roughly the same as the time it takes to update
them once pulled from a remote registry.

Note: scenario001/002 will come later once we figure out an issue with
gnocchi-db-sync and cradox.

Depends-On: https://review.opendev.org/729465
Change-Id: I28d2edd4f923fb2d263df43fff4ef82a4072040c
"
openstack%2Ftripleo-common~master~Id13028ab911ba91d67787ca8247effc02017fcbc,openstack/tripleo-common,master,images/new,Id13028ab911ba91d67787ca8247effc02017fcbc,tcib: move cradox to gnocchi-base & enable ci on scenario001,MERGED,2020-06-10 15:10:35.000000000,2020-07-03 20:33:00.000000000,2020-07-03 20:33:00.000000000,19,6,0,734872,7ecc263401018ec657e3423edcd9974bd8a2754f,52,6,9,3,3153,Emilien Macchi,emilienm,"tcib: move cradox to gnocchi-base & enable ci on scenario001

gnocchi-db-sync requires cradox to be installed if RBD backend is used.
Until we fix it properly in the distgit, let's make sure cradox is in
the base image for gnocchi. It also requires httpd and deps for the
dv_sync to operate when Ceph is installed.

With that patch, we can now test container builds on scenario001.

Change-Id: Id13028ab911ba91d67787ca8247effc02017fcbc
"
openstack%2Fopenstack-ansible-openstack_hosts~stable%2Fussuri~I028dce38a4b7dbdd3683b4ad07bd2f5cd19ed1b5,openstack/openstack-ansible-openstack_hosts,stable/ussuri,osa/el8-stable/ussuri,I028dce38a4b7dbdd3683b4ad07bd2f5cd19ed1b5,Enable PowerTools repository for distro installs,MERGED,2020-07-02 17:16:07.000000000,2020-07-03 20:26:05.000000000,2020-07-03 20:23:29.000000000,10,0,0,739117,714bdd389abda775caa3a9e2a5186fc997c4abf2,9,3,2,2,28619,Dmitriy Rabotyagov,noonedeadpunk,"Enable PowerTools repository for distro installs

RDO repo relies on some libraties that are present in PowerTools
repository. This repo exists in base image, however is disabled.
From the other side, zuul adds this repo with base jobs and enable it
in CI by default.
So not to deal with getting right URL and etc, we're just running command

Change-Id: I028dce38a4b7dbdd3683b4ad07bd2f5cd19ed1b5
(cherry picked from commit 5f6362fa5c2abc7e038706dd53a9f858608f6c39)
"
openstack%2Fopenstack-ansible-openstack_hosts~stable%2Fussuri~I0bbe42a86a0fc37700e789584acae564297e0bc8,openstack/openstack-ansible-openstack_hosts,stable/ussuri,,I0bbe42a86a0fc37700e789584acae564297e0bc8,Fix CentOS functional test,MERGED,2020-07-02 17:17:56.000000000,2020-07-03 20:24:50.000000000,2020-07-03 20:23:29.000000000,13,28,0,739121,ccece14576f8d94b5a6bc469c5ee28799f930dce,8,3,1,3,28619,Dmitriy Rabotyagov,noonedeadpunk,"Fix CentOS functional test

Change-Id: I0bbe42a86a0fc37700e789584acae564297e0bc8
(cherry picked from commit 002362ba6b2e53ad1bdbbc1aa1d4539090416adf)
"
openstack%2Ftripleo-heat-templates~master~I335b75feb9b01fa0e6a80d24b8c6ea79ca6480f9,openstack/tripleo-heat-templates,master,,I335b75feb9b01fa0e6a80d24b8c6ea79ca6480f9,Fix Error: invalid arguments you must use just one container,MERGED,2020-06-22 10:13:11.000000000,2020-07-03 20:15:16.000000000,2020-07-03 20:15:16.000000000,6,6,9,737249,d37579fd787185b292b5d547f5ac3cf17dd2fd9e,51,13,2,1,14250,Grzegorz Grasza,xek,"Fix Error: invalid arguments you must use just one container

The podman ps command can return multiple containers, which
might happen during an upgrade, when an old container lingers on.
We want to copy the cert into all of them.

Change-Id: I335b75feb9b01fa0e6a80d24b8c6ea79ca6480f9
Closes-Bug: #1884731
Resolves: rhbz#1849211
"
openstack%2Ftripleo-heat-templates~master~I24dac79f2351a1ffd4e956584a80f623706cbd00,openstack/tripleo-heat-templates,master,bug/1884577,I24dac79f2351a1ffd4e956584a80f623706cbd00,Cleanup all container startup configs before generating the new ones,MERGED,2020-06-22 17:44:24.000000000,2020-07-03 20:15:12.000000000,2020-07-03 20:15:12.000000000,11,6,0,737337,88446a6d890a941fc8e52d8bf1db87397a11ce61,51,9,4,1,3153,Emilien Macchi,emilienm,"Cleanup all container startup configs before generating the new ones

Unlike the container puppet configs [1], we didn't have a mechanism that
was purging the old configs previously generated by the container
startup config tasks. It's problematic when some leftover configs are
still on the host and not needed anymore.

[1] https://opendev.org/openstack/tripleo-ansible/src/branch/master/tripleo_ansible/ansible_plugins/modules/container_puppet_config.py#L157-L159

Change-Id: I24dac79f2351a1ffd4e956584a80f623706cbd00
Closes-Bug: #1884537
"
openstack%2Fmanila~master~Ifd5ada2b467994b9b8efca5016a7c746ab704719,openstack/manila,master,api_ref_migration_typo,Ifd5ada2b467994b9b8efca5016a7c746ab704719,[api-ref] fix typo,MERGED,2020-07-03 15:33:56.000000000,2020-07-03 20:08:43.000000000,2020-07-03 20:07:14.000000000,1,1,0,739257,1660385588498f8b478aae2230402fae13c0d78a,12,8,1,1,18816,Maurice Escher,mapocace,"[api-ref] fix typo

Change-Id: Ifd5ada2b467994b9b8efca5016a7c746ab704719
"
openstack%2Ftripleo-ansible~master~Idf3aa518087443254e565dd01da88f6f41e83fd9,openstack/tripleo-ansible,master,stat_healthcheck/plugin,Idf3aa518087443254e565dd01da88f6f41e83fd9,container_systemd: manage the cleanup of old healthchecks,ABANDONED,2020-07-03 16:48:41.000000000,2020-07-03 20:07:05.000000000,,60,112,0,739264,8e73781028239c09231736f10264d7d656123458,4,0,3,6,3153,Emilien Macchi,emilienm,"container_systemd: manage the cleanup of old healthchecks

Still to reduce the number of Ansible tasks, let's add the cleanup of
the healthchecks in Python via the action plugin.

Change-Id: Idf3aa518087443254e565dd01da88f6f41e83fd9
"
openstack%2Fopenstack-ansible-memcached_server~stable%2Ftrain~I7db0eb361fc6f09ce64690be2018bf8ed8204e0c,openstack/openstack-ansible-memcached_server,stable/train,,I7db0eb361fc6f09ce64690be2018bf8ed8204e0c,Reduce verbosity level when debug is true,MERGED,2020-06-17 12:24:11.000000000,2020-07-03 19:34:44.000000000,2020-07-03 19:32:49.000000000,4,4,0,736180,908b2e2b6b46ae995edf1d4d4b11524c3b7d97ad,10,3,1,4,25023,Jonathan Rosser,jrosser,"Reduce verbosity level when debug is true

Keystone is experiencing memecached timeouts during tempest tests in
CI, and the memcached log is in excess of 20Mbytes. There will be a lot
of write pressure on this log during tempest tests and this patch reduces
the debug log level in an attempt to increase test reliability.

Change-Id: I7db0eb361fc6f09ce64690be2018bf8ed8204e0c
(cherry picked from commit 5080c42f0ad7c58ba9101948207c4d8633ad1e00)
"
openstack%2Ftripleo-ansible~master~I501f31b52db6e10826bd9a346d38e34f95ae8b75,openstack/tripleo-ansible,master,container/configs,I501f31b52db6e10826bd9a346d38e34f95ae8b75,Implement container_startup_config module,MERGED,2020-06-23 20:45:02.000000000,2020-07-03 19:34:20.000000000,2020-07-02 18:04:49.000000000,271,15,15,737624,76bb50476247f367c85d0e8a64dabebb6da1ee4c,51,6,19,8,3153,Emilien Macchi,emilienm,"Implement container_startup_config module

container_startup_config will replace a bunch of tasks that we did in
THT to generate the .json file for each container in
/var/lib/tripleo-config/container-startup-config.

It'll accelerate a bit the deployment by replacing tasks into a
single module, so we can generate the startup configs much faster.

Also tolerate empty configs in container_config_data, switching a
failure into a debug. If the config is empty, there is no need to run
the rest of the role tasks in tripleo_container_manage.

Note: we manage the SElinux context at the openstack-selinux:
https://github.com/redhat-openstack/openstack-selinux/commit/0b62

TODO (later): Manage idempotency and only create configs that need to be
updated.

Change-Id: I501f31b52db6e10826bd9a346d38e34f95ae8b75
"
openstack%2Ftripleo-ansible~master~Ib34b7abac9065a460b7568988c90600304c14117,openstack/tripleo-ansible,master,,Ib34b7abac9065a460b7568988c90600304c14117,"Revert ""move undercloud-containers to nv""",MERGED,2020-07-03 15:29:28.000000000,2020-07-03 19:31:36.000000000,2020-07-03 19:31:36.000000000,1,1,0,739256,894277034ec42f6f83a4501cbd042476cc12e657,7,4,1,1,3153,Emilien Macchi,emilienm,"Revert ""move undercloud-containers to nv""

This reverts commit 9f176285c7d6fa7c8c214806fffc0a28c0112b96.

Change-Id: Ib34b7abac9065a460b7568988c90600304c14117
"
openstack%2Fansible-role-uwsgi~stable%2Fussuri~Ie1fb51bf019db1527c6eb6e74c5c8ab6589764e2,openstack/ansible-role-uwsgi,stable/ussuri,osa/el8-stable/ussuri,Ie1fb51bf019db1527c6eb6e74c5c8ab6589764e2,Add Centos-8 support,MERGED,2020-07-02 17:14:31.000000000,2020-07-03 19:14:18.000000000,2020-07-03 19:13:03.000000000,1,1,0,739104,7912bcb4eed5487f21aa46ca4764eed657691fab,9,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: Ie1fb51bf019db1527c6eb6e74c5c8ab6589764e2
(cherry picked from commit aad1a016968af473b81c66c36b74f9a5fe3e9751)
"
openstack%2Fopenstack-ansible-os_barbican~stable%2Fussuri~Ic01d966160b2a95fc4047ead5a9c3e50f68ae1d1,openstack/openstack-ansible-os_barbican,stable/ussuri,osa/el8-stable/ussuri,Ic01d966160b2a95fc4047ead5a9c3e50f68ae1d1,Add Centos-8 support,MERGED,2020-07-02 17:15:49.000000000,2020-07-03 19:13:06.000000000,2020-07-03 19:11:36.000000000,2,2,0,739115,fb8f9ecded0f6ee779de01f2091ed18342c8f567,8,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: Ic01d966160b2a95fc4047ead5a9c3e50f68ae1d1
(cherry picked from commit d61db1e68b77a1d7d9752af22efe990a2f12516e)
"
openstack%2Fopenstack-ansible-os_placement~stable%2Fussuri~I36a0de736e266f53be1be02c4b07e741b46c819e,openstack/openstack-ansible-os_placement,stable/ussuri,osa/el8-stable/ussuri,I36a0de736e266f53be1be02c4b07e741b46c819e,Add Centos-8 support,MERGED,2020-07-02 17:15:03.000000000,2020-07-03 19:12:31.000000000,2020-07-03 19:11:13.000000000,1,1,0,739113,70de4e9fa2fa1f97abcdf89ff3be2441983bd1e6,8,3,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: I36a0de736e266f53be1be02c4b07e741b46c819e
(cherry picked from commit 5bf27c4653ca9392f376a1fa0af7f328371826dc)
"
openstack%2Ftempest~master~I59383505989705d35d86b19b5c1aaafebd2bd307,openstack/tempest,master,bug/1886212,I59383505989705d35d86b19b5c1aaafebd2bd307,Fix pdf-doc build by skiping the sample file,MERGED,2020-07-03 16:28:26.000000000,2020-07-03 18:47:44.000000000,2020-07-03 18:46:09.000000000,3,1,0,739262,aaaafbb5b8ab04b6f1c6e8a7f1c1df2044984470,8,3,1,1,8556,Ghanshyam,ghanshyam,"Fix pdf-doc build by skiping the sample file

Tempest pdf doc build includes the sample config
file which is large in size and end up with
error 'Dimension too large'

- https://zuul.opendev.org/t/openstack/build/84d73ec987d04c05acc54b231d33067e/log/sphinx-build-pdf.log#1874

Its happening while adding new config option in
https://review.opendev.org/#/c/686073/ which means we
are at the edge of pdf build limit.

We should not include the sample config file as part
of pdf build.

Change-Id: I59383505989705d35d86b19b5c1aaafebd2bd307
Closes-Bug: #1886212
"
openstack%2Frequirements~master~Ib3bb4934ab3b8bd7d4fd07bce46dfca4550d0d78,openstack/requirements,master,ensure-pip,Ib3bb4934ab3b8bd7d4fd07bce46dfca4550d0d78,DNM: Test propose-updates fix,ABANDONED,2020-07-03 18:43:58.000000000,2020-07-03 18:46:40.000000000,,5,65,0,739276,300c164814b08a2a9c3410d7e48fc85dfb34a66b,3,1,1,1,11904,Sean McGinnis,SeanM,"DNM: Test propose-updates fix

Depends-on: https://review.opendev.org/738926/

Change-Id: Ib3bb4934ab3b8bd7d4fd07bce46dfca4550d0d78
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
"
openstack%2Fglance~master~I5c32a049e3c8c84777ea4a01e04d1416881bfb5c,openstack/glance,master,unittest.mock,I5c32a049e3c8c84777ea4a01e04d1416881bfb5c,Use unittest.mock instead of mock,MERGED,2020-06-08 22:10:27.000000000,2020-07-03 18:29:50.000000000,2020-07-03 18:27:53.000000000,4,4,5,734337,7ff8d2eb71ed2fbcb497100f06d944c8d151a61c,14,4,2,4,28522,Hervé Beraud,hberaud,"Use unittest.mock instead of mock

The mock third party library was needed for mock support in py2
runtimes. Since we now only support py36 and later, we can use the
standard lib unittest.mock module instead.

Change-Id: I5c32a049e3c8c84777ea4a01e04d1416881bfb5c
"
openstack%2Fopenstack-ansible-lxc_container_create~stable%2Fussuri~I67b334c6ec173460ce3a2bcec0e5c083c4deee6b,openstack/openstack-ansible-lxc_container_create,stable/ussuri,osa/el8-stable/ussuri,I67b334c6ec173460ce3a2bcec0e5c083c4deee6b,Add Centos-8 support,MERGED,2020-07-02 17:16:21.000000000,2020-07-03 18:12:23.000000000,2020-07-03 18:10:46.000000000,34,0,0,739118,f55e4eec6e2652d724dceb1a40d2fc80a19fa907,8,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: I67b334c6ec173460ce3a2bcec0e5c083c4deee6b
(cherry picked from commit 044dabe43565cff4b9d8c0b0eb23175e67897aa4)
"
openstack%2Fopenstack-ansible-plugins~stable%2Fstein~Ic50763f9c74746ef94925a4dd52d16e1f313711b,openstack/openstack-ansible-plugins,stable/stein,,Ic50763f9c74746ef94925a4dd52d16e1f313711b,Optimise linear strategy access to physical host variables,MERGED,2020-06-25 10:52:49.000000000,2020-07-03 18:11:16.000000000,2020-07-03 18:09:19.000000000,2,2,0,737965,f3efb647e3f48d40627a1dd81045ae6db6bb68b8,10,3,1,2,25023,Jonathan Rosser,jrosser,"Optimise linear strategy access to physical host variables

Change from using variable manager to the var we already have for
the physical host. This saves nearly 50% time for re-running
playbooks/lxc-container-create.yml

Change-Id: Ic50763f9c74746ef94925a4dd52d16e1f313711b
(cherry picked from commit 871d91cf26bcb95e10ed8805331be31e335afa14)
"
openstack%2Fdevstack~master~If38ba72c45f14cb4549b705af89e99c9f97c074c,openstack/devstack,master,,If38ba72c45f14cb4549b705af89e99c9f97c074c,Set full path in Tempest's img_file option,ABANDONED,2020-07-03 18:06:00.000000000,2020-07-03 18:10:00.000000000,,1,2,0,739270,cc301c4ba56a780766c0b3393adf5306bdd82759,3,1,1,1,8556,Ghanshyam,ghanshyam,"Set full path in Tempest's img_file option

Tempest is giving the new option to provide
the full path for image in img_file and planing
to remove the img_dir config option(depends on).

Depends-On: https://review.opendev.org/#/c/710996/
Change-Id: If38ba72c45f14cb4549b705af89e99c9f97c074c
"
openstack%2Fopenstack-ansible-lxc_hosts~stable%2Fussuri~I0d82c76a35b0512a1366c55e06cde72f6b2ce3bd,openstack/openstack-ansible-lxc_hosts,stable/ussuri,,I0d82c76a35b0512a1366c55e06cde72f6b2ce3bd,Do not install python2 or its dev package on Ubuntu Bionic hosts,MERGED,2020-06-30 13:02:16.000000000,2020-07-03 18:02:48.000000000,2020-07-03 17:58:04.000000000,0,2,0,738607,31ceae627e161b463ec20a055988d8f8e3ebaca2,8,3,1,1,25023,Jonathan Rosser,jrosser,"Do not install python2 or its dev package on Ubuntu Bionic hosts

The CI images are now the 'plain' variants so we do not need python2
to be installed on the host

Change-Id: I0d82c76a35b0512a1366c55e06cde72f6b2ce3bd
(cherry picked from commit 3f015e6fed9adf44b96d8d6ccaaceaa881ab0295)
"
openstack%2Fopenstack-ansible-lxc_hosts~stable%2Fussuri~Ib03ea09fa5b4d4b6b3d5ca38a0a6c5cf67eb1df4,openstack/openstack-ansible-lxc_hosts,stable/ussuri,osa/el8-stable/ussuri,Ib03ea09fa5b4d4b6b3d5ca38a0a6c5cf67eb1df4,Remove machinectl from LXC cache prep,MERGED,2020-07-02 17:15:37.000000000,2020-07-03 18:00:13.000000000,2020-07-03 17:55:20.000000000,117,523,0,739114,099e06785de89ea0778f4827bce9344f75f7e8d3,8,3,1,14,28619,Dmitriy Rabotyagov,noonedeadpunk,"Remove machinectl from LXC cache prep

machinectl is only used to store the image during
initial cache preparation and is unrelated to the
backing store used by LXC.

This patch removes the use of machinectl and btrfs
which makes the lxc_hosts role portable to centos-8
which does not have btrfs

Change-Id: Ib03ea09fa5b4d4b6b3d5ca38a0a6c5cf67eb1df4
(cherry picked from commit da4f62b006177d67d9f5089938b27482d70acfb0)
"
openstack%2Fopenstack-ansible-haproxy_server~master~Ica5ed5de24e3eb2fb5a743bb877d113ed0bb8a43,openstack/openstack-ansible-haproxy_server,master,,Ica5ed5de24e3eb2fb5a743bb877d113ed0bb8a43,Ensure there is no race between haproxy and certbot for initial cert,MERGED,2020-06-08 15:07:24.000000000,2020-07-03 17:59:38.000000000,2020-07-03 17:57:10.000000000,4,1,0,734116,5fba658296634c9f32581c965c8510ff6cdf2b90,9,3,1,1,25023,Jonathan Rosser,jrosser,"Ensure there is no race between haproxy and certbot for initial cert

The certbot pre-hook is not used during initial setup of the cert,
only during renewal. This means that the same race condition exists
at initial configiuration as renewal. This patch uses the same
approach as used in the renewal pre-hook and applies it during
initialisation of certbot. This fixes race condition related failures
during initial provisioning of haproxy+letsencrypt.

Change-Id: Ica5ed5de24e3eb2fb5a743bb877d113ed0bb8a43
"
openstack%2Fopenstack-ansible-haproxy_server~stable%2Fussuri~I9f579e378effa92ce42ca6219ad7ec09e7feaecb,openstack/openstack-ansible-haproxy_server,stable/ussuri,osa/el8-stable/ussuri,I9f579e378effa92ce42ca6219ad7ec09e7feaecb,Add Centos-8 support,MERGED,2020-07-02 17:14:19.000000000,2020-07-03 17:57:40.000000000,2020-07-03 17:54:47.000000000,0,0,0,739103,8c6bff7b651c2144891d0374ec84ca4c9515fc1e,8,4,1,1,28619,Dmitriy Rabotyagov,noonedeadpunk,"Add Centos-8 support

Change-Id: I9f579e378effa92ce42ca6219ad7ec09e7feaecb
(cherry picked from commit 5b589d3dae12f8563d8d0135c10098e60bf19bce)
"
openstack%2Fansible-config_template~master~I36b13db4d0b722e7c6c7244ab142003193a56ffe,openstack/ansible-config_template,master,,I36b13db4d0b722e7c6c7244ab142003193a56ffe,Update config_template to use the builtin _get_remote_user function,MERGED,2020-06-25 16:16:51.000000000,2020-07-03 17:05:11.000000000,2020-07-03 17:03:35.000000000,11,10,10,738058,4ed672e3992f41dc4020ba68b8ea12d657a11710,36,9,5,1,7353,Kevin Carter,cloudnull,"Update config_template to use the builtin _get_remote_user function

This change will ensure the config_template module is able to pull the appropriate
remote use when creating a temp file or directory.

Related-Bug: #1884816
Change-Id: I36b13db4d0b722e7c6c7244ab142003193a56ffe
Signed-off-by: Kevin Carter <kecarter@redhat.com>
"
openstack%2Ftripleo-quickstart-extras~master~I28760c662b7aaf27582c46281855d79f874f369e,openstack/tripleo-quickstart-extras,master,move-ens-role,I28760c662b7aaf27582c46281855d79f874f369e,Move ens3 role to a baremetal-only playbook/role,MERGED,2020-07-02 14:41:29.000000000,2020-07-03 17:03:10.000000000,2020-07-03 17:03:10.000000000,32,25,0,739059,9ba91813fc8f2287995aaffd3d66e2b268aa4537,15,7,2,4,9976,Ronelle Landy,rlandy,"Move ens3 role to a baremetal-only playbook/role

Removing the ens3 network-scripts file is needed when
creating a Centos 8 VM for the undercloud in baremetal
deployments.

Change-Id: I28760c662b7aaf27582c46281855d79f874f369e
"
openstack%2Frequirements~stable%2Fstein~I0f92792f1f28861582c355808db28ec4f91df911,openstack/requirements,stable/stein,,I0f92792f1f28861582c355808db28ec4f91df911,Bump subunit to 1.4.0 in train too,MERGED,2020-07-03 12:32:22.000000000,2020-07-03 17:01:53.000000000,2020-07-03 17:01:53.000000000,1,1,0,739222,d1b88cf8fe082f68de2837389f9f1a1279586b00,11,4,1,1,17685,Elod Illes,elod.illes,"Bump subunit to 1.4.0 in train too

The recent subunit 1.4.0 release includes:
- several Python3-related fixes
- a proper handling of ""extensive logging"" from unit tests
  (see LP#1813147)
that can be useful to have.

At least one downstream consumer (Fedora and then RDO) had to carry
various patches from to make subunit 1.3 work with Python 3:

https://src.fedoraproject.org/rpms/subunit/c/91fb7acb47242d51f9a222152a0b30b8f9b4e95c?branch=master

Conflicts:
    upper-constraints.txt

Related-Bug: #1813147
Change-Id: I0f92792f1f28861582c355808db28ec4f91df911
(cherry picked from commit 9e0766c87eb4da7ff3443a5f5aa22b82bf22220d)
"
openstack%2Fpuppet-heat~master~I2bd9ce729b5e2b5ff6577951989b93390cb3a6bf,openstack/puppet-heat,master,,I2bd9ce729b5e2b5ff6577951989b93390cb3a6bf,Add a max_stacks_per_tenant parameter,MERGED,2020-07-01 15:37:29.000000000,2020-07-03 16:39:47.000000000,2020-07-03 16:37:20.000000000,18,0,0,738870,ac5eaeb6570c07972d39a8e068767234e0ff3327,13,5,2,3,6476,Thomas Goirand,thomas-goirand,"Add a max_stacks_per_tenant parameter

The default of 100 is barely useable. Let's add a new parameter
max_stacks_per_tenant to allow increasing this.

Change-Id: I2bd9ce729b5e2b5ff6577951989b93390cb3a6bf
"
openstack%2Fironic~master~I653e5da2672b14eae88c6cab923b8617432f1dc1,openstack/ironic,master,fix-uefi-ovmf,I653e5da2672b14eae88c6cab923b8617432f1dc1,Fix uefi jobs with native ubuntu ovmf package,MERGED,2020-04-02 08:17:31.000000000,2020-07-03 16:35:23.000000000,2020-07-03 16:26:38.000000000,27,39,9,716889,aac89c214961f27cbc57fcee19338ec10753c67a,172,8,49,4,23851,Riccardo Pittau,elfosardo,"Fix uefi jobs with native ubuntu ovmf package

The ovmf pacakge in bionic doesn't really work in our CI.
As a workaround we use the old package from xenial, but we can't keep
using it also in Ubuntu Focal.
This patch aims to convert the uefi jobs to use Ubuntu Focal as
base operating system and use the native ovmf package.

Story: 2007785
Task: 40025

Change-Id: I653e5da2672b14eae88c6cab923b8617432f1dc1
"
openstack%2Fdevstack~stable%2Frocky~Ieb63516b7208d63c4ae9b181aabb762387a6882a,openstack/devstack,stable/rocky,,Ieb63516b7208d63c4ae9b181aabb762387a6882a,Use uwsgi binary from path,MERGED,2020-07-02 15:28:36.000000000,2020-07-03 16:25:53.000000000,2020-07-03 16:25:53.000000000,8,8,1,739072,c431116ceb14dc3b75796309a28c33287fcf9a72,9,5,1,7,10135,Lee Yarwood,lyarwood,"Use uwsgi binary from path

All these uwsgi invocations assume that the uwsgi binary is in the
same directory as their project binaries are installed into (probably
/usr/bin).  That may not be correct -- for example if using a packaged
uwsgi on Fedora the binary will live in /usr/sbin/uwsgi (not /usr/bin
where the project files from pip are).

Switch invocations to just find it in the path.

NOTE(lyarwood): This change was unfortunatley missing from the original
backport of I82f539bfa533349293dd5a8ce309c9cc0ffb0393 so while uwsgi is
now installed from packages it wasn't actually used. This was only
noticed as g-api was being installed on subnodes in multinode jobs where
uwsgi was not being installed from pip, leading to failures when
attempting to use the project bin path.

Related-Bug: 1883468
(cherry picked from commit 2d903568ed4158aa668bbda6986307a8780c71a4)
(cherry picked from commit 84737ebd96327310ec5f8f7c312aeae12cbeb234)
(cherry picked from commit 312517d5101206b33d3c395d27ec93d385b7fd24)
(cherry picked from commit 5c07f3b1b5edc7ebc19cf265d5ada0acbfec6409)

Change-Id: Ieb63516b7208d63c4ae9b181aabb762387a6882a
"
openstack%2Fopenstack-ansible-os_heat~master~Id844f584b22e35ac154b1727a42522d73bf97670,openstack/openstack-ansible-os_heat,master,osa/el8,Id844f584b22e35ac154b1727a42522d73bf97670,Add Centos-8 support,MERGED,2020-06-19 03:03:00.000000000,2020-07-03 16:17:24.000000000,2020-07-02 21:43:52.000000000,1,1,0,736925,08d2b28bd2206d06b1607cb5be3c13fb52fca7bc,19,3,2,1,28752,Satish Patel,spatel,"Add Centos-8 support

Change-Id: Id844f584b22e35ac154b1727a42522d73bf97670
"
openstack%2Fopenstack-ansible-os_horizon~master~If0f8b4a7442d8cd904337f802758e17aa3cb8da8,openstack/openstack-ansible-os_horizon,master,osa/el8,If0f8b4a7442d8cd904337f802758e17aa3cb8da8,Add Centos-8 support,MERGED,2020-06-17 05:08:21.000000000,2020-07-03 16:17:18.000000000,2020-07-02 22:12:41.000000000,60,0,2,736095,4c2cc73d571dd86303bc16063951c13bec8af8c5,24,3,7,1,28752,Satish Patel,spatel,"Add Centos-8 support

Change-Id: If0f8b4a7442d8cd904337f802758e17aa3cb8da8
"
openstack%2Fopenstack-ansible-os_nova~master~Ibc8c9b92c8c3c705964fbc85019b357913583ca7,openstack/openstack-ansible-os_nova,master,osa/el8,Ibc8c9b92c8c3c705964fbc85019b357913583ca7,Add Centos-8 support,MERGED,2020-06-17 05:18:02.000000000,2020-07-03 16:17:09.000000000,2020-07-02 20:52:13.000000000,4,6,1,736097,842c899d8e28c4f05236a9f18acedcdba7067eec,19,4,3,2,28752,Satish Patel,spatel,"Add Centos-8 support

We shouldn't need this anymore since interpreter patch has been merged
https://review.opendev.org/#/q/topic:interpreter+(status:open+OR+status:merged)

Change-Id: Ibc8c9b92c8c3c705964fbc85019b357913583ca7
"
openstack%2Fneutron~master~I3d358c9510a9050f500464bd909471daa047a0e9,openstack/neutron,master,adopt_tripleo_change,I3d358c9510a9050f500464bd909471daa047a0e9,migration: Adopt new tripleo-ansible-inventory output,ABANDONED,2020-06-26 12:15:57.000000000,2020-07-03 16:06:00.000000000,,9,13,11,738192,38698a3297939f1940b56a81b4fa2a9cb2a4997c,17,8,2,1,8655,Jakub Libosvar,jlibosva,"migration: Adopt new tripleo-ansible-inventory output

The tripleo-ansible-inventory output has changed recently. This patch
adopts the new version and keeps backward compatibility with the old
format.

Closes-Bug: #1884764

Change-Id: I3d358c9510a9050f500464bd909471daa047a0e9
Signed-off-by: Jakub Libosvar <libosvar@redhat.com>
"
openstack%2Ftripleo-ansible~master~If1bd15276156c6386f93e3c0f2853d7043054264,openstack/tripleo-ansible,master,,If1bd15276156c6386f93e3c0f2853d7043054264,move undercloud-containers to nv,MERGED,2020-05-12 14:31:39.000000000,2020-07-03 15:29:28.000000000,2020-05-22 22:49:42.000000000,1,1,0,727207,9f176285c7d6fa7c8c214806fffc0a28c0112b96,11,3,1,1,9592,wes hayutin,weshayutin,"move undercloud-containers to nv

Partial-Bug: #1878101
Change-Id: If1bd15276156c6386f93e3c0f2853d7043054264
"
openstack%2Fmonasca-common~stable%2Fussuri~Ia16e8cbccf7b38be8909aa94e66c04b99f200b89,openstack/monasca-common,stable/ussuri,update-hacking-stable/ussuri,Ia16e8cbccf7b38be8909aa94e66c04b99f200b89,Update hacking for Python3,MERGED,2020-07-03 14:00:49.000000000,2020-07-03 15:20:00.000000000,2020-07-03 15:20:00.000000000,13,16,0,739241,6fe7f9b304c10c99133161d3c282abf58cafd1fe,6,3,1,9,16222,witek,witek,"Update hacking for Python3

The repo is Python 3 now, so update hacking to version 3.0 which
supports Python 3.

Fix problems found.

Remove hacking and friends from lower-constraints, they are not needed
for installation.

Change-Id: Ia16e8cbccf7b38be8909aa94e66c04b99f200b89
(cherry picked from commit 2ebc766534eba6163e98b94a1f114ece18739fff)
"
openstack%2Fkuryr-kubernetes~stable%2Fstein~Ie990da4e68e82d998768fa0c047cca4cccd59915,openstack/kuryr-kubernetes,stable/stein,dragonflow,Ie990da4e68e82d998768fa0c047cca4cccd59915,Remove dragonflow,MERGED,2020-06-24 13:54:55.000000000,2020-07-03 15:02:52.000000000,2020-07-03 14:57:01.000000000,0,29,0,737794,cb0ff6c7ff7a850b623c4690da56af3257a53812,18,4,1,1,11904,Sean McGinnis,SeanM,"Remove dragonflow

Dragonflow was removed from governance in 2018 and is now being retired.
This cleans up references to dragonflow jobs and configuration.

http://lists.openstack.org/pipermail/openstack-discuss/2020-June/015600.html

This backport drops sample config file and docs changes and only removes
the zuul configuration since conceivable the project could still be used
with older branches.

Change-Id: Ie990da4e68e82d998768fa0c047cca4cccd59915
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
(cherry picked from commit cded615f86bbf44597df62617a002329dfad74d3)
(cherry picked from commit 2bf9ca4599912454a86434675ee57ed522d47e60)
(cherry picked from commit 4b331132907e3b7bbc6d3ccc57d799ef0ff65101)
"
openstack%2Fkolla-ansible~stable%2Fussuri~Iabfa9afdcad505106a5580eb2d058273ee5f7c1f,openstack/kolla-ansible,stable/ussuri,bug-1886002-stable/ussuri,Iabfa9afdcad505106a5580eb2d058273ee5f7c1f,Fix Fluentd date format for MariaDB xinetd,MERGED,2020-07-02 09:30:06.000000000,2020-07-03 14:43:35.000000000,2020-07-03 14:41:21.000000000,1,1,0,738999,0ae152d1d6bdd02f15884d5bb816e3cf81c51d80,13,4,2,1,26689,Justinas Balciunas,stacklablt,"Fix Fluentd date format for MariaDB xinetd

Time format in Ruby Time.strptime is not accepting padding flags,
therefore we need to remove them for the Fluentd to be able
to parse MariaDB xinetd logs properly.

Change-Id: Iabfa9afdcad505106a5580eb2d058273ee5f7c1f
Closes-Bug: #1886002
(cherry picked from commit dda5269ce75526b90a2d8e3b7983d876d4193588)
"
openstack%2Ftripleo-quickstart-extras~master~I6c331f8b71be5636b68cee2a1a2597d20d25e903,openstack/tripleo-quickstart-extras,master,,I6c331f8b71be5636b68cee2a1a2597d20d25e903,Remove interface file only when no interface,MERGED,2020-07-02 06:26:17.000000000,2020-07-03 14:40:04.000000000,2020-07-03 14:40:04.000000000,10,2,3,738964,7f18d280c80b80b6508be83ad1ebe2ef36ae6591,25,9,4,1,10969,Shnaidman Sagi (Sergey),sergsh,"Remove interface file only when no interface

Remove ens3 network interface file only when we don't have
actual ens3 interface. Don't delete it if ens3 is one of live
interfaces on the system.

Closes-Bug: #1885701
Change-Id: I6c331f8b71be5636b68cee2a1a2597d20d25e903
"
openstack%2Foslo.messaging~stable%2Ftrain~Ic3a9e2c873619670edfbf71022d593f3cb5f70f2,openstack/oslo.messaging,stable/train,,Ic3a9e2c873619670edfbf71022d593f3cb5f70f2,Simplify tools/test-setup.sh,MERGED,2020-07-02 14:44:47.000000000,2020-07-03 14:29:36.000000000,2020-07-03 14:24:07.000000000,21,36,0,739060,88cf5aebef790ff40ab8ca7219d537ccfc54d12e,10,6,1,3,17685,Elod Illes,elod.illes,"Simplify tools/test-setup.sh

test-setup.sh is called after bindep is run in CI, and tox is not setup.

Simplify the script so that it only does what's needed - install
qdrouterd for Ubuntu from qpid/testing.

Install the other packages using bindep, add test to amqp1 profile.

Add amqp1 to bindep_profiles where needed for scenario tests, previously
test-setup.sh added it everywhere.

Conflicts:
    .zuul.yaml

NOTE(elod.illes): conflict is due to scenario rationalizing patch
I0f86416623a0b718516147f0660b4df2b74cf867 is not present in Train.

Change-Id: Ic3a9e2c873619670edfbf71022d593f3cb5f70f2
Related-Bug: #1885923
(cherry picked from commit 7e406c312a6514e7ae377edb52b9e02b5bf37a7d)
(cherry picked from commit dfcc4b0010d39d1f16be413bb1c3a4808718cd19)
"
openstack%2Fironic~master~I9d295135e6059a47cb541ae1218b11c3d56f85e1,openstack/ironic,master,ehba_support,I9d295135e6059a47cb541ae1218b11c3d56f85e1,DRAC: Fix a failure to create virtual disk,MERGED,2020-05-26 08:00:18.000000000,2020-07-03 14:19:16.000000000,2020-07-03 14:10:34.000000000,354,5,41,730725,325f28043468472c2f97f659c66817192aba39f7,55,12,6,4,29405,Rachit Kapadia,rachit7194,"DRAC: Fix a failure to create virtual disk

PERC H740P controllers supports RAID mode and Enhanced HBA mode.
When the controller is in Enhanced HBA, it creates single disk
RAID0 virtual disks of NON-RAID physical disks.
Hence the user's request for VD creation with supported RAID
fails due to no available physical disk.
This patch checks the Perc H740P controllers whether it supports
enhanced HBA mode and if controllers are found in enhanced HBA
mode it converts back to RAID mode.

Change-Id: I9d295135e6059a47cb541ae1218b11c3d56f85e1
Story: 2007711
Task: 39844
"
openstack%2Fopenstacksdk~master~I7aaaf44ab1a1d4d25225843227ef6ab6d8564063,openstack/openstacksdk,master,ignore-ipv6,I7aaaf44ab1a1d4d25225843227ef6ab6d8564063,Ignore IPv6 addresses if force_ipv4 is set,MERGED,2020-07-03 02:22:44.000000000,2020-07-03 14:08:53.000000000,2020-07-03 14:05:08.000000000,40,14,13,739159,661a0eb4b514c079f4388fc32850e05b3de045c7,16,5,2,4,7118,Ian Wienand,iwienand,"Ignore IPv6 addresses if force_ipv4 is set

Currently if a cloud config sets force_ipv4, it will still have the
public_v6 field populated if the provider API gives an IPv6 address.

I can not see why you would want this address populated if you are
telling the cloud to force IPv4.  As a concrete example;
If6e1a0402b9b7f93cc76623c01049764abc68b2a proposes in zuul-jobs adding
the IPv6 address to /etc/hosts for multinode jobs.  It does this by
walking the nodepool interface values, which on some clouds with
force_ipv4 set will have invalid/unconfigured IPv6 entries.

I've updated the documentation to expand a bit more on what situations
this flag might be useful, which AIUI is really mostly about clouds
that return you an IPv6 address in the API but don't give you a
practical way to auto-configure it.

Change-Id: I7aaaf44ab1a1d4d25225843227ef6ab6d8564063
"
openstack%2Fmonasca-common~master~Ia16e8cbccf7b38be8909aa94e66c04b99f200b89,openstack/monasca-common,master,update-hacking,Ia16e8cbccf7b38be8909aa94e66c04b99f200b89,Update hacking for Python3,MERGED,2020-04-19 19:08:44.000000000,2020-07-03 14:00:49.000000000,2020-04-24 15:19:42.000000000,13,16,0,721103,2ebc766534eba6163e98b94a1f114ece18739fff,10,8,2,9,6547,Andreas Jaeger,jaegerandi,"Update hacking for Python3

The repo is Python 3 now, so update hacking to version 3.0 which
supports Python 3.

Fix problems found.

Remove hacking and friends from lower-constraints, they are not needed
for installation.

Change-Id: Ia16e8cbccf7b38be8909aa94e66c04b99f200b89
"
openstack%2Ftripleo-ansible~master~I55f078be5fbdd762ffb63fb25ca6a192abb2e049,openstack/tripleo-ansible,master,callback-improvements,I55f078be5fbdd762ffb63fb25ca6a192abb2e049,Handle unreachable,MERGED,2020-06-11 21:43:02.000000000,2020-07-03 13:58:50.000000000,2020-06-19 19:10:13.000000000,13,0,0,735254,ffe694808e47957340b4dbc3a17581239243880a,24,7,1,1,14985,Alex Schultz,mwhahaha,"Handle unreachable

We forgot to handle unreachable errors.

fatal: [compute-1]: UNREACHABLE! => {""changed"": false, ""msg"": ""Failed to
connect to the host via ssh: ssh: connect to host 192.168.24.18 port 22:
No route to host"", ""unreachable"": true}

Change-Id: I55f078be5fbdd762ffb63fb25ca6a192abb2e049
"
openstack%2Ftripleo-ansible~master~I97a0171f9e7ba08f020ac7cf224a9ff9f6a34d01,openstack/tripleo-ansible,master,molecule/strats,I97a0171f9e7ba08f020ac7cf224a9ff9f6a34d01,Molecule testing for TripleO Strategy Plugins,MERGED,2020-05-29 21:25:36.000000000,2020-07-03 13:56:25.000000000,2020-06-08 07:20:36.000000000,211,0,0,731848,54ea54c26b777709fd636b376cce1d5078ae287c,28,5,10,8,3153,Emilien Macchi,emilienm,"Molecule testing for TripleO Strategy Plugins

For both tripleo_free and tripleo_linear, add molecule tests that will
execute a simple task (for now) and test the max_fail_percentage value
that is defined in the Ansible inventory.

We simulate a failure on one compute node, which shouldn't make the
playbook failing since we tolerate 50% of failure (we have 6 nodes and
one failure).

Change-Id: I97a0171f9e7ba08f020ac7cf224a9ff9f6a34d01
"
openstack%2Fpython-tripleoclient~master~I279e95722fe7a10148d36c99c7179c33a3a767a0,openstack/python-tripleoclient,master,images/new,I279e95722fe7a10148d36c99c7179c33a3a767a0,Add openstack tripleo container image build,MERGED,2020-04-28 20:01:26.000000000,2020-07-03 13:55:35.000000000,2020-06-05 16:54:02.000000000,775,0,54,724147,1c09e83744d5c98437db7b756c6cda52d7225d5e,189,7,69,5,3153,Emilien Macchi,emilienm,"Add openstack tripleo container image build

This change adds a v2 entry point to allow us to build images within the
native tripleoclient. Images will leverage the new
`tripleo_container_image_build` role which will produce simplified
container files and and an image structure inline with the simple
container generation spec.

Depends-On: https://review.opendev.org/722486

Change-Id: I279e95722fe7a10148d36c99c7179c33a3a767a0
Signed-off-by: Kevin Carter <kecarter@redhat.com>
"
openstack%2Fglance~master~Ia5a01089fe0eeb8fe0a1ec5a7cd0557835a46f9e,openstack/glance,master,fix-grant-mysql8,Ia5a01089fe0eeb8fe0a1ec5a7cd0557835a46f9e,Make test-setup.sh compatible with mysql8,MERGED,2020-06-30 13:16:57.000000000,2020-07-03 13:31:32.000000000,2020-07-03 13:26:09.000000000,2,2,0,738615,b220030070adbea0bd253dfa390218d30b047154,10,5,1,1,11904,Sean McGinnis,SeanM,"Make test-setup.sh compatible with mysql8

Starting from mysql version 8 it's not possible to create a user
implictly when using GRANT.

This patch makes the behavior compatible with that.

Change-Id: Ia5a01089fe0eeb8fe0a1ec5a7cd0557835a46f9e
Co-written-by: Riccardo Pittau <elfosardo@gmail.com>
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
"
openstack%2Fglance~stable%2Ftrain~I1aed6ba9054f8940d55e9fdb76bcd0615d00889c,openstack/glance,stable/train,native-zuulv3-migration),I1aed6ba9054f8940d55e9fdb76bcd0615d00889c,"zuul: switch to the ""plain"" grenade job here too",MERGED,2020-07-02 14:37:02.000000000,2020-07-03 13:31:18.000000000,2020-07-03 13:26:08.000000000,2,2,0,739056,8abe20d520b977fa16f1e60e108530b2880bad92,9,3,1,1,10459,Luigi Toscano,ltoscano,"zuul: switch to the ""plain"" grenade job here too

The native Zuulv3 grenade jobs have been recently backported
to stable/train. Use them instead of the old neutron-grenade.

Change-Id: I1aed6ba9054f8940d55e9fdb76bcd0615d00889c
"
openstack%2Fplacement~master~Ibe1a6a3281ae7ce9fc06293f94bc1fd44a3f63be,openstack/placement,master,project-ptl-and-contrib-docs,Ibe1a6a3281ae7ce9fc06293f94bc1fd44a3f63be,[Community goal] Update contributor documentation,MERGED,2020-04-17 08:05:48.000000000,2020-07-03 13:31:02.000000000,2020-07-03 13:26:06.000000000,34,20,2,720654,ae202d23099e11a6e636d750b076f20501b43acb,14,4,2,2,25625,Tetsuro Nakamura,tetsuro0907,"[Community goal] Update contributor documentation

This patch updates the contributor documentation to follow
the guidelines of the Ussuri cycle community goal[1].

[1] https://governance.openstack.org/tc/goals/selected/ussuri/project-ptl-and-contrib-docs.html

Change-Id: Ibe1a6a3281ae7ce9fc06293f94bc1fd44a3f63be
"
openstack%2Fproject-config~master~I77b91dd03a28f8960d7294c1ef086f4b46b02ccd,openstack/project-config,master,devstack-plugin-tobiko,I77b91dd03a28f8960d7294c1ef086f4b46b02ccd,"Revert ""Create a new repository for Tobiko DevStack plugin""",ABANDONED,2020-07-02 10:22:35.000000000,2020-07-03 13:30:10.000000000,,0,5,0,739006,361e40a8a5301627821108add101f69ff4564e93,10,5,3,2,27329,Federico Ressi,fressi_redhat,"Revert ""Create a new repository for Tobiko DevStack plugin""

This reverts commit c7ca7592a98b9b9e229f3e73521f5b12a4945a2e.

The project has been created with a mispelled name.

Change-Id: I77b91dd03a28f8960d7294c1ef086f4b46b02ccd
"
openstack%2Freleases~master~I0786e73160f0ecac604279c79334d4f697d0edde,openstack/releases,master,,I0786e73160f0ecac604279c79334d4f697d0edde,os-traits: release 2.4.0,MERGED,2020-07-01 17:03:55.000000000,2020-07-03 12:46:56.000000000,2020-07-03 12:46:56.000000000,4,0,0,738898,8a58647338bbb96d4d3b7c59e94c02b0f7989b44,12,6,1,1,12597,Lin Yang,lin.yang,"os-traits: release 2.4.0

Release os-traits 2.4.0 to pick up following fixes:
  - Cleanup py27 support [1]
  - CPU: add traits for new AVX512 support [2]
  - Switch to newer openstackdocstheme and reno versions [3]
  - Fix hacking min version to 3.0.1 [4]

[1] 77bf79e2aaa02afdf3f70fa98af61aac563ab3e6
[2] 066a2a972d2d5636c528630b16549e85ae0207c2
[3] e32a13f13c16e64ea15e0041a3973c2adfa84ed7
[4] 0cfd42e3a512ebcd85242cd65ba616d02fe07dae

Change-Id: I0786e73160f0ecac604279c79334d4f697d0edde
"
openstack%2Fironic-python-agent~stable%2Fussuri~I794c846fb191c15b0a30546bf64d624dfbde0fd4,openstack/ironic-python-agent,stable/ussuri,raid-size-stable/ussuri,I794c846fb191c15b0a30546bf64d624dfbde0fd4,Increase the ESP partition size to 550 MiB when using software RAID,MERGED,2020-07-03 08:57:23.000000000,2020-07-03 12:36:18.000000000,2020-07-03 12:34:44.000000000,30,16,0,739184,e69f1405515480efccb97e77c39dc4adba248b6e,8,3,1,5,10239,Dmitry Tantsur,dtantsur,"Increase the ESP partition size to 550 MiB when using software RAID

This has been a popular guidance, and diskimage-builder has recently
started following it.

Change-Id: I794c846fb191c15b0a30546bf64d624dfbde0fd4
(cherry picked from commit ba3caa6c644460a76518e6a0b1977b03516bc323)
"
openstack%2Fmagnum~stable%2Fussuri~I34be042f7e664af69fd2892b0aa6a107fe017daf,openstack/magnum,stable/ussuri,fix-gate-stable/ussuri,I34be042f7e664af69fd2892b0aa6a107fe017daf,[ci] Fix gate by installing python3-docker,MERGED,2020-07-01 08:22:41.000000000,2020-07-03 12:33:32.000000000,2020-07-03 12:31:58.000000000,3,3,0,738757,e0fecc1dd37be5fb00ef1048ecbd52671f1f62a1,8,3,1,1,28022,Bharat Kunwar,brtknr,"[ci] Fix gate by installing python3-docker

Change-Id: I34be042f7e664af69fd2892b0aa6a107fe017daf
(cherry picked from commit b3936451cd01404fd3439ec0ae819f2cbfc40b78)
"
openstack%2Fpython-magnumclient~master~Ia58a316235c96d36ee4cb8c1b012565ae2489f9c,openstack/python-magnumclient,master,print-resp-ca-rotate,Ia58a316235c96d36ee4cb8c1b012565ae2489f9c,Print response after issuing CA rotate request,MERGED,2020-06-25 02:52:25.000000000,2020-07-03 12:24:54.000000000,2020-07-03 12:22:17.000000000,2,0,0,737894,c010846179f58dab89d0eab99fc753388693aa78,8,3,1,1,6484,Feilong Wang,flwang,"Print response after issuing CA rotate request

Change-Id: Ia58a316235c96d36ee4cb8c1b012565ae2489f9c
"
openstack%2Fpython-magnumclient~master~I6c615697a732566290418ea3a3dd3263cb817fb8,openstack/python-magnumclient,master,,I6c615697a732566290418ea3a3dd3263cb817fb8,"Show cluster fixed_network, fixed_subnet, floating_ip_enabled",MERGED,2020-07-01 11:00:06.000000000,2020-07-03 12:21:37.000000000,2020-07-03 12:19:44.000000000,6,0,0,738789,7ecbab5dbf7ac04164af604b8d3745feeff1056a,8,3,1,2,28022,Bharat Kunwar,brtknr,"Show cluster fixed_network, fixed_subnet, floating_ip_enabled

Since we are able to override the values in cluster scope, we should be
able to see them too.

Story: 2006208
Task: 40254

Change-Id: I6c615697a732566290418ea3a3dd3263cb817fb8
"
openstack%2Fcinder~master~I05915f2e32b1229ad320cd1c5748de3d63183b91,openstack/cinder,master,bug/1879578,I05915f2e32b1229ad320cd1c5748de3d63183b91,Default volume_type set too early,MERGED,2020-05-22 03:44:19.000000000,2020-07-03 12:15:53.000000000,2020-07-01 06:45:13.000000000,487,130,28,730183,674c8e7286999bb6408291de1dc6395aac2b04b1,289,41,10,12,5314,Brian Rosmaita,brian-rosmaita,"Default volume_type set too early

If a volume_type is not specified in a volume-create request, change
I4da0c13b5b3f8174a30b8557f968d6b9e641b091 (introduced in Train) sets a
default volume_type in the REST API layer.  This prevents the
selection logic in cinder.volume.flows.api.create_volume.
ExtractVolumeRequestTask from being able to infer the appropriate
volume_type from the source volume, snapshot, or image metadata, and
has caused a regression where the created volume is of the default
type instead of the inferred type.

This patch removes setting the default volume_type in the REST API
and modifies the selection code in ExtractVolumeRequestTask slightly
to make sure a volume_type is always assigned in that function, and
adds and revises some tests.

Change-Id: I05915f2e32b1229ad320cd1c5748de3d63183b91
Closes-bug: #1879578
"
openstack%2Ftripleo-heat-templates~master~Ifb44c70e8becc94453b0c086858985d76b2455a6,openstack/tripleo-heat-templates,master,,Ifb44c70e8becc94453b0c086858985d76b2455a6,"Unmount Glance NFS paths in host_prep_tasks before using ""mount"" module",ABANDONED,2020-06-23 19:11:00.000000000,2020-07-03 12:14:05.000000000,,11,1,4,737607,bb63c0d9c2d4d1bd023942deb78cad047894e917,26,10,6,1,6796,Giulio Fidente,gfidente,"Unmount Glance NFS paths in host_prep_tasks before using ""mount"" module

Ansible ""mount"" module tries to refresh the mounted paths using
'-o remount' [1] which isn't sufficient to refresh the NFS mount
options.

This change forcibly unmounts the Glance NFS paths before using
the ""mount"" module to refresh the mount options and ultimately
mount again the path.

1. https://github.com/ansible/ansible/blob/stable-2.9/lib/ansible/modules/system/mount.py#L417

Closes-bug: 1884926
Change-Id: Ifb44c70e8becc94453b0c086858985d76b2455a6
"
openstack%2Fpython-tripleoclient~master~I994353a6d4aa6b72e9fecc5f61bf5314a5a94963,openstack/python-tripleoclient,master,,I994353a6d4aa6b72e9fecc5f61bf5314a5a94963,Don't use stack name in default config_download_dir,MERGED,2020-06-24 03:04:49.000000000,2020-07-03 11:49:31.000000000,2020-07-03 11:30:44.000000000,4,5,0,737671,e4d9bb17be805ae7bbb844f65c9f28d4d22b44e1,25,8,1,2,8833,Rabi Mishra,rabi,"Don't use stack name in default config_download_dir

We create a subfolder with the plan/stack name under the
config_download_dir to store the config-downloaded artifacts.
Fix 'overcloud export' as users are not expected to specify
the path with the plan/stack name.

Change-Id: I994353a6d4aa6b72e9fecc5f61bf5314a5a94963
Related-Bug: #1884246
"
openstack%2Fneutron-vpnaas~master~Ie606ceb108852ed90baa9bbb0aa609dd58933a42,openstack/neutron-vpnaas,master,ussuri_db,Ie606ceb108852ed90baa9bbb0aa609dd58933a42,Add Ussuri milestone tag for alembic migration revisions,MERGED,2020-05-12 10:48:00.000000000,2020-07-03 11:44:16.000000000,2020-07-03 11:41:42.000000000,10,2,0,727156,531e0262c330eb18a0b9f450e71c5866963e088a,14,6,1,3,12860,Dongcan Ye,yedongcan,"Add Ussuri milestone tag for alembic migration revisions

Allows neutron-db-manage to upgrade the schema to a
milestone release. We missed this for many releases.

https://docs.openstack.org/neutron/latest/contributor/alembic_migrations.html

Change-Id: Ie606ceb108852ed90baa9bbb0aa609dd58933a42
"
openstack%2Fcinder~master~I2e8af74bae63c487e786da6e99aa4827029a05a2,openstack/cinder,master,fix-ceph-cinderlib-tests,I2e8af74bae63c487e786da6e99aa4827029a05a2,Disable siblings for the cindelib functional tests,MERGED,2020-06-26 20:12:29.000000000,2020-07-03 11:21:24.000000000,2020-07-02 03:57:16.000000000,1,0,0,738273,f9019679b3d7ea252d9d6b0aeef6b69167f051af,77,29,1,1,10459,Luigi Toscano,ltoscano,"Disable siblings for the cindelib functional tests

Follow the same pattern of the other jobs which deploy devstack
but runs also functional tests (see devtack-tox-functional
and devstack-tox-functional-consumer).

Without this, the older branches where cinderlib functional tests
use Python 2 (stein, and soon train when that is branched) fails
because they try to install packages part of which are Python 3
only.

The same change was applied to the branchless jobs defined
inside cinder-tempest-plugins: https://review.opendev.org/738078/

Change-Id: I2e8af74bae63c487e786da6e99aa4827029a05a2
"
openstack%2Fcharm-glance-simplestreams-sync~master~I36e3faa4c202ded602620aa606ce6c13d9ab699a,openstack/charm-glance-simplestreams-sync,master,add-rgw-testing,I36e3faa4c202ded602620aa606ce6c13d9ab699a,Test using Ceph RADOS Gateway,MERGED,2020-06-18 14:14:33.000000000,2020-07-03 11:21:21.000000000,2020-07-03 11:21:21.000000000,363,30,0,736728,4925c3573b150e71aa22b5b31e63fb415aa025c2,43,4,6,8,935,James Page,james-page,"Test using Ceph RADOS Gateway

Using a swift endpoint to store simplestreams data is more
typical than using the webserver on the gss charm itself.

Switch all tests to use this approach and refresh all bundles
to be consistent in layout.

Change-Id: I36e3faa4c202ded602620aa606ce6c13d9ab699a
Func-Test-PR: https://github.com/openstack-charmers/zaza-openstack-tests/pull/335
"
openstack%2Fpuppet-tripleo~master~I6d6c8e52e37fb1cce4cd6cf1ac9d0b8e20151ace,openstack/puppet-tripleo,master,,I6d6c8e52e37fb1cce4cd6cf1ac9d0b8e20151ace,Include neutron::db,MERGED,2020-06-30 10:30:31.000000000,2020-07-03 11:01:57.000000000,2020-07-03 11:01:57.000000000,1,0,0,738578,be2550f662e25d744dd6a68c417540f87e945188,11,4,2,1,16137,Tobias Urdin,tobasco,"Include neutron::db

See [1] also need to move database_connection in THT [2]
to neutron::db::database_connection.

[1] https://review.opendev.org/#/c/737497/
[2] https://opendev.org/openstack/tripleo-heat-templates/src/branch/master/deployment/neutron/neutron-api-container-puppet.yaml#L263

Change-Id: I6d6c8e52e37fb1cce4cd6cf1ac9d0b8e20151ace
"
openstack%2Fopenstack-ansible~master~Ie68741eddf6fd4a277b5ead823d89aeb09e2c0ac,openstack/openstack-ansible,master,bump_osa,Ie68741eddf6fd4a277b5ead823d89aeb09e2c0ac,Bump SHAs for master,MERGED,2020-06-28 15:27:22.000000000,2020-07-03 10:56:31.000000000,2020-07-03 10:53:09.000000000,56,50,0,738358,6a31cdb5ad401cead84f022e409a463fc329fe5d,30,5,2,5,28619,Dmitriy Rabotyagov,noonedeadpunk,"Bump SHAs for master

Change-Id: Ie68741eddf6fd4a277b5ead823d89aeb09e2c0ac
"
openstack%2Fstorlets~master~Ib837a4dc71b8d758a81d453c26d251a16aa72394,openstack/storlets,master,cleanup,Ib837a4dc71b8d758a81d453c26d251a16aa72394,Small cleanups,MERGED,2020-06-09 10:02:54.000000000,2020-07-03 10:51:06.000000000,2020-07-03 10:47:59.000000000,4,25,1,734527,46a90854f64142e5497c5654941b00c93dc9a730,12,4,1,4,6547,Andreas Jaeger,jaegerandi,"Small cleanups

* Remove obsolete translation entries from setup.cfg
* Remove obsolete files babel.cfg and openstack-common.conf
* Remove install_command from tox.ini, the default is fine.
* Replace obsolete UPPER_CONSTRAINTS_FILE with current
  TOX_CONSTRAINTS_FILE.

Change-Id: Ib837a4dc71b8d758a81d453c26d251a16aa72394
"
openstack%2Fceilometer~master~I5ca35d1658c8734dd74d1c4dd16a8516f16c39b6,openstack/ceilometer,master,drop_mock,I5ca35d1658c8734dd74d1c4dd16a8516f16c39b6,Drop undefined doc config path,MERGED,2020-06-09 09:43:59.000000000,2020-07-03 10:23:47.000000000,2020-07-03 10:20:52.000000000,1,1,0,734486,9c141d7db2ee8ac5e2c9d43a71054b7f45ab972d,13,5,1,1,28522,Hervé Beraud,hberaud,"Drop undefined doc config path

html_static_path doesn't exist and the following warning is present in
logs:

```
WARNING: html_static_path entry '_static' does not exist
```

These changes drop this config.

Change-Id: I5ca35d1658c8734dd74d1c4dd16a8516f16c39b6
"
openstack%2Fcharm-neutron-gateway~master~I10c4cc2983245efb5bef3d7cbc8e3b6963448a7d,openstack/charm-neutron-gateway,master,bug/1825906,I10c4cc2983245efb5bef3d7cbc8e3b6963448a7d,Add disable-neutron-lbaas option,MERGED,2020-06-29 16:43:03.000000000,2020-07-03 10:21:08.000000000,2020-07-03 10:21:08.000000000,143,8,2,738477,86eb58317fc1d28dccc76e201ddff2c9f5fd1235,21,4,4,5,28510,Pedro Guimarães,pguimaraes,"Add disable-neutron-lbaas option

Since Rocky, Octavia is a valid alternative as LBaaS.
If enabled, we should not configure Neutron LBaaS(v2)
agent at the same time.

The fact that we configure both means neutron-lbaas-agent
will generate messages on rabbitmq which never gets consumed
and creating alarms on NRPE without any actual issues.

This change introduces an option to disable neutron LBaaS
solution. Once activated, it masks lbaas agent service.

Change-Id: I10c4cc2983245efb5bef3d7cbc8e3b6963448a7d
Closes-Bug: #1825906
"
openstack%2Ftripleo-heat-templates~stable%2Fussuri~Id6f612a91255b3158be821c363ca852c6b5d7496,openstack/tripleo-heat-templates,stable/ussuri,,Id6f612a91255b3158be821c363ca852c6b5d7496,Add new parameter PublicTLSCACert,MERGED,2020-06-29 20:43:42.000000000,2020-07-03 09:53:03.000000000,2020-07-03 09:50:42.000000000,15,16,0,738506,48940849b438dc33ac7f0b945a7989e6a04455a5,11,7,1,6,11589,Harry Rybacki,hrybacki,"Add new parameter PublicTLSCACert

We've been using InternalTLSCAFile parameter when enabling
public TLS for undercloud and is quite confusing. We recently
changed to use it in clouds.yaml and it would break when
both public and internal TLS are enabled for overcloud and both
use different CA certs. This adds a new parameter which we
will use in clouds.yaml, that would default to empty string
assuming that the certificates are trusted.

Closes-Bug: #1883818
Change-Id: Id6f612a91255b3158be821c363ca852c6b5d7496
Depends-On: https://review.opendev.org/737998
(cherry picked from commit 2acb0d376b66375ba000369b24fc3354365b2601)
"
openstack%2Fkolla-ansible~master~Ib7716e2015796168fde130542aed7574bb01349b,openstack/kolla-ansible,master,test-haproxy,Ib7716e2015796168fde130542aed7574bb01349b,Test HAproxy in multinode,ABANDONED,2018-12-13 19:11:01.000000000,2020-07-03 09:42:50.000000000,,60,34,4,625088,ceaedfffa083528867ee54bbb5135463d3ddaf85,22,4,4,4,19316,Eduardo Gonzalez,egonzalez90,"Test HAproxy in multinode

Change-Id: Ib7716e2015796168fde130542aed7574bb01349b
"
openstack%2Fneutron-vpnaas~master~I9f0c7ed7cf8baaa20e382e11e2276498d1c572fe,openstack/neutron-vpnaas,master,fix_func_gate_error,I9f0c7ed7cf8baaa20e382e11e2276498d1c572fe,Fix functional gate failure,MERGED,2020-06-29 13:47:40.000000000,2020-07-03 09:41:48.000000000,2020-07-03 09:40:02.000000000,1,1,0,738449,d4ef9c04ff03840665f5a47a421ae842db551264,9,5,1,1,12860,Dongcan Ye,yedongcan,"Fix functional gate failure

Using command pip3 for python3-pip package.

Change-Id: I9f0c7ed7cf8baaa20e382e11e2276498d1c572fe
"
openstack%2Fpython-magnumclient~master~I59ad158753f25a56219ecaa5a55dd3f0ae67965a,openstack/python-magnumclient,master,story/2007634-40263,I59ad158753f25a56219ecaa5a55dd3f0ae67965a,Support master_lb_enabled when creating cluster,MERGED,2020-07-02 02:22:57.000000000,2020-07-03 09:36:08.000000000,2020-07-03 09:34:09.000000000,16,2,3,738950,c6b795298280e1ee8f0dd358bb895d16aa2fa8d4,13,3,3,3,6484,Feilong Wang,flwang,"Support master_lb_enabled when creating cluster

Task: 40263
Story: 2007634

Change-Id: I59ad158753f25a56219ecaa5a55dd3f0ae67965a
"
openstack%2Fstorlets~master~I56057f2120dafa31e24688f66cc8016f1a19681e,openstack/storlets,master,fix-tox,I56057f2120dafa31e24688f66cc8016f1a19681e,Fix functional job: Install tox,MERGED,2020-07-03 06:52:28.000000000,2020-07-03 09:35:39.000000000,2020-07-03 09:33:59.000000000,6,0,0,739168,a3ec6967fce3fed80eeaba035ddda9773a4ae3a6,10,9,2,2,6547,Andreas Jaeger,jaegerandi,"Fix functional job: Install tox

Recently, the OpenDev images did not install tox anymore, add
ensure-tox role to functional job pre-run playbook so that tox is
installed.

Change-Id: I56057f2120dafa31e24688f66cc8016f1a19681e
"
openstack%2Fkolla~master~Ie613bf768cc31ad1956b8f5fa0f3cdc05046f1e4,openstack/kolla,master,,Ie613bf768cc31ad1956b8f5fa0f3cdc05046f1e4,Change clustercheck url to GitHub,ABANDONED,2020-06-19 16:40:07.000000000,2020-07-03 09:29:40.000000000,,1,1,0,737046,bf4bc2f278f4131b83e765aa95f6d1f7126fddb0,9,4,2,1,22629,Michal Nasiadka,mnasiadka,"Change clustercheck url to GitHub

Fedora Project is down (DC move) - so let's use GitHub for now.

Change-Id: Ie613bf768cc31ad1956b8f5fa0f3cdc05046f1e4
"
openstack%2Fceilometer~stable%2Ftrain~Idaf811f71bab0b49de5b68a6a69a7872cb481ffb,openstack/ceilometer,stable/train,fix-pdf-stable/ussuri-stable/train,Idaf811f71bab0b49de5b68a6a69a7872cb481ffb,Fix PDF build,MERGED,2020-07-02 06:46:33.000000000,2020-07-03 09:26:13.000000000,2020-07-03 09:23:17.000000000,6,4,0,738970,ac9013a343a1d534365ddcf88c5a104f0b5161f0,7,3,1,1,4264,Matthias Runge,mrunge,"Fix PDF build

Do not include ceilometer.conf.sample since PDF building fails with the
large file. This fix PDF building of openstack-tox-docs job.

Change-Id: Idaf811f71bab0b49de5b68a6a69a7872cb481ffb
(cherry picked from commit 89969ec0a919a3a5ea9f4cee7e9b128c5fe0804d)
(cherry picked from commit 96dcc2cbc22ec9efa98eb75771ba3154bc881bba)
"
openstack%2Fkuryr-kubernetes~master~I28e7d10ba4311455bc0c7fcaf28edcb30068a1e5,openstack/kuryr-kubernetes,master,autodetect-nested-iface,I28e7d10ba4311455bc0c7fcaf28edcb30068a1e5,Attempt to autodetect interface in nested setups,MERGED,2020-07-01 15:06:11.000000000,2020-07-03 09:23:49.000000000,2020-07-03 09:21:29.000000000,104,1,6,738863,3d630e2df0599b7c8beed602996bd6c507457739,22,7,5,2,11600,Michał Dulko,dulek,"Attempt to autodetect interface in nested setups

The VLAN and macvlan nested drivers are using [binding]link_iface option
to get the port they should bind the subport to. This isn't ideal as
there's a single config for all kuryr-cni containers in the cluster, so
it's impossible to provide multiple interface names when e.g. different
VM images are used to run workers in the cluster.

In order to make behavior smarter this patch makes sure that when
aforementioned option is not set, kuryr-daemon will attempt to
autodetect the interface it should bind the subport to by trying to find
which iterface kubelet is bound to. This should work fine with OpenShift
setups. If such interface is not found, kuryr-daemon will choose first
non-loopback interface.

Implements: blueprint autodetect-nested-iface
Change-Id: I28e7d10ba4311455bc0c7fcaf28edcb30068a1e5
"
openstack%2Fironic-python-agent-builder~master~I767f6fc4e4177af5f7f93a0d4d3f8dcc578da2c4,openstack/ironic-python-agent-builder,master,no-epel,I767f6fc4e4177af5f7f93a0d4d3f8dcc578da2c4,Disable EPEL on CentOS 8 by default,MERGED,2020-06-29 12:58:15.000000000,2020-07-03 09:22:55.000000000,2020-07-03 09:20:57.000000000,4,0,0,738438,2a19fa368cb31d9b574a6d46ed85167027bba3a9,15,6,2,1,10239,Dmitry Tantsur,dtantsur,"Disable EPEL on CentOS 8 by default

It's currently broken and not really needed anyway.

Depends-On: https://review.opendev.org/#/c/738435/
Change-Id: I767f6fc4e4177af5f7f93a0d4d3f8dcc578da2c4
"
openstack%2Fkeystoneauth~master~Ic0ea848adce276a64a30ac9fb6d31432a9645ae8,openstack/keystoneauth,master,drop_mock,Ic0ea848adce276a64a30ac9fb6d31432a9645ae8,fix reno lower-constraints for py35,ABANDONED,2020-06-10 11:24:57.000000000,2020-07-03 09:15:52.000000000,,2,1,0,734799,f81f62cf693dcdbcd31e105109f8ba8281362e5c,4,2,1,1,28522,Hervé Beraud,hberaud,"fix reno lower-constraints for py35

requirements-check fail with reno and py35 these changes fix that.

Change-Id: Ic0ea848adce276a64a30ac9fb6d31432a9645ae8
"
openstack%2Fcinder~master~Icb621ff5966133f59d9d43ca2dd9f8e1919b1149,openstack/cinder,master,bug/1869746,Icb621ff5966133f59d9d43ca2dd9f8e1919b1149,Fix cross-project incremental backups,MERGED,2020-04-17 20:55:22.000000000,2020-07-03 09:15:07.000000000,2020-07-01 19:05:29.000000000,43,26,4,720833,8ebeafcbbafb700052f3abfc1f7ba004269a92e8,186,40,3,8,14567,Rodrigo Barbieri,ganso,"Fix cross-project incremental backups

This patch addresses the scenario where an
incremental backup can be created having a
parent backup that was taken in a different
project. This scenario ultimately leads to
a silent error when creating/deleting the
incremental backup and quotas going out of
sync.

The proposed fix is to narrow the backup search
down to the same project. To achieve this, a
method's signature had to be updated to achieve
the desired optimized behavior of passing the
volume's project_id parameter.

Closes-bug: #1869746
Closes-bug: #1873518

Change-Id: Icb621ff5966133f59d9d43ca2dd9f8e1919b1149
"
openstack%2Ftripleo-quickstart~master~I4fb610b82dcc61936522cef29e1b6c3e22711fe8,openstack/tripleo-quickstart,master,bug/1738406,I4fb610b82dcc61936522cef29e1b6c3e22711fe8,Stop caching undercloud_ip,ABANDONED,2019-09-04 20:38:37.000000000,2020-07-03 09:04:01.000000000,,1,1,2,680177,75ed9a740c20f8f54e949fb9c670582587ad98ef,7,7,1,1,23811,Oliver Walsh,owalsh,"Stop caching undercloud_ip

A number of the inventory tasks use the existance of this in their when clause.
If it is cached then the wrong tasks are run e.g when tearing down and
redeploying.

Change-Id: I4fb610b82dcc61936522cef29e1b6c3e22711fe8
Closes-bug: 1738406
"
openstack%2Fironic-python-agent~master~I794c846fb191c15b0a30546bf64d624dfbde0fd4,openstack/ironic-python-agent,master,raid-size,I794c846fb191c15b0a30546bf64d624dfbde0fd4,Increase the ESP partition size to 550 MiB when using software RAID,MERGED,2020-07-02 15:30:55.000000000,2020-07-03 08:57:23.000000000,2020-07-02 19:12:30.000000000,30,16,0,739075,ba3caa6c644460a76518e6a0b1977b03516bc323,10,4,1,5,10239,Dmitry Tantsur,dtantsur,"Increase the ESP partition size to 550 MiB when using software RAID

This has been a popular guidance, and diskimage-builder has recently
started following it.

Change-Id: I794c846fb191c15b0a30546bf64d624dfbde0fd4
"
openstack%2Fkolla~master~Ia2306507d6ef97f01ff520dc4222bc48c1eb9843,openstack/kolla,master,openstack_exporter_bump,Ia2306507d6ef97f01ff520dc4222bc48c1eb9843,Bump prometheus-openstack-exporter version to 1.1.0,MERGED,2020-07-02 16:35:35.000000000,2020-07-03 08:56:33.000000000,2020-07-02 20:22:40.000000000,1,1,0,739097,2841004652d74f27f270b4fba5a68e6c845e173c,12,5,1,1,2276,Jorge Niedbalski,niedbalski,"Bump prometheus-openstack-exporter version to 1.1.0

Change-Id: Ia2306507d6ef97f01ff520dc4222bc48c1eb9843
Signed-off-by: Jorge Niedbalski <jnr@metaklass.org>
"
openstack%2Fpuppet-tripleo~master~I3bf244a70538209773804eb85fae6be035c587f4,openstack/puppet-tripleo,master,fix-override,I3bf244a70538209773804eb85fae6be035c587f4,Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism,MERGED,2020-06-24 10:02:05.000000000,2020-07-03 08:51:29.000000000,2020-06-26 21:20:15.000000000,21,2,0,737733,4d3864249dc27e033499b8a0855ce095be848a44,28,7,2,1,20172,Michele Baldessari,michele,"Fix RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS usage with a proper override mechanism

In THT we allow RabbitAdditionalErlArgs to set some additional
parameters which should be passed to RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS
when starting rabbit. The problem is that when we use internal tls
that parameter gets ignored and so we lose our default '+sbwt none'.

Let's do this via a proper parameter while also considering the fact
that historically the default value of RabbitAdditionalErlArgs had
apices around it.

Change-Id: I3bf244a70538209773804eb85fae6be035c587f4
Related-Bug: #1884922
"
